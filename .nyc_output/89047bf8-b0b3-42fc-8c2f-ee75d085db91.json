{"/Users/grg/programmation/git/abe/abe-v5/src/cli/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/index.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":29},"end":{"line":5,"column":84}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":3}},"3":{"start":{"line":10,"column":0},"end":{"line":15,"column":3}},"4":{"start":{"line":13,"column":4},"end":{"line":13,"column":34}},"5":{"start":{"line":16,"column":0},"end":{"line":21,"column":3}},"6":{"start":{"line":19,"column":4},"end":{"line":19,"column":30}},"7":{"start":{"line":22,"column":0},"end":{"line":27,"column":3}},"8":{"start":{"line":25,"column":4},"end":{"line":25,"column":31}},"9":{"start":{"line":28,"column":0},"end":{"line":33,"column":3}},"10":{"start":{"line":31,"column":4},"end":{"line":31,"column":30}},"11":{"start":{"line":34,"column":0},"end":{"line":39,"column":3}},"12":{"start":{"line":37,"column":4},"end":{"line":37,"column":32}},"13":{"start":{"line":40,"column":0},"end":{"line":45,"column":3}},"14":{"start":{"line":43,"column":4},"end":{"line":43,"column":28}},"15":{"start":{"line":46,"column":0},"end":{"line":51,"column":3}},"16":{"start":{"line":49,"column":4},"end":{"line":49,"column":27}},"17":{"start":{"line":52,"column":0},"end":{"line":57,"column":3}},"18":{"start":{"line":55,"column":4},"end":{"line":55,"column":23}},"19":{"start":{"line":58,"column":0},"end":{"line":63,"column":3}},"20":{"start":{"line":61,"column":4},"end":{"line":61,"column":27}},"21":{"start":{"line":64,"column":0},"end":{"line":69,"column":3}},"22":{"start":{"line":67,"column":4},"end":{"line":67,"column":28}},"23":{"start":{"line":70,"column":0},"end":{"line":75,"column":3}},"24":{"start":{"line":73,"column":4},"end":{"line":73,"column":28}},"25":{"start":{"line":76,"column":0},"end":{"line":81,"column":3}},"26":{"start":{"line":79,"column":4},"end":{"line":79,"column":27}},"27":{"start":{"line":82,"column":0},"end":{"line":87,"column":3}},"28":{"start":{"line":85,"column":4},"end":{"line":85,"column":26}},"29":{"start":{"line":88,"column":0},"end":{"line":93,"column":3}},"30":{"start":{"line":91,"column":4},"end":{"line":91,"column":23}},"31":{"start":{"line":94,"column":0},"end":{"line":99,"column":3}},"32":{"start":{"line":97,"column":4},"end":{"line":97,"column":25}},"33":{"start":{"line":100,"column":0},"end":{"line":105,"column":3}},"34":{"start":{"line":103,"column":4},"end":{"line":103,"column":31}},"35":{"start":{"line":106,"column":0},"end":{"line":111,"column":3}},"36":{"start":{"line":109,"column":4},"end":{"line":109,"column":29}},"37":{"start":{"line":112,"column":0},"end":{"line":117,"column":3}},"38":{"start":{"line":115,"column":4},"end":{"line":115,"column":30}},"39":{"start":{"line":118,"column":0},"end":{"line":123,"column":3}},"40":{"start":{"line":121,"column":4},"end":{"line":121,"column":30}},"41":{"start":{"line":124,"column":0},"end":{"line":129,"column":3}},"42":{"start":{"line":127,"column":4},"end":{"line":127,"column":28}},"43":{"start":{"line":130,"column":0},"end":{"line":135,"column":3}},"44":{"start":{"line":133,"column":4},"end":{"line":133,"column":29}},"45":{"start":{"line":136,"column":0},"end":{"line":141,"column":3}},"46":{"start":{"line":139,"column":4},"end":{"line":139,"column":30}},"47":{"start":{"line":142,"column":0},"end":{"line":147,"column":3}},"48":{"start":{"line":145,"column":4},"end":{"line":145,"column":27}},"49":{"start":{"line":148,"column":0},"end":{"line":153,"column":3}},"50":{"start":{"line":151,"column":4},"end":{"line":151,"column":31}},"51":{"start":{"line":154,"column":0},"end":{"line":159,"column":3}},"52":{"start":{"line":157,"column":4},"end":{"line":157,"column":31}},"53":{"start":{"line":160,"column":0},"end":{"line":165,"column":3}},"54":{"start":{"line":163,"column":4},"end":{"line":163,"column":28}},"55":{"start":{"line":166,"column":0},"end":{"line":171,"column":3}},"56":{"start":{"line":169,"column":4},"end":{"line":169,"column":30}},"57":{"start":{"line":172,"column":0},"end":{"line":172,"column":248}},"58":{"start":{"line":174,"column":18},"end":{"line":174,"column":63}},"59":{"start":{"line":176,"column":14},"end":{"line":176,"column":55}},"60":{"start":{"line":178,"column":15},"end":{"line":178,"column":58}},"61":{"start":{"line":180,"column":14},"end":{"line":180,"column":55}},"62":{"start":{"line":182,"column":16},"end":{"line":182,"column":60}},"63":{"start":{"line":184,"column":13},"end":{"line":184,"column":45}},"64":{"start":{"line":186,"column":14},"end":{"line":186,"column":43}},"65":{"start":{"line":188,"column":15},"end":{"line":188,"column":72}},"66":{"start":{"line":190,"column":12},"end":{"line":190,"column":57}},"67":{"start":{"line":192,"column":14},"end":{"line":192,"column":69}},"68":{"start":{"line":194,"column":12},"end":{"line":194,"column":69}},"69":{"start":{"line":196,"column":0},"end":{"line":196,"column":22}},"70":{"start":{"line":198,"column":14},"end":{"line":198,"column":60}},"71":{"start":{"line":200,"column":0},"end":{"line":200,"column":26}},"72":{"start":{"line":202,"column":16},"end":{"line":202,"column":64}},"73":{"start":{"line":204,"column":0},"end":{"line":204,"column":30}},"74":{"start":{"line":206,"column":20},"end":{"line":206,"column":72}},"75":{"start":{"line":208,"column":0},"end":{"line":208,"column":38}},"76":{"start":{"line":210,"column":19},"end":{"line":210,"column":70}},"77":{"start":{"line":212,"column":0},"end":{"line":212,"column":36}},"78":{"start":{"line":214,"column":19},"end":{"line":214,"column":70}},"79":{"start":{"line":216,"column":0},"end":{"line":216,"column":36}},"80":{"start":{"line":218,"column":19},"end":{"line":218,"column":70}},"81":{"start":{"line":220,"column":0},"end":{"line":220,"column":36}},"82":{"start":{"line":222,"column":16},"end":{"line":222,"column":64}},"83":{"start":{"line":224,"column":0},"end":{"line":224,"column":30}},"84":{"start":{"line":226,"column":15},"end":{"line":226,"column":62}},"85":{"start":{"line":228,"column":0},"end":{"line":228,"column":28}},"86":{"start":{"line":230,"column":16},"end":{"line":230,"column":64}},"87":{"start":{"line":232,"column":0},"end":{"line":232,"column":30}},"88":{"start":{"line":234,"column":16},"end":{"line":234,"column":60}},"89":{"start":{"line":236,"column":0},"end":{"line":236,"column":30}},"90":{"start":{"line":238,"column":11},"end":{"line":238,"column":54}},"91":{"start":{"line":240,"column":0},"end":{"line":240,"column":20}}},"fnMap":{"0":{"name":"get","decl":{"start":{"line":12,"column":16},"end":{"line":12,"column":19}},"loc":{"start":{"line":12,"column":22},"end":{"line":14,"column":3}},"line":12},"1":{"name":"get","decl":{"start":{"line":18,"column":16},"end":{"line":18,"column":19}},"loc":{"start":{"line":18,"column":22},"end":{"line":20,"column":3}},"line":18},"2":{"name":"get","decl":{"start":{"line":24,"column":16},"end":{"line":24,"column":19}},"loc":{"start":{"line":24,"column":22},"end":{"line":26,"column":3}},"line":24},"3":{"name":"get","decl":{"start":{"line":30,"column":16},"end":{"line":30,"column":19}},"loc":{"start":{"line":30,"column":22},"end":{"line":32,"column":3}},"line":30},"4":{"name":"get","decl":{"start":{"line":36,"column":16},"end":{"line":36,"column":19}},"loc":{"start":{"line":36,"column":22},"end":{"line":38,"column":3}},"line":36},"5":{"name":"get","decl":{"start":{"line":42,"column":16},"end":{"line":42,"column":19}},"loc":{"start":{"line":42,"column":22},"end":{"line":44,"column":3}},"line":42},"6":{"name":"get","decl":{"start":{"line":48,"column":16},"end":{"line":48,"column":19}},"loc":{"start":{"line":48,"column":22},"end":{"line":50,"column":3}},"line":48},"7":{"name":"get","decl":{"start":{"line":54,"column":16},"end":{"line":54,"column":19}},"loc":{"start":{"line":54,"column":22},"end":{"line":56,"column":3}},"line":54},"8":{"name":"get","decl":{"start":{"line":60,"column":16},"end":{"line":60,"column":19}},"loc":{"start":{"line":60,"column":22},"end":{"line":62,"column":3}},"line":60},"9":{"name":"get","decl":{"start":{"line":66,"column":16},"end":{"line":66,"column":19}},"loc":{"start":{"line":66,"column":22},"end":{"line":68,"column":3}},"line":66},"10":{"name":"get","decl":{"start":{"line":72,"column":16},"end":{"line":72,"column":19}},"loc":{"start":{"line":72,"column":22},"end":{"line":74,"column":3}},"line":72},"11":{"name":"get","decl":{"start":{"line":78,"column":16},"end":{"line":78,"column":19}},"loc":{"start":{"line":78,"column":22},"end":{"line":80,"column":3}},"line":78},"12":{"name":"get","decl":{"start":{"line":84,"column":16},"end":{"line":84,"column":19}},"loc":{"start":{"line":84,"column":22},"end":{"line":86,"column":3}},"line":84},"13":{"name":"get","decl":{"start":{"line":90,"column":16},"end":{"line":90,"column":19}},"loc":{"start":{"line":90,"column":22},"end":{"line":92,"column":3}},"line":90},"14":{"name":"get","decl":{"start":{"line":96,"column":16},"end":{"line":96,"column":19}},"loc":{"start":{"line":96,"column":22},"end":{"line":98,"column":3}},"line":96},"15":{"name":"get","decl":{"start":{"line":102,"column":16},"end":{"line":102,"column":19}},"loc":{"start":{"line":102,"column":22},"end":{"line":104,"column":3}},"line":102},"16":{"name":"get","decl":{"start":{"line":108,"column":16},"end":{"line":108,"column":19}},"loc":{"start":{"line":108,"column":22},"end":{"line":110,"column":3}},"line":108},"17":{"name":"get","decl":{"start":{"line":114,"column":16},"end":{"line":114,"column":19}},"loc":{"start":{"line":114,"column":22},"end":{"line":116,"column":3}},"line":114},"18":{"name":"get","decl":{"start":{"line":120,"column":16},"end":{"line":120,"column":19}},"loc":{"start":{"line":120,"column":22},"end":{"line":122,"column":3}},"line":120},"19":{"name":"get","decl":{"start":{"line":126,"column":16},"end":{"line":126,"column":19}},"loc":{"start":{"line":126,"column":22},"end":{"line":128,"column":3}},"line":126},"20":{"name":"get","decl":{"start":{"line":132,"column":16},"end":{"line":132,"column":19}},"loc":{"start":{"line":132,"column":22},"end":{"line":134,"column":3}},"line":132},"21":{"name":"get","decl":{"start":{"line":138,"column":16},"end":{"line":138,"column":19}},"loc":{"start":{"line":138,"column":22},"end":{"line":140,"column":3}},"line":138},"22":{"name":"get","decl":{"start":{"line":144,"column":16},"end":{"line":144,"column":19}},"loc":{"start":{"line":144,"column":22},"end":{"line":146,"column":3}},"line":144},"23":{"name":"get","decl":{"start":{"line":150,"column":16},"end":{"line":150,"column":19}},"loc":{"start":{"line":150,"column":22},"end":{"line":152,"column":3}},"line":150},"24":{"name":"get","decl":{"start":{"line":156,"column":16},"end":{"line":156,"column":19}},"loc":{"start":{"line":156,"column":22},"end":{"line":158,"column":3}},"line":156},"25":{"name":"get","decl":{"start":{"line":162,"column":16},"end":{"line":162,"column":19}},"loc":{"start":{"line":162,"column":22},"end":{"line":164,"column":3}},"line":162},"26":{"name":"get","decl":{"start":{"line":168,"column":16},"end":{"line":168,"column":19}},"loc":{"start":{"line":168,"column":22},"end":{"line":170,"column":3}},"line":168}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":24,"5":1,"6":0,"7":1,"8":0,"9":1,"10":0,"11":1,"12":0,"13":1,"14":0,"15":1,"16":0,"17":1,"18":1,"19":1,"20":0,"21":1,"22":0,"23":1,"24":0,"25":1,"26":0,"27":1,"28":0,"29":1,"30":0,"31":1,"32":0,"33":1,"34":0,"35":1,"36":0,"37":1,"38":0,"39":1,"40":0,"41":1,"42":0,"43":1,"44":2,"45":1,"46":0,"47":1,"48":0,"49":1,"50":0,"51":1,"52":2422,"53":1,"54":8,"55":1,"56":1754,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1},"f":{"0":24,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":2,"21":0,"22":0,"23":0,"24":2422,"25":8,"26":1754},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AAcA;;AAWA;;AACA;;AAEA;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/","sourcesContent":["import Handlebars from 'handlebars'\nimport moment from 'moment'\nimport fse from 'fs-extra'\nimport mkdirp from 'mkdirp'\nimport clc from 'cli-color'\n\nimport {\n  translate,\n  cleanTab,\n  math,\n  notEmpty,\n  printJson,\n  className,\n  moduloIf,\n  attrAbe,\n  ifIn,\n  ifCond,\n  isAuthorized\n} from './cms/templates/index'\n\nimport {\n  abeImport,\n  printBlock,\n  printInput,\n  listPage,\n  abeEngine,\n  compileAbe,\n  folders,\n  printConfig\n} from './cms/editor/index'\n\nimport Manager from './core/manager/Manager'\nimport Page from './cms/Page'\n\nimport config from './core/config/config'\nimport * as mongo from './core/database/mongo'\n\nimport * as cmsData from './cms/data'\nimport * as cmsEditor from './cms/editor'\nimport * as cmsOperations from './cms/operations'\nimport * as cmsTemplates from './cms/templates'\nimport * as cmsReference from './cms/reference'\nimport * as cmsStructure from './cms/structure'\nimport * as cmsThemes from './cms/themes'\nimport * as cmsMedia from './cms/media'\nimport * as coreUtils from './core/utils'\nimport * as abeExtend from './extend'\nimport * as User from './users'\n\nexport {\n  cmsData,\n  cmsOperations,\n  cmsTemplates,\n  cmsReference,\n  cmsStructure,\n  cmsThemes,\n  cmsMedia,\n  coreUtils,\n  cmsEditor,\n  abeExtend,\n  mkdirp,\n  moment,\n  fse,\n  Handlebars,\n  clc,\n  printInput,\n  isAuthorized,\n  abeImport,\n  math,\n  translate,\n  printBlock,\n  notEmpty,\n  printJson,\n  className,\n  moduloIf,\n  listPage,\n  abeEngine,\n  attrAbe,\n  folders,\n  cleanTab,\n  printConfig,\n  ifIn,\n  ifCond,\n  config,\n  mongo,\n  Manager,\n  Page,\n  User\n}\n\nexport {compileAbe}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4e8f4709bbdf02e1e6065d01e4810a75ff21cfa7","contentHash":"0a02376a33894d011a500b4e0f2070290c6391d787f8a95a0b20519164048e7c"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/index.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":29},"end":{"line":5,"column":84}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":3}},"3":{"start":{"line":10,"column":0},"end":{"line":15,"column":3}},"4":{"start":{"line":13,"column":4},"end":{"line":13,"column":34}},"5":{"start":{"line":16,"column":0},"end":{"line":21,"column":3}},"6":{"start":{"line":19,"column":4},"end":{"line":19,"column":31}},"7":{"start":{"line":22,"column":0},"end":{"line":27,"column":3}},"8":{"start":{"line":25,"column":4},"end":{"line":25,"column":33}},"9":{"start":{"line":28,"column":0},"end":{"line":33,"column":3}},"10":{"start":{"line":31,"column":4},"end":{"line":31,"column":32}},"11":{"start":{"line":34,"column":0},"end":{"line":39,"column":3}},"12":{"start":{"line":37,"column":4},"end":{"line":37,"column":30}},"13":{"start":{"line":40,"column":0},"end":{"line":45,"column":3}},"14":{"start":{"line":43,"column":4},"end":{"line":43,"column":28}},"15":{"start":{"line":46,"column":0},"end":{"line":51,"column":3}},"16":{"start":{"line":49,"column":4},"end":{"line":49,"column":30}},"17":{"start":{"line":52,"column":0},"end":{"line":57,"column":3}},"18":{"start":{"line":55,"column":4},"end":{"line":55,"column":33}},"19":{"start":{"line":58,"column":0},"end":{"line":63,"column":3}},"20":{"start":{"line":61,"column":4},"end":{"line":61,"column":28}},"21":{"start":{"line":64,"column":0},"end":{"line":69,"column":3}},"22":{"start":{"line":67,"column":4},"end":{"line":67,"column":32}},"23":{"start":{"line":70,"column":0},"end":{"line":75,"column":3}},"24":{"start":{"line":73,"column":4},"end":{"line":73,"column":32}},"25":{"start":{"line":76,"column":0},"end":{"line":81,"column":3}},"26":{"start":{"line":79,"column":4},"end":{"line":79,"column":33}},"27":{"start":{"line":82,"column":0},"end":{"line":87,"column":3}},"28":{"start":{"line":85,"column":4},"end":{"line":85,"column":33}},"29":{"start":{"line":88,"column":0},"end":{"line":93,"column":3}},"30":{"start":{"line":91,"column":4},"end":{"line":91,"column":29}},"31":{"start":{"line":94,"column":0},"end":{"line":99,"column":3}},"32":{"start":{"line":97,"column":4},"end":{"line":97,"column":33}},"33":{"start":{"line":100,"column":0},"end":{"line":105,"column":3}},"34":{"start":{"line":103,"column":4},"end":{"line":103,"column":33}},"35":{"start":{"line":106,"column":0},"end":{"line":111,"column":3}},"36":{"start":{"line":109,"column":4},"end":{"line":109,"column":35}},"37":{"start":{"line":112,"column":0},"end":{"line":117,"column":3}},"38":{"start":{"line":115,"column":4},"end":{"line":115,"column":36}},"39":{"start":{"line":118,"column":0},"end":{"line":123,"column":3}},"40":{"start":{"line":121,"column":4},"end":{"line":121,"column":30}},"41":{"start":{"line":124,"column":0},"end":{"line":129,"column":3}},"42":{"start":{"line":127,"column":4},"end":{"line":127,"column":42}},"43":{"start":{"line":130,"column":0},"end":{"line":135,"column":3}},"44":{"start":{"line":133,"column":4},"end":{"line":133,"column":45}},"45":{"start":{"line":136,"column":0},"end":{"line":141,"column":3}},"46":{"start":{"line":139,"column":4},"end":{"line":139,"column":48}},"47":{"start":{"line":142,"column":0},"end":{"line":142,"column":61}},"48":{"start":{"line":144,"column":18},"end":{"line":144,"column":63}},"49":{"start":{"line":146,"column":22},"end":{"line":146,"column":72}},"50":{"start":{"line":148,"column":31},"end":{"line":148,"column":91}},"51":{"start":{"line":150,"column":22},"end":{"line":150,"column":72}},"52":{"start":{"line":152,"column":15},"end":{"line":152,"column":70}},"53":{"start":{"line":154,"column":17},"end":{"line":154,"column":74}},"54":{"start":{"line":156,"column":16},"end":{"line":156,"column":72}},"55":{"start":{"line":158,"column":14},"end":{"line":158,"column":68}},"56":{"start":{"line":160,"column":12},"end":{"line":160,"column":64}},"57":{"start":{"line":162,"column":14},"end":{"line":162,"column":68}},"58":{"start":{"line":164,"column":17},"end":{"line":164,"column":74}},"59":{"start":{"line":166,"column":12},"end":{"line":166,"column":64}},"60":{"start":{"line":168,"column":16},"end":{"line":168,"column":72}},"61":{"start":{"line":170,"column":16},"end":{"line":170,"column":72}},"62":{"start":{"line":172,"column":17},"end":{"line":172,"column":74}},"63":{"start":{"line":174,"column":17},"end":{"line":174,"column":74}},"64":{"start":{"line":176,"column":13},"end":{"line":176,"column":66}},"65":{"start":{"line":178,"column":17},"end":{"line":178,"column":74}},"66":{"start":{"line":180,"column":17},"end":{"line":180,"column":74}},"67":{"start":{"line":182,"column":19},"end":{"line":182,"column":78}},"68":{"start":{"line":184,"column":20},"end":{"line":184,"column":80}},"69":{"start":{"line":186,"column":14},"end":{"line":186,"column":68}},"70":{"start":{"line":188,"column":26},"end":{"line":188,"column":92}},"71":{"start":{"line":190,"column":15},"end":{"line":190,"column":61}},"72":{"start":{"line":192,"column":0},"end":{"line":192,"column":28}},"73":{"start":{"line":194,"column":14},"end":{"line":194,"column":59}},"74":{"start":{"line":196,"column":0},"end":{"line":196,"column":26}},"75":{"start":{"line":198,"column":13},"end":{"line":198,"column":57}},"76":{"start":{"line":200,"column":0},"end":{"line":200,"column":24}},"77":{"start":{"line":202,"column":29},"end":{"line":202,"column":87}},"78":{"start":{"line":204,"column":32},"end":{"line":204,"column":93}},"79":{"start":{"line":209,"column":0},"end":{"line":211,"column":3}},"80":{"start":{"line":213,"column":0},"end":{"line":213,"column":85}},"81":{"start":{"line":215,"column":0},"end":{"line":215,"column":70}},"82":{"start":{"line":217,"column":0},"end":{"line":217,"column":74}},"83":{"start":{"line":219,"column":0},"end":{"line":219,"column":72}},"84":{"start":{"line":221,"column":0},"end":{"line":223,"column":12}},"85":{"start":{"line":225,"column":0},"end":{"line":225,"column":68}},"86":{"start":{"line":227,"column":0},"end":{"line":227,"column":64}},"87":{"start":{"line":229,"column":0},"end":{"line":229,"column":68}},"88":{"start":{"line":231,"column":0},"end":{"line":231,"column":74}},"89":{"start":{"line":233,"column":0},"end":{"line":233,"column":64}},"90":{"start":{"line":235,"column":0},"end":{"line":235,"column":72}},"91":{"start":{"line":237,"column":0},"end":{"line":237,"column":72}},"92":{"start":{"line":239,"column":0},"end":{"line":239,"column":74}},"93":{"start":{"line":241,"column":0},"end":{"line":241,"column":72}},"94":{"start":{"line":243,"column":0},"end":{"line":243,"column":66}},"95":{"start":{"line":245,"column":0},"end":{"line":245,"column":74}},"96":{"start":{"line":247,"column":0},"end":{"line":247,"column":74}},"97":{"start":{"line":249,"column":0},"end":{"line":249,"column":78}},"98":{"start":{"line":251,"column":0},"end":{"line":251,"column":80}},"99":{"start":{"line":253,"column":0},"end":{"line":253,"column":68}},"100":{"start":{"line":255,"column":0},"end":{"line":255,"column":92}},"101":{"start":{"line":257,"column":0},"end":{"line":257,"column":64}}},"fnMap":{"0":{"name":"get","decl":{"start":{"line":12,"column":16},"end":{"line":12,"column":19}},"loc":{"start":{"line":12,"column":22},"end":{"line":14,"column":3}},"line":12},"1":{"name":"get","decl":{"start":{"line":18,"column":16},"end":{"line":18,"column":19}},"loc":{"start":{"line":18,"column":22},"end":{"line":20,"column":3}},"line":18},"2":{"name":"get","decl":{"start":{"line":24,"column":16},"end":{"line":24,"column":19}},"loc":{"start":{"line":24,"column":22},"end":{"line":26,"column":3}},"line":24},"3":{"name":"get","decl":{"start":{"line":30,"column":16},"end":{"line":30,"column":19}},"loc":{"start":{"line":30,"column":22},"end":{"line":32,"column":3}},"line":30},"4":{"name":"get","decl":{"start":{"line":36,"column":16},"end":{"line":36,"column":19}},"loc":{"start":{"line":36,"column":22},"end":{"line":38,"column":3}},"line":36},"5":{"name":"get","decl":{"start":{"line":42,"column":16},"end":{"line":42,"column":19}},"loc":{"start":{"line":42,"column":22},"end":{"line":44,"column":3}},"line":42},"6":{"name":"get","decl":{"start":{"line":48,"column":16},"end":{"line":48,"column":19}},"loc":{"start":{"line":48,"column":22},"end":{"line":50,"column":3}},"line":48},"7":{"name":"get","decl":{"start":{"line":54,"column":16},"end":{"line":54,"column":19}},"loc":{"start":{"line":54,"column":22},"end":{"line":56,"column":3}},"line":54},"8":{"name":"get","decl":{"start":{"line":60,"column":16},"end":{"line":60,"column":19}},"loc":{"start":{"line":60,"column":22},"end":{"line":62,"column":3}},"line":60},"9":{"name":"get","decl":{"start":{"line":66,"column":16},"end":{"line":66,"column":19}},"loc":{"start":{"line":66,"column":22},"end":{"line":68,"column":3}},"line":66},"10":{"name":"get","decl":{"start":{"line":72,"column":16},"end":{"line":72,"column":19}},"loc":{"start":{"line":72,"column":22},"end":{"line":74,"column":3}},"line":72},"11":{"name":"get","decl":{"start":{"line":78,"column":16},"end":{"line":78,"column":19}},"loc":{"start":{"line":78,"column":22},"end":{"line":80,"column":3}},"line":78},"12":{"name":"get","decl":{"start":{"line":84,"column":16},"end":{"line":84,"column":19}},"loc":{"start":{"line":84,"column":22},"end":{"line":86,"column":3}},"line":84},"13":{"name":"get","decl":{"start":{"line":90,"column":16},"end":{"line":90,"column":19}},"loc":{"start":{"line":90,"column":22},"end":{"line":92,"column":3}},"line":90},"14":{"name":"get","decl":{"start":{"line":96,"column":16},"end":{"line":96,"column":19}},"loc":{"start":{"line":96,"column":22},"end":{"line":98,"column":3}},"line":96},"15":{"name":"get","decl":{"start":{"line":102,"column":16},"end":{"line":102,"column":19}},"loc":{"start":{"line":102,"column":22},"end":{"line":104,"column":3}},"line":102},"16":{"name":"get","decl":{"start":{"line":108,"column":16},"end":{"line":108,"column":19}},"loc":{"start":{"line":108,"column":22},"end":{"line":110,"column":3}},"line":108},"17":{"name":"get","decl":{"start":{"line":114,"column":16},"end":{"line":114,"column":19}},"loc":{"start":{"line":114,"column":22},"end":{"line":116,"column":3}},"line":114},"18":{"name":"get","decl":{"start":{"line":120,"column":16},"end":{"line":120,"column":19}},"loc":{"start":{"line":120,"column":22},"end":{"line":122,"column":3}},"line":120},"19":{"name":"get","decl":{"start":{"line":126,"column":16},"end":{"line":126,"column":19}},"loc":{"start":{"line":126,"column":22},"end":{"line":128,"column":3}},"line":126},"20":{"name":"get","decl":{"start":{"line":132,"column":16},"end":{"line":132,"column":19}},"loc":{"start":{"line":132,"column":22},"end":{"line":134,"column":3}},"line":132},"21":{"name":"get","decl":{"start":{"line":138,"column":16},"end":{"line":138,"column":19}},"loc":{"start":{"line":138,"column":22},"end":{"line":140,"column":3}},"line":138}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":1,"6":0,"7":1,"8":0,"9":1,"10":0,"11":1,"12":0,"13":1,"14":0,"15":1,"16":0,"17":1,"18":0,"19":1,"20":1,"21":1,"22":0,"23":1,"24":0,"25":1,"26":0,"27":1,"28":0,"29":1,"30":0,"31":1,"32":0,"33":1,"34":0,"35":1,"36":0,"37":1,"38":0,"39":1,"40":0,"41":1,"42":0,"43":1,"44":10,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":10,"21":3},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["require","handlebars","Handlebars","registerHelper","attrAbe","className","cleanTab","slugify","ifCond","ifIn","isTrue","eachGroup","math","moduloIf","notEmpty","printJson","translate","times","lowercase","uppercase","setVariable","isAuthorized","concat","getCurrentuserRole","HandlebarsIntl","registerWith"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AAzBA;;AA2BA;AACAA,OAAO,CAAC,oBAAD,CAAP,CAA8B;AAC5BC,EAAAA,UAAU,EAAEC;AADgB,CAA9B;;AAGAA,uBAAWC,cAAX,CAA0B,UAA1B,EAAsC,iCAAtC;;AACAD,uBAAWC,cAAX,CAA0B,SAA1B,EAAqCC,mBAArC;;AACAF,uBAAWC,cAAX,CAA0B,WAA1B,EAAuCE,qBAAvC;;AACAH,uBAAWC,cAAX,CAA0B,UAA1B,EAAsCG,oBAAtC;;AACAJ,uBAAWC,cAAX,CACE,SADF,EAEE,yCAAwB;AAACD,EAAAA,UAAU,EAAEA;AAAb,CAAxB,EAAkDK,OAFpD;;AAIAL,uBAAWC,cAAX,CAA0B,QAA1B,EAAoCK,kBAApC;;AACAN,uBAAWC,cAAX,CAA0B,MAA1B,EAAkCM,gBAAlC;;AACAP,uBAAWC,cAAX,CAA0B,QAA1B,EAAoCO,kBAApC;;AACAR,uBAAWC,cAAX,CAA0B,WAA1B,EAAuCQ,qBAAvC;;AACAT,uBAAWC,cAAX,CAA0B,MAA1B,EAAkCS,gBAAlC;;AACAV,uBAAWC,cAAX,CAA0B,UAA1B,EAAsCU,oBAAtC;;AACAX,uBAAWC,cAAX,CAA0B,UAA1B,EAAsCW,oBAAtC;;AACAZ,uBAAWC,cAAX,CAA0B,WAA1B,EAAuCY,qBAAvC;;AACAb,uBAAWC,cAAX,CAA0B,SAA1B,EAAqCa,qBAArC;;AACAd,uBAAWC,cAAX,CAA0B,OAA1B,EAAmCc,iBAAnC;;AACAf,uBAAWC,cAAX,CAA0B,WAA1B,EAAuCe,qBAAvC;;AACAhB,uBAAWC,cAAX,CAA0B,WAA1B,EAAuCgB,qBAAvC;;AACAjB,uBAAWC,cAAX,CAA0B,aAA1B,EAAyCiB,uBAAzC;;AACAlB,uBAAWC,cAAX,CAA0B,cAA1B,EAA0CkB,wBAA1C;;AACAnB,uBAAWC,cAAX,CAA0B,QAA1B,EAAoCmB,kBAApC;;AACApB,uBAAWC,cAAX,CAA0B,oBAA1B,EAAgDoB,8BAAhD;;AAEAC,2BAAeC,YAAf,CAA4BvB,sBAA5B","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/","sourcesContent":["import Handlebars from 'handlebars'\nimport HandlebarsIntl from 'handlebars-intl'\nimport handlebarsHelperSlugify from 'handlebars-helper-slugify'\nimport markdown from 'helper-markdown'\n\n/* Handlebar utilities */\nimport attrAbe from './handlebars/attrAbe'\nimport className from './handlebars/className'\nimport cleanTab from './handlebars/cleanTab'\nimport ifCond from './handlebars/ifCond'\nimport ifIn from './handlebars/ifIn'\nimport isTrue from './handlebars/isTrue'\nimport eachGroup from './handlebars/eachGroup'\nimport math from './handlebars/math'\nimport moduloIf from './handlebars/moduloIf'\nimport notEmpty from './handlebars/notEmpty'\nimport printJson from './handlebars/printJson'\nimport translate from './handlebars/translate'\nimport times from './handlebars/times'\nimport lowercase from './handlebars/lowercase'\nimport uppercase from './handlebars/uppercase'\nimport setVariable from './handlebars/setVariable'\nimport isAuthorized from './handlebars/isAuthorized'\nimport concat from './handlebars/concat'\nimport getCurrentuserRole from './handlebars/getCurrentuserRole'\n\nimport * as template from './template'\nimport * as prepare from './prepare'\nimport * as assets from './assets'\nimport encodeAbeTagAsComment from './encodeAbeTagAsComment'\nimport insertDebugtoolUtilities from './insertDebugtoolUtilities'\n\n/* Register utilities */\nrequire('handlebars-helpers')({\n  handlebars: Handlebars\n});\nHandlebars.registerHelper('markdown', markdown())\nHandlebars.registerHelper('attrAbe', attrAbe)\nHandlebars.registerHelper('className', className)\nHandlebars.registerHelper('cleanTab', cleanTab)\nHandlebars.registerHelper(\n  'slugify',\n  handlebarsHelperSlugify({Handlebars: Handlebars}).slugify\n)\nHandlebars.registerHelper('ifCond', ifCond)\nHandlebars.registerHelper('ifIn', ifIn)\nHandlebars.registerHelper('isTrue', isTrue)\nHandlebars.registerHelper('eachGroup', eachGroup)\nHandlebars.registerHelper('math', math)\nHandlebars.registerHelper('moduloIf', moduloIf)\nHandlebars.registerHelper('notEmpty', notEmpty)\nHandlebars.registerHelper('printJson', printJson)\nHandlebars.registerHelper('i18nAbe', translate)\nHandlebars.registerHelper('times', times)\nHandlebars.registerHelper('lowercase', lowercase)\nHandlebars.registerHelper('uppercase', uppercase)\nHandlebars.registerHelper('setVariable', setVariable)\nHandlebars.registerHelper('isAuthorized', isAuthorized)\nHandlebars.registerHelper('concat', concat)\nHandlebars.registerHelper('getCurrentuserRole', getCurrentuserRole)\n\nHandlebarsIntl.registerWith(Handlebars)\n\nexport {\n  Handlebars,\n  template,\n  prepare,\n  assets,\n  encodeAbeTagAsComment,\n  insertDebugtoolUtilities,\n  attrAbe,\n  className,\n  cleanTab,\n  ifCond,\n  ifIn,\n  isTrue,\n  eachGroup,\n  lowercase,\n  uppercase,\n  setVariable,\n  isAuthorized,\n  concat,\n  getCurrentuserRole,\n  math,\n  moduloIf,\n  notEmpty,\n  printJson,\n  translate,\n  times\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2ca22f2ace7d5d3222b0fe2e32cfa3bd406fe471","contentHash":"d09640c69b9a933a3dc7c85f102c789597a1db45f60f4ac98a9002c5e7ef6110"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/attrAbe.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/attrAbe.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":29}},"3":{"start":{"line":10,"column":18},"end":{"line":10,"column":63}},"4":{"start":{"line":19,"column":2},"end":{"line":19,"column":54}}},"fnMap":{"0":{"name":"attrAbe","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":16}},"loc":{"start":{"line":18,"column":30},"end":{"line":20,"column":1}},"line":18}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"sources":["attrAbe.js"],"names":["attrAbe","attr","value","Handlebars","SafeString"],"mappings":";;;;;;;;;AAAA;;AAEA;;;;;;AAMe,SAASA,OAAT,CAAiBC,IAAjB,EAAuBC,KAAvB,EAA8B;AAC3C,SAAO,IAAIC,uBAAWC,UAAf,CAA0BF,KAA1B,CAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["import Handlebars from 'handlebars'\n\n/**\n * Print properties inside html tag\n * @param  {String} attr exemple: atl, title, ...\n * @param  {[type]} value value of the property\n * @return {String} the value to print inside the attribut\n */\nexport default function attrAbe(attr, value) {\n  return new Handlebars.SafeString(value)\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ffaa2e8c68bcacf40c50be9329b2b2d7c9e3e18d","contentHash":"6736259687096333717fabfb2e73039184852074e3a5f91233c4021f538b51f1"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/className.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/className.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"2":{"start":{"line":12,"column":2},"end":{"line":12,"column":38}}},"fnMap":{"0":{"name":"className","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":18}},"loc":{"start":{"line":11,"column":24},"end":{"line":13,"column":1}},"line":11}},"branchMap":{},"s":{"0":1,"1":1,"2":2},"f":{"0":2},"b":{},"inputSourceMap":{"version":3,"sources":["className.js"],"names":["className","str","replace"],"mappings":";;;;;;;AAAA;;;AAGe,SAASA,SAAT,CAAmBC,GAAnB,EAAwB;AACrC,SAAOA,GAAG,CAACC,OAAJ,CAAY,UAAZ,EAAwB,GAAxB,CAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["/**\n * Handlebars helper, to print className and escape it string\n */\nexport default function className(str) {\n  return str.replace(/\\.| |\\#/g, '_')\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cea5311673e2021ccc3fc90da412b76f434e93b2","contentHash":"eae4345f332baf293fe7b38715b220075d30e4985bee468cd59114015c3d3fbf"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/cleanTab.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/cleanTab.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"2":{"start":{"line":8,"column":8},"end":{"line":8,"column":28}},"3":{"start":{"line":11,"column":2},"end":{"line":16,"column":5}},"4":{"start":{"line":17,"column":2},"end":{"line":17,"column":13}}},"fnMap":{"0":{"name":"cleanTab","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":17}},"loc":{"start":{"line":10,"column":23},"end":{"line":18,"column":1}},"line":10}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"sources":["cleanTab.js"],"names":["cleanTab","obj","coreUtils","text","replaceUnwantedChar","replace"],"mappings":";;;;;;;AAAA;;AAEe,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;AACpCA,EAAAA,GAAG,GAAGC,YAAUC,IAAV,CAAeC,mBAAf,CAAmCH,GAAG,CAACI,OAAJ,CAAY,MAAZ,EAAoB,GAApB,CAAnC,EAA6D;AACjE,WAAO,EAD0D;AAEjE,WAAO,EAF0D;AAGjE,WAAO,EAH0D;AAIjE,WAAO;AAJ0D,GAA7D,CAAN;AAOA,SAAOJ,GAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["import {coreUtils} from '../../../'\n\nexport default function cleanTab(obj) {\n  obj = coreUtils.text.replaceUnwantedChar(obj.replace(/ |&/g, '_'), {\n    '\\\\(': '',\n    '\\\\)': '',\n    '\\\\[': '',\n    '\\\\]': ''\n  })\n\n  return obj\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"671210e934237d8fe8df36aaa9a585808f14a55b","contentHash":"5e3e9089dce57f0783b8ee1f85e7c3f93b57b7ee5b96134a680f9bd4c034de57"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/ifCond.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/ifCond.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":9,"column":2},"end":{"line":9,"column":33}},"3":{"start":{"line":10,"column":2},"end":{"line":10,"column":33}},"4":{"start":{"line":11,"column":2},"end":{"line":11,"column":40}},"5":{"start":{"line":11,"column":16},"end":{"line":11,"column":40}},"6":{"start":{"line":12,"column":2},"end":{"line":12,"column":31}}},"fnMap":{"0":{"name":"ifCond","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":15}},"loc":{"start":{"line":8,"column":33},"end":{"line":13,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":7},"end":{"line":9,"column":32}},"type":"cond-expr","locations":[{"start":{"line":9,"column":23},"end":{"line":9,"column":27}},{"start":{"line":9,"column":30},"end":{"line":9,"column":32}}],"line":9},"1":{"loc":{"start":{"line":10,"column":7},"end":{"line":10,"column":32}},"type":"cond-expr","locations":[{"start":{"line":10,"column":23},"end":{"line":10,"column":27}},{"start":{"line":10,"column":30},"end":{"line":10,"column":32}}],"line":10},"2":{"loc":{"start":{"line":11,"column":2},"end":{"line":11,"column":40}},"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":11,"column":40}},{"start":{"line":11,"column":2},"end":{"line":11,"column":40}}],"line":11}},"s":{"0":1,"1":1,"2":3,"3":3,"4":3,"5":2,"6":1},"f":{"0":3},"b":{"0":[0,3],"1":[0,3],"2":[2,1]},"inputSourceMap":{"version":3,"sources":["ifCond.js"],"names":["ifCond","v1","v2","options","fn","inverse"],"mappings":";;;;;;;AAAe,SAASA,MAAT,CAAgBC,EAAhB,EAAoBC,EAApB,EAAwBC,OAAxB,EAAiC;AAC9CF,EAAAA,EAAE,GAAGA,EAAE,KAAK,MAAP,GAAgB,IAAhB,GAAuBA,EAA5B;AACAC,EAAAA,EAAE,GAAGA,EAAE,KAAK,MAAP,GAAgB,IAAhB,GAAuBA,EAA5B;AACA,MAAID,EAAE,IAAIC,EAAV,EAAc,OAAOC,OAAO,CAACC,EAAR,CAAW,IAAX,CAAP;AACd,SAAOD,OAAO,CAACE,OAAR,CAAgB,IAAhB,CAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["export default function ifCond(v1, v2, options) {\n  v1 = v1 === 'null' ? null : v1\n  v2 = v2 === 'null' ? null : v2\n  if (v1 == v2) return options.fn(this)\n  return options.inverse(this)\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f216b117aac70888318e87344678baae5c1ce744","contentHash":"48f703fa670dd55c790726b3b175c0789e2da8a2e93dcc3d7a6d8c632b05df74"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/ifIn.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/ifIn.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"2":{"start":{"line":9,"column":2},"end":{"line":11,"column":3}},"3":{"start":{"line":10,"column":4},"end":{"line":10,"column":51}},"4":{"start":{"line":10,"column":27},"end":{"line":10,"column":51}},"5":{"start":{"line":13,"column":2},"end":{"line":13,"column":31}}},"fnMap":{"0":{"name":"ifIn","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":13}},"loc":{"start":{"line":8,"column":40},"end":{"line":14,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":51}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":51}},{"start":{"line":10,"column":4},"end":{"line":10,"column":51}}],"line":10}},"s":{"0":1,"1":1,"2":2,"3":6,"4":1,"5":1},"f":{"0":2},"b":{"0":[1,5]},"inputSourceMap":{"version":3,"sources":["ifIn.js"],"names":["ifIn","arValues","value","options","arValue","fn","inverse"],"mappings":";;;;;;;AAAe,SAASA,IAAT,CAAcC,QAAd,EAAwBC,KAAxB,EAA+BC,OAA/B,EAAwC;AACrD,OAAK,IAAIC,OAAT,IAAoBH,QAApB,EAA8B;AAC5B,QAAIG,OAAO,KAAKF,KAAhB,EAAuB,OAAOC,OAAO,CAACE,EAAR,CAAW,IAAX,CAAP;AACxB;;AACD,SAAOF,OAAO,CAACG,OAAR,CAAgB,IAAhB,CAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["export default function ifIn(arValues, value, options) {\n  for (var arValue in arValues) {\n    if (arValue === value) return options.fn(this)\n  }\n  return options.inverse(this)\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"de0128f6355e79f7fa71dcb1423a4a3427faa1e1","contentHash":"8b580dab028f513d0a23699cd2c97c18325a58f58949ee8663041fb8ccc3ca7e"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/isTrue.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/isTrue.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":12,"column":2},"end":{"line":53,"column":3}},"3":{"start":{"line":14,"column":6},"end":{"line":14,"column":22}},"4":{"start":{"line":17,"column":6},"end":{"line":17,"column":23}},"5":{"start":{"line":20,"column":6},"end":{"line":20,"column":22}},"6":{"start":{"line":23,"column":6},"end":{"line":23,"column":23}},"7":{"start":{"line":26,"column":6},"end":{"line":26,"column":21}},"8":{"start":{"line":29,"column":6},"end":{"line":29,"column":22}},"9":{"start":{"line":32,"column":6},"end":{"line":32,"column":21}},"10":{"start":{"line":35,"column":6},"end":{"line":35,"column":22}},"11":{"start":{"line":38,"column":6},"end":{"line":38,"column":20}},"12":{"start":{"line":39,"column":6},"end":{"line":39,"column":20}},"13":{"start":{"line":40,"column":6},"end":{"line":40,"column":98}},"14":{"start":{"line":40,"column":85},"end":{"line":40,"column":98}},"15":{"start":{"line":41,"column":6},"end":{"line":41,"column":98}},"16":{"start":{"line":41,"column":85},"end":{"line":41,"column":98}},"17":{"start":{"line":42,"column":6},"end":{"line":42,"column":28}},"18":{"start":{"line":45,"column":6},"end":{"line":45,"column":20}},"19":{"start":{"line":46,"column":6},"end":{"line":46,"column":20}},"20":{"start":{"line":47,"column":6},"end":{"line":47,"column":98}},"21":{"start":{"line":47,"column":85},"end":{"line":47,"column":98}},"22":{"start":{"line":48,"column":6},"end":{"line":48,"column":98}},"23":{"start":{"line":48,"column":85},"end":{"line":48,"column":98}},"24":{"start":{"line":49,"column":6},"end":{"line":49,"column":28}},"25":{"start":{"line":52,"column":6},"end":{"line":52,"column":19}}},"fnMap":{"0":{"name":"isTrue","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":15}},"loc":{"start":{"line":8,"column":34},"end":{"line":54,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":2},"end":{"line":53,"column":3}},"type":"switch","locations":[{"start":{"line":13,"column":4},"end":{"line":14,"column":22}},{"start":{"line":16,"column":4},"end":{"line":17,"column":23}},{"start":{"line":19,"column":4},"end":{"line":20,"column":22}},{"start":{"line":22,"column":4},"end":{"line":23,"column":23}},{"start":{"line":25,"column":4},"end":{"line":26,"column":21}},{"start":{"line":28,"column":4},"end":{"line":29,"column":22}},{"start":{"line":31,"column":4},"end":{"line":32,"column":21}},{"start":{"line":34,"column":4},"end":{"line":35,"column":22}},{"start":{"line":37,"column":4},"end":{"line":42,"column":28}},{"start":{"line":44,"column":4},"end":{"line":49,"column":28}},{"start":{"line":51,"column":4},"end":{"line":52,"column":19}}],"line":12},"1":{"loc":{"start":{"line":40,"column":6},"end":{"line":40,"column":98}},"type":"if","locations":[{"start":{"line":40,"column":6},"end":{"line":40,"column":98}},{"start":{"line":40,"column":6},"end":{"line":40,"column":98}}],"line":40},"2":{"loc":{"start":{"line":40,"column":10},"end":{"line":40,"column":83}},"type":"binary-expr","locations":[{"start":{"line":40,"column":10},"end":{"line":40,"column":23}},{"start":{"line":40,"column":27},"end":{"line":40,"column":45}},{"start":{"line":40,"column":49},"end":{"line":40,"column":66}},{"start":{"line":40,"column":70},"end":{"line":40,"column":83}}],"line":40},"3":{"loc":{"start":{"line":41,"column":6},"end":{"line":41,"column":98}},"type":"if","locations":[{"start":{"line":41,"column":6},"end":{"line":41,"column":98}},{"start":{"line":41,"column":6},"end":{"line":41,"column":98}}],"line":41},"4":{"loc":{"start":{"line":41,"column":10},"end":{"line":41,"column":83}},"type":"binary-expr","locations":[{"start":{"line":41,"column":10},"end":{"line":41,"column":23}},{"start":{"line":41,"column":27},"end":{"line":41,"column":45}},{"start":{"line":41,"column":49},"end":{"line":41,"column":66}},{"start":{"line":41,"column":70},"end":{"line":41,"column":83}}],"line":41},"5":{"loc":{"start":{"line":42,"column":13},"end":{"line":42,"column":27}},"type":"binary-expr","locations":[{"start":{"line":42,"column":13},"end":{"line":42,"column":18}},{"start":{"line":42,"column":22},"end":{"line":42,"column":27}}],"line":42},"6":{"loc":{"start":{"line":47,"column":6},"end":{"line":47,"column":98}},"type":"if","locations":[{"start":{"line":47,"column":6},"end":{"line":47,"column":98}},{"start":{"line":47,"column":6},"end":{"line":47,"column":98}}],"line":47},"7":{"loc":{"start":{"line":47,"column":10},"end":{"line":47,"column":83}},"type":"binary-expr","locations":[{"start":{"line":47,"column":10},"end":{"line":47,"column":23}},{"start":{"line":47,"column":27},"end":{"line":47,"column":45}},{"start":{"line":47,"column":49},"end":{"line":47,"column":66}},{"start":{"line":47,"column":70},"end":{"line":47,"column":83}}],"line":47},"8":{"loc":{"start":{"line":48,"column":6},"end":{"line":48,"column":98}},"type":"if","locations":[{"start":{"line":48,"column":6},"end":{"line":48,"column":98}},{"start":{"line":48,"column":6},"end":{"line":48,"column":98}}],"line":48},"9":{"loc":{"start":{"line":48,"column":10},"end":{"line":48,"column":83}},"type":"binary-expr","locations":[{"start":{"line":48,"column":10},"end":{"line":48,"column":23}},{"start":{"line":48,"column":27},"end":{"line":48,"column":45}},{"start":{"line":48,"column":49},"end":{"line":48,"column":66}},{"start":{"line":48,"column":70},"end":{"line":48,"column":83}}],"line":48},"10":{"loc":{"start":{"line":49,"column":13},"end":{"line":49,"column":27}},"type":"binary-expr","locations":[{"start":{"line":49,"column":13},"end":{"line":49,"column":18}},{"start":{"line":49,"column":22},"end":{"line":49,"column":27}}],"line":49}},"s":{"0":1,"1":1,"2":31,"3":2,"4":2,"5":4,"6":3,"7":3,"8":3,"9":2,"10":2,"11":5,"12":5,"13":5,"14":3,"15":5,"16":4,"17":5,"18":5,"19":5,"20":5,"21":1,"22":5,"23":2,"24":5,"25":0},"f":{"0":31},"b":{"0":[2,2,4,3,3,3,2,2,5,5,0],"1":[3,2],"2":[5,4,2,1],"3":[4,1],"4":[5,4,1,0],"5":[5,3],"6":[1,4],"7":[5,2,4,1],"8":[2,3],"9":[5,2,3,0],"10":[5,4]},"inputSourceMap":{"version":3,"sources":["isTrue.js"],"names":["isTrue","v1","operator","v2","eval1","eval2","Array","isArray","length"],"mappings":";;;;;;;AAAe,SAASA,MAAT,CAAgBC,EAAhB,EAAoBC,QAApB,EAA8BC,EAA9B,EAAkC;AAC/C,MAAIC,KAAJ;AACA,MAAIC,KAAJ;;AACA,UAAQH,QAAR;AACE,SAAK,IAAL;AACE,aAAOD,EAAE,IAAIE,EAAb;;AACF,SAAK,KAAL;AACE,aAAOF,EAAE,KAAKE,EAAd;;AACF,SAAK,IAAL;AACE,aAAOF,EAAE,IAAIE,EAAb;;AACF,SAAK,KAAL;AACE,aAAOF,EAAE,KAAKE,EAAd;;AACF,SAAK,GAAL;AACE,aAAOF,EAAE,GAAGE,EAAZ;;AACF,SAAK,IAAL;AACE,aAAOF,EAAE,IAAIE,EAAb;;AACF,SAAK,GAAL;AACE,aAAOF,EAAE,GAAGE,EAAZ;;AACF,SAAK,IAAL;AACE,aAAOF,EAAE,IAAIE,EAAb;;AACF,SAAK,IAAL;AACEC,MAAAA,KAAK,GAAG,KAAR;AACAC,MAAAA,KAAK,GAAG,KAAR;AACA,UACG,CAAC,CAACJ,EAAF,KAAS,IAAT,IAAiB,CAACK,KAAK,CAACC,OAAN,CAAcN,EAAd,CAAnB,IACCK,KAAK,CAACC,OAAN,CAAcN,EAAd,KAAqBA,EAAE,CAACO,MAAH,GAAY,CAFpC,EAIEJ,KAAK,GAAG,IAAR;AACF,UACG,CAAC,CAACD,EAAF,KAAS,IAAT,IAAiB,CAACG,KAAK,CAACC,OAAN,CAAcJ,EAAd,CAAnB,IACCG,KAAK,CAACC,OAAN,CAAcJ,EAAd,KAAqBA,EAAE,CAACK,MAAH,GAAY,CAFpC,EAIEH,KAAK,GAAG,IAAR;AAEF,aAAOD,KAAK,IAAIC,KAAhB;;AACF,SAAK,IAAL;AACED,MAAAA,KAAK,GAAG,KAAR;AACAC,MAAAA,KAAK,GAAG,KAAR;AACA,UACG,CAAC,CAACJ,EAAF,KAAS,IAAT,IAAiB,CAACK,KAAK,CAACC,OAAN,CAAcN,EAAd,CAAnB,IACCK,KAAK,CAACC,OAAN,CAAcN,EAAd,KAAqBA,EAAE,CAACO,MAAH,GAAY,CAFpC,EAIEJ,KAAK,GAAG,IAAR;AACF,UACG,CAAC,CAACD,EAAF,KAAS,IAAT,IAAiB,CAACG,KAAK,CAACC,OAAN,CAAcJ,EAAd,CAAnB,IACCG,KAAK,CAACC,OAAN,CAAcJ,EAAd,KAAqBA,EAAE,CAACK,MAAH,GAAY,CAFpC,EAIEH,KAAK,GAAG,IAAR;AAEF,aAAOD,KAAK,IAAIC,KAAhB;;AACF;AACE,aAAO,KAAP;AAhDJ;AAkDD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["export default function isTrue(v1, operator, v2) {\n  var eval1\n  var eval2\n  switch (operator) {\n    case '!=':\n      return v1 != v2\n    case '!==':\n      return v1 !== v2\n    case '==':\n      return v1 == v2\n    case '===':\n      return v1 === v2\n    case '<':\n      return v1 < v2\n    case '<=':\n      return v1 <= v2\n    case '>':\n      return v1 > v2\n    case '>=':\n      return v1 >= v2\n    case '&&':\n      eval1 = false\n      eval2 = false\n      if (\n        (!!v1 === true && !Array.isArray(v1)) ||\n        (Array.isArray(v1) && v1.length > 0)\n      )\n        eval1 = true\n      if (\n        (!!v2 === true && !Array.isArray(v2)) ||\n        (Array.isArray(v2) && v2.length > 0)\n      )\n        eval2 = true\n\n      return eval1 && eval2\n    case '||':\n      eval1 = false\n      eval2 = false\n      if (\n        (!!v1 === true && !Array.isArray(v1)) ||\n        (Array.isArray(v1) && v1.length > 0)\n      )\n        eval1 = true\n      if (\n        (!!v2 === true && !Array.isArray(v2)) ||\n        (Array.isArray(v2) && v2.length > 0)\n      )\n        eval2 = true\n\n      return eval1 || eval2\n    default:\n      return false\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c759a462bc4eb4f2d310b9a22f87e50c040521ca","contentHash":"9be32d804586925d8739a13889644a2f615c7c5bc5afcde011735c267377cdbe"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/eachGroup.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/eachGroup.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":31}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":55}},"4":{"start":{"line":29,"column":11},"end":{"line":29,"column":21}},"5":{"start":{"line":30,"column":16},"end":{"line":30,"column":31}},"6":{"start":{"line":31,"column":12},"end":{"line":31,"column":14}},"7":{"start":{"line":32,"column":14},"end":{"line":32,"column":16}},"8":{"start":{"line":35,"column":4},"end":{"line":43,"column":5}},"9":{"start":{"line":36,"column":6},"end":{"line":36,"column":18}},"10":{"start":{"line":38,"column":6},"end":{"line":42,"column":7}},"11":{"start":{"line":39,"column":8},"end":{"line":39,"column":51}},"12":{"start":{"line":41,"column":8},"end":{"line":41,"column":20}},"13":{"start":{"line":46,"column":2},"end":{"line":102,"column":3}},"14":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"15":{"start":{"line":48,"column":6},"end":{"line":48,"column":34}},"16":{"start":{"line":51,"column":4},"end":{"line":93,"column":5}},"17":{"start":{"line":52,"column":6},"end":{"line":90,"column":7}},"18":{"start":{"line":52,"column":19},"end":{"line":52,"column":20}},"19":{"start":{"line":52,"column":33},"end":{"line":52,"column":34}},"20":{"start":{"line":52,"column":40},"end":{"line":52,"column":54}},"21":{"start":{"line":52,"column":71},"end":{"line":52,"column":72}},"22":{"start":{"line":52,"column":78},"end":{"line":52,"column":79}},"23":{"start":{"line":52,"column":93},"end":{"line":52,"column":94}},"24":{"start":{"line":53,"column":16},"end":{"line":53,"column":66}},"25":{"start":{"line":54,"column":8},"end":{"line":54,"column":29}},"26":{"start":{"line":54,"column":23},"end":{"line":54,"column":29}},"27":{"start":{"line":55,"column":20},"end":{"line":55,"column":45}},"28":{"start":{"line":57,"column":8},"end":{"line":62,"column":23}},"29":{"start":{"line":64,"column":8},"end":{"line":87,"column":9}},"30":{"start":{"line":65,"column":10},"end":{"line":78,"column":11}},"31":{"start":{"line":68,"column":12},"end":{"line":73,"column":13}},"32":{"start":{"line":69,"column":14},"end":{"line":69,"column":31}},"33":{"start":{"line":70,"column":23},"end":{"line":70,"column":25}},"34":{"start":{"line":72,"column":14},"end":{"line":72,"column":29}},"35":{"start":{"line":75,"column":12},"end":{"line":75,"column":24}},"36":{"start":{"line":76,"column":12},"end":{"line":76,"column":25}},"37":{"start":{"line":77,"column":12},"end":{"line":77,"column":16}},"38":{"start":{"line":80,"column":10},"end":{"line":80,"column":65}},"39":{"start":{"line":81,"column":20},"end":{"line":81,"column":30}},"40":{"start":{"line":82,"column":10},"end":{"line":82,"column":55}},"41":{"start":{"line":82,"column":40},"end":{"line":82,"column":55}},"42":{"start":{"line":84,"column":10},"end":{"line":86,"column":11}},"43":{"start":{"line":85,"column":12},"end":{"line":85,"column":39}},"44":{"start":{"line":89,"column":8},"end":{"line":89,"column":47}},"45":{"start":{"line":92,"column":6},"end":{"line":92,"column":22}},"46":{"start":{"line":95,"column":4},"end":{"line":101,"column":5}},"47":{"start":{"line":96,"column":6},"end":{"line":98,"column":7}},"48":{"start":{"line":96,"column":19},"end":{"line":96,"column":20}},"49":{"start":{"line":96,"column":26},"end":{"line":96,"column":40}},"50":{"start":{"line":96,"column":46},"end":{"line":96,"column":47}},"51":{"start":{"line":97,"column":8},"end":{"line":97,"column":30}},"52":{"start":{"line":100,"column":6},"end":{"line":100,"column":26}},"53":{"start":{"line":104,"column":2},"end":{"line":104,"column":13}}},"fnMap":{"0":{"name":"eachGroup","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":18}},"loc":{"start":{"line":28,"column":45},"end":{"line":105,"column":1}},"line":28},"1":{"name":"getLeaf","decl":{"start":{"line":34,"column":11},"end":{"line":34,"column":18}},"loc":{"start":{"line":34,"column":25},"end":{"line":44,"column":3}},"line":34}},"branchMap":{"0":{"loc":{"start":{"line":35,"column":4},"end":{"line":43,"column":5}},"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":43,"column":5}},{"start":{"line":35,"column":4},"end":{"line":43,"column":5}}],"line":35},"1":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":30}},"type":"binary-expr","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":18}},{"start":{"line":35,"column":22},"end":{"line":35,"column":30}}],"line":35},"2":{"loc":{"start":{"line":46,"column":2},"end":{"line":102,"column":3}},"type":"if","locations":[{"start":{"line":46,"column":2},"end":{"line":102,"column":3}},{"start":{"line":46,"column":2},"end":{"line":102,"column":3}}],"line":46},"3":{"loc":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},{"start":{"line":47,"column":4},"end":{"line":49,"column":5}}],"line":47},"4":{"loc":{"start":{"line":51,"column":4},"end":{"line":93,"column":5}},"type":"if","locations":[{"start":{"line":51,"column":4},"end":{"line":93,"column":5}},{"start":{"line":51,"column":4},"end":{"line":93,"column":5}}],"line":51},"5":{"loc":{"start":{"line":51,"column":8},"end":{"line":51,"column":37}},"type":"binary-expr","locations":[{"start":{"line":51,"column":8},"end":{"line":51,"column":15}},{"start":{"line":51,"column":19},"end":{"line":51,"column":37}}],"line":51},"6":{"loc":{"start":{"line":54,"column":8},"end":{"line":54,"column":29}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":54,"column":29}},{"start":{"line":54,"column":8},"end":{"line":54,"column":29}}],"line":54},"7":{"loc":{"start":{"line":60,"column":22},"end":{"line":60,"column":43}},"type":"binary-expr","locations":[{"start":{"line":60,"column":22},"end":{"line":60,"column":27}},{"start":{"line":60,"column":31},"end":{"line":60,"column":43}}],"line":60},"8":{"loc":{"start":{"line":64,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":87,"column":9}},{"start":{"line":64,"column":8},"end":{"line":87,"column":9}}],"line":64},"9":{"loc":{"start":{"line":65,"column":10},"end":{"line":78,"column":11}},"type":"if","locations":[{"start":{"line":65,"column":10},"end":{"line":78,"column":11}},{"start":{"line":65,"column":10},"end":{"line":78,"column":11}}],"line":65},"10":{"loc":{"start":{"line":68,"column":12},"end":{"line":73,"column":13}},"type":"if","locations":[{"start":{"line":68,"column":12},"end":{"line":73,"column":13}},{"start":{"line":68,"column":12},"end":{"line":73,"column":13}}],"line":68},"11":{"loc":{"start":{"line":82,"column":10},"end":{"line":82,"column":55}},"type":"if","locations":[{"start":{"line":82,"column":10},"end":{"line":82,"column":55}},{"start":{"line":82,"column":10},"end":{"line":82,"column":55}}],"line":82},"12":{"loc":{"start":{"line":84,"column":10},"end":{"line":86,"column":11}},"type":"if","locations":[{"start":{"line":84,"column":10},"end":{"line":86,"column":11}},{"start":{"line":84,"column":10},"end":{"line":86,"column":11}}],"line":84},"13":{"loc":{"start":{"line":95,"column":4},"end":{"line":101,"column":5}},"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":101,"column":5}},{"start":{"line":95,"column":4},"end":{"line":101,"column":5}}],"line":95}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":4,"9":4,"10":0,"11":0,"12":0,"13":1,"14":1,"15":0,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":2,"25":2,"26":0,"27":2,"28":2,"29":2,"30":2,"31":1,"32":0,"33":0,"34":1,"35":1,"36":1,"37":1,"38":2,"39":2,"40":2,"41":2,"42":2,"43":2,"44":2,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":2,"52":0,"53":1},"f":{"0":1,"1":4},"b":{"0":[4,0],"1":[4,4],"2":[1,0],"3":[0,1],"4":[1,0],"5":[1,1],"6":[0,2],"7":[2,2],"8":[2,0],"9":[1,1],"10":[0,1],"11":[2,0],"12":[2,0],"13":[1,0]},"inputSourceMap":{"version":3,"sources":["eachGroup.js"],"names":["eachGroup","context","groups","options","fn","inverse","ret","group","getLeaf","node","qty","Object","keys","e","JSON","parse","length","i","newCount","j","distribIndex","k","iteration","o","first","index","isFirst","isNewGroup","isLast","ar","key","push"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["import extend from 'extend'\n\n/**\n * This helper divide an array into groups of objects and repeat the structure\n * Usage : \n * \n *{{#eachgroup products '[{\"group\":\"my\",\"qty\":\"1\"},{\"group\":\"ty\",\"qty\":\"3\"}]'}}\n *    {{my.0.title}} <img src=\"{{my.0.cover_273x273}}\" width=\"40\"><br/>\n *    {{ty.0.title}} <img src=\"{{ty.0.cover_273x273}}\" width=\"40\"><br/>\n *    {{ty.1.title}} <img src=\"{{ty.1.cover_273x273}}\" width=\"40\"><br/>\n *    {{ty.2.title}} <img src=\"{{ty.2.cover_273x273}}\" width=\"40\"><br/>\n *{{/eachgroup}}\n *\n * @param  {[type]} context The array to parse\n * @param  {[type]} id      the groups of groups and qty\n * @param  {[type]} options \n * @return {[type]}         html\n */\nexport default function eachGroup(context, groups, options) {\n  var fn = options.fn,\n    inverse = options.inverse\n  var ret = ''\n  var group = []\n  function getLeaf(node) {\n    if (node.group && node.qty) {\n      return node\n    } else {\n      try {\n        return getLeaf(node[Object.keys(node)[0]])\n      } catch (e) {\n        return null\n      }\n    }\n  }\n\n  if (typeof groups !== 'undefined') {\n    if (typeof groups === 'string') {\n      groups = JSON.parse(groups)\n    }\n    if (context && context.length > 0) {\n      for (\n        var i = 0,\n          newCount = 0,\n          j = context.length,\n          distribIndex = 0,\n          k = 0,\n          iteration = 0;\n        i < j;\n        i++, newCount++\n      ) {\n        var o = getLeaf(groups[Object.keys(groups)[distribIndex]])\n        if (o == null) break\n        var first = newCount % o['qty'] === 0\n\n        // Adding index, isFirst, isLast, isNewGroup to each record\n        context[i] = extend(\n          true,\n          {\n            index: i,\n            isFirst: first,\n            isNewGroup: first && newCount > 0,\n            isLast: i === context.length - 1\n          },\n          context[i]\n        )\n\n        if (first) {\n          if (newCount > 0) {\n            // if the last group has been reached, I reinit the distribIndex\n            // and iterate on the result array\n            if (distribIndex === Object.keys(groups).length - 1) {\n              distribIndex = 0\n              var ar = []\n            } else {\n              distribIndex++\n            }\n            iteration++\n            newCount = 0\n            k++\n          }\n\n          o = getLeaf(groups[Object.keys(groups)[distribIndex]])\n          var key = o['group']\n          if (group[iteration] == null) group.push([])\n          if (group[iteration][key] == null) {\n            group[iteration][key] = []\n          }\n        }\n        group[iteration][key].push(context[i])\n      }\n      context = group\n    }\n\n    if (context) {\n      for (var i = 0, j = context.length, k = 0; i < j; i++) {\n        ret += fn(context[i])\n      }\n    } else {\n      ret = inverse(this)\n    }\n  }\n\n  return ret\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7cdf90f7b7a4b33c890dab2f5bbc6ee8a832ee1c","contentHash":"6d6c647c44ba36e67bd5f65a3e457a1077fbc741ca72e1aa021b0f9d4c170679"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/math.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/math.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"2":{"start":{"line":9,"column":2},"end":{"line":9,"column":30}},"3":{"start":{"line":10,"column":2},"end":{"line":10,"column":30}},"4":{"start":{"line":11,"column":2},"end":{"line":17,"column":14}}},"fnMap":{"0":{"name":"math","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":13}},"loc":{"start":{"line":8,"column":40},"end":{"line":18,"column":1}},"line":8}},"branchMap":{},"s":{"0":1,"1":1,"2":6,"3":6,"4":6},"f":{"0":6},"b":{},"inputSourceMap":{"version":3,"sources":["math.js"],"names":["math","lvalue","operator","rvalue","parseFloat"],"mappings":";;;;;;;AAAe,SAASA,IAAT,CAAcC,MAAd,EAAsBC,QAAtB,EAAgCC,MAAhC,EAAwC;AACrDF,EAAAA,MAAM,GAAGG,UAAU,CAACH,MAAD,CAAnB;AACAE,EAAAA,MAAM,GAAGC,UAAU,CAACD,MAAD,CAAnB;AAEA,SAAO;AACL,SAAKF,MAAM,GAAGE,MADT;AAEL,SAAKF,MAAM,GAAGE,MAFT;AAGL,SAAKF,MAAM,GAAGE,MAHT;AAIL,SAAKF,MAAM,GAAGE,MAJT;AAKL,SAAKF,MAAM,GAAGE;AALT,IAMLD,QANK,CAAP;AAOD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["export default function math(lvalue, operator, rvalue) {\n  lvalue = parseFloat(lvalue)\n  rvalue = parseFloat(rvalue)\n\n  return {\n    '+': lvalue + rvalue,\n    '-': lvalue - rvalue,\n    '*': lvalue * rvalue,\n    '/': lvalue / rvalue,\n    '%': lvalue % rvalue\n  }[operator]\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8b0ae3c6239de2af30878bf0d9b2545ba1c512b2","contentHash":"e64386c83e2937e4c2559958edbc553775cbc07f55626a5e2d3f3f508746d0b9"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/moduloIf.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/moduloIf.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"2":{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},"3":{"start":{"line":17,"column":4},"end":{"line":17,"column":26}},"4":{"start":{"line":20,"column":2},"end":{"line":20,"column":29}}},"fnMap":{"0":{"name":"moduloIf","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":35},"end":{"line":21,"column":1}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},{"start":{"line":16,"column":2},"end":{"line":18,"column":3}}],"line":16}},"s":{"0":1,"1":1,"2":2,"3":1,"4":1},"f":{"0":2},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"sources":["moduloIf.js"],"names":["moduloIf","num","mod","block","parseInt","fn","inverse"],"mappings":";;;;;;;AAAA;;;;;;;AAOe,SAASA,QAAT,CAAkBC,GAAlB,EAAuBC,GAAvB,EAA4BC,KAA5B,EAAmC;AAChD,MAAIC,QAAQ,CAACH,GAAD,CAAR,GAAgBG,QAAQ,CAACF,GAAD,CAAxB,KAAkC,CAAtC,EAAyC;AACvC,WAAOC,KAAK,CAACE,EAAN,CAAS,IAAT,CAAP;AACD;;AACD,SAAOF,KAAK,CAACG,OAAN,CAAc,IAAd,CAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["/**\n * Handlebars helper, conditionnal modulo\n * @param  {Int} num number to test\n * @param  {Int} mod modulo number\n * @param  {String} block text block content inside of {{#moduloIf}} ... {{/moduloIf}}\n * @return {String|html} if true return the block compiled by handlebar inside our template, if not void\n */\nexport default function moduloIf(num, mod, block) {\n  if (parseInt(num) % parseInt(mod) === 0) {\n    return block.fn(this)\n  }\n  return block.inverse(this)\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0cc7a1235b270d6d421355af6fbf58b821a3b960","contentHash":"759120e77dc05f896a2405c830bf1696eac3aae9e49d4f528998c127c417eb72"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/notEmpty.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/notEmpty.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"2":{"start":{"line":9,"column":2},"end":{"line":13,"column":3}},"3":{"start":{"line":10,"column":4},"end":{"line":10,"column":26}},"4":{"start":{"line":12,"column":4},"end":{"line":12,"column":31}}},"fnMap":{"0":{"name":"notEmpty","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":17}},"loc":{"start":{"line":8,"column":35},"end":{"line":14,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":2},"end":{"line":13,"column":3}},"type":"if","locations":[{"start":{"line":9,"column":2},"end":{"line":13,"column":3}},{"start":{"line":9,"column":2},"end":{"line":13,"column":3}}],"line":9},"1":{"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":77}},"type":"binary-expr","locations":[{"start":{"line":9,"column":6},"end":{"line":9,"column":37}},{"start":{"line":9,"column":41},"end":{"line":9,"column":58}},{"start":{"line":9,"column":62},"end":{"line":9,"column":77}}],"line":9}},"s":{"0":1,"1":1,"2":4,"3":1,"4":3},"f":{"0":4},"b":{"0":[1,3],"1":[4,3,2]},"inputSourceMap":{"version":3,"sources":["notEmpty.js"],"names":["notEmpty","variable","block","fn","inverse"],"mappings":";;;;;;;AAAe,SAASA,QAAT,CAAkBC,QAAlB,EAA4BC,KAA5B,EAAmC;AAChD,MAAI,OAAOD,QAAP,KAAoB,WAApB,IAAmCA,QAAQ,KAAK,IAAhD,IAAwDA,QAAQ,KAAK,EAAzE,EAA6E;AAC3E,WAAOC,KAAK,CAACC,EAAN,CAAS,IAAT,CAAP;AACD,GAFD,MAEO;AACL,WAAOD,KAAK,CAACE,OAAN,CAAc,IAAd,CAAP;AACD;AACF","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["export default function notEmpty(variable, block) {\n  if (typeof variable !== 'undefined' && variable !== null && variable !== '') {\n    return block.fn(this)\n  } else {\n    return block.inverse(this)\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"049e07ba8ccc4ba5b655049c45ab07eb4d6c3a17","contentHash":"875edd84fbeb239dc603e539f867a13be6f2d3aab84c8d6613f6d0d713ceab5c"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/printJson.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/printJson.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"2":{"start":{"line":12,"column":2},"end":{"line":16,"column":3}},"3":{"start":{"line":13,"column":4},"end":{"line":13,"column":188}},"4":{"start":{"line":15,"column":4},"end":{"line":15,"column":16}}},"fnMap":{"0":{"name":"printJson","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":18}},"loc":{"start":{"line":11,"column":38},"end":{"line":17,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":2},"end":{"line":16,"column":3}},"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":16,"column":3}},{"start":{"line":12,"column":2},"end":{"line":16,"column":3}}],"line":12},"1":{"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":48}},"type":"binary-expr","locations":[{"start":{"line":12,"column":6},"end":{"line":12,"column":32}},{"start":{"line":12,"column":36},"end":{"line":12,"column":48}}],"line":12},"2":{"loc":{"start":{"line":13,"column":11},"end":{"line":13,"column":187}},"type":"cond-expr","locations":[{"start":{"line":13,"column":96},"end":{"line":13,"column":144}},{"start":{"line":13,"column":147},"end":{"line":13,"column":187}}],"line":13},"3":{"loc":{"start":{"line":13,"column":11},"end":{"line":13,"column":93}},"type":"binary-expr","locations":[{"start":{"line":13,"column":11},"end":{"line":13,"column":46}},{"start":{"line":13,"column":50},"end":{"line":13,"column":71}},{"start":{"line":13,"column":75},"end":{"line":13,"column":93}}],"line":13}},"s":{"0":1,"1":1,"2":3,"3":2,"4":1},"f":{"0":3},"b":{"0":[2,1],"1":[3,3],"2":[1,1],"3":[2,1,1]},"inputSourceMap":{"version":3,"sources":["printJson.js"],"names":["printJson","obj","escapeString","escape","JSON","stringify","replace"],"mappings":";;;;;;;AAAA;;;AAGe,SAASA,SAAT,CAAmBC,GAAnB,EAAwBC,YAAxB,EAAsC;AACnD,MAAI,OAAOD,GAAP,KAAe,WAAf,IAA8BA,GAAG,KAAK,IAA1C,EAAgD;AAC9C,WAAO,OAAOC,YAAP,KAAwB,WAAxB,IACPA,YAAY,KAAK,IADV,IAEPA,YAAY,KAAK,CAFV,GAGHC,MAAM,CAACC,IAAI,CAACC,SAAL,CAAeJ,GAAf,EAAoBK,OAApB,CAA4B,IAA5B,EAAkC,KAAlC,CAAD,CAHH,GAIHF,IAAI,CAACC,SAAL,CAAeJ,GAAf,EAAoBK,OAApB,CAA4B,IAA5B,EAAkC,KAAlC,CAJJ;AAKD,GAND,MAMO;AACL,WAAO,IAAP;AACD;AACF","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["/**\n * Handlebars helper, to print json object\n */\nexport default function printJson(obj, escapeString) {\n  if (typeof obj !== 'undefined' && obj !== null) {\n    return typeof escapeString !== 'undefined' &&\n    escapeString !== null &&\n    escapeString === 1\n      ? escape(JSON.stringify(obj).replace(/'/g, '%27'))\n      : JSON.stringify(obj).replace(/'/g, '%27')\n  } else {\n    return '{}'\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a03cf2f4748a46d369bd76cbd5dea1147b566b64","contentHash":"9901ac5de1aa1cd66f8d1c99adff7c7593f50d55612709a869d26e4802707705"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/translate.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/translate.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":31}},"3":{"start":{"line":10,"column":8},"end":{"line":10,"column":28}},"4":{"start":{"line":12,"column":18},"end":{"line":12,"column":63}},"5":{"start":{"line":15,"column":2},"end":{"line":28,"column":3}},"6":{"start":{"line":16,"column":19},"end":{"line":16,"column":59}},"7":{"start":{"line":18,"column":14},"end":{"line":18,"column":28}},"8":{"start":{"line":20,"column":4},"end":{"line":23,"column":5}},"9":{"start":{"line":21,"column":6},"end":{"line":21,"column":58}},"10":{"start":{"line":22,"column":6},"end":{"line":22,"column":40}},"11":{"start":{"line":25,"column":4},"end":{"line":25,"column":15}},"12":{"start":{"line":27,"column":4},"end":{"line":27,"column":20}},"13":{"start":{"line":32,"column":16},"end":{"line":32,"column":48}},"14":{"start":{"line":33,"column":15},"end":{"line":33,"column":46}},"15":{"start":{"line":34,"column":13},"end":{"line":34,"column":46}},"16":{"start":{"line":36,"column":2},"end":{"line":38,"column":3}},"17":{"start":{"line":37,"column":4},"end":{"line":37,"column":33}},"18":{"start":{"line":40,"column":2},"end":{"line":40,"column":16}}},"fnMap":{"0":{"name":"getVariable","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":20}},"loc":{"start":{"line":14,"column":46},"end":{"line":29,"column":1}},"line":14},"1":{"name":"translate","decl":{"start":{"line":31,"column":9},"end":{"line":31,"column":18}},"loc":{"start":{"line":31,"column":45},"end":{"line":41,"column":1}},"line":31}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":2},"end":{"line":28,"column":3}},"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":28,"column":3}},{"start":{"line":15,"column":2},"end":{"line":28,"column":3}}],"line":15},"1":{"loc":{"start":{"line":20,"column":4},"end":{"line":23,"column":5}},"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":23,"column":5}},{"start":{"line":20,"column":4},"end":{"line":23,"column":5}}],"line":20},"2":{"loc":{"start":{"line":36,"column":2},"end":{"line":38,"column":3}},"type":"if","locations":[{"start":{"line":36,"column":2},"end":{"line":38,"column":3}},{"start":{"line":36,"column":2},"end":{"line":38,"column":3}}],"line":36},"3":{"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":150}},"type":"binary-expr","locations":[{"start":{"line":36,"column":6},"end":{"line":36,"column":42}},{"start":{"line":36,"column":46},"end":{"line":36,"column":68}},{"start":{"line":36,"column":72},"end":{"line":36,"column":116}},{"start":{"line":36,"column":120},"end":{"line":36,"column":150}}],"line":36}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0]},"inputSourceMap":{"version":3,"sources":["translate.js"],"names":["getVariable","variable","json","options","indexOf","template","Handlebars","compile","res","data","root","translate","lang","str","resLang","resStr","trad","coreUtils","locales","instance","i18n"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA,SAASA,WAAT,CAAqBC,QAArB,EAA+BC,IAA/B,EAAqCC,OAArC,EAA8C;AAC5C,MAAIF,QAAQ,CAACG,OAAT,CAAiB,IAAjB,IAAyB,CAAC,CAA9B,EAAiC;AAC/B,QAAIC,QAAQ,GAAGC,uBAAWC,OAAX,CAAmBN,QAAnB,CAAf;;AACA,QAAIO,GAAG,GAAGH,QAAQ,CAACH,IAAD,CAAlB;;AAEA,QAAIM,GAAG,KAAK,EAAZ,EAAgB;AACdH,MAAAA,QAAQ,GAAGC,uBAAWC,OAAX,CAAmBN,QAAnB,CAAX;AACAO,MAAAA,GAAG,GAAGH,QAAQ,CAACF,OAAO,CAACM,IAAR,CAAaC,IAAd,CAAd;AACD;;AACD,WAAOF,GAAP;AACD,GATD,MASO;AACL,WAAOP,QAAP;AACD;AACF;;AAEc,SAASU,SAAT,CAAmBC,IAAnB,EAAyBC,GAAzB,EAA8BX,IAA9B,EAAoCC,OAApC,EAA6C;AAC1D,MAAIW,OAAO,GAAGd,WAAW,CAACY,IAAD,EAAOV,IAAP,EAAaC,OAAb,CAAzB;AACA,MAAIY,MAAM,GAAGf,WAAW,CAACa,GAAD,EAAMX,IAAN,EAAYC,OAAZ,CAAxB;AAEA,MAAIa,IAAI,GAAGC,YAAUC,OAAV,CAAkBC,QAAlB,CAA2BC,IAAtC;;AACA,MACE,OAAOJ,IAAI,CAACF,OAAD,CAAX,KAAyB,WAAzB,IACAE,IAAI,CAACF,OAAD,CAAJ,KAAkB,IADlB,IAEA,OAAOE,IAAI,CAACF,OAAD,CAAJ,CAAcC,MAAd,CAAP,KAAiC,WAFjC,IAGAC,IAAI,CAACF,OAAD,CAAJ,CAAcC,MAAd,MAA0B,IAJ5B,EAKE;AACA,WAAOC,IAAI,CAACF,OAAD,CAAJ,CAAcC,MAAd,CAAP;AACD;;AAED,SAAOA,MAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["import {coreUtils} from '../../../'\nimport Handlebars from 'handlebars'\n\nfunction getVariable(variable, json, options) {\n  if (variable.indexOf('{{') > -1) {\n    var template = Handlebars.compile(variable)\n    var res = template(json)\n\n    if (res === '') {\n      template = Handlebars.compile(variable)\n      res = template(options.data.root)\n    }\n    return res\n  } else {\n    return variable\n  }\n}\n\nexport default function translate(lang, str, json, options) {\n  var resLang = getVariable(lang, json, options)\n  var resStr = getVariable(str, json, options)\n\n  var trad = coreUtils.locales.instance.i18n\n  if (\n    typeof trad[resLang] !== 'undefined' &&\n    trad[resLang] !== null &&\n    typeof trad[resLang][resStr] !== 'undefined' &&\n    trad[resLang][resStr] !== null\n  ) {\n    return trad[resLang][resStr]\n  }\n\n  return resStr\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7ce72be6c03ed543925af6c07d463abb6a2311df","contentHash":"60d4970466721561e591dd599a382cc3b11874201511fa0b76fb8bea23ad0c89"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/times.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/times.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":27}},"2":{"start":{"line":9,"column":2},"end":{"line":9,"column":18}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":16}},"4":{"start":{"line":12,"column":2},"end":{"line":14,"column":3}},"5":{"start":{"line":12,"column":15},"end":{"line":12,"column":16}},"6":{"start":{"line":13,"column":4},"end":{"line":13,"column":25}},"7":{"start":{"line":16,"column":2},"end":{"line":16,"column":15}}},"fnMap":{"0":{"name":"times","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":14}},"loc":{"start":{"line":8,"column":25},"end":{"line":17,"column":1}},"line":8}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":3,"7":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"sources":["times.js"],"names":["times","n","block","parseInt","accum","i","fn"],"mappings":";;;;;;;AAAe,SAASA,KAAT,CAAeC,CAAf,EAAkBC,KAAlB,EAAyB;AACtCD,EAAAA,CAAC,GAAGE,QAAQ,CAACF,CAAD,CAAZ;AACA,MAAIG,KAAK,GAAG,EAAZ;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,CAApB,EAAuB,EAAEI,CAAzB;AAA4BD,IAAAA,KAAK,IAAIF,KAAK,CAACI,EAAN,CAASD,CAAT,CAAT;AAA5B;;AACA,SAAOD,KAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["export default function times(n, block) {\n  n = parseInt(n)\n  var accum = ''\n  for (var i = 0; i < n; ++i) accum += block.fn(i)\n  return accum\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b6c774d2cfdc3b46843f6a17500596c86c00d0c8","contentHash":"03593d5b53e362f6b39bd7f2a395a0df79f3f9c4037d7b5bb648d6e775df1f74"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/lowercase.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/lowercase.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"2":{"start":{"line":12,"column":2},"end":{"line":16,"column":3}},"3":{"start":{"line":13,"column":4},"end":{"line":13,"column":14}},"4":{"start":{"line":15,"column":4},"end":{"line":15,"column":29}}},"fnMap":{"0":{"name":"lowercase","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":18}},"loc":{"start":{"line":11,"column":24},"end":{"line":17,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":2},"end":{"line":16,"column":3}},"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":16,"column":3}},{"start":{"line":12,"column":2},"end":{"line":16,"column":3}}],"line":12},"1":{"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":48}},"type":"binary-expr","locations":[{"start":{"line":12,"column":6},"end":{"line":12,"column":32}},{"start":{"line":12,"column":36},"end":{"line":12,"column":48}}],"line":12}},"s":{"0":1,"1":1,"2":3,"3":1,"4":2},"f":{"0":3},"b":{"0":[1,2],"1":[3,3]},"inputSourceMap":{"version":3,"sources":["lowercase.js"],"names":["lowercase","str","toLowerCase"],"mappings":";;;;;;;AAAA;;;AAGe,SAASA,SAAT,CAAmBC,GAAnB,EAAwB;AACrC,MAAI,OAAOA,GAAP,KAAe,WAAf,IAA8BA,GAAG,KAAK,IAA1C,EAAgD;AAC9C,WAAO,EAAP;AACD,GAFD,MAEO;AACL,WAAOA,GAAG,CAACC,WAAJ,EAAP;AACD;AACF","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["/**\n * Handlebars helper, lowercase the str\n */\nexport default function lowercase(str) {\n  if (typeof str === 'undefined' || str === null) {\n    return ''\n  } else {\n    return str.toLowerCase()\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ec11c2f3152326bb0c641952936eb2572ee0a32c","contentHash":"0090c3ea6e1cacc2580978d22785cede4572d6414e6ba0c41bc1d0dbd42e0ff8"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/uppercase.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/uppercase.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"2":{"start":{"line":12,"column":2},"end":{"line":16,"column":3}},"3":{"start":{"line":13,"column":4},"end":{"line":13,"column":14}},"4":{"start":{"line":15,"column":4},"end":{"line":15,"column":29}}},"fnMap":{"0":{"name":"uppercase","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":18}},"loc":{"start":{"line":11,"column":24},"end":{"line":17,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":2},"end":{"line":16,"column":3}},"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":16,"column":3}},{"start":{"line":12,"column":2},"end":{"line":16,"column":3}}],"line":12},"1":{"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":48}},"type":"binary-expr","locations":[{"start":{"line":12,"column":6},"end":{"line":12,"column":32}},{"start":{"line":12,"column":36},"end":{"line":12,"column":48}}],"line":12}},"s":{"0":1,"1":1,"2":3,"3":1,"4":2},"f":{"0":3},"b":{"0":[1,2],"1":[3,3]},"inputSourceMap":{"version":3,"sources":["uppercase.js"],"names":["uppercase","str","toUpperCase"],"mappings":";;;;;;;AAAA;;;AAGe,SAASA,SAAT,CAAmBC,GAAnB,EAAwB;AACrC,MAAI,OAAOA,GAAP,KAAe,WAAf,IAA8BA,GAAG,KAAK,IAA1C,EAAgD;AAC9C,WAAO,EAAP;AACD,GAFD,MAEO;AACL,WAAOA,GAAG,CAACC,WAAJ,EAAP;AACD;AACF","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["/**\n * Handlebars helper, uppercase the str\n */\nexport default function uppercase(str) {\n  if (typeof str === 'undefined' || str === null) {\n    return ''\n  } else {\n    return str.toUpperCase()\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e498cfe2abcab24b2348273d04a0448579791045","contentHash":"933f53a0d49a9df92031edc0847995f9366370e4b602ea50a60621a274e5a456"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/setVariable.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/setVariable.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":33}},"2":{"start":{"line":12,"column":2},"end":{"line":14,"column":3}},"3":{"start":{"line":13,"column":4},"end":{"line":13,"column":20}},"4":{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},"5":{"start":{"line":17,"column":4},"end":{"line":17,"column":21}},"6":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"7":{"start":{"line":21,"column":4},"end":{"line":21,"column":36}},"8":{"start":{"line":24,"column":2},"end":{"line":24,"column":40}}},"fnMap":{"0":{"name":"setVariable","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":20}},"loc":{"start":{"line":11,"column":49},"end":{"line":25,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":2},"end":{"line":14,"column":3}},"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":14,"column":3}},{"start":{"line":12,"column":2},"end":{"line":14,"column":3}}],"line":12},"1":{"loc":{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},{"start":{"line":16,"column":2},"end":{"line":18,"column":3}}],"line":16},"2":{"loc":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},{"start":{"line":20,"column":2},"end":{"line":22,"column":3}}],"line":20},"3":{"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":63}},"type":"binary-expr","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":33}},{"start":{"line":20,"column":37},"end":{"line":20,"column":63}}],"line":20}},"s":{"0":1,"1":1,"2":7,"3":1,"4":7,"5":1,"6":7,"7":1,"8":7},"f":{"0":7},"b":{"0":[1,6],"1":[1,6],"2":[1,6],"3":[7,3]},"inputSourceMap":{"version":3,"sources":["setVariable.js"],"names":["setVariable","varName","varValue","options","indexOf","JSON","parse","data","root"],"mappings":";;;;;;;AAAA;;;AAGe,SAASA,WAAT,CAAqBC,OAArB,EAA8BC,QAA9B,EAAwCC,OAAxC,EAAiD;AAC9D,MAAID,QAAQ,KAAK,MAAjB,EAAyB;AACvBA,IAAAA,QAAQ,GAAG,IAAX;AACD;;AACD,MAAIA,QAAQ,KAAK,OAAjB,EAA0B;AACxBA,IAAAA,QAAQ,GAAG,KAAX;AACD;;AACD,MAAI,OAAOA,QAAP,IAAmB,QAAnB,IAA+BA,QAAQ,CAACE,OAAT,CAAiB,GAAjB,IAAwB,CAAC,CAA5D,EAA+D;AAC7DF,IAAAA,QAAQ,GAAGG,IAAI,CAACC,KAAL,CAAWJ,QAAX,CAAX;AACD;;AAEDC,EAAAA,OAAO,CAACI,IAAR,CAAaC,IAAb,CAAkBP,OAAlB,IAA6BC,QAA7B;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["/**\n * Handlebars helper, to add variable inside template file\n */\nexport default function setVariable(varName, varValue, options) {\n  if (varValue === 'true') {\n    varValue = true\n  }\n  if (varValue === 'false') {\n    varValue = false\n  }\n  if (typeof varValue == 'string' && varValue.indexOf('{') > -1) {\n    varValue = JSON.parse(varValue)\n  }\n\n  options.data.root[varName] = varValue\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6290a55ae8989f7c82842bbc7466d256bb8414c7","contentHash":"e54a768c221c403c949f10781d6df2ee2999dc78bde8befbb0eb0726d979289b"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/isAuthorized.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/isAuthorized.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}},"2":{"start":{"line":8,"column":8},"end":{"line":8,"column":28}},"3":{"start":{"line":14,"column":2},"end":{"line":18,"column":3}},"4":{"start":{"line":15,"column":4},"end":{"line":15,"column":24}},"5":{"start":{"line":17,"column":4},"end":{"line":17,"column":29}}},"fnMap":{"0":{"name":"isAuthorized","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":21}},"loc":{"start":{"line":13,"column":40},"end":{"line":19,"column":1}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":2},"end":{"line":18,"column":3}},"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":18,"column":3}},{"start":{"line":14,"column":2},"end":{"line":18,"column":3}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":2,"4":1,"5":1},"f":{"0":2},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"sources":["isAuthorized.js"],"names":["isAuthorized","route","role","ctx","User","utils","isUserAllowedOnRoute","fn","inverse"],"mappings":";;;;;;;AAAA;;AAEA;;;AAGe,SAASA,YAAT,CAAsBC,KAAtB,EAA6BC,IAA7B,EAAmCC,GAAnC,EAAwC;AACrD,MAAIC,OAAKC,KAAL,CAAWC,oBAAX,CAAgCJ,IAAhC,EAAsCD,KAAtC,CAAJ,EAAkD;AAChD,WAAOE,GAAG,CAACI,EAAJ,CAAO,IAAP,CAAP;AACD,GAFD,MAEO;AACL,WAAOJ,GAAG,CAACK,OAAJ,CAAY,IAAZ,CAAP;AACD;AACF","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["import {User} from '../../../'\n\n/**\n * Handlebars helper, to print className and escape it string\n */\nexport default function isAuthorized(route, role, ctx) {\n  if (User.utils.isUserAllowedOnRoute(role, route)) {\n    return ctx.fn(this)\n  } else {\n    return ctx.inverse(this)\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"05201f2582e6f94c927838e368be7351e339ea6e","contentHash":"349fbfe2efa4e4864caef563b9ae9dd71f59e4e1b546403afcba481d36ff41d5"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/concat.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/concat.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":9,"column":12},"end":{"line":9,"column":52}},"3":{"start":{"line":10,"column":2},"end":{"line":10,"column":12}},"4":{"start":{"line":11,"column":2},"end":{"line":11,"column":22}}},"fnMap":{"0":{"name":"concat","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":15}},"loc":{"start":{"line":8,"column":18},"end":{"line":12,"column":1}},"line":8}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"sources":["concat.js"],"names":["concat","arg","Array","prototype","slice","call","arguments","pop","join"],"mappings":";;;;;;;AAAe,SAASA,MAAT,GAAkB;AAC/B,MAAIC,GAAG,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,EAAsC,CAAtC,CAAV;AACAL,EAAAA,GAAG,CAACM,GAAJ;AACA,SAAON,GAAG,CAACO,IAAJ,CAAS,EAAT,CAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["export default function concat() {\n  var arg = Array.prototype.slice.call(arguments, 0)\n  arg.pop()\n  return arg.join('')\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1443ec5b325fdca7a4eeabe9172d21c97f5a9bec","contentHash":"0f7fd383a2833287135a0b00e6651154e4e805f3c717b826f1b8106297051f6d"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/getCurrentuserRole.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/getCurrentuserRole.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":40}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":17},"end":{"line":12,"column":62}},"5":{"start":{"line":14,"column":8},"end":{"line":14,"column":28}},"6":{"start":{"line":17,"column":2},"end":{"line":33,"column":3}},"7":{"start":{"line":18,"column":18},"end":{"line":20,"column":6}},"8":{"start":{"line":21,"column":16},"end":{"line":21,"column":45}},"9":{"start":{"line":23,"column":4},"end":{"line":32,"column":5}},"10":{"start":{"line":24,"column":19},"end":{"line":24,"column":40}},"11":{"start":{"line":26,"column":20},"end":{"line":26,"column":63}},"12":{"start":{"line":28,"column":17},"end":{"line":28,"column":51}},"13":{"start":{"line":30,"column":6},"end":{"line":30,"column":55}},"14":{"start":{"line":30,"column":29},"end":{"line":30,"column":55}},"15":{"start":{"line":31,"column":6},"end":{"line":31,"column":18}},"16":{"start":{"line":35,"column":2},"end":{"line":35,"column":12}}},"fnMap":{"0":{"name":"getCurrentuserRole","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":27}},"loc":{"start":{"line":16,"column":33},"end":{"line":36,"column":1}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":2},"end":{"line":33,"column":3}},"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":33,"column":3}},{"start":{"line":17,"column":2},"end":{"line":33,"column":3}}],"line":17},"1":{"loc":{"start":{"line":17,"column":6},"end":{"line":17,"column":64}},"type":"binary-expr","locations":[{"start":{"line":17,"column":6},"end":{"line":17,"column":40}},{"start":{"line":17,"column":44},"end":{"line":17,"column":64}}],"line":17},"2":{"loc":{"start":{"line":23,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":32,"column":5}},{"start":{"line":23,"column":4},"end":{"line":32,"column":5}}],"line":23},"3":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":70}},"type":"binary-expr","locations":[{"start":{"line":23,"column":8},"end":{"line":23,"column":36}},{"start":{"line":23,"column":40},"end":{"line":23,"column":54}},{"start":{"line":23,"column":58},"end":{"line":23,"column":70}}],"line":23},"4":{"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":55}},"type":"if","locations":[{"start":{"line":30,"column":6},"end":{"line":30,"column":55}},{"start":{"line":30,"column":6},"end":{"line":30,"column":55}}],"line":30},"5":{"loc":{"start":{"line":30,"column":10},"end":{"line":30,"column":27}},"type":"binary-expr","locations":[{"start":{"line":30,"column":10},"end":{"line":30,"column":14}},{"start":{"line":30,"column":18},"end":{"line":30,"column":27}}],"line":30}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"f":{"0":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"sources":["getCurrentuserRole.js"],"names":["getCurrentuserRole","obj","express","cookies","Cookies","req","res","secure","config","cookie","token","get","secret","users","decoded","jwt","decode","user","User","utils","findSync","iss","role","workflow"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA;;AAEe,SAASA,kBAAT,CAA4BC,GAA5B,EAAiC;AAC9C,MAAI,OAAOA,GAAG,CAACC,OAAX,KAAuB,WAAvB,IAAsCD,GAAG,CAACC,OAAJ,KAAgB,IAA1D,EAAgE;AAC9D,QAAIC,OAAO,GAAG,IAAIC,mBAAJ,CAAYH,GAAG,CAACC,OAAJ,CAAYG,GAAxB,EAA6BJ,GAAG,CAACC,OAAJ,CAAYI,GAAzC,EAA8C;AAC1DC,MAAAA,MAAM,EAAEC,SAAOC,MAAP,CAAcF;AADoC,KAA9C,CAAd;AAGA,QAAIG,KAAK,GAAGP,OAAO,CAACQ,GAAR,CAAY,gBAAZ,CAAZ;;AACA,QAAI,OAAOD,KAAP,KAAiB,WAAjB,IAAgCA,KAAK,KAAK,IAA1C,IAAkDA,KAAK,KAAK,EAAhE,EAAoE;AAClE,UAAIE,MAAM,GAAGJ,SAAOK,KAAP,CAAaD,MAA1B;;AACA,UAAIE,OAAO,GAAGC,sBAAIC,MAAJ,CAAWN,KAAX,EAAkBE,MAAlB,CAAd;;AACA,UAAIK,IAAI,GAAGC,OAAKC,KAAL,CAAWC,QAAX,CAAoBN,OAAO,CAACO,GAA5B,CAAX;;AACA,UAAIJ,IAAI,IAAIA,IAAI,CAACK,IAAjB,EAAuB,OAAOL,IAAI,CAACK,IAAL,CAAUC,QAAjB;AAEvB,aAAO,IAAP;AACD;AACF;;AACD,SAAO,EAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/handlebars/","sourcesContent":["import Cookies from 'cookies'\nimport jwt from 'jwt-simple'\n\nimport {config, User} from '../../../'\n\nexport default function getCurrentuserRole(obj) {\n  if (typeof obj.express !== 'undefined' && obj.express !== null) {\n    var cookies = new Cookies(obj.express.req, obj.express.res, {\n      secure: config.cookie.secure\n    })\n    var token = cookies.get('x-access-token')\n    if (typeof token !== 'undefined' && token !== null && token !== '') {\n      var secret = config.users.secret\n      var decoded = jwt.decode(token, secret)\n      var user = User.utils.findSync(decoded.iss)\n      if (user && user.role) return user.role.workflow\n\n      return null\n    }\n  }\n  return ''\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"32603b3634ec2e47a245afb2dd7f25cfa5365b74","contentHash":"fc268da73c8c641c47c9cb044b241c22ef5784e3ab72ae56f98c11d25fc2a0d8"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/template.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/template.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":29},"end":{"line":5,"column":84}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":3}},"3":{"start":{"line":10,"column":0},"end":{"line":10,"column":58}},"4":{"start":{"line":11,"column":0},"end":{"line":11,"column":28}},"5":{"start":{"line":12,"column":0},"end":{"line":12,"column":36}},"6":{"start":{"line":13,"column":0},"end":{"line":13,"column":42}},"7":{"start":{"line":14,"column":0},"end":{"line":14,"column":30}},"8":{"start":{"line":15,"column":0},"end":{"line":15,"column":34}},"9":{"start":{"line":16,"column":0},"end":{"line":16,"column":50}},"10":{"start":{"line":17,"column":0},"end":{"line":17,"column":54}},"11":{"start":{"line":18,"column":0},"end":{"line":18,"column":46}},"12":{"start":{"line":19,"column":0},"end":{"line":19,"column":48}},"13":{"start":{"line":20,"column":0},"end":{"line":20,"column":82}},"14":{"start":{"line":21,"column":0},"end":{"line":21,"column":82}},"15":{"start":{"line":22,"column":0},"end":{"line":22,"column":58}},"16":{"start":{"line":23,"column":0},"end":{"line":23,"column":94}},"17":{"start":{"line":24,"column":0},"end":{"line":24,"column":70}},"18":{"start":{"line":25,"column":0},"end":{"line":25,"column":60}},"19":{"start":{"line":27,"column":15},"end":{"line":27,"column":58}},"20":{"start":{"line":29,"column":16},"end":{"line":29,"column":35}},"21":{"start":{"line":31,"column":12},"end":{"line":31,"column":51}},"22":{"start":{"line":33,"column":8},"end":{"line":33,"column":25}},"23":{"start":{"line":35,"column":17},"end":{"line":35,"column":91}},"24":{"start":{"line":38,"column":17},"end":{"line":38,"column":19}},"25":{"start":{"line":39,"column":10},"end":{"line":50,"column":4}},"26":{"start":{"line":40,"column":20},"end":{"line":40,"column":60}},"27":{"start":{"line":41,"column":4},"end":{"line":49,"column":7}},"28":{"start":{"line":42,"column":6},"end":{"line":42,"column":40}},"29":{"start":{"line":43,"column":6},"end":{"line":46,"column":9}},"30":{"start":{"line":44,"column":8},"end":{"line":44,"column":42}},"31":{"start":{"line":45,"column":8},"end":{"line":45,"column":33}},"32":{"start":{"line":48,"column":6},"end":{"line":48,"column":70}},"33":{"start":{"line":51,"column":2},"end":{"line":51,"column":11}},"34":{"start":{"line":55,"column":15},"end":{"line":55,"column":61}},"35":{"start":{"line":56,"column":16},"end":{"line":56,"column":34}},"36":{"start":{"line":58,"column":2},"end":{"line":109,"column":3}},"37":{"start":{"line":59,"column":19},"end":{"line":59,"column":21}},"38":{"start":{"line":60,"column":19},"end":{"line":60,"column":21}},"39":{"start":{"line":61,"column":14},"end":{"line":61,"column":15}},"40":{"start":{"line":62,"column":19},"end":{"line":62,"column":21}},"41":{"start":{"line":64,"column":4},"end":{"line":84,"column":7}},"42":{"start":{"line":65,"column":6},"end":{"line":83,"column":7}},"43":{"start":{"line":66,"column":24},"end":{"line":66,"column":63}},"44":{"start":{"line":68,"column":22},"end":{"line":68,"column":59}},"45":{"start":{"line":70,"column":8},"end":{"line":82,"column":9}},"46":{"start":{"line":71,"column":10},"end":{"line":74,"column":13}},"47":{"start":{"line":75,"column":10},"end":{"line":75,"column":34}},"48":{"start":{"line":77,"column":10},"end":{"line":77,"column":51}},"49":{"start":{"line":78,"column":10},"end":{"line":81,"column":13}},"50":{"start":{"line":86,"column":4},"end":{"line":86,"column":60}},"51":{"start":{"line":88,"column":4},"end":{"line":95,"column":7}},"52":{"start":{"line":89,"column":6},"end":{"line":94,"column":7}},"53":{"start":{"line":90,"column":8},"end":{"line":90,"column":22}},"54":{"start":{"line":91,"column":8},"end":{"line":91,"column":32}},"55":{"start":{"line":93,"column":8},"end":{"line":93,"column":48}},"56":{"start":{"line":97,"column":4},"end":{"line":108,"column":7}},"57":{"start":{"line":98,"column":6},"end":{"line":107,"column":7}},"58":{"start":{"line":99,"column":24},"end":{"line":99,"column":63}},"59":{"start":{"line":101,"column":22},"end":{"line":101,"column":59}},"60":{"start":{"line":103,"column":8},"end":{"line":106,"column":9}},"61":{"start":{"line":104,"column":27},"end":{"line":104,"column":94}},"62":{"start":{"line":105,"column":10},"end":{"line":105,"column":49}},"63":{"start":{"line":111,"column":2},"end":{"line":111,"column":14}},"64":{"start":{"line":115,"column":17},"end":{"line":115,"column":19}},"65":{"start":{"line":116,"column":16},"end":{"line":116,"column":50}},"66":{"start":{"line":119,"column":2},"end":{"line":121,"column":3}},"67":{"start":{"line":120,"column":4},"end":{"line":120,"column":28}},"68":{"start":{"line":123,"column":2},"end":{"line":123,"column":18}},"69":{"start":{"line":135,"column":19},"end":{"line":135,"column":61}},"70":{"start":{"line":137,"column":25},"end":{"line":137,"column":47}},"71":{"start":{"line":138,"column":2},"end":{"line":202,"column":5}},"72":{"start":{"line":139,"column":14},"end":{"line":139,"column":56}},"73":{"start":{"line":141,"column":15},"end":{"line":141,"column":23}},"74":{"start":{"line":142,"column":18},"end":{"line":142,"column":20}},"75":{"start":{"line":144,"column":4},"end":{"line":148,"column":5}},"76":{"start":{"line":145,"column":6},"end":{"line":145,"column":56}},"77":{"start":{"line":147,"column":6},"end":{"line":147,"column":74}},"78":{"start":{"line":150,"column":4},"end":{"line":150,"column":66}},"79":{"start":{"line":152,"column":4},"end":{"line":199,"column":5}},"80":{"start":{"line":153,"column":6},"end":{"line":176,"column":9}},"81":{"start":{"line":154,"column":8},"end":{"line":175,"column":9}},"82":{"start":{"line":155,"column":10},"end":{"line":174,"column":11}},"83":{"start":{"line":156,"column":26},"end":{"line":156,"column":69}},"84":{"start":{"line":158,"column":25},"end":{"line":158,"column":63}},"85":{"start":{"line":159,"column":26},"end":{"line":159,"column":47}},"86":{"start":{"line":162,"column":12},"end":{"line":167,"column":13}},"87":{"start":{"line":163,"column":14},"end":{"line":166,"column":15}},"88":{"start":{"line":164,"column":16},"end":{"line":164,"column":118}},"89":{"start":{"line":165,"column":16},"end":{"line":165,"column":127}},"90":{"start":{"line":169,"column":12},"end":{"line":169,"column":37}},"91":{"start":{"line":170,"column":12},"end":{"line":170,"column":78}},"92":{"start":{"line":172,"column":12},"end":{"line":172,"column":36}},"93":{"start":{"line":173,"column":12},"end":{"line":173,"column":114}},"94":{"start":{"line":178,"column":6},"end":{"line":198,"column":7}},"95":{"start":{"line":179,"column":8},"end":{"line":197,"column":9}},"96":{"start":{"line":180,"column":24},"end":{"line":180,"column":70}},"97":{"start":{"line":182,"column":23},"end":{"line":182,"column":61}},"98":{"start":{"line":185,"column":10},"end":{"line":190,"column":11}},"99":{"start":{"line":186,"column":12},"end":{"line":189,"column":13}},"100":{"start":{"line":187,"column":14},"end":{"line":187,"column":119}},"101":{"start":{"line":188,"column":14},"end":{"line":188,"column":128}},"102":{"start":{"line":192,"column":10},"end":{"line":192,"column":38}},"103":{"start":{"line":193,"column":10},"end":{"line":193,"column":75}},"104":{"start":{"line":195,"column":10},"end":{"line":195,"column":37}},"105":{"start":{"line":196,"column":10},"end":{"line":196,"column":114}},"106":{"start":{"line":201,"column":4},"end":{"line":201,"column":79}},"107":{"start":{"line":203,"column":2},"end":{"line":203,"column":14}},"108":{"start":{"line":207,"column":18},"end":{"line":207,"column":55}},"109":{"start":{"line":208,"column":16},"end":{"line":208,"column":37}},"110":{"start":{"line":210,"column":2},"end":{"line":226,"column":3}},"111":{"start":{"line":211,"column":4},"end":{"line":225,"column":7}},"112":{"start":{"line":212,"column":27},"end":{"line":212,"column":48}},"113":{"start":{"line":213,"column":6},"end":{"line":224,"column":9}},"114":{"start":{"line":214,"column":27},"end":{"line":214,"column":56}},"115":{"start":{"line":216,"column":8},"end":{"line":223,"column":9}},"116":{"start":{"line":217,"column":23},"end":{"line":217,"column":70}},"117":{"start":{"line":219,"column":23},"end":{"line":219,"column":70}},"118":{"start":{"line":221,"column":24},"end":{"line":221,"column":92}},"119":{"start":{"line":222,"column":10},"end":{"line":222,"column":93}},"120":{"start":{"line":228,"column":2},"end":{"line":228,"column":14}},"121":{"start":{"line":232,"column":13},"end":{"line":232,"column":83}},"122":{"start":{"line":233,"column":13},"end":{"line":233,"column":15}},"123":{"start":{"line":235,"column":2},"end":{"line":235,"column":71}},"124":{"start":{"line":236,"column":2},"end":{"line":236,"column":60}},"125":{"start":{"line":237,"column":2},"end":{"line":237,"column":41}},"126":{"start":{"line":239,"column":2},"end":{"line":241,"column":3}},"127":{"start":{"line":240,"column":4},"end":{"line":240,"column":37}},"128":{"start":{"line":243,"column":2},"end":{"line":243,"column":114}},"129":{"start":{"line":245,"column":2},"end":{"line":252,"column":3}},"130":{"start":{"line":246,"column":4},"end":{"line":246,"column":58}},"131":{"start":{"line":247,"column":4},"end":{"line":247,"column":63}},"132":{"start":{"line":248,"column":4},"end":{"line":248,"column":51}},"133":{"start":{"line":249,"column":4},"end":{"line":249,"column":50}},"134":{"start":{"line":251,"column":4},"end":{"line":251,"column":72}},"135":{"start":{"line":255,"column":2},"end":{"line":255,"column":70}},"136":{"start":{"line":256,"column":2},"end":{"line":256,"column":14}},"137":{"start":{"line":260,"column":11},"end":{"line":260,"column":13}},"138":{"start":{"line":262,"column":2},"end":{"line":266,"column":3}},"139":{"start":{"line":263,"column":4},"end":{"line":263,"column":62}},"140":{"start":{"line":265,"column":4},"end":{"line":265,"column":31}},"141":{"start":{"line":268,"column":2},"end":{"line":280,"column":3}},"142":{"start":{"line":269,"column":4},"end":{"line":279,"column":5}},"143":{"start":{"line":270,"column":6},"end":{"line":272,"column":7}},"144":{"start":{"line":271,"column":8},"end":{"line":271,"column":66}},"145":{"start":{"line":274,"column":6},"end":{"line":278,"column":9}},"146":{"start":{"line":275,"column":8},"end":{"line":277,"column":9}},"147":{"start":{"line":276,"column":10},"end":{"line":276,"column":63}},"148":{"start":{"line":282,"column":2},"end":{"line":284,"column":3}},"149":{"start":{"line":283,"column":4},"end":{"line":283,"column":63}},"150":{"start":{"line":286,"column":2},"end":{"line":286,"column":12}},"151":{"start":{"line":301,"column":11},"end":{"line":301,"column":13}},"152":{"start":{"line":305,"column":2},"end":{"line":321,"column":3}},"153":{"start":{"line":307,"column":6},"end":{"line":307,"column":73}},"154":{"start":{"line":308,"column":6},"end":{"line":308,"column":75}},"155":{"start":{"line":309,"column":6},"end":{"line":309,"column":36}},"156":{"start":{"line":310,"column":6},"end":{"line":310,"column":12}},"157":{"start":{"line":313,"column":6},"end":{"line":313,"column":73}},"158":{"start":{"line":314,"column":6},"end":{"line":314,"column":75}},"159":{"start":{"line":315,"column":6},"end":{"line":315,"column":36}},"160":{"start":{"line":316,"column":6},"end":{"line":316,"column":12}},"161":{"start":{"line":319,"column":6},"end":{"line":319,"column":38}},"162":{"start":{"line":320,"column":6},"end":{"line":320,"column":12}},"163":{"start":{"line":323,"column":2},"end":{"line":323,"column":12}},"164":{"start":{"line":327,"column":18},"end":{"line":327,"column":20}},"165":{"start":{"line":328,"column":10},"end":{"line":341,"column":4}},"166":{"start":{"line":329,"column":4},"end":{"line":339,"column":7}},"167":{"start":{"line":330,"column":21},"end":{"line":330,"column":67}},"168":{"start":{"line":332,"column":6},"end":{"line":332,"column":73}},"169":{"start":{"line":333,"column":17},"end":{"line":333,"column":172}},"170":{"start":{"line":334,"column":6},"end":{"line":338,"column":9}},"171":{"start":{"line":340,"column":4},"end":{"line":340,"column":23}},"172":{"start":{"line":342,"column":2},"end":{"line":342,"column":11}},"173":{"start":{"line":346,"column":11},"end":{"line":346,"column":13}},"174":{"start":{"line":348,"column":16},"end":{"line":348,"column":57}},"175":{"start":{"line":350,"column":2},"end":{"line":370,"column":5}},"176":{"start":{"line":351,"column":14},"end":{"line":351,"column":55}},"177":{"start":{"line":353,"column":15},"end":{"line":353,"column":60}},"178":{"start":{"line":355,"column":4},"end":{"line":369,"column":5}},"179":{"start":{"line":357,"column":22},"end":{"line":357,"column":74}},"180":{"start":{"line":359,"column":8},"end":{"line":363,"column":9}},"181":{"start":{"line":360,"column":10},"end":{"line":362,"column":13}},"182":{"start":{"line":361,"column":12},"end":{"line":361,"column":28}},"183":{"start":{"line":365,"column":8},"end":{"line":367,"column":9}},"184":{"start":{"line":366,"column":10},"end":{"line":366,"column":87}},"185":{"start":{"line":371,"column":2},"end":{"line":371,"column":12}},"186":{"start":{"line":375,"column":18},"end":{"line":375,"column":20}},"187":{"start":{"line":376,"column":10},"end":{"line":385,"column":4}},"188":{"start":{"line":377,"column":4},"end":{"line":379,"column":7}},"189":{"start":{"line":378,"column":6},"end":{"line":378,"column":94}},"190":{"start":{"line":380,"column":4},"end":{"line":383,"column":7}},"191":{"start":{"line":381,"column":6},"end":{"line":381,"column":46}},"192":{"start":{"line":382,"column":6},"end":{"line":382,"column":44}},"193":{"start":{"line":384,"column":4},"end":{"line":384,"column":23}},"194":{"start":{"line":386,"column":2},"end":{"line":386,"column":11}},"195":{"start":{"line":390,"column":16},"end":{"line":390,"column":71}},"196":{"start":{"line":392,"column":2},"end":{"line":394,"column":3}},"197":{"start":{"line":393,"column":4},"end":{"line":393,"column":86}},"198":{"start":{"line":396,"column":2},"end":{"line":396,"column":22}},"199":{"start":{"line":400,"column":14},"end":{"line":400,"column":16}},"200":{"start":{"line":401,"column":2},"end":{"line":409,"column":5}},"201":{"start":{"line":402,"column":23},"end":{"line":402,"column":97}},"202":{"start":{"line":404,"column":22},"end":{"line":404,"column":77}},"203":{"start":{"line":406,"column":14},"end":{"line":406,"column":61}},"204":{"start":{"line":408,"column":4},"end":{"line":408,"column":40}},"205":{"start":{"line":410,"column":2},"end":{"line":410,"column":15}},"206":{"start":{"line":419,"column":16},"end":{"line":419,"column":70}},"207":{"start":{"line":421,"column":2},"end":{"line":423,"column":3}},"208":{"start":{"line":422,"column":4},"end":{"line":422,"column":136}},"209":{"start":{"line":425,"column":2},"end":{"line":425,"column":22}},"210":{"start":{"line":438,"column":32},"end":{"line":438,"column":34}},"211":{"start":{"line":439,"column":2},"end":{"line":445,"column":5}},"212":{"start":{"line":440,"column":23},"end":{"line":440,"column":103}},"213":{"start":{"line":442,"column":4},"end":{"line":442,"column":86}},"214":{"start":{"line":443,"column":4},"end":{"line":443,"column":116}},"215":{"start":{"line":444,"column":4},"end":{"line":444,"column":47}},"216":{"start":{"line":446,"column":2},"end":{"line":446,"column":33}},"217":{"start":{"line":450,"column":18},"end":{"line":450,"column":58}},"218":{"start":{"line":451,"column":15},"end":{"line":454,"column":3}},"219":{"start":{"line":455,"column":2},"end":{"line":455,"column":93}},"220":{"start":{"line":457,"column":22},"end":{"line":457,"column":102}},"221":{"start":{"line":459,"column":2},"end":{"line":471,"column":5}},"222":{"start":{"line":460,"column":25},"end":{"line":460,"column":109}},"223":{"start":{"line":462,"column":4},"end":{"line":462,"column":76}},"224":{"start":{"line":462,"column":31},"end":{"line":462,"column":76}},"225":{"start":{"line":464,"column":15},"end":{"line":464,"column":104}},"226":{"start":{"line":466,"column":19},"end":{"line":469,"column":5}},"227":{"start":{"line":470,"column":4},"end":{"line":470,"column":36}},"228":{"start":{"line":472,"column":2},"end":{"line":472,"column":16}}},"fnMap":{"0":{"name":"getTemplatesAndPartials","decl":{"start":{"line":37,"column":9},"end":{"line":37,"column":32}},"loc":{"start":{"line":37,"column":62},"end":{"line":52,"column":1}},"line":37},"1":{"name":"(anonymous_1)","decl":{"start":{"line":39,"column":32},"end":{"line":39,"column":33}},"loc":{"start":{"line":39,"column":51},"end":{"line":50,"column":3}},"line":39},"2":{"name":"(anonymous_2)","decl":{"start":{"line":41,"column":74},"end":{"line":41,"column":75}},"loc":{"start":{"line":41,"column":91},"end":{"line":47,"column":5}},"line":41},"3":{"name":"(anonymous_3)","decl":{"start":{"line":43,"column":75},"end":{"line":43,"column":76}},"loc":{"start":{"line":43,"column":92},"end":{"line":46,"column":7}},"line":43},"4":{"name":"(anonymous_4)","decl":{"start":{"line":47,"column":16},"end":{"line":47,"column":17}},"loc":{"start":{"line":47,"column":29},"end":{"line":49,"column":5}},"line":47},"5":{"name":"addOrder","decl":{"start":{"line":54,"column":9},"end":{"line":54,"column":17}},"loc":{"start":{"line":54,"column":24},"end":{"line":112,"column":1}},"line":54},"6":{"name":"(anonymous_6)","decl":{"start":{"line":64,"column":42},"end":{"line":64,"column":43}},"loc":{"start":{"line":64,"column":59},"end":{"line":84,"column":5}},"line":64},"7":{"name":"(anonymous_7)","decl":{"start":{"line":88,"column":43},"end":{"line":88,"column":44}},"loc":{"start":{"line":88,"column":58},"end":{"line":95,"column":5}},"line":88},"8":{"name":"(anonymous_8)","decl":{"start":{"line":97,"column":42},"end":{"line":97,"column":43}},"loc":{"start":{"line":97,"column":59},"end":{"line":108,"column":5}},"line":97},"9":{"name":"getAbeImport","decl":{"start":{"line":114,"column":9},"end":{"line":114,"column":21}},"loc":{"start":{"line":114,"column":28},"end":{"line":124,"column":1}},"line":114},"10":{"name":"includePartials","decl":{"start":{"line":134,"column":9},"end":{"line":134,"column":24}},"loc":{"start":{"line":134,"column":37},"end":{"line":204,"column":1}},"line":134},"11":{"name":"(anonymous_11)","decl":{"start":{"line":138,"column":43},"end":{"line":138,"column":44}},"loc":{"start":{"line":138,"column":64},"end":{"line":202,"column":3}},"line":138},"12":{"name":"(anonymous_12)","decl":{"start":{"line":153,"column":41},"end":{"line":153,"column":42}},"loc":{"start":{"line":153,"column":54},"end":{"line":176,"column":7}},"line":153},"13":{"name":"translate","decl":{"start":{"line":206,"column":9},"end":{"line":206,"column":18}},"loc":{"start":{"line":206,"column":25},"end":{"line":229,"column":1}},"line":206},"14":{"name":"(anonymous_14)","decl":{"start":{"line":211,"column":42},"end":{"line":211,"column":43}},"loc":{"start":{"line":211,"column":59},"end":{"line":225,"column":5}},"line":211},"15":{"name":"(anonymous_15)","decl":{"start":{"line":213,"column":51},"end":{"line":213,"column":52}},"loc":{"start":{"line":213,"column":75},"end":{"line":224,"column":7}},"line":213},"16":{"name":"getTemplate","decl":{"start":{"line":231,"column":9},"end":{"line":231,"column":20}},"loc":{"start":{"line":231,"column":27},"end":{"line":257,"column":1}},"line":231},"17":{"name":"getVariablesInWhere","decl":{"start":{"line":259,"column":9},"end":{"line":259,"column":28}},"loc":{"start":{"line":259,"column":36},"end":{"line":287,"column":1}},"line":259},"18":{"name":"(anonymous_18)","decl":{"start":{"line":274,"column":32},"end":{"line":274,"column":33}},"loc":{"start":{"line":274,"column":49},"end":{"line":278,"column":7}},"line":274},"19":{"name":"recurseWhereVariables","decl":{"start":{"line":300,"column":9},"end":{"line":300,"column":30}},"loc":{"start":{"line":300,"column":38},"end":{"line":324,"column":1}},"line":300},"20":{"name":"getTemplatesTexts","decl":{"start":{"line":326,"column":9},"end":{"line":326,"column":26}},"loc":{"start":{"line":326,"column":48},"end":{"line":343,"column":1}},"line":326},"21":{"name":"(anonymous_21)","decl":{"start":{"line":328,"column":32},"end":{"line":328,"column":33}},"loc":{"start":{"line":328,"column":51},"end":{"line":341,"column":3}},"line":328},"22":{"name":"(anonymous_22)","decl":{"start":{"line":329,"column":48},"end":{"line":329,"column":49}},"loc":{"start":{"line":329,"column":64},"end":{"line":339,"column":5}},"line":329},"23":{"name":"execRequestColumns","decl":{"start":{"line":345,"column":9},"end":{"line":345,"column":27}},"loc":{"start":{"line":345,"column":33},"end":{"line":372,"column":1}},"line":345},"24":{"name":"(anonymous_24)","decl":{"start":{"line":350,"column":40},"end":{"line":350,"column":41}},"loc":{"start":{"line":350,"column":57},"end":{"line":370,"column":3}},"line":350},"25":{"name":"(anonymous_25)","decl":{"start":{"line":360,"column":56},"end":{"line":360,"column":57}},"loc":{"start":{"line":360,"column":74},"end":{"line":362,"column":11}},"line":360},"26":{"name":"getAbeRequestWhereKeysFromTemplates","decl":{"start":{"line":374,"column":9},"end":{"line":374,"column":44}},"loc":{"start":{"line":374,"column":60},"end":{"line":387,"column":1}},"line":374},"27":{"name":"(anonymous_27)","decl":{"start":{"line":376,"column":32},"end":{"line":376,"column":33}},"loc":{"start":{"line":376,"column":51},"end":{"line":385,"column":3}},"line":376},"28":{"name":"(anonymous_28)","decl":{"start":{"line":377,"column":48},"end":{"line":377,"column":49}},"loc":{"start":{"line":377,"column":64},"end":{"line":379,"column":5}},"line":377},"29":{"name":"(anonymous_29)","decl":{"start":{"line":380,"column":33},"end":{"line":380,"column":34}},"loc":{"start":{"line":380,"column":54},"end":{"line":383,"column":5}},"line":380},"30":{"name":"setAbeSlugDefaultValueIfDoesntExist","decl":{"start":{"line":389,"column":9},"end":{"line":389,"column":44}},"loc":{"start":{"line":389,"column":59},"end":{"line":397,"column":1}},"line":389},"31":{"name":"getAbeSlugFromTemplates","decl":{"start":{"line":399,"column":9},"end":{"line":399,"column":32}},"loc":{"start":{"line":399,"column":48},"end":{"line":411,"column":1}},"line":399},"32":{"name":"(anonymous_32)","decl":{"start":{"line":401,"column":46},"end":{"line":401,"column":47}},"loc":{"start":{"line":401,"column":62},"end":{"line":409,"column":3}},"line":401},"33":{"name":"setAbePrecontribDefaultValueIfDoesntExist","decl":{"start":{"line":418,"column":9},"end":{"line":418,"column":50}},"loc":{"start":{"line":418,"column":65},"end":{"line":426,"column":1}},"line":418},"34":{"name":"getAbePrecontribFromTemplates","decl":{"start":{"line":437,"column":9},"end":{"line":437,"column":38}},"loc":{"start":{"line":437,"column":54},"end":{"line":447,"column":1}},"line":437},"35":{"name":"(anonymous_35)","decl":{"start":{"line":439,"column":46},"end":{"line":439,"column":47}},"loc":{"start":{"line":439,"column":62},"end":{"line":445,"column":3}},"line":439},"36":{"name":"getStructureAndTemplates","decl":{"start":{"line":449,"column":9},"end":{"line":449,"column":33}},"loc":{"start":{"line":449,"column":36},"end":{"line":473,"column":1}},"line":449},"37":{"name":"(anonymous_37)","decl":{"start":{"line":459,"column":46},"end":{"line":459,"column":47}},"loc":{"start":{"line":459,"column":70},"end":{"line":471,"column":3}},"line":459}},"branchMap":{"0":{"loc":{"start":{"line":58,"column":2},"end":{"line":109,"column":3}},"type":"if","locations":[{"start":{"line":58,"column":2},"end":{"line":109,"column":3}},{"start":{"line":58,"column":2},"end":{"line":109,"column":3}}],"line":58},"1":{"loc":{"start":{"line":58,"column":6},"end":{"line":58,"column":56}},"type":"binary-expr","locations":[{"start":{"line":58,"column":6},"end":{"line":58,"column":36}},{"start":{"line":58,"column":40},"end":{"line":58,"column":56}}],"line":58},"2":{"loc":{"start":{"line":65,"column":6},"end":{"line":83,"column":7}},"type":"if","locations":[{"start":{"line":65,"column":6},"end":{"line":83,"column":7}},{"start":{"line":65,"column":6},"end":{"line":83,"column":7}}],"line":65},"3":{"loc":{"start":{"line":65,"column":10},"end":{"line":65,"column":56}},"type":"binary-expr","locations":[{"start":{"line":65,"column":10},"end":{"line":65,"column":38}},{"start":{"line":65,"column":42},"end":{"line":65,"column":56}}],"line":65},"4":{"loc":{"start":{"line":70,"column":8},"end":{"line":82,"column":9}},"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":82,"column":9}},{"start":{"line":70,"column":8},"end":{"line":82,"column":9}}],"line":70},"5":{"loc":{"start":{"line":70,"column":12},"end":{"line":70,"column":86}},"type":"binary-expr","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":44}},{"start":{"line":70,"column":48},"end":{"line":70,"column":66}},{"start":{"line":70,"column":70},"end":{"line":70,"column":86}}],"line":70},"6":{"loc":{"start":{"line":89,"column":6},"end":{"line":94,"column":7}},"type":"if","locations":[{"start":{"line":89,"column":6},"end":{"line":94,"column":7}},{"start":{"line":89,"column":6},"end":{"line":94,"column":7}}],"line":89},"7":{"loc":{"start":{"line":98,"column":6},"end":{"line":107,"column":7}},"type":"if","locations":[{"start":{"line":98,"column":6},"end":{"line":107,"column":7}},{"start":{"line":98,"column":6},"end":{"line":107,"column":7}}],"line":98},"8":{"loc":{"start":{"line":98,"column":10},"end":{"line":98,"column":56}},"type":"binary-expr","locations":[{"start":{"line":98,"column":10},"end":{"line":98,"column":38}},{"start":{"line":98,"column":42},"end":{"line":98,"column":56}}],"line":98},"9":{"loc":{"start":{"line":103,"column":8},"end":{"line":106,"column":9}},"type":"if","locations":[{"start":{"line":103,"column":8},"end":{"line":106,"column":9}},{"start":{"line":103,"column":8},"end":{"line":106,"column":9}}],"line":103},"10":{"loc":{"start":{"line":103,"column":12},"end":{"line":103,"column":86}},"type":"binary-expr","locations":[{"start":{"line":103,"column":12},"end":{"line":103,"column":44}},{"start":{"line":103,"column":48},"end":{"line":103,"column":66}},{"start":{"line":103,"column":70},"end":{"line":103,"column":86}}],"line":103},"11":{"loc":{"start":{"line":137,"column":25},"end":{"line":137,"column":47}},"type":"binary-expr","locations":[{"start":{"line":137,"column":25},"end":{"line":137,"column":41}},{"start":{"line":137,"column":45},"end":{"line":137,"column":47}}],"line":137},"12":{"loc":{"start":{"line":144,"column":4},"end":{"line":148,"column":5}},"type":"if","locations":[{"start":{"line":144,"column":4},"end":{"line":148,"column":5}},{"start":{"line":144,"column":4},"end":{"line":148,"column":5}}],"line":144},"13":{"loc":{"start":{"line":152,"column":4},"end":{"line":199,"column":5}},"type":"if","locations":[{"start":{"line":152,"column":4},"end":{"line":199,"column":5}},{"start":{"line":152,"column":4},"end":{"line":199,"column":5}}],"line":152},"14":{"loc":{"start":{"line":154,"column":8},"end":{"line":175,"column":9}},"type":"if","locations":[{"start":{"line":154,"column":8},"end":{"line":175,"column":9}},{"start":{"line":154,"column":8},"end":{"line":175,"column":9}}],"line":154},"15":{"loc":{"start":{"line":155,"column":10},"end":{"line":174,"column":11}},"type":"if","locations":[{"start":{"line":155,"column":10},"end":{"line":174,"column":11}},{"start":{"line":155,"column":10},"end":{"line":174,"column":11}}],"line":155},"16":{"loc":{"start":{"line":163,"column":14},"end":{"line":166,"column":15}},"type":"if","locations":[{"start":{"line":163,"column":14},"end":{"line":166,"column":15}},{"start":{"line":163,"column":14},"end":{"line":166,"column":15}}],"line":163},"17":{"loc":{"start":{"line":178,"column":6},"end":{"line":198,"column":7}},"type":"if","locations":[{"start":{"line":178,"column":6},"end":{"line":198,"column":7}},{"start":{"line":178,"column":6},"end":{"line":198,"column":7}}],"line":178},"18":{"loc":{"start":{"line":179,"column":8},"end":{"line":197,"column":9}},"type":"if","locations":[{"start":{"line":179,"column":8},"end":{"line":197,"column":9}},{"start":{"line":179,"column":8},"end":{"line":197,"column":9}}],"line":179},"19":{"loc":{"start":{"line":186,"column":12},"end":{"line":189,"column":13}},"type":"if","locations":[{"start":{"line":186,"column":12},"end":{"line":189,"column":13}},{"start":{"line":186,"column":12},"end":{"line":189,"column":13}}],"line":186},"20":{"loc":{"start":{"line":210,"column":2},"end":{"line":226,"column":3}},"type":"if","locations":[{"start":{"line":210,"column":2},"end":{"line":226,"column":3}},{"start":{"line":210,"column":2},"end":{"line":226,"column":3}}],"line":210},"21":{"loc":{"start":{"line":210,"column":6},"end":{"line":210,"column":56}},"type":"binary-expr","locations":[{"start":{"line":210,"column":6},"end":{"line":210,"column":36}},{"start":{"line":210,"column":40},"end":{"line":210,"column":56}}],"line":210},"22":{"loc":{"start":{"line":216,"column":8},"end":{"line":223,"column":9}},"type":"if","locations":[{"start":{"line":216,"column":8},"end":{"line":223,"column":9}},{"start":{"line":216,"column":8},"end":{"line":223,"column":9}}],"line":216},"23":{"loc":{"start":{"line":232,"column":13},"end":{"line":232,"column":83}},"type":"cond-expr","locations":[{"start":{"line":232,"column":66},"end":{"line":232,"column":78}},{"start":{"line":232,"column":81},"end":{"line":232,"column":83}}],"line":232},"24":{"loc":{"start":{"line":232,"column":13},"end":{"line":232,"column":63}},"type":"binary-expr","locations":[{"start":{"line":232,"column":13},"end":{"line":232,"column":33}},{"start":{"line":232,"column":37},"end":{"line":232,"column":63}}],"line":232},"25":{"loc":{"start":{"line":239,"column":2},"end":{"line":241,"column":3}},"type":"if","locations":[{"start":{"line":239,"column":2},"end":{"line":241,"column":3}},{"start":{"line":239,"column":2},"end":{"line":241,"column":3}}],"line":239},"26":{"loc":{"start":{"line":245,"column":2},"end":{"line":252,"column":3}},"type":"if","locations":[{"start":{"line":245,"column":2},"end":{"line":252,"column":3}},{"start":{"line":245,"column":2},"end":{"line":252,"column":3}}],"line":245},"27":{"loc":{"start":{"line":262,"column":2},"end":{"line":266,"column":3}},"type":"if","locations":[{"start":{"line":262,"column":2},"end":{"line":266,"column":3}},{"start":{"line":262,"column":2},"end":{"line":266,"column":3}}],"line":262},"28":{"loc":{"start":{"line":268,"column":2},"end":{"line":280,"column":3}},"type":"if","locations":[{"start":{"line":268,"column":2},"end":{"line":280,"column":3}},{"start":{"line":268,"column":2},"end":{"line":280,"column":3}}],"line":268},"29":{"loc":{"start":{"line":269,"column":4},"end":{"line":279,"column":5}},"type":"if","locations":[{"start":{"line":269,"column":4},"end":{"line":279,"column":5}},{"start":{"line":269,"column":4},"end":{"line":279,"column":5}}],"line":269},"30":{"loc":{"start":{"line":270,"column":6},"end":{"line":272,"column":7}},"type":"if","locations":[{"start":{"line":270,"column":6},"end":{"line":272,"column":7}},{"start":{"line":270,"column":6},"end":{"line":272,"column":7}}],"line":270},"31":{"loc":{"start":{"line":270,"column":10},"end":{"line":270,"column":67}},"type":"binary-expr","locations":[{"start":{"line":270,"column":10},"end":{"line":270,"column":27}},{"start":{"line":270,"column":31},"end":{"line":270,"column":67}}],"line":270},"32":{"loc":{"start":{"line":275,"column":8},"end":{"line":277,"column":9}},"type":"if","locations":[{"start":{"line":275,"column":8},"end":{"line":277,"column":9}},{"start":{"line":275,"column":8},"end":{"line":277,"column":9}}],"line":275},"33":{"loc":{"start":{"line":282,"column":2},"end":{"line":284,"column":3}},"type":"if","locations":[{"start":{"line":282,"column":2},"end":{"line":284,"column":3}},{"start":{"line":282,"column":2},"end":{"line":284,"column":3}}],"line":282},"34":{"loc":{"start":{"line":282,"column":6},"end":{"line":282,"column":65}},"type":"binary-expr","locations":[{"start":{"line":282,"column":6},"end":{"line":282,"column":24}},{"start":{"line":282,"column":28},"end":{"line":282,"column":65}}],"line":282},"35":{"loc":{"start":{"line":305,"column":2},"end":{"line":321,"column":3}},"type":"switch","locations":[{"start":{"line":306,"column":4},"end":{"line":310,"column":12}},{"start":{"line":312,"column":4},"end":{"line":316,"column":12}},{"start":{"line":318,"column":4},"end":{"line":320,"column":12}}],"line":305},"36":{"loc":{"start":{"line":355,"column":4},"end":{"line":369,"column":5}},"type":"switch","locations":[{"start":{"line":356,"column":6},"end":{"line":367,"column":9}}],"line":355},"37":{"loc":{"start":{"line":359,"column":8},"end":{"line":363,"column":9}},"type":"if","locations":[{"start":{"line":359,"column":8},"end":{"line":363,"column":9}},{"start":{"line":359,"column":8},"end":{"line":363,"column":9}}],"line":359},"38":{"loc":{"start":{"line":359,"column":12},"end":{"line":359,"column":78}},"type":"binary-expr","locations":[{"start":{"line":359,"column":12},"end":{"line":359,"column":50}},{"start":{"line":359,"column":54},"end":{"line":359,"column":78}}],"line":359},"39":{"loc":{"start":{"line":365,"column":8},"end":{"line":367,"column":9}},"type":"if","locations":[{"start":{"line":365,"column":8},"end":{"line":367,"column":9}},{"start":{"line":365,"column":8},"end":{"line":367,"column":9}}],"line":365},"40":{"loc":{"start":{"line":365,"column":12},"end":{"line":365,"column":74}},"type":"binary-expr","locations":[{"start":{"line":365,"column":12},"end":{"line":365,"column":48}},{"start":{"line":365,"column":52},"end":{"line":365,"column":74}}],"line":365},"41":{"loc":{"start":{"line":392,"column":2},"end":{"line":394,"column":3}},"type":"if","locations":[{"start":{"line":392,"column":2},"end":{"line":394,"column":3}},{"start":{"line":392,"column":2},"end":{"line":394,"column":3}}],"line":392},"42":{"loc":{"start":{"line":392,"column":6},"end":{"line":392,"column":43}},"type":"binary-expr","locations":[{"start":{"line":392,"column":6},"end":{"line":392,"column":21}},{"start":{"line":392,"column":25},"end":{"line":392,"column":43}}],"line":392},"43":{"loc":{"start":{"line":421,"column":2},"end":{"line":423,"column":3}},"type":"if","locations":[{"start":{"line":421,"column":2},"end":{"line":423,"column":3}},{"start":{"line":421,"column":2},"end":{"line":423,"column":3}}],"line":421},"44":{"loc":{"start":{"line":421,"column":6},"end":{"line":421,"column":43}},"type":"binary-expr","locations":[{"start":{"line":421,"column":6},"end":{"line":421,"column":21}},{"start":{"line":421,"column":25},"end":{"line":421,"column":43}}],"line":421},"45":{"loc":{"start":{"line":462,"column":4},"end":{"line":462,"column":76}},"type":"if","locations":[{"start":{"line":462,"column":4},"end":{"line":462,"column":76}},{"start":{"line":462,"column":4},"end":{"line":462,"column":76}}],"line":462}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":23,"25":23,"26":23,"27":23,"28":23,"29":23,"30":23,"31":23,"32":0,"33":23,"34":3,"35":3,"36":3,"37":3,"38":3,"39":3,"40":3,"41":3,"42":10,"43":10,"44":10,"45":10,"46":6,"47":6,"48":4,"49":4,"50":3,"51":3,"52":10,"53":6,"54":6,"55":4,"56":3,"57":10,"58":10,"59":10,"60":10,"61":6,"62":6,"63":3,"64":759,"65":759,"66":759,"67":94,"68":759,"69":760,"70":760,"71":760,"72":94,"73":94,"74":94,"75":94,"76":0,"77":94,"78":94,"79":94,"80":1,"81":2,"82":2,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":2,"93":2,"94":93,"95":93,"96":23,"97":23,"98":23,"99":0,"100":0,"101":0,"102":23,"103":23,"104":70,"105":70,"106":94,"107":760,"108":2,"109":2,"110":2,"111":1,"112":1,"113":1,"114":2,"115":2,"116":1,"117":1,"118":1,"119":1,"120":2,"121":2,"122":2,"123":2,"124":2,"125":2,"126":2,"127":0,"128":2,"129":2,"130":2,"131":2,"132":2,"133":2,"134":0,"135":2,"136":2,"137":46,"138":46,"139":0,"140":46,"141":46,"142":46,"143":2,"144":0,"145":44,"146":66,"147":22,"148":46,"149":0,"150":46,"151":45,"152":45,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":45,"162":45,"163":45,"164":23,"165":23,"166":23,"167":661,"168":661,"169":661,"170":661,"171":23,"172":23,"173":661,"174":661,"175":661,"176":199,"177":199,"178":199,"179":133,"180":133,"181":133,"182":243,"183":133,"184":45,"185":661,"186":23,"187":23,"188":23,"189":661,"190":23,"191":309,"192":309,"193":23,"194":23,"195":661,"196":661,"197":639,"198":661,"199":23,"200":23,"201":661,"202":661,"203":661,"204":661,"205":23,"206":662,"207":662,"208":639,"209":662,"210":23,"211":23,"212":661,"213":661,"214":661,"215":661,"216":23,"217":24,"218":24,"219":24,"220":24,"221":24,"222":645,"223":645,"224":1,"225":645,"226":645,"227":645,"228":24},"f":{"0":23,"1":23,"2":23,"3":23,"4":0,"5":3,"6":10,"7":10,"8":10,"9":759,"10":760,"11":94,"12":2,"13":2,"14":1,"15":2,"16":2,"17":46,"18":66,"19":45,"20":23,"21":23,"22":661,"23":661,"24":199,"25":243,"26":23,"27":23,"28":661,"29":309,"30":661,"31":23,"32":661,"33":662,"34":23,"35":661,"36":24,"37":645},"b":{"0":[3,0],"1":[3,3],"2":[10,0],"3":[10,10],"4":[6,4],"5":[10,10,9],"6":[6,4],"7":[10,0],"8":[10,10],"9":[6,4],"10":[10,10,9],"11":[760,760],"12":[0,94],"13":[1,93],"14":[2,0],"15":[0,2],"16":[0,0],"17":[93,0],"18":[23,70],"19":[0,0],"20":[1,1],"21":[2,2],"22":[1,1],"23":[0,2],"24":[2,0],"25":[0,2],"26":[2,0],"27":[0,46],"28":[46,0],"29":[2,44],"30":[0,2],"31":[2,2],"32":[22,44],"33":[0,46],"34":[46,0],"35":[0,0,45],"36":[133],"37":[133,0],"38":[133,133],"39":[45,88],"40":[133,133],"41":[639,22],"42":[661,660],"43":[639,23],"44":[662,661],"45":[1,644]},"inputSourceMap":{"version":3,"sources":["template.js"],"names":["getTemplatesAndPartials","templatesPath","partialsPath","allFiles","p","Promise","resolve","extension","config","files","templates","coreUtils","file","getFiles","then","concat","e","console","log","stack","addOrder","text","regAbe","matches","match","orderTab","arrayKey","max","negIndex","Array","prototype","forEach","call","orderAttr","cmsData","regex","getAttr","keyAttr","push","key","order","Math","parseInt","sort","predicatBy","obj","matchOrder","replace","getAbeImport","partials","listReg","exec","includePartials","json","abeImports","cmsTemplates","template","duplicateImports","abeImport","attributes","getAll","partial","charAt","path","join","root","Manager","instance","pathPartials","getValueFromAttribute","Object","toString","f","exist","tmpFile","fse","readFileSync","RegExp","escapeTextToRegex","translate","importReg","splitedMatches","split","splitedMatch","currentMatch","test","locale","source","getTemplate","abeExtend","hooks","trigger","pathTemplates","indexOf","getVariablesInWhere","where","ar","left","column","right","value","recurseWhereVariables","arLeft","arRight","operator","getTemplatesTexts","templatesList","name","sep","execRequestColumns","tpl","getTagAbeTypeRequest","type","sql","getSourceType","sourceString","request","handleSqlRequest","columns","getAbeRequestWhereKeysFromTemplates","whereKeys","filter","item","pos","setAbeSlugDefaultValueIfDoesntExist","templateText","getTagAbeWithType","getAbeSlugFromTemplates","slugs","matchesSlug","setAbePrecontribDefaultValueIfDoesntExist","getTagAbeWithTab","getAbePrecontribFromTemplates","precontributionTemplate","getStructureAndTemplates","result","structure","getFoldersSync","pathStructure","templatePaths","getFilesSync","templatePath","additionalPath","dirname","substring","basename"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/","sourcesContent":["import fse from 'fs-extra'\nimport {Promise} from 'bluebird'\nimport path from 'path'\nimport {\n  config,\n  Manager,\n  coreUtils,\n  cmsData,\n  abeExtend,\n  cmsTemplates\n} from '../../'\nimport * as sourceAttr from '../../cms/editor/handlebars/sourceAttr'\n\nexport function getTemplatesAndPartials(templatesPath, partialsPath) {\n  let allFiles = []\n  var p = new Promise(resolve => {\n    const extension = '.' + config.files.templates.extension\n    return coreUtils.file\n      .getFiles(templatesPath, true, extension)\n      .then(function(files) {\n        allFiles = allFiles.concat(files)\n        return coreUtils.file\n          .getFiles(partialsPath, true, extension)\n          .then(function(files) {\n            allFiles = allFiles.concat(files)\n            return resolve(allFiles)\n          })\n      })\n      .catch(e => {\n        console.log('Error: template.getTemplatesAndPartials', e.stack)\n      })\n  })\n\n  return p\n}\n\nexport function addOrder(text) {\n  var regAbe = /{{abe[\\S\\s].*?key=['|\"]([\\S\\s].*?['|\"| ]}})/g\n  var matches = text.match(regAbe)\n\n  if (typeof matches !== 'undefined' && matches !== null) {\n    var orderTab = []\n    var arrayKey = []\n    var max = 0\n    var negIndex = -1\n\n    // We create an array of keys/order and put -1 for keys without order\n    Array.prototype.forEach.call(matches, match => {\n      if (typeof match !== 'undefined' && match !== null) {\n        var orderAttr = cmsData.regex.getAttr(match, 'order')\n        var keyAttr = cmsData.regex.getAttr(match, 'key')\n        if (\n          typeof orderAttr === 'undefined' ||\n          orderAttr === null ||\n          orderAttr === ''\n        ) {\n          orderTab.push({key: keyAttr, order: negIndex})\n          negIndex = negIndex - 1\n        } else {\n          max = Math.max(parseInt(orderAttr), max)\n          orderTab.push({key: keyAttr, order: orderAttr})\n        }\n      }\n    })\n\n    // We sort the array\n    orderTab.sort(coreUtils.sort.predicatBy('order', -1))\n\n    // And increment the not ordered ones beginning with the last order found + 1\n    Array.prototype.forEach.call(orderTab, obj => {\n      if (obj.order < 0) {\n        max = max + 1\n        arrayKey[obj.key] = max\n      } else {\n        arrayKey[obj.key] = parseInt(obj.order)\n      }\n    })\n\n    // Then we put order attribute to each abe tag not ordered\n    Array.prototype.forEach.call(matches, match => {\n      if (typeof match !== 'undefined' && match !== null) {\n        var orderAttr = cmsData.regex.getAttr(match, 'order')\n        var keyAttr = cmsData.regex.getAttr(match, 'key')\n        if (\n          typeof orderAttr === 'undefined' ||\n          orderAttr === null ||\n          orderAttr === ''\n        ) {\n          var matchOrder = match.replace(\n            /\\}\\}$/,\n            ` order='${arrayKey[keyAttr]}'}}`\n          )\n          text = text.replace(match, matchOrder)\n        }\n      }\n    })\n  }\n\n  return text\n}\n\nexport function getAbeImport(text) {\n  var partials = []\n  let listReg = /({{abe.*type=[\\'|\\\"]import.*}})/g\n  var match\n  while ((match = listReg.exec(text))) {\n    partials.push(match[0])\n  }\n\n  return partials\n}\n\n/**\n * it will include recursively each encountered type=import\n * and proceed to a foreach when the file={{some[]}} is an array of values\n * @param  {[type]} text [description]\n * @param  {[type]} json [description]\n * @return {[type]}      [description]\n */\nexport function includePartials(text, json) {\n  var abeImports = cmsTemplates.template.getAbeImport(text)\n  var duplicateImports = duplicateImports || []\n\n  Array.prototype.forEach.call(abeImports, abeImport => {\n    var obj = cmsData.attributes.getAll(abeImport, {})\n\n    var file = obj.file\n    var partial = ''\n    if (file.charAt(0) == '/') {\n      file = path.join(config.root, file)\n    } else {\n      file = path.join(Manager.instance.pathPartials, file)\n    }\n\n    file = cmsData.attributes.getValueFromAttribute(file, json)\n    if (Object.prototype.toString.call(file) === '[object Array]') {\n      Array.prototype.forEach.call(file, f => {\n        if (coreUtils.file.exist(f)) {\n          if (duplicateImports[f] != null) {\n            var tmpFile = fse.readFileSync(f, 'utf8')\n            var regAbe = /{{abe .*key=[\\'|\\\"](.*?)[\\'|\\\"].*}}/g\n            var matches = tmpFile.match(regAbe)\n            var match\n            while ((match = regAbe.exec(tmpFile)) !== null) {\n              if (match[1] != null) {\n                tmpFile = tmpFile.replace(\n                  match[0],\n                  match[0].replace(\n                    match[1],\n                    match[1] + '_' + duplicateImports[f]\n                  )\n                )\n                tmpFile = tmpFile.replace(\n                  new RegExp(`\\{\\{${match[1]}`, 'g'),\n                  '{{' + match[1] + '_' + duplicateImports[f]\n                )\n              }\n            }\n            duplicateImports[f] += 1\n            partial += cmsTemplates.template.includePartials(tmpFile, json)\n          } else {\n            duplicateImports[f] = 1\n            partial += cmsTemplates.template.includePartials(\n              fse.readFileSync(f, 'utf8'),\n              json\n            )\n          }\n        }\n      })\n    } else {\n      if (coreUtils.file.exist(file)) {\n        if (duplicateImports[file] != null) {\n          var tmpFile = fse.readFileSync(file, 'utf8')\n          var regAbe = /{{abe .*key=[\\'|\\\"](.*?)[\\'|\\\"].*}}/g\n          var match\n          while ((match = regAbe.exec(tmpFile)) !== null) {\n            if (match[1] != null) {\n              tmpFile = tmpFile.replace(\n                match[0],\n                match[0].replace(\n                  match[1],\n                  match[1] + '_' + duplicateImports[file]\n                )\n              )\n              tmpFile = tmpFile.replace(\n                new RegExp(`\\{\\{${match[1]}`, 'g'),\n                '{{' + match[1] + '_' + duplicateImports[file]\n              )\n            }\n          }\n\n          duplicateImports[file] += 1\n          partial = cmsTemplates.template.includePartials(tmpFile, json)\n        } else {\n          duplicateImports[file] = 1\n          partial = cmsTemplates.template.includePartials(\n            fse.readFileSync(file, 'utf8'),\n            json\n          )\n        }\n      }\n    }\n    text = text.replace(cmsData.regex.escapeTextToRegex(abeImport), partial)\n  })\n\n  return text\n}\n\nexport function translate(text) {\n  var importReg = /({{abe.*type=[\\'|\\\"]translate.*}})/g\n\n  var matches = text.match(importReg)\n\n  if (typeof matches !== 'undefined' && matches !== null) {\n    Array.prototype.forEach.call(matches, match => {\n      var splitedMatches = match.split('{{abe ')\n\n      Array.prototype.forEach.call(splitedMatches, splitedMatch => {\n        var currentMatch = `{{abe ${splitedMatch}`\n        if (/({{abe.*type=[\\'|\\\"]translate.*}})/.test(currentMatch)) {\n          var locale = cmsData.regex.getAttr(currentMatch, 'locale')\n          var source = cmsData.regex.getAttr(currentMatch, 'source')\n\n          var replace = `{{{i18nAbe \"${locale}\" \"${source}\" this}}}`\n\n          text = text.replace(\n            cmsData.regex.escapeTextToRegex(currentMatch, 'g'),\n            replace\n          )\n        }\n      })\n    })\n  }\n\n  return text\n}\n\nexport function getTemplate(file, json = {}) {\n  var text = ''\n\n  // HOOKS beforeGetTemplate\n  file = abeExtend.hooks.instance.trigger('beforeGetTemplate', file)\n\n  file = file.replace(Manager.instance.pathTemplates, '')\n  file = file.replace(config.root, '')\n  if (file.indexOf('.') > -1) {\n    file = file.replace(/\\..+$/, '')\n  }\n  file = path.join(\n    Manager.instance.pathTemplates,\n    file + '.' + config.files.templates.extension\n  )\n  if (coreUtils.file.exist(file)) {\n    text = fse.readFileSync(file, 'utf8')\n    text = cmsTemplates.template.includePartials(text, json)\n    text = cmsTemplates.template.translate(text)\n    text = cmsTemplates.template.addOrder(text)\n  } else {\n    text = `[ ERROR ] template ${file} doesn't exist anymore`\n  }\n\n  // HOOKS afterGetTemplate\n  text = abeExtend.hooks.instance.trigger('afterGetTemplate', text)\n\n  return text\n}\n\nexport function getVariablesInWhere(where) {\n  var ar = []\n\n  if (where.left.column.indexOf('{{') > -1) {\n    ar.push(where.left.column.replace(/\\{\\{(.*?)\\}\\}/, '$1'))\n  } else {\n    ar.push(where.left.column)\n  }\n\n  if (where.right.value) {\n    if (typeof where.right.value === 'string') {\n      if (where.right.value && where.right.value.indexOf('{{') > -1) {\n        ar.push(where.right.value.replace(/\\{\\{(.*?)\\}\\}/, '$1'))\n      }\n    } else {\n      where.right.value.forEach(function(value) {\n        if (value.column.indexOf('{{') > -1) {\n          ar.push(value.column.replace(/\\{\\{(.*?)\\}\\}/, '$1'))\n        }\n      })\n    }\n  }\n\n  if (where.right.column && where.right.column.indexOf('{{') > -1) {\n    ar.push(where.right.column.replace(/\\{\\{(.*?)\\}\\}/, '$1'))\n  }\n\n  return ar\n}\n\n/**\n * Get columns and where.left ids of a select statement\n *\n * select title, image from ../ where template=\"\"\n *\n * return [title, image, template]\n *\n * @param  {Array} templatesList [\"article.html\", \"other.html\"]\n * @return {Promise}\n */\nexport function recurseWhereVariables(where) {\n  var ar = []\n  var arLeft\n  var arRight\n  switch (where.operator) {\n    case 'AND':\n      arLeft = cmsTemplates.template.recurseWhereVariables(where.left)\n      arRight = cmsTemplates.template.recurseWhereVariables(where.right)\n      return arLeft.concat(arRight)\n      break\n    case 'OR':\n      arLeft = cmsTemplates.template.recurseWhereVariables(where.left)\n      arRight = cmsTemplates.template.recurseWhereVariables(where.right)\n      return arLeft.concat(arRight)\n      break\n    default:\n      ar = getVariablesInWhere(where)\n      break\n  }\n\n  return ar\n}\n\nexport function getTemplatesTexts(templatesList, json) {\n  var templates = []\n  var p = new Promise(resolve => {\n    Array.prototype.forEach.call(templatesList, file => {\n      var template = fse.readFileSync(file, 'utf8')\n      template = cmsTemplates.template.includePartials(template, json)\n      var name = file\n        .replace(path.join(Manager.instance.pathTemplates, path.sep), '')\n        .replace(`.${config.files.templates.extension}`, '')\n      templates.push({\n        name: name,\n        path: file,\n        template: template\n      })\n    })\n    resolve(templates)\n  })\n\n  return p\n}\n\nexport function execRequestColumns(tpl) {\n  var ar = []\n  var matches = cmsData.regex.getTagAbeTypeRequest(tpl)\n  Array.prototype.forEach.call(matches, match => {\n    var obj = cmsData.attributes.getAll(match[0], {})\n    var type = cmsData.sql.getSourceType(obj.sourceString)\n    switch (type) {\n      case 'request':\n        var request = cmsData.sql.handleSqlRequest(obj.sourceString, {})\n        if (\n          typeof request.columns !== 'undefined' &&\n          request.columns !== null\n        ) {\n          Array.prototype.forEach.call(request.columns, column => {\n            ar.push(column)\n          })\n        }\n        if (typeof request.where !== 'undefined' && request.where !== null) {\n          ar = ar.concat(\n            cmsTemplates.template.recurseWhereVariables(request.where)\n          )\n        }\n    }\n  })\n\n  return ar\n}\n\nexport function getAbeRequestWhereKeysFromTemplates(templatesList) {\n  var whereKeys = []\n  var p = new Promise(resolve => {\n    Array.prototype.forEach.call(templatesList, file => {\n      whereKeys = whereKeys.concat(\n        cmsTemplates.template.execRequestColumns(file.template)\n      )\n    })\n    whereKeys = whereKeys.filter(function(item, pos) {\n      item = item.split('.')[0].split('[')[0]\n      return whereKeys.indexOf(item) == pos\n    })\n    resolve(whereKeys)\n  })\n\n  return p\n}\n\nexport function setAbeSlugDefaultValueIfDoesntExist(templateText) {\n  var matches = cmsData.regex.getTagAbeWithType(templateText, 'slug')\n  if (matches == null || matches[0] == null) {\n    templateText = `{{abe type=\"slug\" source=\"{{name}}\"}}\\n${templateText}`\n  }\n\n  return templateText\n}\n\nexport function getAbeSlugFromTemplates(templatesList) {\n  var slugs = {}\n  Array.prototype.forEach.call(templatesList, file => {\n    var templateText = cmsTemplates.template.setAbeSlugDefaultValueIfDoesntExist(\n      file.template\n    )\n    var matchesSlug = cmsData.regex.getTagAbeWithType(templateText, 'slug')\n    var obj = cmsData.attributes.getAll(matchesSlug[0], {})\n    slugs[file.name] = obj.sourceString\n  })\n  return slugs\n}\n\n/**\n * if there is no abe tab='slug' in the template, add a default abe tag\n * @param {[type]} templateText [description]\n */\nexport function setAbePrecontribDefaultValueIfDoesntExist(templateText) {\n  var matches = cmsData.regex.getTagAbeWithTab(templateText, 'slug')\n  if (matches == null || matches[0] == null) {\n    templateText = `{{abe type='text' key='name' desc='Name' required=\"true\" tab=\"slug\" visible=\"false\"}}\\n${templateText}`\n  }\n\n  return templateText\n}\n\n/**\n * Lists all templates, in each template:\n * if no tab='slug' replaces the template with default tag {{abe type='text' key='name'...}}\n * then removes all abe tags (but the tab='slug' ones)\n * then adds 'precontribTemplate' with the template name as an attribute to tab='slug' tags\n * @param  {Array} templatesList [description]\n * @return {Array}              [description]\n */\nexport function getAbePrecontribFromTemplates(templatesList) {\n  var precontributionTemplate = []\n\n  Array.prototype.forEach.call(templatesList, file => {\n    var templateText = cmsTemplates.template.setAbePrecontribDefaultValueIfDoesntExist(\n      file.template\n    )\n    templateText = templateText.replace(\n      /(?!.*?tab=['|\"]slug)(\\{\\{abe.+.*\\}\\})/g,\n      ''\n    )\n    templateText = templateText.replace(\n      /(\\{\\{abe.+)(\\}\\})/g,\n      `$1 precontribTemplate=\"${file.name}\"$2`\n    )\n    precontributionTemplate.push(templateText)\n  })\n\n  return precontributionTemplate\n}\n\nexport function getStructureAndTemplates() {\n  const extension = '.' + config.files.templates.extension\n  let result = {structure: [], templates: []}\n\n  result.structure = coreUtils.file.getFoldersSync(\n    Manager.instance.pathStructure,\n    true\n  )\n  let templatePaths = coreUtils.file.getFilesSync(\n    Manager.instance.pathTemplates,\n    true,\n    extension\n  )\n  Array.prototype.forEach.call(templatePaths, templatePath => {\n    let additionalPath = path\n      .dirname(templatePath)\n      .replace(Manager.instance.pathTemplates, '')\n    if (additionalPath !== '') additionalPath = additionalPath.substring(1)\n    let name = path.join(additionalPath, path.basename(templatePath, extension))\n    let template = {path: templatePath, name: name}\n    result.templates.push(template)\n  })\n\n  return result\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"edd254f69d53444de75c6ae662c2dd79e9da56fb","contentHash":"58e90b6fceba83b2b3d74b9d48d234c188e01fea155ce65f19d777b1aad2b20e"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/sourceAttr.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/sourceAttr.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":32}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":32}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":18}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":40}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":26}},"7":{"start":{"line":14,"column":15},"end":{"line":14,"column":79}},"8":{"start":{"line":17,"column":17},"end":{"line":17,"column":22}},"9":{"start":{"line":18,"column":17},"end":{"line":18,"column":43}},"10":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"11":{"start":{"line":21,"column":4},"end":{"line":21,"column":20}},"12":{"start":{"line":24,"column":2},"end":{"line":24,"column":18}},"13":{"start":{"line":28,"column":12},"end":{"line":28,"column":26}},"14":{"start":{"line":29,"column":17},"end":{"line":29,"column":19}},"15":{"start":{"line":30,"column":20},"end":{"line":30,"column":44}},"16":{"start":{"line":31,"column":15},"end":{"line":31,"column":27}},"17":{"start":{"line":33,"column":2},"end":{"line":35,"column":3}},"18":{"start":{"line":34,"column":4},"end":{"line":34,"column":28}},"19":{"start":{"line":37,"column":2},"end":{"line":43,"column":3}},"20":{"start":{"line":38,"column":4},"end":{"line":42,"column":7}},"21":{"start":{"line":39,"column":6},"end":{"line":41,"column":7}},"22":{"start":{"line":40,"column":8},"end":{"line":40,"column":30}},"23":{"start":{"line":45,"column":2},"end":{"line":49,"column":4}},"24":{"start":{"line":60,"column":2},"end":{"line":62,"column":3}},"25":{"start":{"line":61,"column":4},"end":{"line":61,"column":15}},"26":{"start":{"line":64,"column":2},"end":{"line":66,"column":18}},"27":{"start":{"line":65,"column":4},"end":{"line":65,"column":41}},"28":{"start":{"line":78,"column":12},"end":{"line":78,"column":84}},"29":{"start":{"line":79,"column":13},"end":{"line":79,"column":25}},"30":{"start":{"line":80,"column":2},"end":{"line":84,"column":5}},"31":{"start":{"line":81,"column":14},"end":{"line":81,"column":27}},"32":{"start":{"line":82,"column":18},"end":{"line":82,"column":59}},"33":{"start":{"line":83,"column":4},"end":{"line":83,"column":36}},"34":{"start":{"line":86,"column":2},"end":{"line":88,"column":3}},"35":{"start":{"line":87,"column":4},"end":{"line":87,"column":14}},"36":{"start":{"line":90,"column":2},"end":{"line":90,"column":13}},"37":{"start":{"line":100,"column":14},"end":{"line":100,"column":30}},"38":{"start":{"line":101,"column":18},"end":{"line":101,"column":20}},"39":{"start":{"line":104,"column":2},"end":{"line":108,"column":3}},"40":{"start":{"line":105,"column":4},"end":{"line":107,"column":5}},"41":{"start":{"line":106,"column":6},"end":{"line":106,"column":31}},"42":{"start":{"line":110,"column":2},"end":{"line":112,"column":3}},"43":{"start":{"line":111,"column":4},"end":{"line":111,"column":24}},"44":{"start":{"line":114,"column":2},"end":{"line":114,"column":19}}},"fnMap":{"0":{"name":"isSelected","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":19}},"loc":{"start":{"line":16,"column":41},"end":{"line":25,"column":1}},"line":16},"1":{"name":"sourceAttr","decl":{"start":{"line":27,"column":9},"end":{"line":27,"column":19}},"loc":{"start":{"line":27,"column":33},"end":{"line":50,"column":1}},"line":27},"2":{"name":"(anonymous_2)","decl":{"start":{"line":38,"column":41},"end":{"line":38,"column":42}},"loc":{"start":{"line":38,"column":59},"end":{"line":42,"column":5}},"line":38},"3":{"name":"get","decl":{"start":{"line":59,"column":9},"end":{"line":59,"column":12}},"loc":{"start":{"line":59,"column":24},"end":{"line":67,"column":1}},"line":59},"4":{"name":"(anonymous_4)","decl":{"start":{"line":64,"column":32},"end":{"line":64,"column":33}},"loc":{"start":{"line":64,"column":54},"end":{"line":66,"column":3}},"line":64},"5":{"name":"prepareDisplay","decl":{"start":{"line":77,"column":9},"end":{"line":77,"column":23}},"loc":{"start":{"line":77,"column":29},"end":{"line":91,"column":1}},"line":77},"6":{"name":"(anonymous_6)","decl":{"start":{"line":80,"column":37},"end":{"line":80,"column":38}},"loc":{"start":{"line":80,"column":52},"end":{"line":84,"column":3}},"line":80},"7":{"name":"getKeys","decl":{"start":{"line":99,"column":9},"end":{"line":99,"column":16}},"loc":{"start":{"line":99,"column":22},"end":{"line":115,"column":1}},"line":99}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},{"start":{"line":20,"column":2},"end":{"line":22,"column":3}}],"line":20},"1":{"loc":{"start":{"line":33,"column":2},"end":{"line":35,"column":3}},"type":"if","locations":[{"start":{"line":33,"column":2},"end":{"line":35,"column":3}},{"start":{"line":33,"column":2},"end":{"line":35,"column":3}}],"line":33},"2":{"loc":{"start":{"line":37,"column":2},"end":{"line":43,"column":3}},"type":"if","locations":[{"start":{"line":37,"column":2},"end":{"line":43,"column":3}},{"start":{"line":37,"column":2},"end":{"line":43,"column":3}}],"line":37},"3":{"loc":{"start":{"line":39,"column":6},"end":{"line":41,"column":7}},"type":"if","locations":[{"start":{"line":39,"column":6},"end":{"line":41,"column":7}},{"start":{"line":39,"column":6},"end":{"line":41,"column":7}}],"line":39},"4":{"loc":{"start":{"line":46,"column":15},"end":{"line":46,"column":110}},"type":"cond-expr","locations":[{"start":{"line":46,"column":59},"end":{"line":46,"column":104}},{"start":{"line":46,"column":107},"end":{"line":46,"column":110}}],"line":46},"5":{"loc":{"start":{"line":60,"column":2},"end":{"line":62,"column":3}},"type":"if","locations":[{"start":{"line":60,"column":2},"end":{"line":62,"column":3}},{"start":{"line":60,"column":2},"end":{"line":62,"column":3}}],"line":60},"6":{"loc":{"start":{"line":65,"column":11},"end":{"line":65,"column":40}},"type":"cond-expr","locations":[{"start":{"line":65,"column":18},"end":{"line":65,"column":28}},{"start":{"line":65,"column":31},"end":{"line":65,"column":40}}],"line":65},"7":{"loc":{"start":{"line":66,"column":5},"end":{"line":66,"column":16}},"type":"binary-expr","locations":[{"start":{"line":66,"column":5},"end":{"line":66,"column":8}},{"start":{"line":66,"column":12},"end":{"line":66,"column":16}}],"line":66},"8":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":84}},"type":"cond-expr","locations":[{"start":{"line":78,"column":65},"end":{"line":78,"column":77}},{"start":{"line":78,"column":80},"end":{"line":78,"column":84}}],"line":78},"9":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":62}},"type":"binary-expr","locations":[{"start":{"line":78,"column":12},"end":{"line":78,"column":32}},{"start":{"line":78,"column":36},"end":{"line":78,"column":62}}],"line":78},"10":{"loc":{"start":{"line":86,"column":2},"end":{"line":88,"column":3}},"type":"if","locations":[{"start":{"line":86,"column":2},"end":{"line":88,"column":3}},{"start":{"line":86,"column":2},"end":{"line":88,"column":3}}],"line":86},"11":{"loc":{"start":{"line":105,"column":4},"end":{"line":107,"column":5}},"type":"if","locations":[{"start":{"line":105,"column":4},"end":{"line":107,"column":5}},{"start":{"line":105,"column":4},"end":{"line":107,"column":5}}],"line":105},"12":{"loc":{"start":{"line":110,"column":2},"end":{"line":112,"column":3}},"type":"if","locations":[{"start":{"line":110,"column":2},"end":{"line":112,"column":3}},{"start":{"line":110,"column":2},"end":{"line":112,"column":3}}],"line":110},"13":{"loc":{"start":{"line":110,"column":6},"end":{"line":110,"column":42}},"type":"binary-expr","locations":[{"start":{"line":110,"column":6},"end":{"line":110,"column":27}},{"start":{"line":110,"column":31},"end":{"line":110,"column":42}}],"line":110}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":8,"9":8,"10":8,"11":2,"12":8,"13":11,"14":11,"15":11,"16":11,"17":11,"18":9,"19":11,"20":8,"21":8,"22":2,"23":11,"24":15,"25":0,"26":15,"27":20,"28":24,"29":24,"30":24,"31":13,"32":13,"33":13,"34":24,"35":12,"36":24,"37":33,"38":33,"39":33,"40":14,"41":14,"42":33,"43":9,"44":33},"f":{"0":8,"1":11,"2":8,"3":15,"4":20,"5":24,"6":13,"7":33},"b":{"0":[2,6],"1":[9,2],"2":[8,3],"3":[2,6],"4":[4,7],"5":[0,15],"6":[16,4],"7":[15,3],"8":[24,0],"9":[24,24],"10":[12,12],"11":[14,0],"12":[9,24],"13":[33,21]},"inputSourceMap":{"version":3,"sources":["sourceAttr.js"],"names":["isSelected","value","display","str","selected","pDisplay","prepareDisplay","sourceAttr","obj","params","displayName","values","Object","prototype","toString","call","multiple","Array","forEach","pValue","hiddenVal","JSON","stringify","replace","val","get","path","split","reduce","prev","curr","undefined","keys","getKeys","key","pattern","RegExp","regex","variables","match","exec","push","length"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["export function isSelected(value, display, str) {\n  var selected = false\n\n  var pDisplay = prepareDisplay(value, str)\n  if (pDisplay === display) {\n    selected = true\n  }\n\n  return selected\n}\n\nexport default function sourceAttr(obj, params) {\n  var str = params.display\n  var selected = ''\n  var displayName = prepareDisplay(obj, str)\n  var values = params.value\n  if (Object.prototype.toString.call(params.value) !== '[object Array]') {\n    values = [params.value]\n  }\n\n  if (params.multiple != 'multiple') {\n    Array.prototype.forEach.call(values, pValue => {\n      if (isSelected(pValue, displayName, str)) {\n        selected = 'selected'\n      }\n    })\n  }\n\n  return {\n    hiddenVal:\n      typeof obj == 'object'\n        ? JSON.stringify(obj).replace(/\\'/g, '&quote;')\n        : obj,\n    selected: selected,\n    val: displayName\n  }\n}\n\n/**\n * return the value from a json obj of a nested attribute\n * @param  {Object} obj  the json object\n * @param  {string} path the path to object (dot notation)\n * @return {[type]}      the object containing the path object or undefined\n */\nexport function get(obj, path) {\n  if (path == null) {\n    return obj\n  }\n  return path.split('.').reduce(function(prev, curr) {\n    return prev ? prev[curr] : undefined\n  }, obj || this)\n}\n\n/**\n * replace the variables in str by values from obj\n * corresponding to keys\n * @param  {Object} obj    the json object\n * @param  {string} str    the string\n * @return {string}        the string with values\n */\nexport function prepareDisplay(obj, str = null) {\n  var keys = getKeys(str)\n  Array.prototype.forEach.call(keys, key => {\n    var val = get(obj, key)\n\n    var pattern = new RegExp('{{' + key + '}}|' + key, 'g')\n    str = str.replace(pattern, val)\n  })\n  // console.log('params.value', params.value)\n\n  if (str == null) {\n    str = obj\n  }\n\n  return str\n}\n\n/**\n * return array of variables {{variable}} extracted from str\n * @param  {string} str the string containing variables\n * @return {Array}     the array of variables\n */\nexport function getKeys(str) {\n  var regex = /\\{\\{(.*?)\\}\\}/g\n  var variables = []\n  var match\n\n  while ((match = regex.exec(str)) !== null) {\n    if (match[1] != null) {\n      variables.push(match[1])\n    }\n  }\n\n  if (variables.length == 0 && str != null) {\n    variables.push(str)\n  }\n\n  return variables\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"758433ce8a3d4709d5c006874deea9091447ad09","contentHash":"f5759f0852a75fe54807c16174bd394abb81135cacd311d4d2fe10d70ba5b533"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/prepare.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/prepare.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":50}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":48}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":60}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":38}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":50}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":74}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":50}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":66}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":50}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":48}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":66}},"13":{"start":{"line":19,"column":0},"end":{"line":19,"column":42}},"14":{"start":{"line":20,"column":0},"end":{"line":20,"column":42}},"15":{"start":{"line":21,"column":0},"end":{"line":21,"column":46}},"16":{"start":{"line":23,"column":18},"end":{"line":23,"column":63}},"17":{"start":{"line":25,"column":17},"end":{"line":25,"column":61}},"18":{"start":{"line":27,"column":8},"end":{"line":27,"column":25}},"19":{"start":{"line":30,"column":22},"end":{"line":30,"column":94}},"20":{"start":{"line":31,"column":12},"end":{"line":31,"column":14}},"21":{"start":{"line":32,"column":25},"end":{"line":32,"column":48}},"22":{"start":{"line":33,"column":2},"end":{"line":33,"column":55}},"23":{"start":{"line":35,"column":2},"end":{"line":39,"column":3}},"24":{"start":{"line":36,"column":4},"end":{"line":36,"column":136}},"25":{"start":{"line":38,"column":4},"end":{"line":38,"column":56}},"26":{"start":{"line":41,"column":2},"end":{"line":41,"column":13}},"27":{"start":{"line":45,"column":22},"end":{"line":45,"column":94}},"28":{"start":{"line":46,"column":12},"end":{"line":46,"column":14}},"29":{"start":{"line":47,"column":25},"end":{"line":47,"column":39}},"30":{"start":{"line":48,"column":18},"end":{"line":48,"column":42}},"31":{"start":{"line":49,"column":2},"end":{"line":49,"column":102}},"32":{"start":{"line":50,"column":32},"end":{"line":50,"column":83}},"33":{"start":{"line":51,"column":2},"end":{"line":51,"column":55}},"34":{"start":{"line":53,"column":2},"end":{"line":57,"column":3}},"35":{"start":{"line":54,"column":4},"end":{"line":54,"column":316}},"36":{"start":{"line":56,"column":4},"end":{"line":56,"column":159}},"37":{"start":{"line":59,"column":2},"end":{"line":59,"column":13}},"38":{"start":{"line":76,"column":20},"end":{"line":76,"column":28}},"39":{"start":{"line":78,"column":16},"end":{"line":78,"column":44}},"40":{"start":{"line":80,"column":2},"end":{"line":89,"column":3}},"41":{"start":{"line":81,"column":4},"end":{"line":81,"column":48}},"42":{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},"43":{"start":{"line":84,"column":6},"end":{"line":84,"column":44}},"44":{"start":{"line":87,"column":4},"end":{"line":87,"column":38}},"45":{"start":{"line":88,"column":4},"end":{"line":88,"column":177}},"46":{"start":{"line":91,"column":2},"end":{"line":91,"column":21}},"47":{"start":{"line":96,"column":2},"end":{"line":96,"column":46}},"48":{"start":{"line":102,"column":12},"end":{"line":102,"column":49}},"49":{"start":{"line":106,"column":2},"end":{"line":110,"column":3}},"50":{"start":{"line":107,"column":4},"end":{"line":107,"column":58}},"51":{"start":{"line":109,"column":4},"end":{"line":109,"column":57}},"52":{"start":{"line":112,"column":2},"end":{"line":112,"column":13}},"53":{"start":{"line":142,"column":13},"end":{"line":142,"column":64}},"54":{"start":{"line":143,"column":28},"end":{"line":143,"column":77}},"55":{"start":{"line":145,"column":2},"end":{"line":156,"column":3}},"56":{"start":{"line":146,"column":4},"end":{"line":155,"column":7}},"57":{"start":{"line":147,"column":24},"end":{"line":147,"column":65}},"58":{"start":{"line":149,"column":6},"end":{"line":154,"column":7}},"59":{"start":{"line":150,"column":24},"end":{"line":150,"column":133}},"60":{"start":{"line":152,"column":8},"end":{"line":152,"column":143}},"61":{"start":{"line":153,"column":8},"end":{"line":153,"column":86}},"62":{"start":{"line":158,"column":2},"end":{"line":158,"column":44}},"63":{"start":{"line":159,"column":2},"end":{"line":159,"column":14}},"64":{"start":{"line":187,"column":2},"end":{"line":225,"column":3}},"65":{"start":{"line":188,"column":15},"end":{"line":188,"column":43}},"66":{"start":{"line":190,"column":4},"end":{"line":224,"column":5}},"67":{"start":{"line":191,"column":24},"end":{"line":191,"column":93}},"68":{"start":{"line":192,"column":25},"end":{"line":192,"column":74}},"69":{"start":{"line":193,"column":6},"end":{"line":193,"column":51}},"70":{"start":{"line":194,"column":26},"end":{"line":194,"column":102}},"71":{"start":{"line":195,"column":31},"end":{"line":195,"column":60}},"72":{"start":{"line":197,"column":6},"end":{"line":214,"column":7}},"73":{"start":{"line":198,"column":8},"end":{"line":213,"column":13}},"74":{"start":{"line":199,"column":34},"end":{"line":199,"column":51}},"75":{"start":{"line":200,"column":36},"end":{"line":200,"column":143}},"76":{"start":{"line":201,"column":10},"end":{"line":212,"column":13}},"77":{"start":{"line":202,"column":37},"end":{"line":202,"column":66}},"78":{"start":{"line":204,"column":12},"end":{"line":211,"column":13}},"79":{"start":{"line":205,"column":33},"end":{"line":205,"column":78}},"80":{"start":{"line":207,"column":14},"end":{"line":210,"column":15}},"81":{"start":{"line":208,"column":16},"end":{"line":208,"column":55}},"82":{"start":{"line":209,"column":16},"end":{"line":209,"column":241}},"83":{"start":{"line":216,"column":23},"end":{"line":216,"column":96}},"84":{"start":{"line":217,"column":20},"end":{"line":217,"column":46}},"85":{"start":{"line":219,"column":6},"end":{"line":223,"column":7}},"86":{"start":{"line":220,"column":8},"end":{"line":222,"column":11}},"87":{"start":{"line":221,"column":10},"end":{"line":221,"column":157}},"88":{"start":{"line":227,"column":2},"end":{"line":227,"column":18}},"89":{"start":{"line":249,"column":22},"end":{"line":249,"column":58}},"90":{"start":{"line":251,"column":16},"end":{"line":251,"column":49}},"91":{"start":{"line":254,"column":2},"end":{"line":256,"column":3}},"92":{"start":{"line":255,"column":4},"end":{"line":255,"column":132}},"93":{"start":{"line":258,"column":2},"end":{"line":260,"column":3}},"94":{"start":{"line":259,"column":4},"end":{"line":259,"column":132}},"95":{"start":{"line":262,"column":19},"end":{"line":262,"column":45}},"96":{"start":{"line":263,"column":25},"end":{"line":263,"column":103}},"97":{"start":{"line":265,"column":2},"end":{"line":272,"column":3}},"98":{"start":{"line":266,"column":14},"end":{"line":266,"column":22}},"99":{"start":{"line":268,"column":4},"end":{"line":271,"column":5}},"100":{"start":{"line":269,"column":6},"end":{"line":269,"column":184}},"101":{"start":{"line":270,"column":6},"end":{"line":270,"column":89}},"102":{"start":{"line":274,"column":20},"end":{"line":274,"column":48}},"103":{"start":{"line":275,"column":26},"end":{"line":275,"column":106}},"104":{"start":{"line":277,"column":2},"end":{"line":284,"column":3}},"105":{"start":{"line":278,"column":14},"end":{"line":278,"column":22}},"106":{"start":{"line":280,"column":4},"end":{"line":283,"column":5}},"107":{"start":{"line":281,"column":6},"end":{"line":281,"column":184}},"108":{"start":{"line":282,"column":6},"end":{"line":282,"column":89}},"109":{"start":{"line":286,"column":2},"end":{"line":286,"column":18}},"110":{"start":{"line":301,"column":2},"end":{"line":301,"column":57}},"111":{"start":{"line":305,"column":2},"end":{"line":305,"column":72}},"112":{"start":{"line":315,"column":2},"end":{"line":315,"column":57}},"113":{"start":{"line":327,"column":15},"end":{"line":327,"column":17}},"114":{"start":{"line":329,"column":2},"end":{"line":331,"column":3}},"115":{"start":{"line":330,"column":4},"end":{"line":330,"column":26}},"116":{"start":{"line":333,"column":2},"end":{"line":333,"column":16}},"117":{"start":{"line":338,"column":15},"end":{"line":338,"column":63}},"118":{"start":{"line":340,"column":2},"end":{"line":373,"column":5}},"119":{"start":{"line":341,"column":14},"end":{"line":341,"column":47}},"120":{"start":{"line":344,"column":4},"end":{"line":367,"column":5}},"121":{"start":{"line":345,"column":21},"end":{"line":345,"column":23}},"122":{"start":{"line":346,"column":6},"end":{"line":346,"column":27}},"123":{"start":{"line":348,"column":26},"end":{"line":348,"column":208}},"124":{"start":{"line":350,"column":22},"end":{"line":354,"column":52}},"125":{"start":{"line":356,"column":30},"end":{"line":356,"column":118}},"126":{"start":{"line":358,"column":17},"end":{"line":358,"column":19}},"127":{"start":{"line":360,"column":6},"end":{"line":362,"column":7}},"128":{"start":{"line":361,"column":8},"end":{"line":361,"column":44}},"129":{"start":{"line":364,"column":6},"end":{"line":366,"column":7}},"130":{"start":{"line":365,"column":8},"end":{"line":365,"column":157}},"131":{"start":{"line":370,"column":4},"end":{"line":372,"column":5}},"132":{"start":{"line":371,"column":6},"end":{"line":371,"column":83}},"133":{"start":{"line":374,"column":2},"end":{"line":374,"column":18}},"134":{"start":{"line":392,"column":2},"end":{"line":392,"column":53}},"135":{"start":{"line":392,"column":46},"end":{"line":392,"column":53}},"136":{"start":{"line":394,"column":2},"end":{"line":397,"column":3}},"137":{"start":{"line":395,"column":25},"end":{"line":395,"column":162}},"138":{"start":{"line":396,"column":4},"end":{"line":396,"column":55}},"139":{"start":{"line":399,"column":2},"end":{"line":399,"column":18}}},"fnMap":{"0":{"name":"addAbeAttrSingleTab","decl":{"start":{"line":29,"column":9},"end":{"line":29,"column":28}},"loc":{"start":{"line":29,"column":40},"end":{"line":42,"column":1}},"line":29},"1":{"name":"addAbeAttrForBlock","decl":{"start":{"line":44,"column":9},"end":{"line":44,"column":27}},"loc":{"start":{"line":44,"column":39},"end":{"line":60,"column":1}},"line":44},"2":{"name":"addAbeDataAttrForHtmlTag","decl":{"start":{"line":72,"column":9},"end":{"line":72,"column":33}},"loc":{"start":{"line":72,"column":44},"end":{"line":92,"column":1}},"line":72},"3":{"name":"addHasAbeAttr","decl":{"start":{"line":95,"column":9},"end":{"line":95,"column":22}},"loc":{"start":{"line":95,"column":29},"end":{"line":97,"column":1}},"line":95},"4":{"name":"getAbeAttributeData","decl":{"start":{"line":99,"column":9},"end":{"line":99,"column":28}},"loc":{"start":{"line":99,"column":65},"end":{"line":113,"column":1}},"line":99},"5":{"name":"addAbeDataAttrForHtmlAttributes","decl":{"start":{"line":141,"column":9},"end":{"line":141,"column":40}},"loc":{"start":{"line":141,"column":51},"end":{"line":160,"column":1}},"line":141},"6":{"name":"(anonymous_6)","decl":{"start":{"line":146,"column":54},"end":{"line":146,"column":55}},"loc":{"start":{"line":146,"column":76},"end":{"line":155,"column":5}},"line":146},"7":{"name":"addAbeSourceComment","decl":{"start":{"line":186,"column":9},"end":{"line":186,"column":28}},"loc":{"start":{"line":186,"column":45},"end":{"line":228,"column":1}},"line":186},"8":{"name":"(anonymous_8)","decl":{"start":{"line":198,"column":9},"end":{"line":198,"column":10}},"loc":{"start":{"line":198,"column":21},"end":{"line":213,"column":9}},"line":198},"9":{"name":"(anonymous_9)","decl":{"start":{"line":201,"column":59},"end":{"line":201,"column":60}},"loc":{"start":{"line":201,"column":74},"end":{"line":212,"column":11}},"line":201},"10":{"name":"(anonymous_10)","decl":{"start":{"line":220,"column":46},"end":{"line":220,"column":47}},"loc":{"start":{"line":220,"column":63},"end":{"line":222,"column":9}},"line":220},"11":{"name":"addAbeHtmlTagBetweenAbeTags","decl":{"start":{"line":246,"column":9},"end":{"line":246,"column":36}},"loc":{"start":{"line":246,"column":47},"end":{"line":287,"column":1}},"line":246},"12":{"name":"replaceAbeEachIndex","decl":{"start":{"line":300,"column":9},"end":{"line":300,"column":28}},"loc":{"start":{"line":300,"column":39},"end":{"line":302,"column":1}},"line":300},"13":{"name":"removeHiddenAbeTag","decl":{"start":{"line":304,"column":9},"end":{"line":304,"column":27}},"loc":{"start":{"line":304,"column":38},"end":{"line":306,"column":1}},"line":304},"14":{"name":"removeHandlebarsRawFromHtml","decl":{"start":{"line":314,"column":9},"end":{"line":314,"column":36}},"loc":{"start":{"line":314,"column":47},"end":{"line":316,"column":1}},"line":314},"15":{"name":"splitEachBlocks","decl":{"start":{"line":325,"column":9},"end":{"line":325,"column":24}},"loc":{"start":{"line":325,"column":35},"end":{"line":334,"column":1}},"line":325},"16":{"name":"indexEachBlocks","decl":{"start":{"line":336,"column":9},"end":{"line":336,"column":24}},"loc":{"start":{"line":336,"column":51},"end":{"line":375,"column":1}},"line":336},"17":{"name":"(anonymous_17)","decl":{"start":{"line":340,"column":39},"end":{"line":340,"column":40}},"loc":{"start":{"line":340,"column":56},"end":{"line":373,"column":3}},"line":340},"18":{"name":"addAbeDictionnary","decl":{"start":{"line":391,"column":9},"end":{"line":391,"column":26}},"loc":{"start":{"line":391,"column":49},"end":{"line":400,"column":1}},"line":391}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":22},"end":{"line":30,"column":94}},"type":"cond-expr","locations":[{"start":{"line":30,"column":75},"end":{"line":30,"column":87}},{"start":{"line":30,"column":90},"end":{"line":30,"column":94}}],"line":30},"1":{"loc":{"start":{"line":30,"column":22},"end":{"line":30,"column":72}},"type":"binary-expr","locations":[{"start":{"line":30,"column":22},"end":{"line":30,"column":42}},{"start":{"line":30,"column":46},"end":{"line":30,"column":72}}],"line":30},"2":{"loc":{"start":{"line":35,"column":2},"end":{"line":39,"column":3}},"type":"if","locations":[{"start":{"line":35,"column":2},"end":{"line":39,"column":3}},{"start":{"line":35,"column":2},"end":{"line":39,"column":3}}],"line":35},"3":{"loc":{"start":{"line":45,"column":22},"end":{"line":45,"column":94}},"type":"cond-expr","locations":[{"start":{"line":45,"column":75},"end":{"line":45,"column":87}},{"start":{"line":45,"column":90},"end":{"line":45,"column":94}}],"line":45},"4":{"loc":{"start":{"line":45,"column":22},"end":{"line":45,"column":72}},"type":"binary-expr","locations":[{"start":{"line":45,"column":22},"end":{"line":45,"column":42}},{"start":{"line":45,"column":46},"end":{"line":45,"column":72}}],"line":45},"5":{"loc":{"start":{"line":53,"column":2},"end":{"line":57,"column":3}},"type":"if","locations":[{"start":{"line":53,"column":2},"end":{"line":57,"column":3}},{"start":{"line":53,"column":2},"end":{"line":57,"column":3}}],"line":53},"6":{"loc":{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},"type":"if","locations":[{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},{"start":{"line":83,"column":4},"end":{"line":85,"column":5}}],"line":83},"7":{"loc":{"start":{"line":106,"column":2},"end":{"line":110,"column":3}},"type":"if","locations":[{"start":{"line":106,"column":2},"end":{"line":110,"column":3}},{"start":{"line":106,"column":2},"end":{"line":110,"column":3}}],"line":106},"8":{"loc":{"start":{"line":145,"column":2},"end":{"line":156,"column":3}},"type":"if","locations":[{"start":{"line":145,"column":2},"end":{"line":156,"column":3}},{"start":{"line":145,"column":2},"end":{"line":156,"column":3}}],"line":145},"9":{"loc":{"start":{"line":149,"column":6},"end":{"line":154,"column":7}},"type":"if","locations":[{"start":{"line":149,"column":6},"end":{"line":154,"column":7}},{"start":{"line":149,"column":6},"end":{"line":154,"column":7}}],"line":149},"10":{"loc":{"start":{"line":149,"column":10},"end":{"line":149,"column":55}},"type":"binary-expr","locations":[{"start":{"line":149,"column":10},"end":{"line":149,"column":29}},{"start":{"line":149,"column":33},"end":{"line":149,"column":55}}],"line":149},"11":{"loc":{"start":{"line":187,"column":2},"end":{"line":225,"column":3}},"type":"if","locations":[{"start":{"line":187,"column":2},"end":{"line":225,"column":3}},{"start":{"line":187,"column":2},"end":{"line":225,"column":3}}],"line":187},"12":{"loc":{"start":{"line":187,"column":6},"end":{"line":187,"column":72}},"type":"binary-expr","locations":[{"start":{"line":187,"column":6},"end":{"line":187,"column":44}},{"start":{"line":187,"column":48},"end":{"line":187,"column":72}}],"line":187},"13":{"loc":{"start":{"line":197,"column":6},"end":{"line":214,"column":7}},"type":"if","locations":[{"start":{"line":197,"column":6},"end":{"line":214,"column":7}},{"start":{"line":197,"column":6},"end":{"line":214,"column":7}}],"line":197},"14":{"loc":{"start":{"line":204,"column":12},"end":{"line":211,"column":13}},"type":"if","locations":[{"start":{"line":204,"column":12},"end":{"line":211,"column":13}},{"start":{"line":204,"column":12},"end":{"line":211,"column":13}}],"line":204},"15":{"loc":{"start":{"line":207,"column":14},"end":{"line":210,"column":15}},"type":"if","locations":[{"start":{"line":207,"column":14},"end":{"line":210,"column":15}},{"start":{"line":207,"column":14},"end":{"line":210,"column":15}}],"line":207},"16":{"loc":{"start":{"line":207,"column":18},"end":{"line":207,"column":65}},"type":"binary-expr","locations":[{"start":{"line":207,"column":18},"end":{"line":207,"column":38}},{"start":{"line":207,"column":42},"end":{"line":207,"column":65}}],"line":207},"17":{"loc":{"start":{"line":219,"column":6},"end":{"line":223,"column":7}},"type":"if","locations":[{"start":{"line":219,"column":6},"end":{"line":223,"column":7}},{"start":{"line":219,"column":6},"end":{"line":223,"column":7}}],"line":219},"18":{"loc":{"start":{"line":219,"column":10},"end":{"line":219,"column":60}},"type":"binary-expr","locations":[{"start":{"line":219,"column":10},"end":{"line":219,"column":40}},{"start":{"line":219,"column":44},"end":{"line":219,"column":60}}],"line":219},"19":{"loc":{"start":{"line":344,"column":4},"end":{"line":367,"column":5}},"type":"if","locations":[{"start":{"line":344,"column":4},"end":{"line":367,"column":5}},{"start":{"line":344,"column":4},"end":{"line":367,"column":5}}],"line":344},"20":{"loc":{"start":{"line":360,"column":6},"end":{"line":362,"column":7}},"type":"if","locations":[{"start":{"line":360,"column":6},"end":{"line":362,"column":7}},{"start":{"line":360,"column":6},"end":{"line":362,"column":7}}],"line":360},"21":{"loc":{"start":{"line":360,"column":10},"end":{"line":360,"column":76}},"type":"binary-expr","locations":[{"start":{"line":360,"column":10},"end":{"line":360,"column":48}},{"start":{"line":360,"column":52},"end":{"line":360,"column":76}}],"line":360},"22":{"loc":{"start":{"line":364,"column":6},"end":{"line":366,"column":7}},"type":"if","locations":[{"start":{"line":364,"column":6},"end":{"line":366,"column":7}},{"start":{"line":364,"column":6},"end":{"line":366,"column":7}}],"line":364},"23":{"loc":{"start":{"line":392,"column":2},"end":{"line":392,"column":53}},"type":"if","locations":[{"start":{"line":392,"column":2},"end":{"line":392,"column":53}},{"start":{"line":392,"column":2},"end":{"line":392,"column":53}}],"line":392},"24":{"loc":{"start":{"line":394,"column":2},"end":{"line":397,"column":3}},"type":"if","locations":[{"start":{"line":394,"column":2},"end":{"line":397,"column":3}},{"start":{"line":394,"column":2},"end":{"line":397,"column":3}}],"line":394}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":6,"20":6,"21":6,"22":6,"23":6,"24":6,"25":0,"26":6,"27":3,"28":3,"29":3,"30":3,"31":3,"32":3,"33":3,"34":3,"35":3,"36":0,"37":3,"38":3,"39":3,"40":3,"41":9,"42":9,"43":5,"44":9,"45":9,"46":3,"47":9,"48":9,"49":9,"50":6,"51":3,"52":9,"53":5,"54":5,"55":5,"56":5,"57":8,"58":8,"59":8,"60":8,"61":8,"62":5,"63":5,"64":4,"65":4,"66":4,"67":4,"68":4,"69":4,"70":4,"71":4,"72":4,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":4,"84":4,"85":4,"86":4,"87":4,"88":4,"89":3,"90":3,"91":3,"92":4,"93":3,"94":15,"95":3,"96":3,"97":3,"98":0,"99":0,"100":0,"101":0,"102":3,"103":3,"104":3,"105":0,"106":0,"107":0,"108":0,"109":3,"110":3,"111":4,"112":3,"113":7,"114":7,"115":7,"116":7,"117":6,"118":6,"119":5,"120":5,"121":5,"122":5,"123":5,"124":5,"125":5,"126":5,"127":5,"128":1,"129":5,"130":4,"131":5,"132":7,"133":6,"134":8,"135":0,"136":8,"137":8,"138":8,"139":8},"f":{"0":6,"1":3,"2":3,"3":9,"4":9,"5":5,"6":8,"7":4,"8":0,"9":0,"10":4,"11":3,"12":3,"13":4,"14":3,"15":7,"16":6,"17":5,"18":8},"b":{"0":[6,0],"1":[6,6],"2":[6,0],"3":[3,0],"4":[3,3],"5":[3,0],"6":[5,4],"7":[6,3],"8":[5,0],"9":[8,0],"10":[8,8],"11":[4,0],"12":[4,4],"13":[0,4],"14":[0,0],"15":[0,0],"16":[0,0],"17":[4,0],"18":[4,4],"19":[5,0],"20":[1,4],"21":[5,1],"22":[4,1],"23":[0,8],"24":[8,0]},"inputSourceMap":{"version":3,"sources":["prepare.js"],"names":["addAbeAttrSingleTab","key","elem","htmlAttribute","res","valueOfAttritube","replace","cmsData","regex","validDataAbe","addAbeAttrForBlock","split","parentKey","shift","valueOfAttritubeIndexed","addAbeDataAttrForHtmlTag","template","match","getattr","newTemplate","pattern","abePattern","exec","getAttr","isSingleAbe","escapeTextToRegex","addHasAbeAttr","text","getAbeAttributeData","abeTag","addAbeDataAttrForHtmlAttributes","abeTagIntoAttribute","abeAsAttributePattern","Array","prototype","forEach","call","abeIntoTag","matchAbeTag","toReplace","cmsTemplates","prepare","trim","addAbeSourceComment","json","abe_source","keys","Object","i","replaceEach","RegExp","regexEachKey","patAttrSource","patAttrSourceMatch","checkEscapedRegex","patAttrSourceInside","pat","patAttrSourceCheck","checkEscaped","length","escape","eachSource","matches","encodeAbeTagAsComment","addAbeHtmlTagBetweenAbeTags","match2","templateNoDom","abeAsTagPattern","eachBlockPattern","eachStyles","eachStylePattern","eachScripts","eachScriptPattern","replaceAbeEachIndex","removeHiddenAbeTag","removeHandlebarsRawFromHtml","splitEachBlocks","block","blocks","push","indexEachBlocks","onlyHtml","voidData","blockCompiled","Handlebars","compile","config","meta","name","blockHtml","data","intl","intlData","textEachWithIndex","indexOf","addAbeDictionnary","isEachStatement","isBlockAbe","abeDictionnary"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/","sourcesContent":["import Handlebars from 'handlebars'\nimport striptags from 'striptags'\n\nimport {cmsData, config, cmsTemplates} from '../../'\n\nexport function addAbeAttrSingleTab(key, elem, htmlAttribute = null) {\n  var res = ''\n\n  var valueOfAttritube = key.replace(/\\./g, '-')\n  key = cmsData.regex.validDataAbe(valueOfAttritube)\n\n  if (htmlAttribute != null) {\n    res =\n      ' data-abe-attr-' +\n      valueOfAttritube +\n      '=\"' +\n      htmlAttribute +\n      '\"' +\n      ' data-abe-' +\n      valueOfAttritube +\n      '=\"' +\n      key +\n      '\"' +\n      elem\n  } else {\n    res = ' data-abe-' + key + '=\"' + key + '\" ' + elem\n  }\n\n  return res\n}\n\nexport function addAbeAttrForBlock(key, elem, htmlAttribute = null) {\n  var res = ''\n\n  var valueOfAttritube = key.split('.')\n  var parentKey = valueOfAttritube.shift()\n  valueOfAttritube = `${parentKey}[index].${valueOfAttritube[0].replace(\n    /\\./g,\n    '-'\n  )}`\n  var valueOfAttritubeIndexed = valueOfAttritube.replace(\n    /\\[index\\]/,\n    '{{@index}}'\n  )\n  key = cmsData.regex.validDataAbe(valueOfAttritube)\n\n  if (htmlAttribute) {\n    res =\n      ` data-abe-attr-${valueOfAttritube}=\"${htmlAttribute}\"  data-abe-${valueOfAttritube}=\"${key}\"` +\n      ` data-abe-attr-${valueOfAttritubeIndexed}=\"${htmlAttribute}\" data-abe-${valueOfAttritubeIndexed}=\"${key}\"${elem}`\n  } else {\n    res =\n      ` data-abe-${valueOfAttritube}=\"${key}\"` +\n      ` data-abe-${valueOfAttritubeIndexed}=\"${key}\" ${elem}`\n  }\n\n  return res\n}\n\n/**\n * THIS:\n<span>{{abe type='text' key='text_visible'}}</span>\n\n * BECOMES:\n<span data-abe-text_visible=\"text_visible\" >{{abe type='text' key='text_visible'}}</span>\n\n * @param {[type]} template [description]\n */\nexport function addAbeDataAttrForHtmlTag(template) {\n  var match\n  var key\n  var getattr\n  var newTemplate = template\n  var pattern = cmsData.regex.abePattern()\n\n  while ((match = pattern.exec(template))) {\n    key = cmsData.regex.getAttr(match, 'key')\n\n    if (!cmsData.regex.isSingleAbe(match, newTemplate)) {\n      key = key.replace('.', '{{@index}}.')\n    }\n\n    getattr = key.replace(/\\./g, '-')\n\n    newTemplate = newTemplate.replace(\n      cmsData.regex.escapeTextToRegex(match[0], 'g'),\n      ' data-abe-' +\n        cmsData.regex.validDataAbe(getattr) +\n        '=\"' +\n        getattr +\n        '\" ' +\n        match[0]\n    )\n  }\n\n  return newTemplate\n}\n\n// Is this function useful ? What is it used for ?\nexport function addHasAbeAttr(text) {\n  return text.replace('}}', \" has-abe='1'}}\")\n}\n\nexport function getAbeAttributeData(match, text, htmlAttribute, abeTag) {\n  var valueOfAttritube\n  var key = cmsData.regex.getAttr(match, 'key')\n  var res\n\n  if (cmsData.regex.isSingleAbe(match, text)) {\n    res = addAbeAttrSingleTab(key, abeTag, htmlAttribute)\n  } else {\n    res = addAbeAttrForBlock(key, abeTag, htmlAttribute)\n  }\n\n  return res\n}\n\n/**\n *\n * IF ABE TAG SINGLE (NOT ABE EACH STATEMENT)\n * \n * THIS:\n<img src=\"{{abe type='image' key='image_key' tab='default'}}\" alt=\"\">\n\n * BECOMES:\n<img data-abe-attr-image_key=\"src\" data-abe-image_key=\"image_key\" data-abe-attr-image_key=\"src\"\ndata-abe-image_key=\"image_key\" src=\"{{abe type='image' key='image_key' tab='default' has-abe='1'}}\" alt=\"\">\n\n *\n * IF ABE EACH TAG\n * THIS:\n{{#each test}}\n  <img src=\"{{abe type='image' key='test.img' desc='test_img' tab='default'}}\" alt=\"\">\n{{/each}}\n\n * BECOMES:\n{{#each test}}\n  <img data-abe-attr-test[index].img=\"src\" data-abe-test[index].img=\"test[index].img\" src=\"{{abe type='image' key='test.img' desc='test_img' tab='default' has-abe='1'}}\" alt=\"\">\n{{/each}}\n\n * @param {[type]} template [description]\n */\nexport function addAbeDataAttrForHtmlAttributes(template) {\n  var text = template.replace(/<([A-Za-z]+)/g, '\\nABE_SPLIT<$1')\n  let abeTagIntoAttribute = text.match(cmsData.regex.abeAsAttributePattern)\n\n  if (abeTagIntoAttribute != null) {\n    Array.prototype.forEach.call(abeTagIntoAttribute, abeIntoTag => {\n      let matchAbeTag = /({{abe.*?[\\s\\S].*?}})/g.exec(abeIntoTag)\n\n      if (matchAbeTag != null && matchAbeTag[1] != null) {\n        var toReplace = cmsTemplates.prepare.getAbeAttributeData(\n          matchAbeTag[1],\n          text,\n          abeIntoTag.split('=')[0].trim(),\n          abeIntoTag\n        )\n\n        toReplace = toReplace.replace(\n          cmsData.regex.escapeTextToRegex(matchAbeTag[1]),\n          cmsTemplates.prepare.addHasAbeAttr(matchAbeTag[1])\n        )\n\n        text = text.replace(\n          cmsData.regex.escapeTextToRegex(abeIntoTag),\n          toReplace\n        )\n      }\n    })\n  }\n  text = text.replace(/\\nABE_SPLIT</g, '<')\n\n  return text\n}\n\n/**\n * Example:\n *\n *\n * THIS:\n{{abe type='data' key='data_key' source='select title from article' display='title' editable='true' tab='default'}}\n\n{{#each data_key}}\n  {{title}}\n{{/each}}\n\n *\n * BECOMES\n\n{{abe type='data' key='data_key' source='select title from article' display='title' editable='true' tab='default'}}\n\n{{#each data_key}}\n  {{title}}\n{{/each}}<!-- [[data_key]] %7B%7B%23each%20data_key%7D%7D%0A%09%7B%7Btitle%7D%7D%0A%7B%7B/each%7D%7D -->\n\n * @param {[type]} template [description]\n * @param {[type]} json     [description]\n */\nexport function addAbeSourceComment(template, json) {\n  if (typeof json.abe_source !== 'undefined' && json.abe_source !== null) {\n    var keys = Object.keys(json.abe_source)\n\n    for (var i in keys) {\n      var replaceEach = new RegExp(\n        `<!-- \\\\[\\\\[${keys[i]}\\\\]\\\\][\\\\s\\\\S]*?-->`,\n        'g'\n      )\n      var regexEachKey = new RegExp(`{{#each ${keys[i]}}}`, 'g')\n      template = template.replace(replaceEach, '')\n\n      var patAttrSource = new RegExp(\n        ' ([A-Za-z0-9-_]+)=[\"|\\'].*?({{' + keys[i] + '}}).*?[\"|\\']',\n        'g'\n      )\n      var patAttrSourceMatch = template.match(patAttrSource)\n\n      if (patAttrSourceMatch != null) {\n        let checkEscapedRegex = /[\"|'](.*?)[\"|']/\n        let patAttrSourceInside = new RegExp(\n          '(\\\\S+)=[\"\\']?((?:.(?![\"\\']?\\\\s+(?:\\\\S+)=|[>\"\\']))+.)[\"\\']?({{' +\n            keys[i] +\n            '}}).*?[\"|\\']',\n          'g'\n        )\n        Array.prototype.forEach.call(patAttrSourceMatch, pat => {\n          let patAttrSourceCheck = patAttrSourceInside.exec(pat)\n          if (patAttrSourceCheck != null) {\n            let checkEscaped = checkEscapedRegex.exec(patAttrSourceCheck[0])\n            if (checkEscaped != null && checkEscaped.length > 0) {\n              checkEscaped = escape(checkEscaped[1])\n              template = template.replace(\n                patAttrSourceCheck[0],\n                ` data-abe-attr=\"${patAttrSourceCheck[1]}\" data-abe-attr-escaped=\"${checkEscaped}\" data-abe=\"${keys[\n                  i\n                ]}\" ${patAttrSourceCheck[0]}`\n              )\n            }\n          }\n        })\n      }\n\n      var eachSource = new RegExp(\n        `({{#each ${keys[i]}}[\\\\s\\\\S a-z]*?{{\\/each}})`,\n        'g'\n      )\n      var matches = template.match(eachSource)\n      if (typeof matches !== 'undefined' && matches !== null) {\n        Array.prototype.forEach.call(matches, match => {\n          template = template.replace(\n            match,\n            `${match}<!-- [[${keys[i]}]] ${cmsTemplates.encodeAbeTagAsComment(\n              match\n            )} -->`\n          )\n        })\n      }\n    }\n  }\n\n  return template\n}\n\n//THIS:\n//<span>{{abe type='text' key='text_visible'}}</span>\n//OR\n//<style>{{abe type='text' key='text_visible'}}</style>\n//OR\n//<script>{{abe type='text' key='text_visible'}}</script>\n//BECOMES:\n//<span><!--ABE--->{{abe type='text' key='text_visible'}}<!--/ABE---></span>\n//OR\n//<style>/*<!--ABE--->*/{{abe type='text' key='text_visible'}}/*<!--/ABE--->*/</style>\n//OR\n//<script>/*<!--ABE--->*/{{abe type='text' key='text_visible'}}/*<!--/ABE--->*/</script>\n\n/**\n * @param {[type]} template [description]\n */\nexport function addAbeHtmlTagBetweenAbeTags(template) {\n  var match\n  var match2\n  var templateNoDom = striptags(template)\n  var pattern = cmsData.regex.abeAsTagPattern()\n\n  // {{#each tags may be declared outside of an html Tag}}\n  while ((match = cmsData.regex.eachBlockPattern.exec(template))) {\n    template = template.replace(\n      cmsData.regex.escapeTextToRegex(match[1], 'g'),\n      '<!--ABE--->' + match[1].trim() + '<!--/ABE--->'\n    )\n  }\n\n  while ((match = pattern.exec(templateNoDom))) {\n    template = template.replace(\n      cmsData.regex.escapeTextToRegex(match[1], 'g'),\n      '<!--ABE--->' + match[1].trim() + '<!--/ABE--->'\n    )\n  }\n\n  let eachStyles = /<style[\\S\\s]*?<\\/style>/g\n  let eachStylePattern = /<style[\\S\\s]*?(<!--ABE[\\S\\s]*?--->)[\\S\\s]*?(<!--\\/ABE--->)[\\S\\s]*?<\\/style>/g\n  while ((match = eachStyles.exec(template))) {\n    var res = match[0]\n    while ((match2 = eachStylePattern.exec(res))) {\n      res = res\n        .replace(\n          cmsData.regex.escapeTextToRegex(match2[1], 'g'),\n          '/*' + match2[1] + '*/'\n        )\n        .replace(\n          cmsData.regex.escapeTextToRegex(match2[2], 'g'),\n          '/*' + match2[2] + '*/'\n        )\n      template = template.replace(\n        cmsData.regex.escapeTextToRegex(match[0], 'g'),\n        res\n      )\n    }\n  }\n\n  let eachScripts = /<script[\\S\\s]*?<\\/script>/g\n  let eachScriptPattern = /<script[\\S\\s]*?(<!--ABE[\\S\\s]*?--->)[\\S\\s]*?(<!--\\/ABE--->)[\\S\\s]*?<\\/script>/g\n  while ((match = eachScripts.exec(template))) {\n    var res = match[0]\n    while ((match2 = eachScriptPattern.exec(res))) {\n      res = res\n        .replace(\n          cmsData.regex.escapeTextToRegex(match2[1], 'g'),\n          '/*' + match2[1] + '*/'\n        )\n        .replace(\n          cmsData.regex.escapeTextToRegex(match2[2], 'g'),\n          '/*' + match2[2] + '*/'\n        )\n      template = template.replace(\n        cmsData.regex.escapeTextToRegex(match[0], 'g'),\n        res\n      )\n    }\n  }\n\n  return template\n}\n\n/**\n * THIS:\n[index].\n\n * BECOMES:\n{{@index}}-\n\n *  @param  {[type]} template [description]\n * @return {[type]}          [description]\n */\nexport function replaceAbeEachIndex(template) {\n  return template.replace(/\\[index\\]\\./g, '{{@index}}-')\n}\n\nexport function removeHiddenAbeTag(template) {\n  return template.replace(/(\\{\\{abe.*visible=[\\'|\\\"]false.*\\}\\})/g, '')\n}\n\n/**\n * Remove {{abe type=*}} from html if attribute visible=\"false\"\n * @param  {[type]} template [description]\n * @return {[type]}          [description]\n */\nexport function removeHandlebarsRawFromHtml(template) {\n  return template.replace(/\\{\\{\\{\\{\\/?raw\\}\\}\\}\\}/g, '')\n}\n\n/**\n * split {{#each}}...{{/each}} into an array\n * \n * @param  {[type]} template [description]\n * @return {[type]}          [description]\n */\nexport function splitEachBlocks(template) {\n  var block\n  var blocks = []\n\n  while ((block = cmsData.regex.eachBlockPattern.exec(template))) {\n    blocks.push(block[1])\n  }\n\n  return blocks\n}\n\nexport function indexEachBlocks(template, json, onlyHtml) {\n  // create an array of {{each}} blocks\n  var blocks = cmsTemplates.prepare.splitEachBlocks(template)\n\n  Array.prototype.forEach.call(blocks, block => {\n    var key = block.match(/#each (.*?)\\}\\}/)[1]\n    var match\n\n    if (!onlyHtml) {\n      var voidData = {}\n      voidData[key] = [{}]\n      var blockCompiled = Handlebars.compile(\n        block\n          .replace(/{{abe (.*?[\"'])[ ]?( has\\-abe=1)?}}/g, '[[abe $1]]')\n          .replace(\n            new RegExp(`\\\\.\\\\.\\/${config.meta.name}`, 'g'),\n            config.meta.name\n          )\n      )\n      var blockHtml = blockCompiled(voidData, {\n        data: {intl: config.intlData}\n      }).replace(/\\[\\[abe (.*?)\\]\\]/g, '{{abe $1}}')\n\n      // je rajoute un data-abe-block avec index sur tous les tags html du bloc each\n      var textEachWithIndex = block.replace(\n        /(<(?![\\/])[A-Za-z0-9!-]*)/g,\n        '$1 data-abe-block=\"' + key + '{{@index}}\"'\n      )\n\n      // I add an each block commentary only if the each block key != key of a type=data abe tag\n      var keys = []\n      if (typeof json.abe_source !== 'undefined' && json.abe_source !== null) {\n        keys = Object.keys(json.abe_source)\n      }\n      if (keys.indexOf(key) === -1) {\n        template = template.replace(\n          block,\n          textEachWithIndex +\n            `<!-- [[${key}]] ${cmsTemplates.encodeAbeTagAsComment(\n              blockHtml\n            )} -->`\n        )\n      }\n    }\n\n    // Pour chaque tag Abe\n    while ((match = cmsData.regex.abeTag.exec(block))) {\n      template = cmsTemplates.prepare.addAbeDictionnary(template, match[0], key)\n    }\n  })\n\n  return template\n}\n\n/**\n * split {{#each}}...{{/each}} into an array\n *\n * THIS:\n  {{abe type='text' key='test.title' desc='test title' tab='default'}}\n\n * BECOMES:\n  {{abe dictionnary='test' type='text' key='test.title' desc='test title' tab='default'}}\n\n * \n * @param  {[type]} template [description]\n * @return {[type]}          [description]\n */\nexport function addAbeDictionnary(template, match, key) {\n  if (cmsData.regex.isEachStatement(match)) return\n\n  if (cmsData.regex.isBlockAbe(match)) {\n    var abeDictionnary = match\n      .replace(\n        new RegExp('(key=[\\'|\"])' + key + '.', 'g'),\n        '$1' + key + '[index].'\n      )\n      .replace(/\\{\\{abe/, \"{{abe dictionnary='\" + key + \"'\")\n\n    template = template.replace(match, abeDictionnary)\n  }\n\n  return template\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"390139f08f8529a41ea7630f0b6ff4592efd090f","contentHash":"fdf3dc12af08d663cd7bcac053b537516b479e38ba20073397af856b48efacf4"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/assets.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/assets.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":20}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":58}},"4":{"start":{"line":12,"column":17},"end":{"line":12,"column":62}},"5":{"start":{"line":14,"column":18},"end":{"line":14,"column":64}},"6":{"start":{"line":16,"column":14},"end":{"line":16,"column":55}},"7":{"start":{"line":18,"column":12},"end":{"line":18,"column":51}},"8":{"start":{"line":20,"column":8},"end":{"line":20,"column":25}},"9":{"start":{"line":23,"column":13},"end":{"line":23,"column":43}},"10":{"start":{"line":24,"column":18},"end":{"line":24,"column":22}},"11":{"start":{"line":25,"column":15},"end":{"line":25,"column":44}},"12":{"start":{"line":27,"column":2},"end":{"line":35,"column":3}},"13":{"start":{"line":28,"column":4},"end":{"line":28,"column":52}},"14":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"15":{"start":{"line":31,"column":6},"end":{"line":31,"column":36}},"16":{"start":{"line":34,"column":4},"end":{"line":34,"column":34}},"17":{"start":{"line":37,"column":2},"end":{"line":45,"column":3}},"18":{"start":{"line":38,"column":20},"end":{"line":38,"column":57}},"19":{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},"20":{"start":{"line":41,"column":6},"end":{"line":41,"column":20}},"21":{"start":{"line":44,"column":4},"end":{"line":44,"column":18}},"22":{"start":{"line":47,"column":2},"end":{"line":47,"column":50}},"23":{"start":{"line":48,"column":2},"end":{"line":48,"column":80}},"24":{"start":{"line":48,"column":34},"end":{"line":48,"column":80}},"25":{"start":{"line":50,"column":2},"end":{"line":101,"column":3}},"26":{"start":{"line":51,"column":14},"end":{"line":53,"column":6}},"27":{"start":{"line":55,"column":4},"end":{"line":100,"column":7}},"28":{"start":{"line":56,"column":18},"end":{"line":61,"column":20}},"29":{"start":{"line":62,"column":18},"end":{"line":62,"column":48}},"30":{"start":{"line":63,"column":18},"end":{"line":63,"column":48}},"31":{"start":{"line":64,"column":20},"end":{"line":64,"column":83}},"32":{"start":{"line":66,"column":6},"end":{"line":99,"column":7}},"33":{"start":{"line":67,"column":8},"end":{"line":98,"column":9}},"34":{"start":{"line":68,"column":25},"end":{"line":68,"column":36}},"35":{"start":{"line":69,"column":25},"end":{"line":69,"column":76}},"36":{"start":{"line":71,"column":21},"end":{"line":71,"column":58}},"37":{"start":{"line":73,"column":10},"end":{"line":97,"column":11}},"38":{"start":{"line":74,"column":12},"end":{"line":92,"column":15}},"39":{"start":{"line":75,"column":14},"end":{"line":91,"column":17}},"40":{"start":{"line":76,"column":35},"end":{"line":76,"column":72}},"41":{"start":{"line":78,"column":28},"end":{"line":78,"column":71}},"42":{"start":{"line":80,"column":31},"end":{"line":80,"column":64}},"43":{"start":{"line":82,"column":16},"end":{"line":90,"column":17}},"44":{"start":{"line":83,"column":18},"end":{"line":89,"column":19}},"45":{"start":{"line":84,"column":20},"end":{"line":86,"column":23}},"46":{"start":{"line":85,"column":22},"end":{"line":85,"column":89}},"47":{"start":{"line":85,"column":36},"end":{"line":85,"column":89}},"48":{"start":{"line":88,"column":20},"end":{"line":88,"column":73}},"49":{"start":{"line":93,"column":17},"end":{"line":97,"column":11}},"50":{"start":{"line":94,"column":12},"end":{"line":94,"column":49}},"51":{"start":{"line":96,"column":12},"end":{"line":96,"column":57}},"52":{"start":{"line":103,"column":2},"end":{"line":103,"column":14}},"53":{"start":{"line":107,"column":2},"end":{"line":113,"column":5}},"54":{"start":{"line":108,"column":4},"end":{"line":110,"column":5}},"55":{"start":{"line":109,"column":6},"end":{"line":109,"column":21}},"56":{"start":{"line":112,"column":4},"end":{"line":112,"column":32}}},"fnMap":{"0":{"name":"copy","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":13}},"loc":{"start":{"line":22,"column":16},"end":{"line":104,"column":1}},"line":22},"1":{"name":"(anonymous_1)","decl":{"start":{"line":55,"column":24},"end":{"line":55,"column":25}},"loc":{"start":{"line":55,"column":41},"end":{"line":100,"column":5}},"line":55},"2":{"name":"(anonymous_2)","decl":{"start":{"line":74,"column":50},"end":{"line":74,"column":51}},"loc":{"start":{"line":74,"column":72},"end":{"line":92,"column":13}},"line":74},"3":{"name":"(anonymous_3)","decl":{"start":{"line":75,"column":50},"end":{"line":75,"column":51}},"loc":{"start":{"line":75,"column":66},"end":{"line":91,"column":15}},"line":75},"4":{"name":"(anonymous_4)","decl":{"start":{"line":84,"column":85},"end":{"line":84,"column":86}},"loc":{"start":{"line":84,"column":106},"end":{"line":86,"column":21}},"line":84},"5":{"name":"modifiedTime","decl":{"start":{"line":106,"column":9},"end":{"line":106,"column":21}},"loc":{"start":{"line":106,"column":36},"end":{"line":114,"column":1}},"line":106},"6":{"name":"(anonymous_6)","decl":{"start":{"line":107,"column":37},"end":{"line":107,"column":38}},"loc":{"start":{"line":107,"column":58},"end":{"line":113,"column":3}},"line":107}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},{"start":{"line":30,"column":4},"end":{"line":32,"column":5}}],"line":30},"1":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":63}},"type":"binary-expr","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":32}},{"start":{"line":30,"column":36},"end":{"line":30,"column":63}}],"line":30},"2":{"loc":{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},{"start":{"line":40,"column":4},"end":{"line":42,"column":5}}],"line":40},"3":{"loc":{"start":{"line":40,"column":8},"end":{"line":40,"column":63}},"type":"binary-expr","locations":[{"start":{"line":40,"column":8},"end":{"line":40,"column":32}},{"start":{"line":40,"column":36},"end":{"line":40,"column":63}}],"line":40},"4":{"loc":{"start":{"line":48,"column":2},"end":{"line":48,"column":80}},"type":"if","locations":[{"start":{"line":48,"column":2},"end":{"line":48,"column":80}},{"start":{"line":48,"column":2},"end":{"line":48,"column":80}}],"line":48},"5":{"loc":{"start":{"line":50,"column":2},"end":{"line":101,"column":3}},"type":"if","locations":[{"start":{"line":50,"column":2},"end":{"line":101,"column":3}},{"start":{"line":50,"column":2},"end":{"line":101,"column":3}}],"line":50},"6":{"loc":{"start":{"line":62,"column":18},"end":{"line":62,"column":48}},"type":"cond-expr","locations":[{"start":{"line":62,"column":32},"end":{"line":62,"column":43}},{"start":{"line":62,"column":46},"end":{"line":62,"column":48}}],"line":62},"7":{"loc":{"start":{"line":63,"column":18},"end":{"line":63,"column":48}},"type":"cond-expr","locations":[{"start":{"line":63,"column":32},"end":{"line":63,"column":43}},{"start":{"line":63,"column":46},"end":{"line":63,"column":48}}],"line":63},"8":{"loc":{"start":{"line":66,"column":6},"end":{"line":99,"column":7}},"type":"if","locations":[{"start":{"line":66,"column":6},"end":{"line":99,"column":7}},{"start":{"line":66,"column":6},"end":{"line":99,"column":7}}],"line":66},"9":{"loc":{"start":{"line":66,"column":10},"end":{"line":66,"column":116}},"type":"binary-expr","locations":[{"start":{"line":66,"column":10},"end":{"line":66,"column":30}},{"start":{"line":66,"column":34},"end":{"line":66,"column":54}},{"start":{"line":66,"column":58},"end":{"line":66,"column":85}},{"start":{"line":66,"column":89},"end":{"line":66,"column":116}}],"line":66},"10":{"loc":{"start":{"line":67,"column":8},"end":{"line":98,"column":9}},"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":98,"column":9}},{"start":{"line":67,"column":8},"end":{"line":98,"column":9}}],"line":67},"11":{"loc":{"start":{"line":67,"column":12},"end":{"line":67,"column":70}},"type":"binary-expr","locations":[{"start":{"line":67,"column":12},"end":{"line":67,"column":46}},{"start":{"line":67,"column":50},"end":{"line":67,"column":70}}],"line":67},"12":{"loc":{"start":{"line":73,"column":10},"end":{"line":97,"column":11}},"type":"if","locations":[{"start":{"line":73,"column":10},"end":{"line":97,"column":11}},{"start":{"line":73,"column":10},"end":{"line":97,"column":11}}],"line":73},"13":{"loc":{"start":{"line":82,"column":16},"end":{"line":90,"column":17}},"type":"if","locations":[{"start":{"line":82,"column":16},"end":{"line":90,"column":17}},{"start":{"line":82,"column":16},"end":{"line":90,"column":17}}],"line":82},"14":{"loc":{"start":{"line":82,"column":20},"end":{"line":82,"column":71}},"type":"binary-expr","locations":[{"start":{"line":82,"column":20},"end":{"line":82,"column":40}},{"start":{"line":82,"column":44},"end":{"line":82,"column":71}}],"line":82},"15":{"loc":{"start":{"line":85,"column":22},"end":{"line":85,"column":89}},"type":"if","locations":[{"start":{"line":85,"column":22},"end":{"line":85,"column":89}},{"start":{"line":85,"column":22},"end":{"line":85,"column":89}}],"line":85},"16":{"loc":{"start":{"line":93,"column":17},"end":{"line":97,"column":11}},"type":"if","locations":[{"start":{"line":93,"column":17},"end":{"line":97,"column":11}},{"start":{"line":93,"column":17},"end":{"line":97,"column":11}}],"line":93},"17":{"loc":{"start":{"line":93,"column":21},"end":{"line":93,"column":76}},"type":"binary-expr","locations":[{"start":{"line":93,"column":21},"end":{"line":93,"column":46}},{"start":{"line":93,"column":50},"end":{"line":93,"column":76}}],"line":93},"18":{"loc":{"start":{"line":108,"column":4},"end":{"line":110,"column":5}},"type":"if","locations":[{"start":{"line":108,"column":4},"end":{"line":110,"column":5}},{"start":{"line":108,"column":4},"end":{"line":110,"column":5}}],"line":108}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"inputSourceMap":{"version":3,"sources":["assets.js"],"names":["copy","dest","Manager","instance","pathPublish","directory","source","pathAssets","fse","lstatSync","isDirectory","isSymbolicLink","mkdirp","sync","e","dirSource","readlinkSync","res","dircompare","compareSync","compareDate","diffSet","forEach","entry","state","equal","left","right","distinct","name1","name2","exclude","RegExp","config","files","templates","extension","test","type1","type2","path1","original","basePath","replace","move","path","join","readdir","items","Array","prototype","call","item","originalItem","lstat","destItem","modifiedTime","err","diff","copySync","removeSync","fileName","cb","stat","mtime"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/","sourcesContent":["import fse from 'fs-extra'\nimport fsCompare from 'fs-compare'\nimport dircompare from 'dir-compare'\nimport mkdirp from 'mkdirp'\nimport path from 'path'\n\nimport {coreUtils, cmsTemplates, config, Manager} from '../../'\n\nexport function copy() {\n  let dest = Manager.instance.pathPublish\n  let directory = null\n  let source = Manager.instance.pathAssets\n  try {\n    directory = fse.lstatSync(dest)\n    if (!directory.isDirectory() && !directory.isSymbolicLink()) {\n      mkdirp.sync(dest)\n    }\n  } catch (e) {\n    mkdirp.sync(dest)\n  }\n\n  try {\n    const dirSource = fse.lstatSync(source)\n    if (!dirSource.isDirectory() && !dirSource.isSymbolicLink()) {\n      source = null\n    }\n  } catch (e) {\n    source = null\n  }\n\n  directory = fse.lstatSync(dest)\n  if (directory.isSymbolicLink()) dest = fse.readlinkSync(dest)\n\n  if (source != null) {\n    var res = dircompare.compareSync(source, dest, {\n      compareDate: true\n    })\n\n    res.diffSet.forEach(function(entry) {\n      var state = {\n        equal: '==',\n        left: '->',\n        right: '<-',\n        distinct: '<>'\n      }[entry.state]\n\n      var name1 = entry.name1 ? entry.name1 : ''\n      var name2 = entry.name2 ? entry.name2 : ''\n\n      let exclude = new RegExp(`.${config.files.templates.extension}$`)\n      if (\n        !exclude.test(name1) &&\n        !exclude.test(name2) &&\n        entry.type1 !== 'directory' &&\n        entry.type2 !== 'directory'\n      ) {\n        if (typeof entry.path1 !== 'undefined' && entry.path1 !== null) {\n          var original = entry.path1\n          var basePath = original.replace(Manager.instance.pathAssets, '')\n          var move = path.join(dest, basePath)\n\n          if (move === dest) {\n            fse.readdir(original, function(res, items) {\n              Array.prototype.forEach.call(items, item => {\n                var originalItem = path.join(original, item)\n                var lstat = fse.lstatSync(originalItem)\n                var destItem = path.join(dest, item)\n\n                if (!lstat.isDirectory() && !exclude.test(originalItem)) {\n                  try {\n                    fsCompare(modifiedTime, originalItem, destItem, function(\n                      err,\n                      diff\n                    ) {\n                      if (diff > 0) fse.copySync(originalItem, destItem)\n                    })\n                  } catch (e) {\n                    fse.copySync(originalItem, destItem)\n                  }\n                }\n              })\n            })\n          } else if (entry.type2 === 'missing' || entry.state === 'distinct') {\n            fse.removeSync(move)\n            fse.copySync(original, move)\n          }\n        }\n      }\n    })\n  }\n\n  return true\n}\n\nfunction modifiedTime(fileName, cb) {\n  fse.stat(fileName, function(err, stat) {\n    if (err) {\n      return cb(err)\n    }\n    return cb(null, stat.mtime)\n  })\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"563212df197f3cc87a3e9e3f9138cd6d31e34a98","contentHash":"8e8b0e15622ee96146b50a58c76075b43520740a03da8adc5393bba1f1e8d12c"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/encodeAbeTagAsComment.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/encodeAbeTagAsComment.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":43}},"2":{"start":{"line":8,"column":8},"end":{"line":8,"column":25}},"3":{"start":{"line":16,"column":17},"end":{"line":16,"column":54}},"4":{"start":{"line":18,"column":2},"end":{"line":24,"column":3}},"5":{"start":{"line":19,"column":4},"end":{"line":23,"column":5}},"6":{"start":{"line":19,"column":17},"end":{"line":19,"column":18}},"7":{"start":{"line":20,"column":20},"end":{"line":20,"column":84}},"8":{"start":{"line":22,"column":6},"end":{"line":22,"column":123}},"9":{"start":{"line":26,"column":2},"end":{"line":26,"column":59}},"10":{"start":{"line":28,"column":2},"end":{"line":36,"column":3}},"11":{"start":{"line":29,"column":4},"end":{"line":35,"column":5}},"12":{"start":{"line":30,"column":6},"end":{"line":34,"column":7}},"13":{"start":{"line":31,"column":8},"end":{"line":31,"column":83}},"14":{"start":{"line":32,"column":24},"end":{"line":32,"column":56}},"15":{"start":{"line":33,"column":8},"end":{"line":33,"column":250}},"16":{"start":{"line":38,"column":2},"end":{"line":38,"column":23}}},"fnMap":{"0":{"name":"encodeAbeTagAsComment","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":30}},"loc":{"start":{"line":15,"column":38},"end":{"line":39,"column":1}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":2},"end":{"line":24,"column":3}},"type":"if","locations":[{"start":{"line":18,"column":2},"end":{"line":24,"column":3}},{"start":{"line":18,"column":2},"end":{"line":24,"column":3}}],"line":18},"1":{"loc":{"start":{"line":28,"column":2},"end":{"line":36,"column":3}},"type":"if","locations":[{"start":{"line":28,"column":2},"end":{"line":36,"column":3}},{"start":{"line":28,"column":2},"end":{"line":36,"column":3}}],"line":28},"2":{"loc":{"start":{"line":30,"column":6},"end":{"line":34,"column":7}},"type":"if","locations":[{"start":{"line":30,"column":6},"end":{"line":34,"column":7}},{"start":{"line":30,"column":6},"end":{"line":34,"column":7}}],"line":30},"3":{"loc":{"start":{"line":30,"column":10},"end":{"line":30,"column":62}},"type":"binary-expr","locations":[{"start":{"line":30,"column":10},"end":{"line":30,"column":41}},{"start":{"line":30,"column":45},"end":{"line":30,"column":62}}],"line":30}},"s":{"0":1,"1":1,"2":1,"3":10,"4":10,"5":4,"6":4,"7":4,"8":4,"9":10,"10":10,"11":4,"12":4,"13":4,"14":4,"15":4,"16":10},"f":{"0":10},"b":{"0":[4,6],"1":[4,6],"2":[4,0],"3":[4,4]},"inputSourceMap":{"version":3,"sources":["encodeAbeTagAsComment.js"],"names":["encodeAbeTagAsComment","block","matchAbe","match","i","length","getattr","cmsData","regex","getAttr","replace","validDataAbe","matchattr","split","trim","escape"],"mappings":";;;;;;;AAAA;;AAEA;;;;;AAKe,SAASA,qBAAT,CAA+BC,KAA/B,EAAsC;AACnD,MAAIC,QAAQ,GAAGD,KAAK,CAACE,KAAN,CAAY,wBAAZ,CAAf;;AACA,MAAID,QAAJ,EAAc;AACZ,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAACG,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,UAAIE,OAAO,GAAGC,UAAQC,KAAR,CACXC,OADW,CACHP,QAAQ,CAACE,CAAD,CADL,EACU,KADV,EAEXM,OAFW,CAEH,GAFG,EAEE,MAFF,CAAd;;AAGAT,MAAAA,KAAK,GAAGA,KAAK,CAACS,OAAN,CACNR,QAAQ,CAACE,CAAD,CADF,EAEN,eACEG,UAAQC,KAAR,CAAcG,YAAd,CAA2BL,OAA3B,CADF,GAEE,IAFF,GAGEA,OAHF,GAIE,QANI,CAAR;AAQD;AACF;;AACDJ,EAAAA,QAAQ,GAAGD,KAAK,CAACE,KAAN,CAAY,gCAAZ,CAAX;;AACA,MAAID,QAAJ,EAAc;AACZ,SAAKE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGF,QAAQ,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC,UAAI,OAAOF,QAAP,KAAoB,WAApB,IAAmCA,QAAQ,KAAK,IAApD,EAA0D;AACxDI,QAAAA,OAAO,GAAGC,UAAQC,KAAR,CAAcC,OAAd,CAAsBP,QAAQ,CAACE,CAAD,CAA9B,EAAmC,KAAnC,EAA0CM,OAA1C,CAAkD,GAAlD,EAAuD,MAAvD,CAAV;AACA,YAAIE,SAAS,GAAGV,QAAQ,CAACE,CAAD,CAAR,CAAYS,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,EAA0BC,IAA1B,EAAhB;AACAb,QAAAA,KAAK,GAAGA,KAAK,CACVS,OADK,CAEJR,QAAQ,CAACE,CAAD,CAFJ,EAGJ,oBACEG,UAAQC,KAAR,CAAcG,YAAd,CAA2BL,OAA3B,CADF,GAEE,IAFF,GAGEM,SAHF,GAIE,GAJF,GAKE,YALF,GAMEL,UAAQC,KAAR,CAAcG,YAAd,CAA2BL,OAA3B,CANF,GAOE,IAPF,GAQEA,OARF,GASE,IATF,GAUEJ,QAAQ,CAACE,CAAD,CAbN,EAeLM,OAfK,CAeG,gBAfH,EAeqB,EAfrB,CAAR;AAgBD;AACF;AACF;;AACD,SAAOK,MAAM,CAACd,KAAD,CAAb;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/","sourcesContent":["import {cmsData} from '../../'\n\n/**\n * Encode / Escape && add data-abe attributs\n * @param  {String} block\n * @return {String} escaped string\n */\nexport default function encodeAbeTagAsComment(block) {\n  var matchAbe = block.match(/--->\\s*\\{\\{abe .*\\}\\}/g)\n  if (matchAbe) {\n    for (var i = 0; i < matchAbe.length; i++) {\n      var getattr = cmsData.regex\n        .getAttr(matchAbe[i], 'key')\n        .replace('.', '[0]-')\n      block = block.replace(\n        matchAbe[i],\n        ' data-abe-' +\n          cmsData.regex.validDataAbe(getattr) +\n          '=\"' +\n          getattr +\n          '\" --->'\n      )\n    }\n  }\n  matchAbe = block.match(/( [A-Za-z0-9\\-\\_]+=\"*{{.*?}})/g)\n  if (matchAbe) {\n    for (i = 0; i < matchAbe.length; i++) {\n      if (typeof matchAbe !== 'undefined' && matchAbe !== null) {\n        getattr = cmsData.regex.getAttr(matchAbe[i], 'key').replace('.', '[0]-')\n        var matchattr = matchAbe[i].split('=')[0].trim()\n        block = block\n          .replace(\n            matchAbe[i],\n            ' data-abe-attr-' +\n              cmsData.regex.validDataAbe(getattr) +\n              '=\"' +\n              matchattr +\n              '\"' +\n              ' data-abe-' +\n              cmsData.regex.validDataAbe(getattr) +\n              '=\"' +\n              getattr +\n              '\" ' +\n              matchAbe[i]\n          )\n          .replace(/\\{\\{\\abe.*?}\\}/, '')\n      }\n    }\n  }\n  return escape(block)\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9494d81283c73205a6d1e22cd8918787613e2b54","contentHash":"d47053dec99e84e399e41ebe91528185363fff3d4731cd6a0e6cf61ea6a684e1"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/insertDebugtoolUtilities.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/insertDebugtoolUtilities.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":46}},"2":{"start":{"line":9,"column":2},"end":{"line":14,"column":3}},"3":{"start":{"line":10,"column":4},"end":{"line":10,"column":65}},"4":{"start":{"line":12,"column":4},"end":{"line":12,"column":64}},"5":{"start":{"line":13,"column":4},"end":{"line":13,"column":738}},"6":{"start":{"line":16,"column":2},"end":{"line":16,"column":14}}},"fnMap":{"0":{"name":"insertDebugtoolUtilities","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":33}},"loc":{"start":{"line":8,"column":50},"end":{"line":17,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":2},"end":{"line":14,"column":3}},"type":"if","locations":[{"start":{"line":9,"column":2},"end":{"line":14,"column":3}},{"start":{"line":9,"column":2},"end":{"line":14,"column":3}}],"line":9}},"s":{"0":1,"1":1,"2":3,"3":2,"4":1,"5":1,"6":3},"f":{"0":3},"b":{"0":[2,1]},"inputSourceMap":{"version":3,"sources":["insertDebugtoolUtilities.js"],"names":["insertDebugtoolUtilities","text","onlyHTML","replace"],"mappings":";;;;;;;AAAe,SAASA,wBAAT,CAAkCC,IAAlC,EAAwCC,QAAxC,EAAkD;AAC/D,MAAIA,QAAJ,EAAc;AACZD,IAAAA,IAAI,mDAA0CA,IAA1C,CAAJ;AACD,GAFD,MAEO;AACLA,IAAAA,IAAI,kDAAyCA,IAAzC,CAAJ;AACAA,IAAAA,IAAI,GAAGA,IAAI,CAACE,OAAL,CACL,UADK,+rBAAP;AAYD;;AACD,SAAOF,IAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/templates/","sourcesContent":["export default function insertDebugtoolUtilities(text, onlyHTML) {\n  if (onlyHTML) {\n    text = `{{&setVariable \"abeEditor\" false}}\\n${text}`\n  } else {\n    text = `{{&setVariable \"abeEditor\" true}}\\n${text}`\n    text = text.replace(\n      /<\\/body>/,\n      `<style>\n          body [data-abe]{ transition: box-shadow 600ms ease-in-out; box-shadow: 0; }\n          body .select-border{ border-color: #007CDE; box-shadow: 0 3px 13px #7CBAEF; }\n          body img.display-attr:before { content: attr(alt); }\n          body a.display-attr:before { content: attr(title); }\n          body .display-attr:before { position: absolute; display: block; z-index: 555; font-size: 10px; background-color: rgba(255, 255, 255, 0.75); padding: 2px 5px; color: #5D5D5D; }\n          .hidden-abe{ display: none!important; width: 0px !important; height: 0px!important; position: absolute; left: -10000px; top: -10000px; visibility: hidden;}\n        </style>\n      </body>`\n    )\n  }\n  return text\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"09145872304e78784e1f16b4a643ccd1869828b1","contentHash":"7c517d3054a7826c236ee392f1912938fe750d6bac51b36dbda7001a1a696542"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/index.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":29},"end":{"line":5,"column":84}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":3}},"3":{"start":{"line":10,"column":0},"end":{"line":15,"column":3}},"4":{"start":{"line":13,"column":4},"end":{"line":13,"column":28}},"5":{"start":{"line":16,"column":0},"end":{"line":21,"column":3}},"6":{"start":{"line":19,"column":4},"end":{"line":19,"column":33}},"7":{"start":{"line":22,"column":0},"end":{"line":27,"column":3}},"8":{"start":{"line":25,"column":4},"end":{"line":25,"column":33}},"9":{"start":{"line":28,"column":0},"end":{"line":33,"column":3}},"10":{"start":{"line":31,"column":4},"end":{"line":31,"column":34}},"11":{"start":{"line":34,"column":0},"end":{"line":39,"column":3}},"12":{"start":{"line":37,"column":4},"end":{"line":37,"column":31}},"13":{"start":{"line":40,"column":0},"end":{"line":45,"column":3}},"14":{"start":{"line":43,"column":4},"end":{"line":43,"column":32}},"15":{"start":{"line":46,"column":0},"end":{"line":51,"column":3}},"16":{"start":{"line":49,"column":4},"end":{"line":49,"column":34}},"17":{"start":{"line":52,"column":0},"end":{"line":57,"column":3}},"18":{"start":{"line":55,"column":4},"end":{"line":55,"column":35}},"19":{"start":{"line":58,"column":0},"end":{"line":63,"column":3}},"20":{"start":{"line":61,"column":4},"end":{"line":61,"column":39}},"21":{"start":{"line":64,"column":0},"end":{"line":69,"column":3}},"22":{"start":{"line":67,"column":4},"end":{"line":67,"column":44}},"23":{"start":{"line":70,"column":0},"end":{"line":75,"column":3}},"24":{"start":{"line":73,"column":4},"end":{"line":73,"column":34}},"25":{"start":{"line":76,"column":0},"end":{"line":81,"column":3}},"26":{"start":{"line":79,"column":4},"end":{"line":79,"column":42}},"27":{"start":{"line":82,"column":0},"end":{"line":87,"column":3}},"28":{"start":{"line":85,"column":4},"end":{"line":85,"column":36}},"29":{"start":{"line":88,"column":0},"end":{"line":93,"column":3}},"30":{"start":{"line":91,"column":4},"end":{"line":91,"column":27}},"31":{"start":{"line":94,"column":0},"end":{"line":99,"column":3}},"32":{"start":{"line":97,"column":4},"end":{"line":97,"column":34}},"33":{"start":{"line":100,"column":0},"end":{"line":105,"column":3}},"34":{"start":{"line":103,"column":4},"end":{"line":103,"column":37}},"35":{"start":{"line":106,"column":0},"end":{"line":111,"column":3}},"36":{"start":{"line":109,"column":4},"end":{"line":109,"column":32}},"37":{"start":{"line":112,"column":0},"end":{"line":117,"column":3}},"38":{"start":{"line":115,"column":4},"end":{"line":115,"column":28}},"39":{"start":{"line":118,"column":0},"end":{"line":123,"column":3}},"40":{"start":{"line":121,"column":4},"end":{"line":121,"column":41}},"41":{"start":{"line":124,"column":0},"end":{"line":129,"column":3}},"42":{"start":{"line":127,"column":4},"end":{"line":127,"column":39}},"43":{"start":{"line":130,"column":0},"end":{"line":135,"column":3}},"44":{"start":{"line":133,"column":4},"end":{"line":133,"column":39}},"45":{"start":{"line":136,"column":0},"end":{"line":141,"column":3}},"46":{"start":{"line":139,"column":4},"end":{"line":139,"column":43}},"47":{"start":{"line":142,"column":0},"end":{"line":147,"column":3}},"48":{"start":{"line":145,"column":4},"end":{"line":145,"column":39}},"49":{"start":{"line":148,"column":0},"end":{"line":153,"column":3}},"50":{"start":{"line":151,"column":4},"end":{"line":151,"column":40}},"51":{"start":{"line":154,"column":0},"end":{"line":159,"column":3}},"52":{"start":{"line":157,"column":4},"end":{"line":157,"column":39}},"53":{"start":{"line":160,"column":0},"end":{"line":160,"column":24}},"54":{"start":{"line":162,"column":18},"end":{"line":162,"column":63}},"55":{"start":{"line":164,"column":22},"end":{"line":164,"column":72}},"56":{"start":{"line":166,"column":12},"end":{"line":166,"column":53}},"57":{"start":{"line":168,"column":13},"end":{"line":168,"column":57}},"58":{"start":{"line":170,"column":0},"end":{"line":170,"column":24}},"59":{"start":{"line":172,"column":17},"end":{"line":172,"column":74}},"60":{"start":{"line":174,"column":17},"end":{"line":174,"column":74}},"61":{"start":{"line":176,"column":18},"end":{"line":176,"column":76}},"62":{"start":{"line":178,"column":15},"end":{"line":178,"column":70}},"63":{"start":{"line":180,"column":16},"end":{"line":180,"column":72}},"64":{"start":{"line":182,"column":18},"end":{"line":182,"column":76}},"65":{"start":{"line":184,"column":19},"end":{"line":184,"column":78}},"66":{"start":{"line":186,"column":23},"end":{"line":186,"column":86}},"67":{"start":{"line":188,"column":28},"end":{"line":188,"column":96}},"68":{"start":{"line":190,"column":18},"end":{"line":190,"column":76}},"69":{"start":{"line":192,"column":26},"end":{"line":192,"column":92}},"70":{"start":{"line":194,"column":20},"end":{"line":194,"column":80}},"71":{"start":{"line":196,"column":11},"end":{"line":196,"column":62}},"72":{"start":{"line":198,"column":18},"end":{"line":198,"column":52}},"73":{"start":{"line":201,"column":0},"end":{"line":201,"column":74}},"74":{"start":{"line":203,"column":0},"end":{"line":203,"column":69}},"75":{"start":{"line":205,"column":0},"end":{"line":205,"column":70}},"76":{"start":{"line":207,"column":0},"end":{"line":207,"column":72}},"77":{"start":{"line":209,"column":0},"end":{"line":209,"column":76}},"78":{"start":{"line":211,"column":0},"end":{"line":211,"column":78}},"79":{"start":{"line":213,"column":0},"end":{"line":213,"column":76}},"80":{"start":{"line":215,"column":0},"end":{"line":215,"column":62}},"81":{"start":{"line":217,"column":0},"end":{"line":217,"column":64}}},"fnMap":{"0":{"name":"get","decl":{"start":{"line":12,"column":16},"end":{"line":12,"column":19}},"loc":{"start":{"line":12,"column":22},"end":{"line":14,"column":3}},"line":12},"1":{"name":"get","decl":{"start":{"line":18,"column":16},"end":{"line":18,"column":19}},"loc":{"start":{"line":18,"column":22},"end":{"line":20,"column":3}},"line":18},"2":{"name":"get","decl":{"start":{"line":24,"column":16},"end":{"line":24,"column":19}},"loc":{"start":{"line":24,"column":22},"end":{"line":26,"column":3}},"line":24},"3":{"name":"get","decl":{"start":{"line":30,"column":16},"end":{"line":30,"column":19}},"loc":{"start":{"line":30,"column":22},"end":{"line":32,"column":3}},"line":30},"4":{"name":"get","decl":{"start":{"line":36,"column":16},"end":{"line":36,"column":19}},"loc":{"start":{"line":36,"column":22},"end":{"line":38,"column":3}},"line":36},"5":{"name":"get","decl":{"start":{"line":42,"column":16},"end":{"line":42,"column":19}},"loc":{"start":{"line":42,"column":22},"end":{"line":44,"column":3}},"line":42},"6":{"name":"get","decl":{"start":{"line":48,"column":16},"end":{"line":48,"column":19}},"loc":{"start":{"line":48,"column":22},"end":{"line":50,"column":3}},"line":48},"7":{"name":"get","decl":{"start":{"line":54,"column":16},"end":{"line":54,"column":19}},"loc":{"start":{"line":54,"column":22},"end":{"line":56,"column":3}},"line":54},"8":{"name":"get","decl":{"start":{"line":60,"column":16},"end":{"line":60,"column":19}},"loc":{"start":{"line":60,"column":22},"end":{"line":62,"column":3}},"line":60},"9":{"name":"get","decl":{"start":{"line":66,"column":16},"end":{"line":66,"column":19}},"loc":{"start":{"line":66,"column":22},"end":{"line":68,"column":3}},"line":66},"10":{"name":"get","decl":{"start":{"line":72,"column":16},"end":{"line":72,"column":19}},"loc":{"start":{"line":72,"column":22},"end":{"line":74,"column":3}},"line":72},"11":{"name":"get","decl":{"start":{"line":78,"column":16},"end":{"line":78,"column":19}},"loc":{"start":{"line":78,"column":22},"end":{"line":80,"column":3}},"line":78},"12":{"name":"get","decl":{"start":{"line":84,"column":16},"end":{"line":84,"column":19}},"loc":{"start":{"line":84,"column":22},"end":{"line":86,"column":3}},"line":84},"13":{"name":"get","decl":{"start":{"line":90,"column":16},"end":{"line":90,"column":19}},"loc":{"start":{"line":90,"column":22},"end":{"line":92,"column":3}},"line":90},"14":{"name":"get","decl":{"start":{"line":96,"column":16},"end":{"line":96,"column":19}},"loc":{"start":{"line":96,"column":22},"end":{"line":98,"column":3}},"line":96},"15":{"name":"get","decl":{"start":{"line":102,"column":16},"end":{"line":102,"column":19}},"loc":{"start":{"line":102,"column":22},"end":{"line":104,"column":3}},"line":102},"16":{"name":"get","decl":{"start":{"line":108,"column":16},"end":{"line":108,"column":19}},"loc":{"start":{"line":108,"column":22},"end":{"line":110,"column":3}},"line":108},"17":{"name":"get","decl":{"start":{"line":114,"column":16},"end":{"line":114,"column":19}},"loc":{"start":{"line":114,"column":22},"end":{"line":116,"column":3}},"line":114},"18":{"name":"get","decl":{"start":{"line":120,"column":16},"end":{"line":120,"column":19}},"loc":{"start":{"line":120,"column":22},"end":{"line":122,"column":3}},"line":120},"19":{"name":"get","decl":{"start":{"line":126,"column":16},"end":{"line":126,"column":19}},"loc":{"start":{"line":126,"column":22},"end":{"line":128,"column":3}},"line":126},"20":{"name":"get","decl":{"start":{"line":132,"column":16},"end":{"line":132,"column":19}},"loc":{"start":{"line":132,"column":22},"end":{"line":134,"column":3}},"line":132},"21":{"name":"get","decl":{"start":{"line":138,"column":16},"end":{"line":138,"column":19}},"loc":{"start":{"line":138,"column":22},"end":{"line":140,"column":3}},"line":138},"22":{"name":"get","decl":{"start":{"line":144,"column":16},"end":{"line":144,"column":19}},"loc":{"start":{"line":144,"column":22},"end":{"line":146,"column":3}},"line":144},"23":{"name":"get","decl":{"start":{"line":150,"column":16},"end":{"line":150,"column":19}},"loc":{"start":{"line":150,"column":22},"end":{"line":152,"column":3}},"line":150},"24":{"name":"get","decl":{"start":{"line":156,"column":16},"end":{"line":156,"column":19}},"loc":{"start":{"line":156,"column":22},"end":{"line":158,"column":3}},"line":156}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":3,"5":1,"6":2,"7":1,"8":0,"9":1,"10":0,"11":1,"12":1,"13":1,"14":0,"15":1,"16":0,"17":1,"18":0,"19":1,"20":0,"21":1,"22":0,"23":1,"24":0,"25":1,"26":0,"27":1,"28":0,"29":1,"30":0,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":0,"39":1,"40":4,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1},"f":{"0":3,"1":2,"2":0,"3":0,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":4,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["Handlebars","registerHelper","abeImport","compileAbe","folders","listPage","printBlock","printConfig","printInput","raw","HandlebarsIntl","registerWith"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAdA;AA4BAA,uBAAWC,cAAX,CAA0B,WAA1B,EAAuCC,qBAAvC;;AACAF,uBAAWC,cAAX,CAA0B,KAA1B,EAAiCE,sBAAjC;;AACAH,uBAAWC,cAAX,CAA0B,SAA1B,EAAqCG,mBAArC;;AACAJ,uBAAWC,cAAX,CAA0B,UAA1B,EAAsCI,oBAAtC;;AACAL,uBAAWC,cAAX,CAA0B,YAA1B,EAAwCK,sBAAxC;;AACAN,uBAAWC,cAAX,CAA0B,aAA1B,EAAyCM,uBAAzC;;AACAP,uBAAWC,cAAX,CAA0B,YAA1B,EAAwCO,sBAAxC;;AACAR,uBAAWC,cAAX,CAA0B,KAA1B,EAAiCQ,eAAjC;;AAEAC,2BAAeC,YAAf,CAA4BX,sBAA5B","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/","sourcesContent":["import Handlebars from 'handlebars'\nimport HandlebarsIntl from 'handlebars-intl'\nimport form from './form'\nimport * as editor from './editor'\n\n/* Handlebar abe */\nimport abeEngine from './handlebars/abeEngine'\nimport abeImport from './handlebars/abeImport'\nimport compileAbe from './handlebars/compileAbe'\nimport folders from './handlebars/folders'\nimport listPage from './handlebars/listPage'\nimport printBlock from './handlebars/printBlock'\nimport printConfig from './handlebars/printConfig'\nimport recursiveFolder from './handlebars/recursiveFolder'\nimport recursivePrintConfig from './handlebars/recursivePrintConfig'\nimport sourceAttr from './handlebars/sourceAttr'\nimport sourceAutocomplete from './handlebars/sourceAutocomplete'\nimport sourceOption from './handlebars/sourceOption'\nimport raw from './handlebars/raw'\nimport {\n  printInput,\n  getAttributes,\n  getLabel,\n  hint,\n  createInputSource,\n  createInputRich,\n  createInputFile,\n  createInputTextarea,\n  createInputLink,\n  createInputImage,\n  createInputText\n} from './handlebars/printInput'\n\nHandlebars.registerHelper('abeImport', abeImport)\nHandlebars.registerHelper('abe', compileAbe)\nHandlebars.registerHelper('folders', folders)\nHandlebars.registerHelper('listPage', listPage)\nHandlebars.registerHelper('printBlock', printBlock)\nHandlebars.registerHelper('printConfig', printConfig)\nHandlebars.registerHelper('printInput', printInput)\nHandlebars.registerHelper('raw', raw)\n\nHandlebarsIntl.registerWith(Handlebars)\n\nexport {\n  editor,\n  form,\n  abeEngine,\n  abeImport,\n  compileAbe,\n  folders,\n  listPage,\n  printBlock,\n  printConfig,\n  recursiveFolder,\n  recursivePrintConfig,\n  sourceAttr,\n  sourceAutocomplete,\n  sourceOption,\n  raw,\n  printInput,\n  getAttributes,\n  getLabel,\n  hint,\n  createInputSource,\n  createInputRich,\n  createInputFile,\n  createInputTextarea,\n  createInputLink,\n  createInputImage,\n  createInputText\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4382298de104173e28c8b0ed57c6c422c53a559c","contentHash":"c82b06468e9604cc8dbf5ac826d017e627897818b1b10701e19d4a22e1755a2d"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/form.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/form.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":23},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":20},"end":{"line":12,"column":89}},"5":{"start":{"line":14,"column":14},"end":{"line":14,"column":55}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":25}},"7":{"start":{"line":18,"column":24},"end":{"line":199,"column":3}},"8":{"start":{"line":20,"column":4},"end":{"line":20,"column":49}},"9":{"start":{"line":21,"column":4},"end":{"line":21,"column":20}},"10":{"start":{"line":22,"column":4},"end":{"line":22,"column":19}},"11":{"start":{"line":30,"column":2},"end":{"line":197,"column":6}},"12":{"start":{"line":39,"column":6},"end":{"line":39,"column":36}},"13":{"start":{"line":55,"column":26},"end":{"line":75,"column":7}},"14":{"start":{"line":76,"column":6},"end":{"line":76,"column":62}},"15":{"start":{"line":78,"column":6},"end":{"line":80,"column":7}},"16":{"start":{"line":79,"column":8},"end":{"line":79,"column":42}},"17":{"start":{"line":82,"column":6},"end":{"line":84,"column":8}},"18":{"start":{"line":82,"column":39},"end":{"line":84,"column":8}},"19":{"start":{"line":85,"column":6},"end":{"line":85,"column":32}},"20":{"start":{"line":87,"column":6},"end":{"line":87,"column":41}},"21":{"start":{"line":92,"column":22},"end":{"line":92,"column":24}},"22":{"start":{"line":94,"column":6},"end":{"line":121,"column":7}},"23":{"start":{"line":95,"column":27},"end":{"line":95,"column":29}},"24":{"start":{"line":96,"column":22},"end":{"line":96,"column":56}},"25":{"start":{"line":98,"column":8},"end":{"line":110,"column":9}},"26":{"start":{"line":98,"column":21},"end":{"line":98,"column":22}},"27":{"start":{"line":99,"column":26},"end":{"line":99,"column":95}},"28":{"start":{"line":101,"column":10},"end":{"line":103,"column":11}},"29":{"start":{"line":102,"column":12},"end":{"line":102,"column":58}},"30":{"start":{"line":105,"column":10},"end":{"line":107,"column":11}},"31":{"start":{"line":106,"column":12},"end":{"line":106,"column":41}},"32":{"start":{"line":109,"column":10},"end":{"line":109,"column":56}},"33":{"start":{"line":112,"column":8},"end":{"line":114,"column":9}},"34":{"start":{"line":113,"column":10},"end":{"line":113,"column":61}},"35":{"start":{"line":116,"column":8},"end":{"line":118,"column":9}},"36":{"start":{"line":117,"column":10},"end":{"line":117,"column":30}},"37":{"start":{"line":120,"column":8},"end":{"line":120,"column":38}},"38":{"start":{"line":123,"column":28},"end":{"line":123,"column":30}},"39":{"start":{"line":124,"column":23},"end":{"line":132,"column":8}},"40":{"start":{"line":125,"column":8},"end":{"line":129,"column":9}},"41":{"start":{"line":126,"column":10},"end":{"line":126,"column":20}},"42":{"start":{"line":127,"column":15},"end":{"line":129,"column":9}},"43":{"start":{"line":128,"column":10},"end":{"line":128,"column":19}},"44":{"start":{"line":131,"column":8},"end":{"line":131,"column":17}},"45":{"start":{"line":133,"column":6},"end":{"line":135,"column":9}},"46":{"start":{"line":134,"column":8},"end":{"line":134,"column":84}},"47":{"start":{"line":134,"column":34},"end":{"line":134,"column":84}},"48":{"start":{"line":136,"column":6},"end":{"line":136,"column":50}},"49":{"start":{"line":137,"column":6},"end":{"line":137,"column":29}},"50":{"start":{"line":142,"column":24},"end":{"line":142,"column":26}},"51":{"start":{"line":143,"column":19},"end":{"line":143,"column":21}},"52":{"start":{"line":144,"column":23},"end":{"line":144,"column":25}},"53":{"start":{"line":145,"column":18},"end":{"line":145,"column":19}},"54":{"start":{"line":146,"column":18},"end":{"line":146,"column":28}},"55":{"start":{"line":148,"column":6},"end":{"line":148,"column":55}},"56":{"start":{"line":150,"column":6},"end":{"line":163,"column":9}},"57":{"start":{"line":151,"column":8},"end":{"line":162,"column":9}},"58":{"start":{"line":152,"column":10},"end":{"line":156,"column":11}},"59":{"start":{"line":153,"column":12},"end":{"line":153,"column":43}},"60":{"start":{"line":154,"column":12},"end":{"line":154,"column":36}},"61":{"start":{"line":155,"column":12},"end":{"line":155,"column":20}},"62":{"start":{"line":158,"column":10},"end":{"line":158,"column":40}},"63":{"start":{"line":160,"column":10},"end":{"line":160,"column":33}},"64":{"start":{"line":161,"column":10},"end":{"line":161,"column":18}},"65":{"start":{"line":165,"column":22},"end":{"line":165,"column":23}},"66":{"start":{"line":167,"column":6},"end":{"line":175,"column":7}},"67":{"start":{"line":168,"column":20},"end":{"line":168,"column":32}},"68":{"start":{"line":169,"column":8},"end":{"line":169,"column":32}},"69":{"start":{"line":170,"column":8},"end":{"line":170,"column":46}},"70":{"start":{"line":171,"column":8},"end":{"line":171,"column":48}},"71":{"start":{"line":172,"column":8},"end":{"line":172,"column":49}},"72":{"start":{"line":173,"column":19},"end":{"line":173,"column":64}},"73":{"start":{"line":174,"column":8},"end":{"line":174,"column":56}},"74":{"start":{"line":177,"column":6},"end":{"line":179,"column":8}},"75":{"start":{"line":184,"column":6},"end":{"line":188,"column":7}},"76":{"start":{"line":185,"column":8},"end":{"line":185,"column":18}},"77":{"start":{"line":186,"column":13},"end":{"line":188,"column":7}},"78":{"start":{"line":187,"column":8},"end":{"line":187,"column":17}},"79":{"start":{"line":190,"column":6},"end":{"line":190,"column":15}},"80":{"start":{"line":195,"column":6},"end":{"line":195,"column":24}},"81":{"start":{"line":198,"column":2},"end":{"line":198,"column":14}},"82":{"start":{"line":201,"column":0},"end":{"line":201,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":18,"column":24},"end":{"line":18,"column":25}},"loc":{"start":{"line":18,"column":36},"end":{"line":199,"column":1}},"line":18},"1":{"name":"Form","decl":{"start":{"line":19,"column":11},"end":{"line":19,"column":15}},"loc":{"start":{"line":19,"column":18},"end":{"line":23,"column":3}},"line":19},"2":{"name":"contains","decl":{"start":{"line":38,"column":20},"end":{"line":38,"column":28}},"loc":{"start":{"line":38,"column":34},"end":{"line":40,"column":5}},"line":38},"3":{"name":"add","decl":{"start":{"line":54,"column":20},"end":{"line":54,"column":23}},"loc":{"start":{"line":54,"column":29},"end":{"line":88,"column":5}},"line":54},"4":{"name":"orderBlock","decl":{"start":{"line":91,"column":20},"end":{"line":91,"column":30}},"loc":{"start":{"line":91,"column":33},"end":{"line":138,"column":5}},"line":91},"5":{"name":"(anonymous_5)","decl":{"start":{"line":124,"column":51},"end":{"line":124,"column":52}},"loc":{"start":{"line":124,"column":67},"end":{"line":132,"column":7}},"line":124},"6":{"name":"(anonymous_6)","decl":{"start":{"line":133,"column":47},"end":{"line":133,"column":48}},"loc":{"start":{"line":133,"column":68},"end":{"line":135,"column":7}},"line":133},"7":{"name":"orderByGroup","decl":{"start":{"line":141,"column":20},"end":{"line":141,"column":32}},"loc":{"start":{"line":141,"column":40},"end":{"line":180,"column":5}},"line":141},"8":{"name":"(anonymous_8)","decl":{"start":{"line":150,"column":42},"end":{"line":150,"column":43}},"loc":{"start":{"line":150,"column":58},"end":{"line":163,"column":7}},"line":150},"9":{"name":"orderByTabindex","decl":{"start":{"line":183,"column":20},"end":{"line":183,"column":35}},"loc":{"start":{"line":183,"column":42},"end":{"line":191,"column":5}},"line":183},"10":{"name":"get","decl":{"start":{"line":194,"column":18},"end":{"line":194,"column":21}},"loc":{"start":{"line":194,"column":24},"end":{"line":196,"column":5}},"line":194}},"branchMap":{"0":{"loc":{"start":{"line":78,"column":6},"end":{"line":80,"column":7}},"type":"if","locations":[{"start":{"line":78,"column":6},"end":{"line":80,"column":7}},{"start":{"line":78,"column":6},"end":{"line":80,"column":7}}],"line":78},"1":{"loc":{"start":{"line":78,"column":10},"end":{"line":78,"column":63}},"type":"binary-expr","locations":[{"start":{"line":78,"column":10},"end":{"line":78,"column":34}},{"start":{"line":78,"column":38},"end":{"line":78,"column":63}}],"line":78},"2":{"loc":{"start":{"line":82,"column":6},"end":{"line":84,"column":8}},"type":"if","locations":[{"start":{"line":82,"column":6},"end":{"line":84,"column":8}},{"start":{"line":82,"column":6},"end":{"line":84,"column":8}}],"line":82},"3":{"loc":{"start":{"line":99,"column":26},"end":{"line":99,"column":95}},"type":"cond-expr","locations":[{"start":{"line":99,"column":57},"end":{"line":99,"column":71}},{"start":{"line":99,"column":74},"end":{"line":99,"column":95}}],"line":99},"4":{"loc":{"start":{"line":101,"column":10},"end":{"line":103,"column":11}},"type":"if","locations":[{"start":{"line":101,"column":10},"end":{"line":103,"column":11}},{"start":{"line":101,"column":10},"end":{"line":103,"column":11}}],"line":101},"5":{"loc":{"start":{"line":105,"column":10},"end":{"line":107,"column":11}},"type":"if","locations":[{"start":{"line":105,"column":10},"end":{"line":107,"column":11}},{"start":{"line":105,"column":10},"end":{"line":107,"column":11}}],"line":105},"6":{"loc":{"start":{"line":105,"column":14},"end":{"line":105,"column":96}},"type":"binary-expr","locations":[{"start":{"line":105,"column":14},"end":{"line":105,"column":60}},{"start":{"line":105,"column":64},"end":{"line":105,"column":96}}],"line":105},"7":{"loc":{"start":{"line":112,"column":8},"end":{"line":114,"column":9}},"type":"if","locations":[{"start":{"line":112,"column":8},"end":{"line":114,"column":9}},{"start":{"line":112,"column":8},"end":{"line":114,"column":9}}],"line":112},"8":{"loc":{"start":{"line":112,"column":12},"end":{"line":112,"column":66}},"type":"binary-expr","locations":[{"start":{"line":112,"column":12},"end":{"line":112,"column":44}},{"start":{"line":112,"column":48},"end":{"line":112,"column":66}}],"line":112},"9":{"loc":{"start":{"line":116,"column":8},"end":{"line":118,"column":9}},"type":"if","locations":[{"start":{"line":116,"column":8},"end":{"line":118,"column":9}},{"start":{"line":116,"column":8},"end":{"line":118,"column":9}}],"line":116},"10":{"loc":{"start":{"line":116,"column":12},"end":{"line":116,"column":76}},"type":"binary-expr","locations":[{"start":{"line":116,"column":12},"end":{"line":116,"column":49}},{"start":{"line":116,"column":53},"end":{"line":116,"column":76}}],"line":116},"11":{"loc":{"start":{"line":125,"column":8},"end":{"line":129,"column":9}},"type":"if","locations":[{"start":{"line":125,"column":8},"end":{"line":129,"column":9}},{"start":{"line":125,"column":8},"end":{"line":129,"column":9}}],"line":125},"12":{"loc":{"start":{"line":127,"column":15},"end":{"line":129,"column":9}},"type":"if","locations":[{"start":{"line":127,"column":15},"end":{"line":129,"column":9}},{"start":{"line":127,"column":15},"end":{"line":129,"column":9}}],"line":127},"13":{"loc":{"start":{"line":134,"column":8},"end":{"line":134,"column":84}},"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":134,"column":84}},{"start":{"line":134,"column":8},"end":{"line":134,"column":84}}],"line":134},"14":{"loc":{"start":{"line":151,"column":8},"end":{"line":162,"column":9}},"type":"if","locations":[{"start":{"line":151,"column":8},"end":{"line":162,"column":9}},{"start":{"line":151,"column":8},"end":{"line":162,"column":9}}],"line":151},"15":{"loc":{"start":{"line":151,"column":12},"end":{"line":151,"column":75}},"type":"binary-expr","locations":[{"start":{"line":151,"column":12},"end":{"line":151,"column":30}},{"start":{"line":151,"column":35},"end":{"line":151,"column":52}},{"start":{"line":151,"column":56},"end":{"line":151,"column":74}}],"line":151},"16":{"loc":{"start":{"line":152,"column":10},"end":{"line":156,"column":11}},"type":"if","locations":[{"start":{"line":152,"column":10},"end":{"line":156,"column":11}},{"start":{"line":152,"column":10},"end":{"line":156,"column":11}}],"line":152},"17":{"loc":{"start":{"line":152,"column":14},"end":{"line":152,"column":86}},"type":"binary-expr","locations":[{"start":{"line":152,"column":14},"end":{"line":152,"column":55}},{"start":{"line":152,"column":59},"end":{"line":152,"column":86}}],"line":152},"18":{"loc":{"start":{"line":184,"column":6},"end":{"line":188,"column":7}},"type":"if","locations":[{"start":{"line":184,"column":6},"end":{"line":188,"column":7}},{"start":{"line":184,"column":6},"end":{"line":188,"column":7}}],"line":184},"19":{"loc":{"start":{"line":186,"column":13},"end":{"line":188,"column":7}},"type":"if","locations":[{"start":{"line":186,"column":13},"end":{"line":188,"column":7}},{"start":{"line":186,"column":13},"end":{"line":188,"column":7}}],"line":186}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":3,"9":3,"10":3,"11":1,"12":1,"13":2,"14":2,"15":2,"16":0,"17":2,"18":2,"19":2,"20":2,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1,"81":1,"82":1},"f":{"0":1,"1":3,"2":1,"3":2,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"b":{"0":[0,2],"1":[2,1],"2":[2,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0]},"inputSourceMap":{"version":3,"sources":["form.js"],"names":["Form","_form","_key","key","obj","defaultValues","autocomplete","block","desc","display","editable","order","placeholder","prefill","reload","required","source","tab","type","value","visible","precontribTemplate","indexOf","split","item","push","formBlock","formBlockTab","formTab","orderByGroup","i","length","blockName","sort","orderByTabindex","formTabsOrdered","arKeysTabs","Object","keys","a","b","parseFloat","Array","prototype","forEach","call","arKeysTab","group","finalFields","groups","groupIndex","index","items","coreUtils","predicatBy","shiftElts","prop","firstgroup","lastgroup","args","concat","splice","apply"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/","sourcesContent":["import extend from 'extend'\n\nimport {coreUtils} from '../../'\n\nexport default class Form {\n  constructor() {\n    this._form = {}\n    this._key = []\n  }\n\n  /**\n   * Get all input from a template\n   * @return {Array} array of input form\n   */\n  get form() {\n    return this._form\n  }\n\n  /**\n   * Check if key is not in the form array\n   * @param  {[type]} key [description]\n   * @return {[type]}     [description]\n   */\n  contains(key) {\n    return this._key[key] != null\n  }\n\n  /**\n   * Add entry to abe engine form\n   * @param {String} type        textarea | text | meta | link | image | ...\n   * @param {String} key         unique ID, no space allowed\n   * @param {String} desc        input description\n   * @param {Int}    max-length   maximum characteres allowed inside input\n   * @param {String} tab         tab name\n   * @param {String} jsonValue   \n   * @return {Void}\n   */\n  add(obj) {\n    var defaultValues = {\n      autocomplete: null,\n      block: '',\n      desc: '',\n      display: null,\n      editable: true,\n      key: '',\n      'max-length': null,\n      order: 0,\n      placeholder: '',\n      prefill: false,\n      'prefill-quantity': null,\n      reload: false,\n      required: false,\n      source: null,\n      tab: 'default',\n      type: 'text',\n      value: null,\n      visible: true,\n      precontribTemplate: ''\n    }\n\n    obj = extend(true, defaultValues, obj)\n\n    if (obj.key.indexOf('[') < 0 && obj.key.indexOf('.') > -1) {\n      obj.block = obj.key.split('.')[0]\n    }\n\n    if (this._form[obj.tab] == null) this._form[obj.tab] = {item: []}\n\n    this._key[obj.key] = true // save key for contains()\n    this._form[obj.tab].item.push(obj)\n  }\n\n  orderBlock() {\n    var formBlock = {}\n\n    for (var tab in this._form) {\n      var formBlockTab = {}\n      var formTab = this.orderByGroup(this._form[tab])\n      for (var i = 0; i < formTab.item.length; i++) {\n        var blockName =\n          formTab.item[i].block === '' ? 'default_' + i : formTab.item[i].block\n        if (formTab.item[i].key.indexOf('[') > -1) {\n          blockName = formTab.item[i].key.split('[')[0]\n        }\n        if (\n          typeof formBlockTab[blockName] === 'undefined' ||\n          formBlockTab[blockName] === null\n        ) {\n          formBlockTab[blockName] = []\n        }\n        formBlockTab[blockName].push(formTab.item[i])\n      }\n      if (typeof blockName !== 'undefined' && blockName !== null) {\n        formBlockTab[blockName].sort(this.orderByTabindex)\n      }\n      if (typeof formBlock[tab] === 'undefined' || formBlock[tab] === null) {\n        formBlock[tab] = {}\n      }\n\n      formBlock[tab] = formBlockTab\n    }\n\n    var formTabsOrdered = {}\n    var arKeysTabs = Object.keys(formBlock).sort((a, b) => {\n      if (\n        parseFloat(formBlock[a][Object.keys(formBlock[a])[0]][0].order) <\n        parseFloat(formBlock[b][Object.keys(formBlock[b])[0]][0].order)\n      ) {\n        return -1\n      } else if (\n        parseFloat(formBlock[a][Object.keys(formBlock[a])[0]][0].order) >\n        parseFloat(formBlock[b][Object.keys(formBlock[b])[0]][0].order)\n      ) {\n        return 1\n      }\n      return 0\n    })\n\n    Array.prototype.forEach.call(arKeysTabs, arKeysTab => {\n      if (arKeysTab !== 'slug')\n        formTabsOrdered[arKeysTab] = formBlock[arKeysTab]\n    })\n\n    formTabsOrdered['slug'] = formBlock['slug']\n\n    return formTabsOrdered\n  }\n\n  orderByGroup(group) {\n    var finalFields = []\n    var groups = {}\n    var groupIndex = {}\n    var index = 0\n    var items = group.item\n\n    // sorting items by order\n    items.sort(coreUtils.sort.predicatBy('order'))\n\n    // grouping each group of elements and remembering there index in the finalOrder\n    Array.prototype.forEach.call(items, item => {\n      if (item.group != null && (item.block === '' || item.block == null)) {\n        if (\n          typeof groups[item.group] === 'undefined' ||\n          groups[item.group] === null\n        ) {\n          groupIndex[item.group] = index\n          groups[item.group] = []\n          index++\n        }\n        groups[item.group].push(item)\n      } else {\n        finalFields.push(item)\n        index++\n      }\n    })\n\n    // ordering each group with first/last element and inserting the group elements in the final array at the right index.\n    var shiftElts = 0\n    for (var prop in groups) {\n      var group = groups[prop]\n\n      group[0].firstgroup = 1\n      group[group.length - 1].lastgroup = 1\n      groupIndex[group[0].group] += shiftElts\n      shiftElts = shiftElts + group.length - 1\n\n      var args = [groupIndex[group[0].group], 0].concat(group)\n      Array.prototype.splice.apply(finalFields, args)\n    }\n\n    return {item: finalFields}\n  }\n\n  orderByTabindex(a, b) {\n    if (a.order < b.order) {\n      return -1\n    } else if (a.order > b.order) {\n      return 1\n    }\n\n    return 0\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3a4850cc3873086807f75d6fb8e2a4e1e11c63b8","contentHash":"dc7d1b681dfe8f9eba9496f54a174a3ba90159fe2dfe7c53e79f713b045bfad3"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/editor.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/editor.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":18}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":54}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":56}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":38}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":52}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":24}},"9":{"start":{"line":16,"column":19},"end":{"line":16,"column":80}},"10":{"start":{"line":18,"column":25},"end":{"line":18,"column":99}},"11":{"start":{"line":20,"column":16},"end":{"line":20,"column":35}},"12":{"start":{"line":22,"column":12},"end":{"line":22,"column":51}},"13":{"start":{"line":24,"column":8},"end":{"line":24,"column":25}},"14":{"start":{"line":27,"column":14},"end":{"line":27,"column":23}},"15":{"start":{"line":29,"column":2},"end":{"line":47,"column":3}},"16":{"start":{"line":30,"column":14},"end":{"line":30,"column":35}},"17":{"start":{"line":31,"column":16},"end":{"line":31,"column":49}},"18":{"start":{"line":32,"column":15},"end":{"line":32,"column":47}},"19":{"start":{"line":34,"column":4},"end":{"line":41,"column":5}},"20":{"start":{"line":35,"column":6},"end":{"line":35,"column":57}},"21":{"start":{"line":37,"column":6},"end":{"line":40,"column":7}},"22":{"start":{"line":38,"column":8},"end":{"line":38,"column":78}},"23":{"start":{"line":43,"column":4},"end":{"line":46,"column":5}},"24":{"start":{"line":44,"column":6},"end":{"line":44,"column":168}},"25":{"start":{"line":44,"column":37},"end":{"line":44,"column":112}},"26":{"start":{"line":44,"column":117},"end":{"line":44,"column":168}},"27":{"start":{"line":49,"column":2},"end":{"line":51,"column":3}},"28":{"start":{"line":50,"column":4},"end":{"line":50,"column":38}},"29":{"start":{"line":53,"column":2},"end":{"line":53,"column":16}},"30":{"start":{"line":54,"column":2},"end":{"line":54,"column":19}},"31":{"start":{"line":58,"column":17},"end":{"line":58,"column":89}},"32":{"start":{"line":59,"column":10},"end":{"line":59,"column":79}},"33":{"start":{"line":61,"column":12},"end":{"line":61,"column":52}},"34":{"start":{"line":63,"column":2},"end":{"line":77,"column":3}},"35":{"start":{"line":65,"column":18},"end":{"line":65,"column":50}},"36":{"start":{"line":67,"column":4},"end":{"line":76,"column":5}},"37":{"start":{"line":68,"column":6},"end":{"line":68,"column":30}},"38":{"start":{"line":69,"column":6},"end":{"line":69,"column":28}},"39":{"start":{"line":70,"column":6},"end":{"line":70,"column":52}},"40":{"start":{"line":71,"column":6},"end":{"line":71,"column":36}},"41":{"start":{"line":72,"column":6},"end":{"line":72,"column":55}},"42":{"start":{"line":73,"column":11},"end":{"line":76,"column":5}},"43":{"start":{"line":74,"column":6},"end":{"line":74,"column":32}},"44":{"start":{"line":75,"column":6},"end":{"line":75,"column":43}},"45":{"start":{"line":96,"column":2},"end":{"line":110,"column":3}},"46":{"start":{"line":97,"column":20},"end":{"line":97,"column":83}},"47":{"start":{"line":99,"column":14},"end":{"line":99,"column":58}},"48":{"start":{"line":101,"column":4},"end":{"line":109,"column":5}},"49":{"start":{"line":102,"column":6},"end":{"line":106,"column":7}},"50":{"start":{"line":103,"column":8},"end":{"line":103,"column":34}},"51":{"start":{"line":105,"column":8},"end":{"line":105,"column":25}},"52":{"start":{"line":108,"column":6},"end":{"line":108,"column":27}},"53":{"start":{"line":114,"column":2},"end":{"line":116,"column":3}},"54":{"start":{"line":115,"column":4},"end":{"line":115,"column":47}},"55":{"start":{"line":118,"column":14},"end":{"line":118,"column":19}},"56":{"start":{"line":119,"column":2},"end":{"line":123,"column":5}},"57":{"start":{"line":120,"column":4},"end":{"line":122,"column":5}},"58":{"start":{"line":121,"column":6},"end":{"line":121,"column":19}},"59":{"start":{"line":125,"column":2},"end":{"line":127,"column":3}},"60":{"start":{"line":126,"column":4},"end":{"line":126,"column":52}},"61":{"start":{"line":146,"column":2},"end":{"line":174,"column":3}},"62":{"start":{"line":148,"column":19},"end":{"line":148,"column":44}},"63":{"start":{"line":149,"column":20},"end":{"line":149,"column":22}},"64":{"start":{"line":150,"column":17},"end":{"line":150,"column":18}},"65":{"start":{"line":151,"column":4},"end":{"line":151,"column":30}},"66":{"start":{"line":153,"column":4},"end":{"line":161,"column":5}},"67":{"start":{"line":154,"column":6},"end":{"line":160,"column":7}},"68":{"start":{"line":155,"column":8},"end":{"line":157,"column":9}},"69":{"start":{"line":156,"column":10},"end":{"line":156,"column":85}},"70":{"start":{"line":159,"column":8},"end":{"line":159,"column":83}},"71":{"start":{"line":164,"column":4},"end":{"line":167,"column":5}},"72":{"start":{"line":165,"column":6},"end":{"line":165,"column":28}},"73":{"start":{"line":166,"column":6},"end":{"line":166,"column":50}},"74":{"start":{"line":169,"column":4},"end":{"line":173,"column":5}},"75":{"start":{"line":170,"column":6},"end":{"line":172,"column":7}},"76":{"start":{"line":170,"column":19},"end":{"line":170,"column":20}},"77":{"start":{"line":171,"column":8},"end":{"line":171,"column":63}},"78":{"start":{"line":190,"column":2},"end":{"line":190,"column":60}},"79":{"start":{"line":192,"column":16},"end":{"line":192,"column":58}},"80":{"start":{"line":194,"column":2},"end":{"line":203,"column":5}},"81":{"start":{"line":195,"column":14},"end":{"line":195,"column":57}},"82":{"start":{"line":197,"column":4},"end":{"line":202,"column":5}},"83":{"start":{"line":198,"column":6},"end":{"line":198,"column":32}},"84":{"start":{"line":199,"column":6},"end":{"line":199,"column":27}},"85":{"start":{"line":201,"column":6},"end":{"line":201,"column":33}},"86":{"start":{"line":207,"column":2},"end":{"line":207,"column":40}},"87":{"start":{"line":211,"column":2},"end":{"line":271,"column":6}},"88":{"start":{"line":216,"column":16},"end":{"line":216,"column":25}},"89":{"start":{"line":217,"column":4},"end":{"line":270,"column":16}},"90":{"start":{"line":218,"column":6},"end":{"line":269,"column":7}},"91":{"start":{"line":219,"column":8},"end":{"line":268,"column":9}},"92":{"start":{"line":221,"column":12},"end":{"line":221,"column":87}},"93":{"start":{"line":222,"column":12},"end":{"line":222,"column":42}},"94":{"start":{"line":223,"column":12},"end":{"line":223,"column":28}},"95":{"start":{"line":227,"column":12},"end":{"line":227,"column":30}},"96":{"start":{"line":228,"column":12},"end":{"line":228,"column":60}},"97":{"start":{"line":233,"column":12},"end":{"line":233,"column":51}},"98":{"start":{"line":235,"column":12},"end":{"line":235,"column":64}},"99":{"start":{"line":237,"column":12},"end":{"line":240,"column":13}},"100":{"start":{"line":238,"column":14},"end":{"line":238,"column":87}},"101":{"start":{"line":239,"column":14},"end":{"line":239,"column":93}},"102":{"start":{"line":243,"column":12},"end":{"line":243,"column":53}},"103":{"start":{"line":245,"column":12},"end":{"line":245,"column":68}},"104":{"start":{"line":247,"column":12},"end":{"line":250,"column":13}},"105":{"start":{"line":249,"column":14},"end":{"line":249,"column":94}},"106":{"start":{"line":252,"column":12},"end":{"line":252,"column":39}},"107":{"start":{"line":254,"column":12},"end":{"line":257,"column":13}},"108":{"start":{"line":256,"column":14},"end":{"line":256,"column":103}},"109":{"start":{"line":259,"column":12},"end":{"line":259,"column":48}},"110":{"start":{"line":260,"column":12},"end":{"line":263,"column":15}},"111":{"start":{"line":267,"column":12},"end":{"line":267,"column":35}},"112":{"start":{"line":272,"column":2},"end":{"line":272,"column":40}}},"fnMap":{"0":{"name":"add","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":12}},"loc":{"start":{"line":26,"column":30},"end":{"line":55,"column":1}},"line":26},"1":{"name":"addAbeTagToCollection","decl":{"start":{"line":57,"column":9},"end":{"line":57,"column":30}},"loc":{"start":{"line":57,"column":68},"end":{"line":78,"column":1}},"line":57},"2":{"name":"addSingleAbeTagsToForm","decl":{"start":{"line":93,"column":9},"end":{"line":93,"column":31}},"loc":{"start":{"line":93,"column":50},"end":{"line":111,"column":1}},"line":93},"3":{"name":"insertAbeEach","decl":{"start":{"line":113,"column":9},"end":{"line":113,"column":22}},"loc":{"start":{"line":113,"column":58},"end":{"line":128,"column":1}},"line":113},"4":{"name":"(anonymous_4)","decl":{"start":{"line":119,"column":70},"end":{"line":119,"column":71}},"loc":{"start":{"line":119,"column":87},"end":{"line":123,"column":3}},"line":119},"5":{"name":"addAbeTagCollectionToForm","decl":{"start":{"line":142,"column":9},"end":{"line":142,"column":34}},"loc":{"start":{"line":142,"column":65},"end":{"line":175,"column":1}},"line":142},"6":{"name":"addDataAbeTagsToForm","decl":{"start":{"line":188,"column":9},"end":{"line":188,"column":29}},"loc":{"start":{"line":188,"column":48},"end":{"line":204,"column":1}},"line":188},"7":{"name":"(anonymous_7)","decl":{"start":{"line":194,"column":40},"end":{"line":194,"column":41}},"loc":{"start":{"line":194,"column":57},"end":{"line":203,"column":3}},"line":194},"8":{"name":"create","decl":{"start":{"line":206,"column":9},"end":{"line":206,"column":15}},"loc":{"start":{"line":206,"column":25},"end":{"line":208,"column":1}},"line":206},"9":{"name":"_create","decl":{"start":{"line":210,"column":9},"end":{"line":210,"column":16}},"loc":{"start":{"line":210,"column":19},"end":{"line":273,"column":1}},"line":210},"10":{"name":"_callee","decl":{"start":{"line":211,"column":99},"end":{"line":211,"column":106}},"loc":{"start":{"line":211,"column":119},"end":{"line":271,"column":3}},"line":211},"11":{"name":"_callee$","decl":{"start":{"line":217,"column":49},"end":{"line":217,"column":57}},"loc":{"start":{"line":217,"column":68},"end":{"line":270,"column":5}},"line":217}},"branchMap":{"0":{"loc":{"start":{"line":29,"column":2},"end":{"line":47,"column":3}},"type":"if","locations":[{"start":{"line":29,"column":2},"end":{"line":47,"column":3}},{"start":{"line":29,"column":2},"end":{"line":47,"column":3}}],"line":29},"1":{"loc":{"start":{"line":44,"column":6},"end":{"line":44,"column":168}},"type":"if","locations":[{"start":{"line":44,"column":6},"end":{"line":44,"column":168}},{"start":{"line":44,"column":6},"end":{"line":44,"column":168}}],"line":44},"2":{"loc":{"start":{"line":49,"column":2},"end":{"line":51,"column":3}},"type":"if","locations":[{"start":{"line":49,"column":2},"end":{"line":51,"column":3}},{"start":{"line":49,"column":2},"end":{"line":51,"column":3}}],"line":49},"3":{"loc":{"start":{"line":49,"column":6},"end":{"line":49,"column":43}},"type":"binary-expr","locations":[{"start":{"line":49,"column":6},"end":{"line":49,"column":18}},{"start":{"line":49,"column":22},"end":{"line":49,"column":43}}],"line":49},"4":{"loc":{"start":{"line":58,"column":17},"end":{"line":58,"column":89}},"type":"cond-expr","locations":[{"start":{"line":58,"column":70},"end":{"line":58,"column":82}},{"start":{"line":58,"column":85},"end":{"line":58,"column":89}}],"line":58},"5":{"loc":{"start":{"line":58,"column":17},"end":{"line":58,"column":67}},"type":"binary-expr","locations":[{"start":{"line":58,"column":17},"end":{"line":58,"column":37}},{"start":{"line":58,"column":41},"end":{"line":58,"column":67}}],"line":58},"6":{"loc":{"start":{"line":59,"column":10},"end":{"line":59,"column":79}},"type":"cond-expr","locations":[{"start":{"line":59,"column":63},"end":{"line":59,"column":75}},{"start":{"line":59,"column":78},"end":{"line":59,"column":79}}],"line":59},"7":{"loc":{"start":{"line":59,"column":10},"end":{"line":59,"column":60}},"type":"binary-expr","locations":[{"start":{"line":59,"column":10},"end":{"line":59,"column":30}},{"start":{"line":59,"column":34},"end":{"line":59,"column":60}}],"line":59},"8":{"loc":{"start":{"line":63,"column":2},"end":{"line":77,"column":3}},"type":"if","locations":[{"start":{"line":63,"column":2},"end":{"line":77,"column":3}},{"start":{"line":63,"column":2},"end":{"line":77,"column":3}}],"line":63},"9":{"loc":{"start":{"line":63,"column":6},"end":{"line":63,"column":58}},"type":"binary-expr","locations":[{"start":{"line":63,"column":6},"end":{"line":63,"column":37}},{"start":{"line":63,"column":41},"end":{"line":63,"column":58}}],"line":63},"10":{"loc":{"start":{"line":67,"column":4},"end":{"line":76,"column":5}},"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":76,"column":5}},{"start":{"line":67,"column":4},"end":{"line":76,"column":5}}],"line":67},"11":{"loc":{"start":{"line":67,"column":8},"end":{"line":67,"column":66}},"type":"binary-expr","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":44}},{"start":{"line":67,"column":48},"end":{"line":67,"column":66}}],"line":67},"12":{"loc":{"start":{"line":73,"column":11},"end":{"line":76,"column":5}},"type":"if","locations":[{"start":{"line":73,"column":11},"end":{"line":76,"column":5}},{"start":{"line":73,"column":11},"end":{"line":76,"column":5}}],"line":73},"13":{"loc":{"start":{"line":101,"column":4},"end":{"line":109,"column":5}},"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":109,"column":5}},{"start":{"line":101,"column":4},"end":{"line":109,"column":5}}],"line":101},"14":{"loc":{"start":{"line":101,"column":8},"end":{"line":101,"column":110}},"type":"binary-expr","locations":[{"start":{"line":101,"column":8},"end":{"line":101,"column":21}},{"start":{"line":101,"column":25},"end":{"line":101,"column":39}},{"start":{"line":101,"column":43},"end":{"line":101,"column":66}},{"start":{"line":101,"column":70},"end":{"line":101,"column":110}}],"line":101},"15":{"loc":{"start":{"line":102,"column":6},"end":{"line":106,"column":7}},"type":"if","locations":[{"start":{"line":102,"column":6},"end":{"line":106,"column":7}},{"start":{"line":102,"column":6},"end":{"line":106,"column":7}}],"line":102},"16":{"loc":{"start":{"line":114,"column":2},"end":{"line":116,"column":3}},"type":"if","locations":[{"start":{"line":114,"column":2},"end":{"line":116,"column":3}},{"start":{"line":114,"column":2},"end":{"line":116,"column":3}}],"line":114},"17":{"loc":{"start":{"line":114,"column":6},"end":{"line":114,"column":116}},"type":"binary-expr","locations":[{"start":{"line":114,"column":6},"end":{"line":114,"column":66}},{"start":{"line":114,"column":70},"end":{"line":114,"column":116}}],"line":114},"18":{"loc":{"start":{"line":120,"column":4},"end":{"line":122,"column":5}},"type":"if","locations":[{"start":{"line":120,"column":4},"end":{"line":122,"column":5}},{"start":{"line":120,"column":4},"end":{"line":122,"column":5}}],"line":120},"19":{"loc":{"start":{"line":125,"column":2},"end":{"line":127,"column":3}},"type":"if","locations":[{"start":{"line":125,"column":2},"end":{"line":127,"column":3}},{"start":{"line":125,"column":2},"end":{"line":127,"column":3}}],"line":125},"20":{"loc":{"start":{"line":154,"column":6},"end":{"line":160,"column":7}},"type":"if","locations":[{"start":{"line":154,"column":6},"end":{"line":160,"column":7}},{"start":{"line":154,"column":6},"end":{"line":160,"column":7}}],"line":154},"21":{"loc":{"start":{"line":197,"column":4},"end":{"line":202,"column":5}},"type":"if","locations":[{"start":{"line":197,"column":4},"end":{"line":202,"column":5}},{"start":{"line":197,"column":4},"end":{"line":202,"column":5}}],"line":197},"22":{"loc":{"start":{"line":219,"column":8},"end":{"line":268,"column":9}},"type":"switch","locations":[{"start":{"line":220,"column":10},"end":{"line":228,"column":60}},{"start":{"line":230,"column":10},"end":{"line":263,"column":15}},{"start":{"line":265,"column":10},"end":{"line":265,"column":18}},{"start":{"line":266,"column":10},"end":{"line":267,"column":35}}],"line":219},"23":{"loc":{"start":{"line":221,"column":25},"end":{"line":221,"column":86}},"type":"cond-expr","locations":[{"start":{"line":221,"column":70},"end":{"line":221,"column":78}},{"start":{"line":221,"column":81},"end":{"line":221,"column":86}}],"line":221},"24":{"loc":{"start":{"line":221,"column":25},"end":{"line":221,"column":67}},"type":"binary-expr","locations":[{"start":{"line":221,"column":25},"end":{"line":221,"column":41}},{"start":{"line":221,"column":45},"end":{"line":221,"column":67}}],"line":221},"25":{"loc":{"start":{"line":237,"column":12},"end":{"line":240,"column":13}},"type":"if","locations":[{"start":{"line":237,"column":12},"end":{"line":240,"column":13}},{"start":{"line":237,"column":12},"end":{"line":240,"column":13}}],"line":237},"26":{"loc":{"start":{"line":247,"column":12},"end":{"line":250,"column":13}},"type":"if","locations":[{"start":{"line":247,"column":12},"end":{"line":250,"column":13}},{"start":{"line":247,"column":12},"end":{"line":250,"column":13}}],"line":247},"27":{"loc":{"start":{"line":254,"column":12},"end":{"line":257,"column":13}},"type":"if","locations":[{"start":{"line":254,"column":12},"end":{"line":257,"column":13}},{"start":{"line":254,"column":12},"end":{"line":257,"column":13}}],"line":254}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":2,"15":2,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":0,"26":1,"27":2,"28":0,"29":2,"30":2,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":1,"79":1,"80":1,"81":1,"82":1,"83":0,"84":0,"85":1,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0},"f":{"0":2,"1":0,"2":0,"3":0,"4":0,"5":0,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0},"b":{"0":[1,1],"1":[0,1],"2":[0,2],"3":[2,2],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,1],"22":[0,0,0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0]},"inputSourceMap":{"version":3,"sources":["editor.js"],"names":["add","obj","json","form","value","key","indexOf","split","index","match","prop","replace","eval","e","JSON","stringify","join","abe_meta","status","addAbeTagToCollection","text","arrayBlock","keyArray","i","cmsData","attributes","getAll","realKey","length","desc","insertAbeEach","contains","addSingleAbeTagsToForm","regex","abeTag","exec","matchText","type","isSingleAbe","exist","Array","prototype","forEach","call","block","push","addAbeTagCollectionToForm","textEach","eachBlockPattern","attrArray","j","addDataAbeTagsToForm","matches","getTagAbeTypeRequest","editable","source","create","precontrib","cmsEditor","getDataList","removeNonEachDataList","cmsTemplates","template","setAbeSlugDefaultValueIfDoesntExist","setAbePrecontribDefaultValueIfDoesntExist","abeExtend","hooks","instance","trigger","blocks","orderBlock","abeEngine","content"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/","sourcesContent":["import {Promise} from 'bluebird'\nimport path from 'path'\n\nimport {\n  coreUtils,\n  cmsData,\n  cmsEditor,\n  abeEngine,\n  cmsTemplates,\n  abeExtend\n} from '../../'\n\nexport function add(obj, json, form) {\n  var value = obj.value\n\n  if (obj.key.indexOf('[') > -1) {\n    var key = obj.key.split('[')[0]\n    var index = obj.key.match(/[^\\[]+?(?=\\])/)[0]\n    var prop = obj.key.replace(/[^\\.]+?\\./, '')\n\n    try {\n      obj.value = eval(`json[key][index].${prop}`)\n    } catch (e) {\n      try {\n        eval(`json[key][index].${prop} = ` + JSON.stringify(value))\n      } catch (e) {\n        // no value found inside json KEY\n      }\n    }\n  } else {\n    try {\n      if (obj.key.indexOf('.') > -1)\n        obj.value = eval(`json[\"${obj.key.split('.').join('\"][\"')}\"]`)\n      else obj.value = eval(`json[\"${obj.key}\"]`)\n    } catch (e) {\n      // no value found inside json KEY\n    }\n  }\n\n  if (json != null && json.abe_meta != null) {\n    obj.status = json.abe_meta.status\n  }\n\n  form.add(obj)\n\n  return obj.value\n}\n\nexport function addAbeTagToCollection(\n  match,\n  text,\n  json,\n  form,\n  arrayBlock,\n  keyArray = null,\n  i = 0\n) {\n  var obj = cmsData.attributes.getAll(match, json)\n\n  if (typeof keyArray !== 'undefined' && keyArray !== null) {\n    // removes the first part of the key. ie. 'main.article' becomes 'article'\n    var realKey = obj.key.replace(/[^\\.]+?\\./, '')\n\n    if (obj.key.indexOf(keyArray + '.') >= 0 && realKey.length > 0) {\n      obj.keyArray = keyArray\n      obj.realKey = realKey\n      obj.key = keyArray + '[' + i + '].' + realKey\n      obj.desc = obj.desc + ' ' + i\n      insertAbeEach(obj, text, json, form, arrayBlock)\n    } else if (!form.contains(obj.key)) {\n      obj.value = json[obj.key]\n      json[obj.key] = add(obj, json, form)\n    }\n  }\n}\n\n/**\n * parse every abe tags, \n * create the defaultValue attribute if it finds a value in 'value' attribute\n * If the abe tag object contains a key and is not already put in the form\n * and is not included in a #each statement, I update its value and\n * add it to the form\n *\n * @param  {[type]} text       [description]\n * @param  {[type]} json       [description]\n * @param  {[type]} form       [description]\n * @return {[type]}            [description]\n */\nexport function addSingleAbeTagsToForm(text, json, form) {\n  var match\n\n  while ((match = cmsData.regex.abeTag.exec(text))) {\n    var matchText = match[0].replace(\n      /value=([\\'\\\"].*?[\\'\\\"])/g,\n      'defaultValue=$1'\n    )\n    var obj = cmsData.attributes.getAll(matchText, json)\n\n    if (\n      obj.key != '' &&\n      obj.type != '' &&\n      !form.contains(obj.key) &&\n      cmsData.regex.isSingleAbe(match, text)\n    ) {\n      if (json[obj.key]) {\n        obj.value = json[obj.key]\n      } else {\n        obj.value = null\n      }\n\n      add(obj, json, form)\n    }\n  }\n}\n\nexport function insertAbeEach(obj, text, json, form, arrayBlock) {\n  if (\n    typeof arrayBlock[obj.keyArray][obj.realKey] === 'undefined' ||\n    arrayBlock[obj.keyArray][obj.realKey] === null\n  ) {\n    arrayBlock[obj.keyArray][obj.realKey] = []\n  }\n  var exist = false\n  Array.prototype.forEach.call(arrayBlock[obj.keyArray][obj.realKey], block => {\n    if (block.key === obj.key) {\n      exist = true\n    }\n  })\n  if (!exist) {\n    arrayBlock[obj.keyArray][obj.realKey].push(obj)\n  }\n}\n\n/**\n * parse every {{#each name}} texts, then select each abe tag included and create\n * an array of these tags in arrayBlock[name]\n * Then reorder these tags and add them to form\n *\n * @param  {[type]} text       [description]\n * @param  {[type]} json       [description]\n * @param  {[type]} form       [description]\n * @param  {[type]} arrayBlock [description]\n * @return {[type]}            [description]\n */\nexport function addAbeTagCollectionToForm(text, json, form, arrayBlock) {\n  var textEach\n  var match\n\n  while ((textEach = cmsData.regex.eachBlockPattern.exec(text))) {\n    var i\n    var keyArray = textEach[2].split(' ')[0]\n    var attrArray = []\n    var length = 0\n\n    arrayBlock[keyArray] = []\n\n    while ((match = cmsData.regex.abeTag.exec(textEach[0]))) {\n      if (json[keyArray]) {\n        for (i = 0; i < json[keyArray].length; i++) {\n          addAbeTagToCollection(\n            match[0],\n            text,\n            json,\n            form,\n            arrayBlock,\n            keyArray,\n            i\n          )\n        }\n      } else {\n        addAbeTagToCollection(\n          match[0],\n          text,\n          json,\n          form,\n          arrayBlock,\n          keyArray,\n          0\n        )\n      }\n    }\n\n    // Let's reorder the fields and add it to the form\n    for (var index in arrayBlock[keyArray]) {\n      attrArray.push(index)\n      length = arrayBlock[keyArray][index].length\n    }\n\n    for (i = 0; i < length; i++) {\n      for (var j = 0; j < attrArray.length; j++) {\n        add(arrayBlock[keyArray][attrArray[j]][i], json, form)\n      }\n    }\n  }\n}\n\n/**\n * Removing all type='data' included in {{#each}} statements\n * Then if editable, obj.value = json[obj.key]\n * else put the source values in the json[obj.key]\n * if not editable, put the json value with values from source\n *\n * @param {[type]} text [description]\n * @param {[type]} json [description]\n * @param {[type]} form [description]\n */\nexport function addDataAbeTagsToForm(text, json, form) {\n  // removing each blocks potentially containing abe data type\n  text = text.replace(cmsData.regex.eachBlockPattern, '')\n\n  const matches = cmsData.regex.getTagAbeTypeRequest(text)\n\n  Array.prototype.forEach.call(matches, match => {\n    var obj = cmsData.attributes.getAll(match[0], json)\n\n    if (obj.editable) {\n      obj.value = json[obj.key]\n      add(obj, json, form)\n    } else {\n      json[obj.key] = obj.source\n    }\n  })\n}\n\nexport async function create(text, json, precontrib = false) {\n  var form = new cmsEditor.form()\n  var arrayBlock = []\n\n  // get all data from type='data' (web service, select, ...)\n  // and create a key abe_source with all data\n  // + modify keys when editable = false or prefill = true only in the case of source=select\n  await cmsData.source.getDataList(text, json)\n\n  // prepare editor values if editable or put values in json from abe_source\n  // (don't do this for type='data' included in {{#each}})\n  addDataAbeTagsToForm(text, json, form)\n\n  // Remove every abe type='data' tags else but those in {{#each}} statements\n  text = cmsData.source.removeNonEachDataList(text)\n\n  if (!precontrib) {\n    text = cmsTemplates.template.setAbeSlugDefaultValueIfDoesntExist(text)\n    text = cmsTemplates.template.setAbePrecontribDefaultValueIfDoesntExist(\n      text\n    )\n  }\n\n  // add abe tags not in each and with a key to the form\n  addSingleAbeTagsToForm(text, json, form)\n\n  // add abe tags in each\n  addAbeTagCollectionToForm(text, json, form, arrayBlock)\n\n  if (!precontrib) {\n    // HOOKS beforeEditorFormBlocks\n    json = abeExtend.hooks.instance.trigger(\n      'beforeEditorFormBlocks',\n      json,\n      text\n    )\n  }\n\n  var blocks = form.orderBlock()\n\n  if (!precontrib) {\n    // HOOKS afterEditorFormBlocks\n    blocks = abeExtend.hooks.instance.trigger(\n      'afterEditorFormBlocks',\n      blocks,\n      json,\n      text\n    )\n  }\n\n  abeEngine.instance.content = json\n  return {\n    form: blocks,\n    json: json\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"12aeed4b096916c71c030304cedc07530acbe717","contentHash":"4939d5ebaf9725bfb8e2926f579088eaf84f8d8e7ab64e413759e9c9380226ea"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/abeEngine.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/abeEngine.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":23},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":20},"end":{"line":12,"column":89}},"5":{"start":{"line":14,"column":16},"end":{"line":14,"column":24}},"6":{"start":{"line":15,"column":24},"end":{"line":15,"column":32}},"7":{"start":{"line":17,"column":29},"end":{"line":43,"column":3}},"8":{"start":{"line":19,"column":4},"end":{"line":19,"column":54}},"9":{"start":{"line":20,"column":4},"end":{"line":20,"column":79}},"10":{"start":{"line":20,"column":39},"end":{"line":20,"column":79}},"11":{"start":{"line":21,"column":4},"end":{"line":21,"column":23}},"12":{"start":{"line":24,"column":2},"end":{"line":41,"column":6}},"13":{"start":{"line":27,"column":6},"end":{"line":27,"column":27}},"14":{"start":{"line":30,"column":6},"end":{"line":30,"column":30}},"15":{"start":{"line":35,"column":6},"end":{"line":37,"column":7}},"16":{"start":{"line":36,"column":8},"end":{"line":36,"column":59}},"17":{"start":{"line":39,"column":6},"end":{"line":39,"column":29}},"18":{"start":{"line":42,"column":2},"end":{"line":42,"column":19}},"19":{"start":{"line":45,"column":15},"end":{"line":45,"column":24}},"20":{"start":{"line":46,"column":0},"end":{"line":46,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":17,"column":29},"end":{"line":17,"column":30}},"loc":{"start":{"line":17,"column":41},"end":{"line":43,"column":1}},"line":17},"1":{"name":"abeEngine","decl":{"start":{"line":18,"column":11},"end":{"line":18,"column":20}},"loc":{"start":{"line":18,"column":31},"end":{"line":22,"column":3}},"line":18},"2":{"name":"get","decl":{"start":{"line":26,"column":18},"end":{"line":26,"column":21}},"loc":{"start":{"line":26,"column":24},"end":{"line":28,"column":5}},"line":26},"3":{"name":"set","decl":{"start":{"line":29,"column":18},"end":{"line":29,"column":21}},"loc":{"start":{"line":29,"column":31},"end":{"line":31,"column":5}},"line":29},"4":{"name":"get","decl":{"start":{"line":34,"column":18},"end":{"line":34,"column":21}},"loc":{"start":{"line":34,"column":24},"end":{"line":40,"column":5}},"line":34}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":79}},"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":20,"column":79}},{"start":{"line":20,"column":4},"end":{"line":20,"column":79}}],"line":20},"1":{"loc":{"start":{"line":35,"column":6},"end":{"line":37,"column":7}},"type":"if","locations":[{"start":{"line":35,"column":6},"end":{"line":37,"column":7}},{"start":{"line":35,"column":6},"end":{"line":37,"column":7}}],"line":35}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":1,"13":12,"14":5,"15":17,"16":1,"17":17,"18":1,"19":1,"20":1},"f":{"0":1,"1":1,"2":12,"3":5,"4":17},"b":{"0":[0,1],"1":[1,16]},"inputSourceMap":{"version":3,"sources":["abeEngine.js"],"names":["singleton","Symbol","singletonEnforcer","abeEngine","enforcer","_content","content"],"mappings":";;;;;;;;;;;;;AAAA,IAAIA,SAAS,GAAGC,MAAM,EAAtB;AACA,IAAIC,iBAAiB,GAAGD,MAAM,EAA9B;;IAEME,S;AACJ,qBAAYC,QAAZ,EAAsB;AAAA;AACpB,QAAIA,QAAQ,IAAIF,iBAAhB,EAAmC,MAAM,iCAAN;AACnC,SAAKG,QAAL,GAAgB,EAAhB;AACD;;;;wBASa;AACZ,aAAO,KAAKA,QAAZ;AACD,K;sBAEWC,O,EAAS;AACnB,WAAKD,QAAL,GAAgBC,OAAhB;AACD;;;wBAbqB;AACpB,UAAI,CAAC,KAAKN,SAAL,CAAL,EAAsB;AACpB,aAAKA,SAAL,IAAkB,IAAIG,SAAJ,CAAcD,iBAAd,CAAlB;AACD;;AACD,aAAO,KAAKF,SAAL,CAAP;AACD;;;;;eAWYG,S","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["let singleton = Symbol()\nlet singletonEnforcer = Symbol()\n\nclass abeEngine {\n  constructor(enforcer) {\n    if (enforcer != singletonEnforcer) throw 'Cannot construct Json singleton'\n    this._content = {}\n  }\n\n  static get instance() {\n    if (!this[singleton]) {\n      this[singleton] = new abeEngine(singletonEnforcer)\n    }\n    return this[singleton]\n  }\n\n  get content() {\n    return this._content\n  }\n\n  set content(content) {\n    this._content = content\n  }\n}\n\nexport default abeEngine\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"df69b23fead03d94aed39c8d767c49de97c3ad31","contentHash":"5b69d882855a0157f9ad434bea8cb68f1c512137aac7fb2a64480ffe4e9ea8a9"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/abeImport.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/abeImport.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":31}},"3":{"start":{"line":10,"column":18},"end":{"line":10,"column":63}},"4":{"start":{"line":12,"column":15},"end":{"line":12,"column":58}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":51}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":28}},"7":{"start":{"line":19,"column":2},"end":{"line":19,"column":79}},"8":{"start":{"line":20,"column":13},"end":{"line":20,"column":15}},"9":{"start":{"line":22,"column":2},"end":{"line":22,"column":30}},"10":{"start":{"line":24,"column":17},"end":{"line":24,"column":32}},"11":{"start":{"line":26,"column":24},"end":{"line":26,"column":118}},"12":{"start":{"line":28,"column":15},"end":{"line":28,"column":143}},"13":{"start":{"line":29,"column":22},"end":{"line":29,"column":66}},"14":{"start":{"line":32,"column":2},"end":{"line":36,"column":3}},"15":{"start":{"line":33,"column":4},"end":{"line":33,"column":48}},"16":{"start":{"line":35,"column":4},"end":{"line":35,"column":74}},"17":{"start":{"line":38,"column":2},"end":{"line":40,"column":3}},"18":{"start":{"line":39,"column":4},"end":{"line":39,"column":67}},"19":{"start":{"line":44,"column":23},"end":{"line":44,"column":64}},"20":{"start":{"line":46,"column":2},"end":{"line":52,"column":5}},"21":{"start":{"line":47,"column":20},"end":{"line":47,"column":81}},"22":{"start":{"line":49,"column":4},"end":{"line":51,"column":5}},"23":{"start":{"line":50,"column":6},"end":{"line":50,"column":66}},"24":{"start":{"line":54,"column":24},"end":{"line":54,"column":66}},"25":{"start":{"line":56,"column":2},"end":{"line":62,"column":5}},"26":{"start":{"line":57,"column":20},"end":{"line":57,"column":83}},"27":{"start":{"line":59,"column":4},"end":{"line":61,"column":5}},"28":{"start":{"line":60,"column":6},"end":{"line":60,"column":66}},"29":{"start":{"line":63,"column":2},"end":{"line":63,"column":84}},"30":{"start":{"line":65,"column":17},"end":{"line":65,"column":53}},"31":{"start":{"line":67,"column":12},"end":{"line":71,"column":5}},"32":{"start":{"line":72,"column":2},"end":{"line":72,"column":13}}},"fnMap":{"0":{"name":"abeImport","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":18}},"loc":{"start":{"line":18,"column":38},"end":{"line":73,"column":1}},"line":18},"1":{"name":"(anonymous_1)","decl":{"start":{"line":46,"column":47},"end":{"line":46,"column":48}},"loc":{"start":{"line":46,"column":71},"end":{"line":52,"column":3}},"line":46},"2":{"name":"(anonymous_2)","decl":{"start":{"line":56,"column":48},"end":{"line":56,"column":49}},"loc":{"start":{"line":56,"column":74},"end":{"line":62,"column":3}},"line":56}},"branchMap":{"0":{"loc":{"start":{"line":28,"column":15},"end":{"line":28,"column":143}},"type":"cond-expr","locations":[{"start":{"line":28,"column":38},"end":{"line":28,"column":125}},{"start":{"line":28,"column":128},"end":{"line":28,"column":143}}],"line":28},"1":{"loc":{"start":{"line":38,"column":2},"end":{"line":40,"column":3}},"type":"if","locations":[{"start":{"line":38,"column":2},"end":{"line":40,"column":3}},{"start":{"line":38,"column":2},"end":{"line":40,"column":3}}],"line":38},"2":{"loc":{"start":{"line":49,"column":4},"end":{"line":51,"column":5}},"type":"if","locations":[{"start":{"line":49,"column":4},"end":{"line":51,"column":5}},{"start":{"line":49,"column":4},"end":{"line":51,"column":5}}],"line":49},"3":{"loc":{"start":{"line":59,"column":4},"end":{"line":61,"column":5}},"type":"if","locations":[{"start":{"line":59,"column":4},"end":{"line":61,"column":5}},{"start":{"line":59,"column":4},"end":{"line":61,"column":5}}],"line":59}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"sources":["abeImport.js"],"names":["abeImport","file","config","ctx","abeExtend","hooks","instance","trigger","html","JSON","parse","intlData","defaultPartials","__dirname","replace","custom","root","pathToPartial","fse","statSync","e","coreUtils","exist","readFileSync","pluginsCustoms","plugins","getCustoms","Array","prototype","forEach","call","pluginCustom","checkFile","path","join","pluginsPartials","getPartials","pluginPartials","template","Handlebars","compile","res","SafeString","data","intl"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["import Handlebars from 'handlebars'\nimport fse from 'fs-extra'\nimport path from 'path'\n\nimport {coreUtils, abeExtend} from '../../../'\n\nexport default function abeImport(file, config, ctx) {\n\n  file = abeExtend.hooks.instance.trigger('beforeImport', file, config, ctx)\n\n  var html = ''\n\n  // config de Abe\n  config = JSON.parse(config)\n\n  // le path vers les locales\n  let intlData = config.intlData\n\n  // le path vers partials\n  var defaultPartials = `${__dirname.replace(\n    /\\/$/,\n    ''\n  )}/${config.defaultPartials.replace(/\\/$/, '')}`\n\n  // si config.custom pas vide, on rajoute ce path to custom\n  var custom =\n    config.custom !== ''\n      ? `${config.root.replace(/\\/$/, '')}/${config.custom.replace(/\\/$/, '')}`\n      : defaultPartials\n  var pathToPartial = `${custom}/${file}.html`\n\n  // Je cherche d'abord dans custom puis partials\n  // pour rcuprer le template\n  try {\n    fse.statSync(pathToPartial)\n  } catch (e) {\n    pathToPartial = `${defaultPartials}/${file}.html`\n  }\n  if (coreUtils.file.exist(pathToPartial)) {\n    html = fse.readFileSync(pathToPartial, 'utf8')\n  }\n\n  // je recherche les customs de plugins. Si je trouve le fichier aussi dans l'un de ces paths,\n  // je rajoute le contenu au html deja obtenu\n  var pluginsCustoms = abeExtend.plugins.instance.getCustoms()\n  Array.prototype.forEach.call(pluginsCustoms, pluginCustom => {\n    var checkFile = path.join(pluginCustom, `${file}.html`)\n    if (coreUtils.file.exist(checkFile)) {\n      html += fse.readFileSync(checkFile, 'utf8')\n    }\n  })\n\n  // Je fais pareil avec le path des partials des plugins\n  var pluginsPartials = abeExtend.plugins.instance.getPartials()\n  Array.prototype.forEach.call(pluginsPartials, pluginPartials => {\n    var checkFile = path.join(pluginPartials, `${file}.html`)\n    if (coreUtils.file.exist(checkFile)) {\n      html += fse.readFileSync(checkFile, 'utf8')\n    }\n  })\n\n  html = abeExtend.hooks.instance.trigger(\n    'afterImport',\n    html,\n    file,\n    config,\n    ctx\n  )\n\n  // Et je finis par compiler le template !!!!\n  var template = Handlebars.compile(html)\n  var res = new Handlebars.SafeString(template(ctx, {data: {intl: intlData}}))\n\n  return res\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6ae10fe243252f699d4f6bca49a19cd23a0844a4","contentHash":"a9c877d07d6145c71ef2d47bccdbebbd2ea3c1d58dc6f3371055401088152d2d"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/compileAbe.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/compileAbe.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":32}},"3":{"start":{"line":10,"column":18},"end":{"line":10,"column":63}},"4":{"start":{"line":12,"column":17},"end":{"line":12,"column":63}},"5":{"start":{"line":14,"column":11},"end":{"line":14,"column":49}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":28}},"7":{"start":{"line":23,"column":16},"end":{"line":23,"column":54}},"8":{"start":{"line":24,"column":2},"end":{"line":24,"column":50}},"9":{"start":{"line":24,"column":40},"end":{"line":24,"column":50}},"10":{"start":{"line":30,"column":2},"end":{"line":61,"column":3}},"11":{"start":{"line":31,"column":4},"end":{"line":31,"column":46}},"12":{"start":{"line":32,"column":4},"end":{"line":32,"column":30}},"13":{"start":{"line":33,"column":4},"end":{"line":33,"column":29}},"14":{"start":{"line":35,"column":4},"end":{"line":35,"column":92}},"15":{"start":{"line":37,"column":4},"end":{"line":42,"column":5}},"16":{"start":{"line":38,"column":6},"end":{"line":38,"column":137}},"17":{"start":{"line":40,"column":6},"end":{"line":40,"column":27}},"18":{"start":{"line":41,"column":6},"end":{"line":41,"column":17}},"19":{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},"20":{"start":{"line":45,"column":6},"end":{"line":45,"column":51}},"21":{"start":{"line":48,"column":4},"end":{"line":58,"column":5}},"22":{"start":{"line":49,"column":6},"end":{"line":57,"column":7}},"23":{"start":{"line":50,"column":8},"end":{"line":53,"column":11}},"24":{"start":{"line":54,"column":8},"end":{"line":54,"column":62}},"25":{"start":{"line":56,"column":8},"end":{"line":56,"column":84}},"26":{"start":{"line":60,"column":4},"end":{"line":60,"column":37}},"27":{"start":{"line":63,"column":2},"end":{"line":63,"column":51}},"28":{"start":{"line":64,"column":2},"end":{"line":64,"column":27}},"29":{"start":{"line":66,"column":2},"end":{"line":74,"column":3}},"30":{"start":{"line":67,"column":4},"end":{"line":71,"column":5}},"31":{"start":{"line":68,"column":6},"end":{"line":68,"column":169}},"32":{"start":{"line":68,"column":38},"end":{"line":68,"column":113}},"33":{"start":{"line":68,"column":118},"end":{"line":68,"column":169}},"34":{"start":{"line":70,"column":6},"end":{"line":70,"column":17}},"35":{"start":{"line":73,"column":4},"end":{"line":73,"column":21}},"36":{"start":{"line":76,"column":2},"end":{"line":78,"column":3}},"37":{"start":{"line":77,"column":4},"end":{"line":77,"column":49}},"38":{"start":{"line":80,"column":2},"end":{"line":90,"column":3}},"39":{"start":{"line":81,"column":4},"end":{"line":89,"column":5}},"40":{"start":{"line":82,"column":6},"end":{"line":85,"column":9}},"41":{"start":{"line":86,"column":6},"end":{"line":86,"column":60}},"42":{"start":{"line":88,"column":6},"end":{"line":88,"column":82}},"43":{"start":{"line":92,"column":2},"end":{"line":92,"column":35}}},"fnMap":{"0":{"name":"compileAbe","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":19}},"loc":{"start":{"line":22,"column":22},"end":{"line":93,"column":1}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":2},"end":{"line":24,"column":50}},"type":"if","locations":[{"start":{"line":24,"column":2},"end":{"line":24,"column":50}},{"start":{"line":24,"column":2},"end":{"line":24,"column":50}}],"line":24},"1":{"loc":{"start":{"line":30,"column":2},"end":{"line":61,"column":3}},"type":"if","locations":[{"start":{"line":30,"column":2},"end":{"line":61,"column":3}},{"start":{"line":30,"column":2},"end":{"line":61,"column":3}}],"line":30},"2":{"loc":{"start":{"line":38,"column":14},"end":{"line":38,"column":136}},"type":"cond-expr","locations":[{"start":{"line":38,"column":24},"end":{"line":38,"column":125}},{"start":{"line":38,"column":128},"end":{"line":38,"column":136}}],"line":38},"3":{"loc":{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},"type":"if","locations":[{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},{"start":{"line":44,"column":4},"end":{"line":46,"column":5}}],"line":44},"4":{"loc":{"start":{"line":44,"column":8},"end":{"line":44,"column":52}},"type":"binary-expr","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":35}},{"start":{"line":44,"column":39},"end":{"line":44,"column":52}}],"line":44},"5":{"loc":{"start":{"line":45,"column":14},"end":{"line":45,"column":50}},"type":"cond-expr","locations":[{"start":{"line":45,"column":35},"end":{"line":45,"column":45}},{"start":{"line":45,"column":48},"end":{"line":45,"column":50}}],"line":45},"6":{"loc":{"start":{"line":48,"column":4},"end":{"line":58,"column":5}},"type":"if","locations":[{"start":{"line":48,"column":4},"end":{"line":58,"column":5}},{"start":{"line":48,"column":4},"end":{"line":58,"column":5}}],"line":48},"7":{"loc":{"start":{"line":48,"column":8},"end":{"line":48,"column":75}},"type":"binary-expr","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":25}},{"start":{"line":48,"column":30},"end":{"line":48,"column":50}},{"start":{"line":48,"column":54},"end":{"line":48,"column":74}}],"line":48},"8":{"loc":{"start":{"line":49,"column":6},"end":{"line":57,"column":7}},"type":"if","locations":[{"start":{"line":49,"column":6},"end":{"line":57,"column":7}},{"start":{"line":49,"column":6},"end":{"line":57,"column":7}}],"line":49},"9":{"loc":{"start":{"line":66,"column":2},"end":{"line":74,"column":3}},"type":"if","locations":[{"start":{"line":66,"column":2},"end":{"line":74,"column":3}},{"start":{"line":66,"column":2},"end":{"line":74,"column":3}}],"line":66},"10":{"loc":{"start":{"line":68,"column":6},"end":{"line":68,"column":169}},"type":"if","locations":[{"start":{"line":68,"column":6},"end":{"line":68,"column":169}},{"start":{"line":68,"column":6},"end":{"line":68,"column":169}}],"line":68},"11":{"loc":{"start":{"line":76,"column":2},"end":{"line":78,"column":3}},"type":"if","locations":[{"start":{"line":76,"column":2},"end":{"line":78,"column":3}},{"start":{"line":76,"column":2},"end":{"line":78,"column":3}}],"line":76},"12":{"loc":{"start":{"line":76,"column":6},"end":{"line":76,"column":50}},"type":"binary-expr","locations":[{"start":{"line":76,"column":6},"end":{"line":76,"column":33}},{"start":{"line":76,"column":37},"end":{"line":76,"column":50}}],"line":76},"13":{"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":48}},"type":"cond-expr","locations":[{"start":{"line":77,"column":33},"end":{"line":77,"column":43}},{"start":{"line":77,"column":46},"end":{"line":77,"column":48}}],"line":77},"14":{"loc":{"start":{"line":80,"column":2},"end":{"line":90,"column":3}},"type":"if","locations":[{"start":{"line":80,"column":2},"end":{"line":90,"column":3}},{"start":{"line":80,"column":2},"end":{"line":90,"column":3}}],"line":80},"15":{"loc":{"start":{"line":80,"column":6},"end":{"line":80,"column":73}},"type":"binary-expr","locations":[{"start":{"line":80,"column":6},"end":{"line":80,"column":23}},{"start":{"line":80,"column":28},"end":{"line":80,"column":48}},{"start":{"line":80,"column":52},"end":{"line":80,"column":72}}],"line":80},"16":{"loc":{"start":{"line":81,"column":4},"end":{"line":89,"column":5}},"type":"if","locations":[{"start":{"line":81,"column":4},"end":{"line":89,"column":5}},{"start":{"line":81,"column":4},"end":{"line":89,"column":5}}],"line":81}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":10,"8":10,"9":8,"10":2,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":2,"28":2,"29":2,"30":2,"31":2,"32":0,"33":2,"34":0,"35":0,"36":2,"37":0,"38":2,"39":1,"40":1,"41":1,"42":0,"43":1},"f":{"0":10},"b":{"0":[8,2],"1":[0,2],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[2,0],"10":[0,2],"11":[0,2],"12":[2,2],"13":[0,0],"14":[1,1],"15":[2,2,1],"16":[1,0]},"inputSourceMap":{"version":3,"sources":["compileAbe.js"],"names":["compileAbe","content","abeEngine","instance","arguments","hash","key","value","testXSS","indexOf","split","length","replace","data","index","eval","dictionnary","e","console","log","stack","type","config","xss","whiteList","htmlWhiteList","stripIgnoreTag","Handlebars","SafeString","join"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["import Handlebars from 'handlebars'\nimport abeEngine from './abeEngine'\nimport xss from 'xss'\n\nimport {config} from '../../../'\n\n/**\n * Abe handlebar helper, that retrieve text to add to handlebars templating engine\n * @return {String} the string to replace {{ handlebars_key }}\n */\nexport default function compileAbe() {\n  var content = abeEngine.instance.content\n  if (arguments[0].hash['key'] == null) return ''\n  var key\n  var hash\n  var value\n  var testXSS\n\n  if (arguments[0].hash['key'].indexOf('}-') > 0) {\n    key = arguments[0].hash['key'].split('-')\n    key = key[key.length - 1]\n    hash = arguments[0].hash\n    // hash.key = hash.key.replace(/\\{\\{@index\\}\\}/, '[{{@index}}]')\n    hash.key = hash.key.replace(\n      /\\{\\{@index\\}\\}/,\n      `[${arguments[0].data.index}]`\n    )\n    try {\n      value = content\n        ? eval(\n            `content[\"${hash.dictionnary}\"][${arguments[0].data.index}].${key}`\n          )\n        : hash.key\n      // value = content ? content[hash['dictionnary']][arguments[0].data.index][key] : hash.key\n    } catch (e) {\n      console.log(e.stack)\n      value = ''\n    }\n    if (typeof value === 'function' || value == null) {\n      value = hash.value != null ? hash.value : ''\n    }\n    if (hash.type != null && (hash.type === 'rich' || hash.type === 'code')) {\n      if (config.xss) {\n        testXSS = xss(value.replace(/&quot;/g, '\"'), {\n          whiteList: config.htmlWhiteList,\n          stripIgnoreTag: true\n        })\n        return new Handlebars.SafeString(testXSS)\n      } else {\n        return new Handlebars.SafeString(value.replace(/&quot;/g, '\"'))\n      }\n    }\n\n    return value.replace(/%27/, \"'\")\n  }\n\n  key = arguments[0].hash['key'].replace('.', '-')\n\n  hash = arguments[0].hash\n  if (content) {\n    try {\n      if (hash.key.indexOf('.') > -1)\n        value = eval(`content[\"${hash.key.split('.').join('\"][\"')}\"]`)\n      else value = eval(`content[\"${hash.key}\"]`)\n    } catch (e) {\n      value = ''\n    }\n  } else {\n    value = hash.key\n  }\n\n  if (typeof value === 'function' || value == null) {\n    value = hash.value != null ? hash.value : ''\n  }\n\n  if (hash.type != null && (hash.type === 'rich' || hash.type === 'code')) {\n    if (config.xss) {\n      testXSS = xss(value.replace(/&quot;/g, '\"'), {\n        whiteList: config.htmlWhiteList,\n        stripIgnoreTag: true\n      })\n      return new Handlebars.SafeString(testXSS)\n    } else {\n      return new Handlebars.SafeString(value.replace(/&quot;/g, '\"'))\n    }\n  }\n\n  return value.replace(/%27/, \"'\")\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"42b52ec7eedba81104ecbf4ccc8be35509f76b23","contentHash":"f37b704c327af2b8983a9e10df18792301d2b50c42b03b41bf6853840a1a229e"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/folders.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/folders.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":29}},"3":{"start":{"line":10,"column":12},"end":{"line":10,"column":51}},"4":{"start":{"line":12,"column":23},"end":{"line":12,"column":75}},"5":{"start":{"line":17,"column":2},"end":{"line":25,"column":3}},"6":{"start":{"line":18,"column":4},"end":{"line":24,"column":5}},"7":{"start":{"line":19,"column":18},"end":{"line":19,"column":69}},"8":{"start":{"line":20,"column":6},"end":{"line":20,"column":18}},"9":{"start":{"line":21,"column":6},"end":{"line":21,"column":82}},"10":{"start":{"line":23,"column":6},"end":{"line":23,"column":81}},"11":{"start":{"line":27,"column":2},"end":{"line":27,"column":13}}},"fnMap":{"0":{"name":"folders","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":16}},"loc":{"start":{"line":14,"column":46},"end":{"line":28,"column":1}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":2},"end":{"line":25,"column":3}},"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":25,"column":3}},{"start":{"line":17,"column":2},"end":{"line":25,"column":3}}],"line":17},"1":{"loc":{"start":{"line":17,"column":6},"end":{"line":17,"column":27}},"type":"binary-expr","locations":[{"start":{"line":17,"column":6},"end":{"line":17,"column":9}},{"start":{"line":17,"column":13},"end":{"line":17,"column":27}}],"line":17},"2":{"loc":{"start":{"line":18,"column":4},"end":{"line":24,"column":5}},"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":24,"column":5}},{"start":{"line":18,"column":4},"end":{"line":24,"column":5}}],"line":18},"3":{"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":39}},"type":"binary-expr","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":20}},{"start":{"line":18,"column":24},"end":{"line":18,"column":39}}],"line":18}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":1,"11":1},"f":{"0":1},"b":{"0":[1,0],"1":[1,1],"2":[0,1],"3":[1,0]},"inputSourceMap":{"version":3,"sources":["folders.js"],"names":["folders","obj","index","link","translate","res","length","links","replace","split","path","sep","pop"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEe,SAASA,OAAT,CAAiBC,GAAjB,EAAsBC,KAAtB,EAA6BC,IAA7B,EAAmCC,SAAnC,EAA8C;AAC3D,MAAIC,GAAJ;;AACA,MAAIJ,GAAG,IAAIA,GAAG,CAACK,MAAJ,GAAa,CAAxB,EAA2B;AACzB,QAAIH,IAAI,IAAI,IAAR,IAAgBA,IAAI,KAAK,MAA7B,EAAqC;AACnC,UAAII,KAAK,GAAGJ,IAAI,CAACK,OAAL,CAAa,KAAb,EAAoB,EAApB,EAAwBC,KAAxB,CAA8BC,iBAAKC,GAAnC,CAAZ;AACAJ,MAAAA,KAAK,CAACK,GAAN;AACAP,MAAAA,GAAG,GAAG,iCAAgBJ,GAAhB,EAAqB,CAArB,EAAwB,EAAxB,EAA4BM,KAA5B,EAAmC,KAAnC,EAA0CH,SAA1C,CAAN;AACD,KAJD,MAIO;AACLC,MAAAA,GAAG,GAAG,iCAAgBJ,GAAhB,EAAqB,CAArB,EAAwB,EAAxB,EAA4B,IAA5B,EAAkC,KAAlC,EAAyCG,SAAzC,CAAN;AACD;AACF;;AACD,SAAOC,GAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["import path from 'path'\nimport recursiveFolder from './recursiveFolder'\n\nexport default function folders(obj, index, link, translate) {\n  var res\n  if (obj && obj.length > 0) {\n    if (link != null && link !== 'null') {\n      var links = link.replace(/^\\//, '').split(path.sep)\n      links.pop()\n      res = recursiveFolder(obj, 1, '', links, false, translate)\n    } else {\n      res = recursiveFolder(obj, 1, '', null, false, translate)\n    }\n  }\n  return res\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"23f7bcd20b744a622fb6092f192506a8f73bd775","contentHash":"f0ae58b42f2822cc992d0a89f2493f1d9b074eb98f74a4645393008981c2ca59"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/recursiveFolder.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/recursiveFolder.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":37}},"3":{"start":{"line":10,"column":12},"end":{"line":10,"column":51}},"4":{"start":{"line":13,"column":14},"end":{"line":13,"column":83}},"5":{"start":{"line":14,"column":17},"end":{"line":14,"column":87}},"6":{"start":{"line":15,"column":14},"end":{"line":15,"column":86}},"7":{"start":{"line":16,"column":16},"end":{"line":16,"column":89}},"8":{"start":{"line":17,"column":18},"end":{"line":17,"column":65}},"9":{"start":{"line":18,"column":20},"end":{"line":18,"column":22}},"10":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"11":{"start":{"line":21,"column":4},"end":{"line":21,"column":27}},"12":{"start":{"line":24,"column":11},"end":{"line":24,"column":33}},"13":{"start":{"line":25,"column":15},"end":{"line":25,"column":54}},"14":{"start":{"line":26,"column":18},"end":{"line":26,"column":115}},"15":{"start":{"line":27,"column":12},"end":{"line":27,"column":517}},"16":{"start":{"line":28,"column":12},"end":{"line":28,"column":14}},"17":{"start":{"line":29,"column":2},"end":{"line":47,"column":5}},"18":{"start":{"line":30,"column":19},"end":{"line":30,"column":21}},"19":{"start":{"line":31,"column":20},"end":{"line":31,"column":25}},"20":{"start":{"line":33,"column":15},"end":{"line":33,"column":48}},"21":{"start":{"line":35,"column":4},"end":{"line":40,"column":5}},"22":{"start":{"line":36,"column":6},"end":{"line":39,"column":7}},"23":{"start":{"line":37,"column":8},"end":{"line":37,"column":41}},"24":{"start":{"line":38,"column":8},"end":{"line":38,"column":25}},"25":{"start":{"line":42,"column":4},"end":{"line":42,"column":213}},"26":{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},"27":{"start":{"line":45,"column":6},"end":{"line":45,"column":111}},"28":{"start":{"line":48,"column":2},"end":{"line":48,"column":31}},"29":{"start":{"line":49,"column":2},"end":{"line":49,"column":13}},"30":{"start":{"line":50,"column":2},"end":{"line":50,"column":13}}},"fnMap":{"0":{"name":"recursiveFolder","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":24}},"loc":{"start":{"line":12,"column":30},"end":{"line":51,"column":1}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":29,"column":36},"end":{"line":29,"column":37}},"loc":{"start":{"line":29,"column":49},"end":{"line":47,"column":3}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":83}},"type":"cond-expr","locations":[{"start":{"line":13,"column":67},"end":{"line":13,"column":79}},{"start":{"line":13,"column":82},"end":{"line":13,"column":83}}],"line":13},"1":{"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":64}},"type":"binary-expr","locations":[{"start":{"line":13,"column":14},"end":{"line":13,"column":34}},{"start":{"line":13,"column":38},"end":{"line":13,"column":64}}],"line":13},"2":{"loc":{"start":{"line":14,"column":17},"end":{"line":14,"column":87}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":82}},{"start":{"line":14,"column":85},"end":{"line":14,"column":87}}],"line":14},"3":{"loc":{"start":{"line":14,"column":17},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":17},"end":{"line":14,"column":37}},{"start":{"line":14,"column":41},"end":{"line":14,"column":67}}],"line":14},"4":{"loc":{"start":{"line":15,"column":14},"end":{"line":15,"column":86}},"type":"cond-expr","locations":[{"start":{"line":15,"column":67},"end":{"line":15,"column":79}},{"start":{"line":15,"column":82},"end":{"line":15,"column":86}}],"line":15},"5":{"loc":{"start":{"line":15,"column":14},"end":{"line":15,"column":64}},"type":"binary-expr","locations":[{"start":{"line":15,"column":14},"end":{"line":15,"column":34}},{"start":{"line":15,"column":38},"end":{"line":15,"column":64}}],"line":15},"6":{"loc":{"start":{"line":16,"column":16},"end":{"line":16,"column":89}},"type":"cond-expr","locations":[{"start":{"line":16,"column":69},"end":{"line":16,"column":81}},{"start":{"line":16,"column":84},"end":{"line":16,"column":89}}],"line":16},"7":{"loc":{"start":{"line":16,"column":16},"end":{"line":16,"column":66}},"type":"binary-expr","locations":[{"start":{"line":16,"column":16},"end":{"line":16,"column":36}},{"start":{"line":16,"column":40},"end":{"line":16,"column":66}}],"line":16},"8":{"loc":{"start":{"line":17,"column":18},"end":{"line":17,"column":65}},"type":"cond-expr","locations":[{"start":{"line":17,"column":41},"end":{"line":17,"column":53}},{"start":{"line":17,"column":56},"end":{"line":17,"column":65}}],"line":17},"9":{"loc":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},{"start":{"line":20,"column":2},"end":{"line":22,"column":3}}],"line":20},"10":{"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":27}},"type":"binary-expr","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":15}},{"start":{"line":20,"column":19},"end":{"line":20,"column":27}}],"line":20},"11":{"loc":{"start":{"line":25,"column":15},"end":{"line":25,"column":54}},"type":"cond-expr","locations":[{"start":{"line":25,"column":24},"end":{"line":25,"column":49}},{"start":{"line":25,"column":52},"end":{"line":25,"column":54}}],"line":25},"12":{"loc":{"start":{"line":26,"column":18},"end":{"line":26,"column":115}},"type":"cond-expr","locations":[{"start":{"line":26,"column":69},"end":{"line":26,"column":96}},{"start":{"line":26,"column":99},"end":{"line":26,"column":115}}],"line":26},"13":{"loc":{"start":{"line":26,"column":18},"end":{"line":26,"column":66}},"type":"binary-expr","locations":[{"start":{"line":26,"column":18},"end":{"line":26,"column":27}},{"start":{"line":26,"column":31},"end":{"line":26,"column":66}}],"line":26},"14":{"loc":{"start":{"line":35,"column":4},"end":{"line":40,"column":5}},"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":40,"column":5}},{"start":{"line":35,"column":4},"end":{"line":40,"column":5}}],"line":35},"15":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":49}},"type":"binary-expr","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":21}},{"start":{"line":35,"column":25},"end":{"line":35,"column":49}}],"line":35},"16":{"loc":{"start":{"line":36,"column":6},"end":{"line":39,"column":7}},"type":"if","locations":[{"start":{"line":36,"column":6},"end":{"line":39,"column":7}},{"start":{"line":36,"column":6},"end":{"line":39,"column":7}}],"line":36},"17":{"loc":{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},"type":"if","locations":[{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},{"start":{"line":44,"column":4},"end":{"line":46,"column":5}}],"line":44},"18":{"loc":{"start":{"line":44,"column":8},"end":{"line":44,"column":49}},"type":"binary-expr","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":25}},{"start":{"line":44,"column":29},"end":{"line":44,"column":49}}],"line":44}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":1,"26":1,"27":0,"28":1,"29":1,"30":1},"f":{"0":1,"1":1},"b":{"0":[1,0],"1":[1,1],"2":[1,0],"3":[1,1],"4":[1,0],"5":[1,1],"6":[1,0],"7":[1,1],"8":[1,0],"9":[0,1],"10":[1,0],"11":[1,0],"12":[1,0],"13":[1,1],"14":[0,1],"15":[1,0],"16":[0,0],"17":[0,1],"18":[1,0]},"inputSourceMap":{"version":3,"sources":["recursiveFolder.js"],"names":["recursiveFolder","obj","index","dataShow","links","visible","translate","classHidden","id","parent","path","split","levelText","res","sub","Array","prototype","forEach","call","o","selected","isVisible","name","basename","replace","folders","length"],"mappings":";;;;;;;;;AAAA;;AAEe,SAASA,eAAT,CACbC,GADa,EAOb;AAAA,MALAC,KAKA,uEALQ,CAKR;AAAA,MAJAC,QAIA,uEAJW,EAIX;AAAA,MAHAC,KAGA,uEAHQ,IAGR;AAAA,MAFAC,OAEA,uEAFU,KAEV;AAAA,MADAC,SACA;AACA,MAAIC,WAAW,GAAG,EAAlB;;AACA,MAAIL,KAAK,GAAG,CAAR,IAAa,CAACG,OAAlB,EAA2B;AACzBE,IAAAA,WAAW,GAAG,QAAd;AACD;;AAED,MAAIC,EAAE,mBAAYN,KAAZ,CAAN;AACA,MAAIO,MAAM,GAAGR,GAAG,CAAC,CAAD,CAAH,GAASA,GAAG,CAAC,CAAD,CAAH,CAAOS,IAAP,CAAYC,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAT,GAAqC,EAAlD;AACA,MAAIC,SAAS,GACXN,SAAS,IAAIA,SAAS,CAAC,WAAWJ,KAAZ,CAAT,IAA+B,IAA5C,GACII,SAAS,CAAC,WAAWJ,KAAZ,CADb,GAEI,WAAWA,KAHjB;AAIA,MAAIW,GAAG,2CAAmCX,KAAnC,cAA4CK,WAA5C,8BAAyEE,MAAzE,6BAAgGN,QAAhG,mCACSK,EADT,wCACsCI,SADtC,iJAE0GJ,EAF1G,0BAE0HA,EAF1H,2EAG0BN,KAAK,GAAG,CAHlC,iBAAP;AAKA,MAAIY,GAAG,GAAG,EAAV;AAEAC,EAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BjB,GAA7B,EAAkC,UAAAkB,CAAC,EAAI;AACrC,QAAIC,QAAQ,GAAG,EAAf;AACA,QAAIC,SAAS,GAAG,KAAhB;;AACA,QAAIC,IAAI,GAAGZ,iBAAKa,QAAL,CAAcJ,CAAC,CAACT,IAAhB,CAAX;;AACA,QAAIN,KAAK,IAAI,IAAT,IAAiBA,KAAK,CAACF,KAAK,GAAG,CAAT,CAAL,IAAoB,IAAzC,EAA+C;AAC7C,UAAIE,KAAK,CAACF,KAAK,GAAG,CAAT,CAAL,KAAqBoB,IAAzB,EAA+B;AAC7BF,QAAAA,QAAQ,GAAG,qBAAX;AACAC,QAAAA,SAAS,GAAG,IAAZ;AACD;AACF;;AACDR,IAAAA,GAAG,sBAAeO,QAAf,gCAA4ClB,KAAK,GAClD,CADC,kCACsBA,KAAK,GAAG,CAD9B,4BAC+CoB,IAAI,CAACE,OAAL,CAChD,UADgD,EAEhD,GAFgD,CAD/C,gBAIGF,IAJH,cAAH;;AAMA,QAAIH,CAAC,CAACM,OAAF,IAAa,IAAb,IAAqBN,CAAC,CAACM,OAAF,CAAUC,MAAV,GAAmB,CAA5C,EAA+C;AAC7CZ,MAAAA,GAAG,IAAId,eAAe,CACpBmB,CAAC,CAACM,OADkB,EAEpBvB,KAAK,GAAG,CAFY,EAGpBoB,IAAI,CAACE,OAAL,CAAa,UAAb,EAAyB,GAAzB,CAHoB,EAIpBpB,KAJoB,EAKpBiB,SALoB,EAMpBf,SANoB,CAAtB;AAQD;AACF,GA1BD;AA4BAO,EAAAA,GAAG,yBAAH;AAGAA,EAAAA,GAAG,IAAIC,GAAP;AAEA,SAAOD,GAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["import path from 'path'\n\nexport default function recursiveFolder(\n  obj,\n  index = 1,\n  dataShow = '',\n  links = null,\n  visible = false,\n  translate\n) {\n  var classHidden = ''\n  if (index > 1 && !visible) {\n    classHidden = 'hidden'\n  }\n\n  var id = `level-${index}`\n  var parent = obj[0] ? obj[0].path.split('/')[0] : ''\n  var levelText =\n    translate && translate['level-' + index] != null\n      ? translate['level-' + index]\n      : 'Level ' + index\n  var res = `<div class=\"form-group level-${index} ${classHidden}\" data-parent=\"${parent}\" data-shown=\"${dataShow}\">\n    <label for=\"${id}\" class=\"control-label\">${levelText}</label>\n      <select data-precontrib=\"true\" data-slug=\"true\" data-slug-type=\"path\" data-show-hide-sub-folder=\"true\" id=\"${id}\" data-id=\"${id}\" class=\"form-control\">\n        <option data-level-hide=\"${index + 1}\"></option>`\n\n  var sub = ''\n\n  Array.prototype.forEach.call(obj, o => {\n    let selected = ''\n    let isVisible = false\n    let name = path.basename(o.path)\n    if (links != null && links[index - 1] != null) {\n      if (links[index - 1] === name) {\n        selected = 'selected=\"selected\"'\n        isVisible = true\n      }\n    }\n    res += `<option ${selected} data-level-hide=\"${index +\n      2}\" data-level-show=\"${index + 1}\" data-show=\"${name.replace(\n      /\\.| |\\#/g,\n      '_'\n    )}\">${name}</option>`\n\n    if (o.folders != null && o.folders.length > 0) {\n      sub += recursiveFolder(\n        o.folders,\n        index + 1,\n        name.replace(/\\.| |\\#/g, '_'),\n        links,\n        isVisible,\n        translate\n      )\n    }\n  })\n\n  res += `</select>\n  </div>`\n\n  res += sub\n\n  return res\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8687cf320de97dcf2ce39d35a54c7fdfbbb9431f","contentHash":"d3fd686e819c8b3127b3ddcc47fd8d801df4eb90ea52331ff13507c8cbd84118"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/listPage.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/listPage.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":30}},"3":{"start":{"line":10,"column":18},"end":{"line":10,"column":63}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":55}},"5":{"start":{"line":14,"column":8},"end":{"line":14,"column":28}},"6":{"start":{"line":17,"column":12},"end":{"line":17,"column":14}},"7":{"start":{"line":18,"column":2},"end":{"line":18,"column":81}},"8":{"start":{"line":19,"column":2},"end":{"line":19,"column":16}},"9":{"start":{"line":20,"column":2},"end":{"line":20,"column":237}},"10":{"start":{"line":22,"column":2},"end":{"line":26,"column":3}},"11":{"start":{"line":23,"column":4},"end":{"line":23,"column":105}},"12":{"start":{"line":25,"column":4},"end":{"line":25,"column":38}},"13":{"start":{"line":28,"column":2},"end":{"line":34,"column":3}},"14":{"start":{"line":29,"column":21},"end":{"line":29,"column":89}},"15":{"start":{"line":30,"column":20},"end":{"line":30,"column":49}},"16":{"start":{"line":31,"column":4},"end":{"line":31,"column":171}},"17":{"start":{"line":33,"column":4},"end":{"line":33,"column":78}},"18":{"start":{"line":36,"column":17},"end":{"line":36,"column":19}},"19":{"start":{"line":37,"column":15},"end":{"line":37,"column":35}},"20":{"start":{"line":38,"column":21},"end":{"line":38,"column":44}},"21":{"start":{"line":39,"column":2},"end":{"line":59,"column":5}},"22":{"start":{"line":40,"column":17},"end":{"line":40,"column":19}},"23":{"start":{"line":42,"column":4},"end":{"line":44,"column":5}},"24":{"start":{"line":43,"column":6},"end":{"line":43,"column":24}},"25":{"start":{"line":46,"column":4},"end":{"line":46,"column":68}},"26":{"start":{"line":48,"column":4},"end":{"line":56,"column":13}},"27":{"start":{"line":49,"column":18},"end":{"line":49,"column":101}},"28":{"start":{"line":51,"column":6},"end":{"line":55,"column":7}},"29":{"start":{"line":52,"column":8},"end":{"line":52,"column":152}},"30":{"start":{"line":54,"column":8},"end":{"line":54,"column":187}},"31":{"start":{"line":58,"column":4},"end":{"line":58,"column":24}},"32":{"start":{"line":60,"column":2},"end":{"line":60,"column":18}},"33":{"start":{"line":61,"column":2},"end":{"line":61,"column":52}},"34":{"start":{"line":63,"column":2},"end":{"line":65,"column":3}},"35":{"start":{"line":64,"column":4},"end":{"line":64,"column":382}},"36":{"start":{"line":67,"column":2},"end":{"line":67,"column":412}},"37":{"start":{"line":68,"column":2},"end":{"line":68,"column":52}},"38":{"start":{"line":69,"column":2},"end":{"line":69,"column":84}},"39":{"start":{"line":70,"column":2},"end":{"line":70,"column":52}}},"fnMap":{"0":{"name":"listPage","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":17}},"loc":{"start":{"line":16,"column":37},"end":{"line":71,"column":1}},"line":16},"1":{"name":"(anonymous_1)","decl":{"start":{"line":39,"column":45},"end":{"line":39,"column":46}},"loc":{"start":{"line":39,"column":61},"end":{"line":59,"column":3}},"line":39}},"branchMap":{"0":{"loc":{"start":{"line":22,"column":2},"end":{"line":26,"column":3}},"type":"if","locations":[{"start":{"line":22,"column":2},"end":{"line":26,"column":3}},{"start":{"line":22,"column":2},"end":{"line":26,"column":3}}],"line":22},"1":{"loc":{"start":{"line":28,"column":2},"end":{"line":34,"column":3}},"type":"if","locations":[{"start":{"line":28,"column":2},"end":{"line":34,"column":3}},{"start":{"line":28,"column":2},"end":{"line":34,"column":3}}],"line":28},"2":{"loc":{"start":{"line":42,"column":4},"end":{"line":44,"column":5}},"type":"if","locations":[{"start":{"line":42,"column":4},"end":{"line":44,"column":5}},{"start":{"line":42,"column":4},"end":{"line":44,"column":5}}],"line":42},"3":{"loc":{"start":{"line":48,"column":4},"end":{"line":56,"column":13}},"type":"if","locations":[{"start":{"line":48,"column":4},"end":{"line":56,"column":13}},{"start":{"line":48,"column":4},"end":{"line":56,"column":13}}],"line":48},"4":{"loc":{"start":{"line":51,"column":6},"end":{"line":55,"column":7}},"type":"if","locations":[{"start":{"line":51,"column":6},"end":{"line":55,"column":7}},{"start":{"line":51,"column":6},"end":{"line":55,"column":7}}],"line":51},"5":{"loc":{"start":{"line":63,"column":2},"end":{"line":65,"column":3}},"type":"if","locations":[{"start":{"line":63,"column":2},"end":{"line":65,"column":3}},{"start":{"line":63,"column":2},"end":{"line":65,"column":3}}],"line":63}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":1,"14":0,"15":0,"16":0,"17":1,"18":1,"19":1,"20":1,"21":1,"22":2,"23":2,"24":1,"25":2,"26":2,"27":1,"28":1,"29":1,"30":0,"31":2,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1},"f":{"0":1,"1":2},"b":{"0":[1,0],"1":[0,1],"2":[1,1],"3":[1,1],"4":[1,0],"5":[1,0]},"inputSourceMap":{"version":3,"sources":["listPage.js"],"names":["listPage","file","index","text","res","abeExtend","hooks","instance","trigger","abe_meta","link","template","date","dateSearch","utcOffset","format","dateOrder","Date","getTime","workflow","status","workflowUser","config","users","Array","prototype","forEach","call","flow","hidden","fDate","publish","unpublish","confirmUnpublish","confirmDelete","Handlebars","SafeString"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["import Handlebars from 'handlebars'\nimport moment from 'moment'\nimport {math, abeExtend, config} from '../../../'\n\nexport default function listPage(file, index, text) {\n  var res = ''\n  file = abeExtend.hooks.instance.trigger('beforeListPage', file, index, text)\n\n  res += '<tr>'\n  res += `<td>${math(index, '+', 1)}</td>\n        <td>\n          <a href=\"/abe/editor${file.abe_meta.link}\" class=\"file-path\">\n            ${file.abe_meta.link}\n          </a>\n        </td>`\n\n  if (file.abe_meta.template) {\n    res += `<td align=\"center\">\n              ${file.abe_meta.template}\n            </td>`\n  } else {\n    res += '<td align=\"center\"></td>'\n  }\n\n  if (file.date) {\n    var dateSearch = moment(file.date).utcOffset(0).format('YYYY-MM-DD')\n    var dateOrder = new Date(file.date).getTime()\n    res += `<td align=\"center\" data-search=\"${dateSearch}\" data-order=\"${dateOrder}\">\n              ${dateSearch}\n            </td>`\n  } else {\n    res += '<td align=\"center\" data-search=\"0000-00-00\" data-order=\"0\"></td>'\n  }\n\n  var workflow = ''\n\n  var status = file.abe_meta.status\n  var workflowUser = config.users.workflow\n  Array.prototype.forEach.call(workflowUser, flow => {\n    var hidden = ''\n    if (status !== flow) {\n      hidden = 'hidden'\n    }\n\n    workflow += `<td align=\"center\" class=\"${flow}\">`\n    if (file[flow]) {\n      var fDate = moment(file[flow].date)\n        .utcOffset(0)\n        .format('YYYY-MM-DD HH:mm:ss')\n      if (flow === 'publish') {\n        workflow += `<a href=\"/abe/editor${file[flow]\n          .link}\" class=\"checkmark label-published\" title=\"${fDate}\">&#10004;</a>`\n      } else {\n        workflow += `<a href=\"/abe/editor${file[flow]\n          .link}\" class=\"${hidden} label label-default label-draft\" title=\"${fDate}\">${flow}</a>`\n      }\n    } else {\n    }\n    workflow += '</td>'\n  })\n\n  res += workflow\n\n  res += `<td align=\"center\">\n            <div>`\n\n  if (file.publish != null) {\n    res += `<a href=\"/abe/operations/unpublish${file.abe_meta.link}\"\n               title=\"${text.unpublish}\"\n               class=\"icon\" data-unpublish=\"true\" data-text=\"${text.confirmUnpublish} ${file\n      .abe_meta.link}\"\n               title=\"unpublish\">\n              <span class=\"fa fa-eye-slash\"></span>\n            </a>`\n  }\n\n  res += `<a href=\"/abe/operations/delete/${file.abe_meta.status}${file.abe_meta\n    .link}\"\n             title=\"${text.delete}\"\n             class=\"icon\"\n             data-delete=\"true\"\n             data-text=\"${text.confirmDelete} ${file.abe_meta.link}\"\n             title=\"remove\">\n            <span class=\"fa fa-trash\"></span>\n          </a>`\n\n  res += `\n        </div>\n      </td>\n    </tr>`\n\n  res = abeExtend.hooks.instance.trigger(\n    'afterListPage',\n    res,\n    file,\n    index,\n    text\n  )\n  return new Handlebars.SafeString(res)\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"084bbee882877cfdb60817814cfb8dba2006782c","contentHash":"b0acd0e6e5ceb5f467d0eed8f2e8c887401f436b84a10b8f1c97baeada394f8f"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/printBlock.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/printBlock.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":32}},"3":{"start":{"line":10,"column":18},"end":{"line":10,"column":41}},"4":{"start":{"line":12,"column":17},"end":{"line":12,"column":63}},"5":{"start":{"line":15,"column":12},"end":{"line":15,"column":14}},"6":{"start":{"line":16,"column":19},"end":{"line":16,"column":24}},"7":{"start":{"line":18,"column":2},"end":{"line":20,"column":3}},"8":{"start":{"line":19,"column":4},"end":{"line":19,"column":33}},"9":{"start":{"line":22,"column":2},"end":{"line":65,"column":3}},"10":{"start":{"line":23,"column":21},"end":{"line":23,"column":23}},"11":{"start":{"line":24,"column":17},"end":{"line":24,"column":21}},"12":{"start":{"line":25,"column":4},"end":{"line":29,"column":7}},"13":{"start":{"line":26,"column":6},"end":{"line":26,"column":40}},"14":{"start":{"line":26,"column":25},"end":{"line":26,"column":40}},"15":{"start":{"line":27,"column":6},"end":{"line":27,"column":38}},"16":{"start":{"line":27,"column":22},"end":{"line":27,"column":38}},"17":{"start":{"line":28,"column":6},"end":{"line":28,"column":60}},"18":{"start":{"line":30,"column":4},"end":{"line":30,"column":483}},"19":{"start":{"line":30,"column":17},"end":{"line":30,"column":329}},"20":{"start":{"line":30,"column":334},"end":{"line":30,"column":483}},"21":{"start":{"line":31,"column":4},"end":{"line":31,"column":22}},"22":{"start":{"line":32,"column":4},"end":{"line":32,"column":26}},"23":{"start":{"line":33,"column":9},"end":{"line":65,"column":3}},"24":{"start":{"line":34,"column":19},"end":{"line":34,"column":43}},"25":{"start":{"line":35,"column":4},"end":{"line":35,"column":533}},"26":{"start":{"line":36,"column":18},"end":{"line":36,"column":20}},"27":{"start":{"line":37,"column":4},"end":{"line":45,"column":7}},"28":{"start":{"line":38,"column":18},"end":{"line":38,"column":51}},"29":{"start":{"line":40,"column":6},"end":{"line":42,"column":7}},"30":{"start":{"line":41,"column":8},"end":{"line":41,"column":28}},"31":{"start":{"line":44,"column":6},"end":{"line":44,"column":32}},"32":{"start":{"line":46,"column":4},"end":{"line":60,"column":7}},"33":{"start":{"line":47,"column":16},"end":{"line":47,"column":47}},"34":{"start":{"line":48,"column":20},"end":{"line":48,"column":22}},"35":{"start":{"line":50,"column":6},"end":{"line":52,"column":7}},"36":{"start":{"line":51,"column":8},"end":{"line":51,"column":42}},"37":{"start":{"line":54,"column":6},"end":{"line":54,"column":739}},"38":{"start":{"line":55,"column":6},"end":{"line":58,"column":9}},"39":{"start":{"line":56,"column":8},"end":{"line":56,"column":40}},"40":{"start":{"line":56,"column":24},"end":{"line":56,"column":40}},"41":{"start":{"line":57,"column":8},"end":{"line":57,"column":55}},"42":{"start":{"line":59,"column":6},"end":{"line":59,"column":28}},"43":{"start":{"line":61,"column":4},"end":{"line":61,"column":48}},"44":{"start":{"line":63,"column":4},"end":{"line":63,"column":38}},"45":{"start":{"line":63,"column":20},"end":{"line":63,"column":38}},"46":{"start":{"line":64,"column":4},"end":{"line":64,"column":53}},"47":{"start":{"line":67,"column":2},"end":{"line":67,"column":13}}},"fnMap":{"0":{"name":"printBlock","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":19}},"loc":{"start":{"line":14,"column":31},"end":{"line":68,"column":1}},"line":14},"1":{"name":"(anonymous_1)","decl":{"start":{"line":25,"column":38},"end":{"line":25,"column":39}},"loc":{"start":{"line":25,"column":54},"end":{"line":29,"column":5}},"line":25},"2":{"name":"(anonymous_2)","decl":{"start":{"line":37,"column":38},"end":{"line":37,"column":39}},"loc":{"start":{"line":37,"column":54},"end":{"line":45,"column":5}},"line":37},"3":{"name":"(anonymous_3)","decl":{"start":{"line":46,"column":55},"end":{"line":46,"column":56}},"loc":{"start":{"line":46,"column":68},"end":{"line":60,"column":5}},"line":46},"4":{"name":"(anonymous_4)","decl":{"start":{"line":55,"column":47},"end":{"line":55,"column":48}},"loc":{"start":{"line":55,"column":63},"end":{"line":58,"column":7}},"line":55}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":2},"end":{"line":20,"column":3}},"type":"if","locations":[{"start":{"line":18,"column":2},"end":{"line":20,"column":3}},{"start":{"line":18,"column":2},"end":{"line":20,"column":3}}],"line":18},"1":{"loc":{"start":{"line":22,"column":2},"end":{"line":65,"column":3}},"type":"if","locations":[{"start":{"line":22,"column":2},"end":{"line":65,"column":3}},{"start":{"line":22,"column":2},"end":{"line":65,"column":3}}],"line":22},"2":{"loc":{"start":{"line":22,"column":6},"end":{"line":22,"column":49}},"type":"binary-expr","locations":[{"start":{"line":22,"column":6},"end":{"line":22,"column":26}},{"start":{"line":22,"column":30},"end":{"line":22,"column":49}}],"line":22},"3":{"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":40}},"type":"if","locations":[{"start":{"line":26,"column":6},"end":{"line":26,"column":40}},{"start":{"line":26,"column":6},"end":{"line":26,"column":40}}],"line":26},"4":{"loc":{"start":{"line":27,"column":6},"end":{"line":27,"column":38}},"type":"if","locations":[{"start":{"line":27,"column":6},"end":{"line":27,"column":38}},{"start":{"line":27,"column":6},"end":{"line":27,"column":38}}],"line":27},"5":{"loc":{"start":{"line":30,"column":4},"end":{"line":30,"column":483}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":483}},{"start":{"line":30,"column":4},"end":{"line":30,"column":483}}],"line":30},"6":{"loc":{"start":{"line":30,"column":190},"end":{"line":30,"column":240}},"type":"cond-expr","locations":[{"start":{"line":30,"column":213},"end":{"line":30,"column":225}},{"start":{"line":30,"column":228},"end":{"line":30,"column":240}}],"line":30},"7":{"loc":{"start":{"line":33,"column":9},"end":{"line":65,"column":3}},"type":"if","locations":[{"start":{"line":33,"column":9},"end":{"line":65,"column":3}},{"start":{"line":33,"column":9},"end":{"line":65,"column":3}}],"line":33},"8":{"loc":{"start":{"line":40,"column":6},"end":{"line":42,"column":7}},"type":"if","locations":[{"start":{"line":40,"column":6},"end":{"line":42,"column":7}},{"start":{"line":40,"column":6},"end":{"line":42,"column":7}}],"line":40},"9":{"loc":{"start":{"line":50,"column":6},"end":{"line":52,"column":7}},"type":"if","locations":[{"start":{"line":50,"column":6},"end":{"line":52,"column":7}},{"start":{"line":50,"column":6},"end":{"line":52,"column":7}}],"line":50},"10":{"loc":{"start":{"line":50,"column":10},"end":{"line":50,"column":121}},"type":"binary-expr","locations":[{"start":{"line":50,"column":10},"end":{"line":50,"column":61}},{"start":{"line":50,"column":65},"end":{"line":50,"column":121}}],"line":50},"11":{"loc":{"start":{"line":56,"column":8},"end":{"line":56,"column":40}},"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":40}},{"start":{"line":56,"column":8},"end":{"line":56,"column":40}}],"line":56},"12":{"loc":{"start":{"line":63,"column":4},"end":{"line":63,"column":38}},"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":63,"column":38}},{"start":{"line":63,"column":4},"end":{"line":63,"column":38}}],"line":63}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":2,"7":2,"8":0,"9":2,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":2,"24":1,"25":1,"26":1,"27":1,"28":4,"29":4,"30":2,"31":4,"32":1,"33":2,"34":2,"35":2,"36":2,"37":2,"38":2,"39":4,"40":0,"41":4,"42":2,"43":1,"44":1,"45":0,"46":1,"47":2},"f":{"0":2,"1":0,"2":4,"3":2,"4":4},"b":{"0":[0,2],"1":[0,2],"2":[2,2],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[1,1],"8":[2,2],"9":[2,0],"10":[2,0],"11":[0,4],"12":[0,1]},"inputSourceMap":{"version":3,"sources":["printBlock.js"],"names":["printBlock","ctx","root","res","precontrib","block","tmpContent","hidden","Array","prototype","forEach","call","item","editable","value","precontribTemplate","group","key","indexOf","ctxBlock","split","arrItem","index","match","push","Object","keys","i","display","abeEngine","instance","content","length"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["import {printInput} from './printInput'\nimport abeEngine from './abeEngine'\n\nexport default function printBlock(ctx, root) {\n  var res = ''\n  var precontrib = false\n  if (root.precontrib != null) {\n    precontrib = root.precontrib\n  }\n\n  if (ctx[0].block != null && ctx[0].block !== '') {\n    let tmpContent = ''\n    let hidden = true\n    Array.prototype.forEach.call(ctx, item => {\n      if (item.editable) hidden = false\n      if (precontrib) item.value = ''\n      tmpContent += printInput(item, root)\n    })\n\n    if (!hidden)\n      res += `<div class=\"form-group\" data-precontrib-templates=\"${ctx[0]\n        .precontribTemplate}\">\n                <label class=\"title\">\n                  ${ctx[0].group != null ? ctx[0].group : ctx[0].block}\n                </label>\n                <div class='single-block well well-sm'>`\n    else\n      res += `<div class=\"form-group\" data-precontrib-templates=\"${ctx[0]\n        .precontribTemplate}\">\n                <div class='single-block'>`\n    res += tmpContent\n    res += '</div></div>'\n  } else if (ctx[0].key.indexOf('[') > -1) {\n    var ctxBlock = ctx[0].key.split('[')[0]\n    res += `<div class=\"form-group\" data-precontrib-templates=\"${ctx[0]\n      .precontribTemplate}\">\n              <div class=\"list-group\" data-block=\"${ctxBlock}\" >\n                <label class=\"d-flex justify-content-between\">\n                  ${ctxBlock}\n                  <button type=\"button\" class=\"btn btn-success add-block\" title=\"Add new block\" >\n                    <span class=\"fa fa-plus\" aria-hidden=\"true\"></span>\n                  </button>\n                </label>`\n\n    var arrItem = []\n    Array.prototype.forEach.call(ctx, item => {\n      var index = item.key.match(/[^\\[\\]]+?(?=\\])/)\n      if (arrItem[index] == null) {\n        arrItem[index] = []\n      }\n      arrItem[index].push(item)\n    })\n\n    Array.prototype.forEach.call(Object.keys(arrItem), i => {\n      var key = arrItem[i][0].key.split('[')[0]\n      var display = ''\n      if (\n        abeEngine.instance.content[key] == null ||\n        abeEngine.instance.content[key].length === 0\n      ) {\n        display = 'style=\"display: none\"'\n      }\n      res += `<div class=\"list-block\" data-block=\"${key}${i}\" ${display}>\n                <button type=\"button\" class=\"btn btn-info collapsed\" data-toggle=\"collapse\" data-target=\"#${key}${i}\" >\n                  Section <span class='label-count'>${i}</span> :\n                  <span class=\"fa fa-chevron-down\" aria-hidden=\"true\"></span>\n                </button>\n                <button type=\"button\" class=\"btn btn-danger remove-block\" title=\"Delete block\" >\n                  <span class=\"fa fa-trash\" aria-hidden=\"true\"></span>\n                </button>\n                <div id=\"${key}${i}\" class=\"collapse\" >\n                `\n      Array.prototype.forEach.call(arrItem[i], item => {\n        if (precontrib) item.value = ''\n        res += printInput(item, root)\n      })\n      res += '</div></div>'\n    })\n\n    res += `\n          </div>\n        </div>`\n  } else {\n    if (precontrib) ctx[0].value = ''\n    res += printInput(ctx[0], root)\n  }\n\n  return res\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dc6f55dc2201f4948a05ed1a67c502ba06e95520","contentHash":"9880350b56de98afbf04ddeb84b444ba615e709c5f8465df1301edae71e2b911"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/printInput.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/printInput.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":38}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":28}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":20}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":46}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":42}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":42}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":50}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":42}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":44}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":42}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":32}},"13":{"start":{"line":20,"column":15},"end":{"line":20,"column":79}},"14":{"start":{"line":22,"column":26},"end":{"line":22,"column":81}},"15":{"start":{"line":24,"column":20},"end":{"line":24,"column":69}},"16":{"start":{"line":26,"column":8},"end":{"line":26,"column":28}},"17":{"start":{"line":29,"column":19},"end":{"line":29,"column":21}},"18":{"start":{"line":30,"column":2},"end":{"line":30,"column":109}},"19":{"start":{"line":30,"column":26},"end":{"line":30,"column":109}},"20":{"start":{"line":31,"column":2},"end":{"line":31,"column":81}},"21":{"start":{"line":31,"column":28},"end":{"line":31,"column":81}},"22":{"start":{"line":32,"column":2},"end":{"line":32,"column":106}},"23":{"start":{"line":32,"column":36},"end":{"line":32,"column":106}},"24":{"start":{"line":33,"column":2},"end":{"line":33,"column":84}},"25":{"start":{"line":33,"column":29},"end":{"line":33,"column":84}},"26":{"start":{"line":34,"column":2},"end":{"line":34,"column":84}},"27":{"start":{"line":34,"column":28},"end":{"line":34,"column":84}},"28":{"start":{"line":35,"column":2},"end":{"line":35,"column":95}},"29":{"start":{"line":35,"column":31},"end":{"line":35,"column":95}},"30":{"start":{"line":36,"column":2},"end":{"line":36,"column":92}},"31":{"start":{"line":36,"column":30},"end":{"line":36,"column":92}},"32":{"start":{"line":37,"column":2},"end":{"line":37,"column":92}},"33":{"start":{"line":37,"column":30},"end":{"line":37,"column":92}},"34":{"start":{"line":38,"column":2},"end":{"line":38,"column":107}},"35":{"start":{"line":38,"column":35},"end":{"line":38,"column":107}},"36":{"start":{"line":39,"column":2},"end":{"line":39,"column":99}},"37":{"start":{"line":39,"column":34},"end":{"line":39,"column":99}},"38":{"start":{"line":40,"column":2},"end":{"line":40,"column":87}},"39":{"start":{"line":40,"column":29},"end":{"line":40,"column":87}},"40":{"start":{"line":41,"column":2},"end":{"line":41,"column":92}},"41":{"start":{"line":41,"column":30},"end":{"line":41,"column":92}},"42":{"start":{"line":42,"column":2},"end":{"line":42,"column":95}},"43":{"start":{"line":42,"column":31},"end":{"line":42,"column":95}},"44":{"start":{"line":43,"column":2},"end":{"line":43,"column":73}},"45":{"start":{"line":43,"column":31},"end":{"line":43,"column":73}},"46":{"start":{"line":44,"column":2},"end":{"line":44,"column":20}},"47":{"start":{"line":48,"column":13},"end":{"line":48,"column":56}},"48":{"start":{"line":49,"column":2},"end":{"line":49,"column":127}},"49":{"start":{"line":53,"column":2},"end":{"line":55,"column":3}},"50":{"start":{"line":54,"column":4},"end":{"line":54,"column":147}},"51":{"start":{"line":57,"column":2},"end":{"line":57,"column":12}},"52":{"start":{"line":61,"column":20},"end":{"line":61,"column":140}},"53":{"start":{"line":64,"column":2},"end":{"line":76,"column":3}},"54":{"start":{"line":65,"column":4},"end":{"line":65,"column":169}},"55":{"start":{"line":65,"column":68},"end":{"line":65,"column":95}},"56":{"start":{"line":65,"column":100},"end":{"line":65,"column":169}},"57":{"start":{"line":66,"column":4},"end":{"line":66,"column":63}},"58":{"start":{"line":68,"column":4},"end":{"line":70,"column":5}},"59":{"start":{"line":69,"column":6},"end":{"line":69,"column":628}},"60":{"start":{"line":72,"column":4},"end":{"line":74,"column":7}},"61":{"start":{"line":73,"column":6},"end":{"line":73,"column":70}},"62":{"start":{"line":75,"column":4},"end":{"line":75,"column":28}},"63":{"start":{"line":78,"column":2},"end":{"line":104,"column":3}},"64":{"start":{"line":79,"column":4},"end":{"line":79,"column":172}},"65":{"start":{"line":82,"column":4},"end":{"line":82,"column":88}},"66":{"start":{"line":84,"column":18},"end":{"line":84,"column":20}},"67":{"start":{"line":86,"column":4},"end":{"line":92,"column":5}},"68":{"start":{"line":87,"column":6},"end":{"line":89,"column":9}},"69":{"start":{"line":88,"column":8},"end":{"line":88,"column":62}},"70":{"start":{"line":91,"column":6},"end":{"line":91,"column":70}},"71":{"start":{"line":94,"column":31},"end":{"line":94,"column":50}},"72":{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},"73":{"start":{"line":97,"column":6},"end":{"line":97,"column":32}},"74":{"start":{"line":100,"column":4},"end":{"line":100,"column":162}},"75":{"start":{"line":100,"column":25},"end":{"line":100,"column":162}},"76":{"start":{"line":101,"column":4},"end":{"line":101,"column":106}},"77":{"start":{"line":101,"column":26},"end":{"line":101,"column":106}},"78":{"start":{"line":102,"column":4},"end":{"line":102,"column":27}},"79":{"start":{"line":103,"column":4},"end":{"line":103,"column":31}},"80":{"start":{"line":106,"column":2},"end":{"line":106,"column":51}},"81":{"start":{"line":107,"column":2},"end":{"line":107,"column":21}},"82":{"start":{"line":111,"column":16},"end":{"line":227,"column":4}},"83":{"start":{"line":228,"column":16},"end":{"line":348,"column":4}},"84":{"start":{"line":349,"column":2},"end":{"line":349,"column":73}},"85":{"start":{"line":349,"column":30},"end":{"line":349,"column":73}},"86":{"start":{"line":350,"column":18},"end":{"line":350,"column":269}},"87":{"start":{"line":351,"column":2},"end":{"line":359,"column":5}},"88":{"start":{"line":352,"column":4},"end":{"line":358,"column":5}},"89":{"start":{"line":353,"column":6},"end":{"line":353,"column":453}},"90":{"start":{"line":354,"column":6},"end":{"line":356,"column":9}},"91":{"start":{"line":355,"column":8},"end":{"line":355,"column":250}},"92":{"start":{"line":357,"column":6},"end":{"line":357,"column":53}},"93":{"start":{"line":360,"column":2},"end":{"line":368,"column":5}},"94":{"start":{"line":361,"column":4},"end":{"line":367,"column":5}},"95":{"start":{"line":362,"column":19},"end":{"line":362,"column":87}},"96":{"start":{"line":363,"column":18},"end":{"line":363,"column":88}},"97":{"start":{"line":364,"column":6},"end":{"line":364,"column":66}},"98":{"start":{"line":364,"column":36},"end":{"line":364,"column":66}},"99":{"start":{"line":365,"column":6},"end":{"line":365,"column":65}},"100":{"start":{"line":365,"column":36},"end":{"line":365,"column":65}},"101":{"start":{"line":366,"column":6},"end":{"line":366,"column":562}},"102":{"start":{"line":369,"column":2},"end":{"line":369,"column":258}},"103":{"start":{"line":370,"column":2},"end":{"line":370,"column":19}},"104":{"start":{"line":374,"column":2},"end":{"line":374,"column":1190}},"105":{"start":{"line":378,"column":2},"end":{"line":378,"column":314}},"106":{"start":{"line":382,"column":2},"end":{"line":382,"column":486}},"107":{"start":{"line":386,"column":2},"end":{"line":386,"column":1019}},"108":{"start":{"line":390,"column":2},"end":{"line":390,"column":831}},"109":{"start":{"line":390,"column":23},"end":{"line":390,"column":534}},"110":{"start":{"line":390,"column":539},"end":{"line":390,"column":831}},"111":{"start":{"line":400,"column":2},"end":{"line":400,"column":75}},"112":{"start":{"line":401,"column":21},"end":{"line":401,"column":69}},"113":{"start":{"line":402,"column":19},"end":{"line":402,"column":42}},"114":{"start":{"line":405,"column":2},"end":{"line":410,"column":3}},"115":{"start":{"line":406,"column":4},"end":{"line":406,"column":108}},"116":{"start":{"line":407,"column":4},"end":{"line":407,"column":28}},"117":{"start":{"line":409,"column":4},"end":{"line":409,"column":87}},"118":{"start":{"line":412,"column":2},"end":{"line":412,"column":95}},"119":{"start":{"line":412,"column":60},"end":{"line":412,"column":95}},"120":{"start":{"line":413,"column":2},"end":{"line":413,"column":48}},"121":{"start":{"line":414,"column":2},"end":{"line":414,"column":36}},"122":{"start":{"line":415,"column":2},"end":{"line":415,"column":93}},"123":{"start":{"line":415,"column":40},"end":{"line":415,"column":93}},"124":{"start":{"line":416,"column":2},"end":{"line":416,"column":54}},"125":{"start":{"line":416,"column":33},"end":{"line":416,"column":54}},"126":{"start":{"line":417,"column":2},"end":{"line":417,"column":23}},"127":{"start":{"line":419,"column":2},"end":{"line":421,"column":3}},"128":{"start":{"line":420,"column":4},"end":{"line":420,"column":44}},"129":{"start":{"line":423,"column":19},"end":{"line":423,"column":40}},"130":{"start":{"line":425,"column":2},"end":{"line":429,"column":564}},"131":{"start":{"line":426,"column":4},"end":{"line":426,"column":127}},"132":{"start":{"line":427,"column":4},"end":{"line":427,"column":66}},"133":{"start":{"line":428,"column":4},"end":{"line":428,"column":72}},"134":{"start":{"line":429,"column":9},"end":{"line":429,"column":564}},"135":{"start":{"line":429,"column":47},"end":{"line":429,"column":102}},"136":{"start":{"line":429,"column":107},"end":{"line":429,"column":564}},"137":{"start":{"line":429,"column":145},"end":{"line":429,"column":200}},"138":{"start":{"line":429,"column":205},"end":{"line":429,"column":564}},"139":{"start":{"line":429,"column":247},"end":{"line":429,"column":306}},"140":{"start":{"line":429,"column":311},"end":{"line":429,"column":564}},"141":{"start":{"line":429,"column":349},"end":{"line":429,"column":404}},"142":{"start":{"line":429,"column":409},"end":{"line":429,"column":564}},"143":{"start":{"line":429,"column":448},"end":{"line":429,"column":504}},"144":{"start":{"line":429,"column":509},"end":{"line":429,"column":564}},"145":{"start":{"line":431,"column":2},"end":{"line":431,"column":18}},"146":{"start":{"line":432,"column":2},"end":{"line":432,"column":76}},"147":{"start":{"line":433,"column":2},"end":{"line":433,"column":13}}},"fnMap":{"0":{"name":"getAttributes","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":22}},"loc":{"start":{"line":28,"column":31},"end":{"line":45,"column":1}},"line":28},"1":{"name":"getLabel","decl":{"start":{"line":47,"column":9},"end":{"line":47,"column":17}},"loc":{"start":{"line":47,"column":26},"end":{"line":50,"column":1}},"line":47},"2":{"name":"hint","decl":{"start":{"line":52,"column":9},"end":{"line":52,"column":13}},"loc":{"start":{"line":52,"column":22},"end":{"line":58,"column":1}},"line":52},"3":{"name":"createInputSource","decl":{"start":{"line":60,"column":9},"end":{"line":60,"column":26}},"loc":{"start":{"line":60,"column":59},"end":{"line":108,"column":1}},"line":60},"4":{"name":"(anonymous_4)","decl":{"start":{"line":72,"column":47},"end":{"line":72,"column":48}},"loc":{"start":{"line":72,"column":62},"end":{"line":74,"column":5}},"line":72},"5":{"name":"(anonymous_5)","decl":{"start":{"line":87,"column":50},"end":{"line":87,"column":51}},"loc":{"start":{"line":87,"column":65},"end":{"line":89,"column":7}},"line":87},"6":{"name":"createInputRich","decl":{"start":{"line":110,"column":9},"end":{"line":110,"column":24}},"loc":{"start":{"line":110,"column":57},"end":{"line":371,"column":1}},"line":110},"7":{"name":"(anonymous_7)","decl":{"start":{"line":351,"column":18},"end":{"line":351,"column":19}},"loc":{"start":{"line":351,"column":36},"end":{"line":359,"column":3}},"line":351},"8":{"name":"(anonymous_8)","decl":{"start":{"line":354,"column":29},"end":{"line":354,"column":30}},"loc":{"start":{"line":354,"column":47},"end":{"line":356,"column":7}},"line":354},"9":{"name":"(anonymous_9)","decl":{"start":{"line":360,"column":18},"end":{"line":360,"column":19}},"loc":{"start":{"line":360,"column":36},"end":{"line":368,"column":3}},"line":360},"10":{"name":"createInputFile","decl":{"start":{"line":373,"column":9},"end":{"line":373,"column":24}},"loc":{"start":{"line":373,"column":57},"end":{"line":375,"column":1}},"line":373},"11":{"name":"createInputTextarea","decl":{"start":{"line":377,"column":9},"end":{"line":377,"column":28}},"loc":{"start":{"line":377,"column":61},"end":{"line":379,"column":1}},"line":377},"12":{"name":"createInputLink","decl":{"start":{"line":381,"column":9},"end":{"line":381,"column":24}},"loc":{"start":{"line":381,"column":57},"end":{"line":383,"column":1}},"line":381},"13":{"name":"createInputImage","decl":{"start":{"line":385,"column":9},"end":{"line":385,"column":25}},"loc":{"start":{"line":385,"column":58},"end":{"line":387,"column":1}},"line":385},"14":{"name":"createInputText","decl":{"start":{"line":389,"column":9},"end":{"line":389,"column":24}},"loc":{"start":{"line":389,"column":57},"end":{"line":391,"column":1}},"line":389},"15":{"name":"printInput","decl":{"start":{"line":399,"column":9},"end":{"line":399,"column":19}},"loc":{"start":{"line":399,"column":34},"end":{"line":434,"column":1}},"line":399}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":2},"end":{"line":30,"column":109}},"type":"if","locations":[{"start":{"line":30,"column":2},"end":{"line":30,"column":109}},{"start":{"line":30,"column":2},"end":{"line":30,"column":109}}],"line":30},"1":{"loc":{"start":{"line":31,"column":2},"end":{"line":31,"column":81}},"type":"if","locations":[{"start":{"line":31,"column":2},"end":{"line":31,"column":81}},{"start":{"line":31,"column":2},"end":{"line":31,"column":81}}],"line":31},"2":{"loc":{"start":{"line":32,"column":2},"end":{"line":32,"column":106}},"type":"if","locations":[{"start":{"line":32,"column":2},"end":{"line":32,"column":106}},{"start":{"line":32,"column":2},"end":{"line":32,"column":106}}],"line":32},"3":{"loc":{"start":{"line":33,"column":2},"end":{"line":33,"column":84}},"type":"if","locations":[{"start":{"line":33,"column":2},"end":{"line":33,"column":84}},{"start":{"line":33,"column":2},"end":{"line":33,"column":84}}],"line":33},"4":{"loc":{"start":{"line":34,"column":2},"end":{"line":34,"column":84}},"type":"if","locations":[{"start":{"line":34,"column":2},"end":{"line":34,"column":84}},{"start":{"line":34,"column":2},"end":{"line":34,"column":84}}],"line":34},"5":{"loc":{"start":{"line":35,"column":2},"end":{"line":35,"column":95}},"type":"if","locations":[{"start":{"line":35,"column":2},"end":{"line":35,"column":95}},{"start":{"line":35,"column":2},"end":{"line":35,"column":95}}],"line":35},"6":{"loc":{"start":{"line":36,"column":2},"end":{"line":36,"column":92}},"type":"if","locations":[{"start":{"line":36,"column":2},"end":{"line":36,"column":92}},{"start":{"line":36,"column":2},"end":{"line":36,"column":92}}],"line":36},"7":{"loc":{"start":{"line":37,"column":2},"end":{"line":37,"column":92}},"type":"if","locations":[{"start":{"line":37,"column":2},"end":{"line":37,"column":92}},{"start":{"line":37,"column":2},"end":{"line":37,"column":92}}],"line":37},"8":{"loc":{"start":{"line":38,"column":2},"end":{"line":38,"column":107}},"type":"if","locations":[{"start":{"line":38,"column":2},"end":{"line":38,"column":107}},{"start":{"line":38,"column":2},"end":{"line":38,"column":107}}],"line":38},"9":{"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":99}},"type":"if","locations":[{"start":{"line":39,"column":2},"end":{"line":39,"column":99}},{"start":{"line":39,"column":2},"end":{"line":39,"column":99}}],"line":39},"10":{"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":87}},"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":40,"column":87}},{"start":{"line":40,"column":2},"end":{"line":40,"column":87}}],"line":40},"11":{"loc":{"start":{"line":41,"column":2},"end":{"line":41,"column":92}},"type":"if","locations":[{"start":{"line":41,"column":2},"end":{"line":41,"column":92}},{"start":{"line":41,"column":2},"end":{"line":41,"column":92}}],"line":41},"12":{"loc":{"start":{"line":42,"column":2},"end":{"line":42,"column":95}},"type":"if","locations":[{"start":{"line":42,"column":2},"end":{"line":42,"column":95}},{"start":{"line":42,"column":2},"end":{"line":42,"column":95}}],"line":42},"13":{"loc":{"start":{"line":43,"column":2},"end":{"line":43,"column":73}},"type":"if","locations":[{"start":{"line":43,"column":2},"end":{"line":43,"column":73}},{"start":{"line":43,"column":2},"end":{"line":43,"column":73}}],"line":43},"14":{"loc":{"start":{"line":48,"column":28},"end":{"line":48,"column":55}},"type":"cond-expr","locations":[{"start":{"line":48,"column":46},"end":{"line":48,"column":50}},{"start":{"line":48,"column":53},"end":{"line":48,"column":55}}],"line":48},"15":{"loc":{"start":{"line":53,"column":2},"end":{"line":55,"column":3}},"type":"if","locations":[{"start":{"line":53,"column":2},"end":{"line":55,"column":3}},{"start":{"line":53,"column":2},"end":{"line":55,"column":3}}],"line":53},"16":{"loc":{"start":{"line":64,"column":2},"end":{"line":76,"column":3}},"type":"if","locations":[{"start":{"line":64,"column":2},"end":{"line":76,"column":3}},{"start":{"line":64,"column":2},"end":{"line":76,"column":3}}],"line":64},"17":{"loc":{"start":{"line":64,"column":6},"end":{"line":64,"column":128}},"type":"binary-expr","locations":[{"start":{"line":64,"column":6},"end":{"line":64,"column":33}},{"start":{"line":64,"column":37},"end":{"line":64,"column":67}},{"start":{"line":64,"column":71},"end":{"line":64,"column":94}},{"start":{"line":64,"column":98},"end":{"line":64,"column":128}}],"line":64},"18":{"loc":{"start":{"line":65,"column":4},"end":{"line":65,"column":169}},"type":"if","locations":[{"start":{"line":65,"column":4},"end":{"line":65,"column":169}},{"start":{"line":65,"column":4},"end":{"line":65,"column":169}}],"line":65},"19":{"loc":{"start":{"line":68,"column":4},"end":{"line":70,"column":5}},"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":70,"column":5}},{"start":{"line":68,"column":4},"end":{"line":70,"column":5}}],"line":68},"20":{"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":98}},"type":"binary-expr","locations":[{"start":{"line":68,"column":8},"end":{"line":68,"column":35}},{"start":{"line":68,"column":39},"end":{"line":68,"column":69}},{"start":{"line":68,"column":73},"end":{"line":68,"column":98}}],"line":68},"21":{"loc":{"start":{"line":78,"column":2},"end":{"line":104,"column":3}},"type":"if","locations":[{"start":{"line":78,"column":2},"end":{"line":104,"column":3}},{"start":{"line":78,"column":2},"end":{"line":104,"column":3}}],"line":78},"22":{"loc":{"start":{"line":78,"column":6},"end":{"line":78,"column":67}},"type":"binary-expr","locations":[{"start":{"line":78,"column":6},"end":{"line":78,"column":33}},{"start":{"line":78,"column":37},"end":{"line":78,"column":67}}],"line":78},"23":{"loc":{"start":{"line":86,"column":4},"end":{"line":92,"column":5}},"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":92,"column":5}},{"start":{"line":86,"column":4},"end":{"line":92,"column":5}}],"line":86},"24":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":130}},"type":"binary-expr","locations":[{"start":{"line":86,"column":8},"end":{"line":86,"column":60}},{"start":{"line":86,"column":64},"end":{"line":86,"column":130}}],"line":86},"25":{"loc":{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},{"start":{"line":96,"column":4},"end":{"line":98,"column":5}}],"line":96},"26":{"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":162}},"type":"if","locations":[{"start":{"line":100,"column":4},"end":{"line":100,"column":162}},{"start":{"line":100,"column":4},"end":{"line":100,"column":162}}],"line":100},"27":{"loc":{"start":{"line":101,"column":4},"end":{"line":101,"column":106}},"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":106}},{"start":{"line":101,"column":4},"end":{"line":101,"column":106}}],"line":101},"28":{"loc":{"start":{"line":349,"column":2},"end":{"line":349,"column":73}},"type":"if","locations":[{"start":{"line":349,"column":2},"end":{"line":349,"column":73}},{"start":{"line":349,"column":2},"end":{"line":349,"column":73}}],"line":349},"29":{"loc":{"start":{"line":352,"column":4},"end":{"line":358,"column":5}},"type":"if","locations":[{"start":{"line":352,"column":4},"end":{"line":358,"column":5}},{"start":{"line":352,"column":4},"end":{"line":358,"column":5}}],"line":352},"30":{"loc":{"start":{"line":352,"column":8},"end":{"line":352,"column":72}},"type":"binary-expr","locations":[{"start":{"line":352,"column":8},"end":{"line":352,"column":30}},{"start":{"line":352,"column":34},"end":{"line":352,"column":72}}],"line":352},"31":{"loc":{"start":{"line":361,"column":4},"end":{"line":367,"column":5}},"type":"if","locations":[{"start":{"line":361,"column":4},"end":{"line":367,"column":5}},{"start":{"line":361,"column":4},"end":{"line":367,"column":5}}],"line":361},"32":{"loc":{"start":{"line":361,"column":8},"end":{"line":361,"column":76}},"type":"binary-expr","locations":[{"start":{"line":361,"column":8},"end":{"line":361,"column":30}},{"start":{"line":361,"column":34},"end":{"line":361,"column":76}}],"line":361},"33":{"loc":{"start":{"line":362,"column":19},"end":{"line":362,"column":87}},"type":"cond-expr","locations":[{"start":{"line":362,"column":43},"end":{"line":362,"column":82}},{"start":{"line":362,"column":85},"end":{"line":362,"column":87}}],"line":362},"34":{"loc":{"start":{"line":363,"column":18},"end":{"line":363,"column":88}},"type":"cond-expr","locations":[{"start":{"line":363,"column":41},"end":{"line":363,"column":83}},{"start":{"line":363,"column":86},"end":{"line":363,"column":88}}],"line":363},"35":{"loc":{"start":{"line":364,"column":6},"end":{"line":364,"column":66}},"type":"if","locations":[{"start":{"line":364,"column":6},"end":{"line":364,"column":66}},{"start":{"line":364,"column":6},"end":{"line":364,"column":66}}],"line":364},"36":{"loc":{"start":{"line":365,"column":6},"end":{"line":365,"column":65}},"type":"if","locations":[{"start":{"line":365,"column":6},"end":{"line":365,"column":65}},{"start":{"line":365,"column":6},"end":{"line":365,"column":65}}],"line":365},"37":{"loc":{"start":{"line":366,"column":495},"end":{"line":366,"column":523}},"type":"cond-expr","locations":[{"start":{"line":366,"column":508},"end":{"line":366,"column":518}},{"start":{"line":366,"column":521},"end":{"line":366,"column":523}}],"line":366},"38":{"loc":{"start":{"line":374,"column":205},"end":{"line":374,"column":260}},"type":"cond-expr","locations":[{"start":{"line":374,"column":237},"end":{"line":374,"column":242}},{"start":{"line":374,"column":245},"end":{"line":374,"column":260}}],"line":374},"39":{"loc":{"start":{"line":386,"column":204},"end":{"line":386,"column":259}},"type":"cond-expr","locations":[{"start":{"line":386,"column":236},"end":{"line":386,"column":241}},{"start":{"line":386,"column":244},"end":{"line":386,"column":259}}],"line":386},"40":{"loc":{"start":{"line":390,"column":2},"end":{"line":390,"column":831}},"type":"if","locations":[{"start":{"line":390,"column":2},"end":{"line":390,"column":831}},{"start":{"line":390,"column":2},"end":{"line":390,"column":831}}],"line":390},"41":{"loc":{"start":{"line":401,"column":21},"end":{"line":401,"column":69}},"type":"cond-expr","locations":[{"start":{"line":401,"column":41},"end":{"line":401,"column":64}},{"start":{"line":401,"column":67},"end":{"line":401,"column":69}}],"line":401},"42":{"loc":{"start":{"line":405,"column":2},"end":{"line":410,"column":3}},"type":"if","locations":[{"start":{"line":405,"column":2},"end":{"line":410,"column":3}},{"start":{"line":405,"column":2},"end":{"line":410,"column":3}}],"line":405},"43":{"loc":{"start":{"line":412,"column":2},"end":{"line":412,"column":95}},"type":"if","locations":[{"start":{"line":412,"column":2},"end":{"line":412,"column":95}},{"start":{"line":412,"column":2},"end":{"line":412,"column":95}}],"line":412},"44":{"loc":{"start":{"line":412,"column":6},"end":{"line":412,"column":58}},"type":"binary-expr","locations":[{"start":{"line":412,"column":6},"end":{"line":412,"column":27}},{"start":{"line":412,"column":31},"end":{"line":412,"column":58}}],"line":412},"45":{"loc":{"start":{"line":413,"column":23},"end":{"line":413,"column":47}},"type":"binary-expr","locations":[{"start":{"line":413,"column":23},"end":{"line":413,"column":41}},{"start":{"line":413,"column":45},"end":{"line":413,"column":47}}],"line":413},"46":{"loc":{"start":{"line":414,"column":17},"end":{"line":414,"column":35}},"type":"binary-expr","locations":[{"start":{"line":414,"column":17},"end":{"line":414,"column":29}},{"start":{"line":414,"column":33},"end":{"line":414,"column":35}}],"line":414},"47":{"loc":{"start":{"line":415,"column":2},"end":{"line":415,"column":93}},"type":"if","locations":[{"start":{"line":415,"column":2},"end":{"line":415,"column":93}},{"start":{"line":415,"column":2},"end":{"line":415,"column":93}}],"line":415},"48":{"loc":{"start":{"line":416,"column":2},"end":{"line":416,"column":54}},"type":"if","locations":[{"start":{"line":416,"column":2},"end":{"line":416,"column":54}},{"start":{"line":416,"column":2},"end":{"line":416,"column":54}}],"line":416},"49":{"loc":{"start":{"line":419,"column":2},"end":{"line":421,"column":3}},"type":"if","locations":[{"start":{"line":419,"column":2},"end":{"line":421,"column":3}},{"start":{"line":419,"column":2},"end":{"line":421,"column":3}}],"line":419},"50":{"loc":{"start":{"line":419,"column":6},"end":{"line":419,"column":126}},"type":"binary-expr","locations":[{"start":{"line":419,"column":6},"end":{"line":419,"column":27}},{"start":{"line":419,"column":31},"end":{"line":419,"column":126}}],"line":419},"51":{"loc":{"start":{"line":425,"column":2},"end":{"line":429,"column":564}},"type":"if","locations":[{"start":{"line":425,"column":2},"end":{"line":429,"column":564}},{"start":{"line":425,"column":2},"end":{"line":429,"column":564}}],"line":425},"52":{"loc":{"start":{"line":426,"column":22},"end":{"line":426,"column":126}},"type":"cond-expr","locations":[{"start":{"line":426,"column":111},"end":{"line":426,"column":121}},{"start":{"line":426,"column":124},"end":{"line":426,"column":126}}],"line":426},"53":{"loc":{"start":{"line":426,"column":22},"end":{"line":426,"column":108}},"type":"binary-expr","locations":[{"start":{"line":426,"column":23},"end":{"line":426,"column":51}},{"start":{"line":426,"column":55},"end":{"line":426,"column":79}},{"start":{"line":426,"column":84},"end":{"line":426,"column":108}}],"line":426},"54":{"loc":{"start":{"line":427,"column":22},"end":{"line":427,"column":65}},"type":"cond-expr","locations":[{"start":{"line":427,"column":50},"end":{"line":427,"column":60}},{"start":{"line":427,"column":63},"end":{"line":427,"column":65}}],"line":427},"55":{"loc":{"start":{"line":429,"column":9},"end":{"line":429,"column":564}},"type":"if","locations":[{"start":{"line":429,"column":9},"end":{"line":429,"column":564}},{"start":{"line":429,"column":9},"end":{"line":429,"column":564}}],"line":429},"56":{"loc":{"start":{"line":429,"column":107},"end":{"line":429,"column":564}},"type":"if","locations":[{"start":{"line":429,"column":107},"end":{"line":429,"column":564}},{"start":{"line":429,"column":107},"end":{"line":429,"column":564}}],"line":429},"57":{"loc":{"start":{"line":429,"column":205},"end":{"line":429,"column":564}},"type":"if","locations":[{"start":{"line":429,"column":205},"end":{"line":429,"column":564}},{"start":{"line":429,"column":205},"end":{"line":429,"column":564}}],"line":429},"58":{"loc":{"start":{"line":429,"column":311},"end":{"line":429,"column":564}},"type":"if","locations":[{"start":{"line":429,"column":311},"end":{"line":429,"column":564}},{"start":{"line":429,"column":311},"end":{"line":429,"column":564}}],"line":429},"59":{"loc":{"start":{"line":429,"column":409},"end":{"line":429,"column":564}},"type":"if","locations":[{"start":{"line":429,"column":409},"end":{"line":429,"column":564}},{"start":{"line":429,"column":409},"end":{"line":429,"column":564}}],"line":429}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":7,"18":7,"19":7,"20":7,"21":7,"22":7,"23":1,"24":7,"25":7,"26":7,"27":7,"28":7,"29":7,"30":7,"31":2,"32":7,"33":7,"34":7,"35":2,"36":7,"37":7,"38":7,"39":1,"40":7,"41":6,"42":7,"43":1,"44":7,"45":7,"46":7,"47":6,"48":6,"49":15,"50":0,"51":15,"52":4,"53":4,"54":2,"55":0,"56":2,"57":2,"58":2,"59":0,"60":2,"61":0,"62":2,"63":4,"64":1,"65":3,"66":3,"67":3,"68":3,"69":9,"70":0,"71":3,"72":3,"73":0,"74":3,"75":0,"76":3,"77":3,"78":3,"79":3,"80":4,"81":4,"82":1,"83":1,"84":1,"85":0,"86":1,"87":1,"88":3,"89":3,"90":3,"91":36,"92":3,"93":1,"94":21,"95":21,"96":21,"97":21,"98":1,"99":21,"100":2,"101":21,"102":1,"103":1,"104":1,"105":1,"106":1,"107":1,"108":7,"109":6,"110":1,"111":6,"112":6,"113":6,"114":6,"115":5,"116":5,"117":1,"118":6,"119":0,"120":6,"121":6,"122":6,"123":6,"124":6,"125":6,"126":6,"127":6,"128":0,"129":6,"130":6,"131":0,"132":0,"133":0,"134":6,"135":0,"136":6,"137":0,"138":6,"139":0,"140":6,"141":0,"142":6,"143":0,"144":6,"145":6,"146":6,"147":6},"f":{"0":7,"1":6,"2":15,"3":4,"4":0,"5":9,"6":1,"7":3,"8":36,"9":21,"10":1,"11":1,"12":1,"13":1,"14":7,"15":6},"b":{"0":[7,0],"1":[7,0],"2":[1,6],"3":[7,0],"4":[7,0],"5":[7,0],"6":[2,5],"7":[7,0],"8":[2,5],"9":[7,0],"10":[1,6],"11":[6,1],"12":[1,6],"13":[7,0],"14":[2,4],"15":[0,15],"16":[2,2],"17":[4,1,3,3],"18":[0,2],"19":[0,2],"20":[2,1,1],"21":[1,3],"22":[4,1],"23":[3,0],"24":[3,3],"25":[0,3],"26":[0,3],"27":[3,0],"28":[0,1],"29":[3,0],"30":[3,0],"31":[21,0],"32":[21,0],"33":[3,18],"34":[5,16],"35":[1,20],"36":[2,19],"37":[3,18],"38":[1,0],"39":[1,0],"40":[6,1],"41":[0,6],"42":[5,1],"43":[0,6],"44":[6,0],"45":[6,5],"46":[6,0],"47":[6,0],"48":[6,0],"49":[0,6],"50":[6,5],"51":[0,6],"52":[0,0],"53":[0,0,0],"54":[0,0],"55":[0,6],"56":[0,6],"57":[0,6],"58":[0,6],"59":[0,6]},"inputSourceMap":{"version":3,"sources":["printInput.js"],"names":["getAttributes","params","attributes","key","value","reload","order","required","display","visible","autocomplete","placeholder","thumbs","toolbar","multiple","disabled","getLabel","desc","hint","createInputSource","inputClass","inputSource","type","lastValues","cmsData","sql","getSourceType","sourceString","source","JSON","stringify","replace","prefill","Array","prototype","forEach","call","val","options","Object","toString","defaultValueSelected","indexOf","toLowerCase","createInputRich","buttons","icon","title","action","param","hotkey","popup","selects","name","id","regexp","split","inputRich","select","option","button","createInputFile","keepName","undefined","createInputTextarea","createInputLink","createInputImage","createInputText","editable","printInput","root","abeExtend","hooks","instance","trigger","userWorkflow","user","role","workflow","res","precontribTemplate","defaultValue","tab","User","utils","isUserAllowedOnRoute","status","length"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["import sourceAutocomplete from './sourceAutocomplete'\nimport sourceOption from './sourceOption'\nimport {abeExtend, User, cmsData} from '../../../'\n\nexport function getAttributes(params) {\n  var attributes = ''\n  if (params.key != null)\n    attributes += `id=\"${params.key}\" data-id=\"${params.key}\"`\n  if (params.value != null) attributes += ` value=\"${params.value}\"`\n  if (params['max-length'] != null)\n    attributes += ` data-maxlength=\"${params['max-length']}\"`\n  if (params.reload != null) attributes += ` reload=\"${params.reload}\"`\n  if (params.order != null) attributes += ` tabIndex=\"${params.order}\"`\n  if (params.required != null)\n    attributes += ` data-required=\"${params.required}\"`\n  if (params.display != null) attributes += ` data-display=\"${params.display}\"`\n  if (params.visible != null) attributes += ` data-visible=\"${params.visible}\"`\n  if (params.autocomplete != null)\n    attributes += ` data-autocomplete=\"${params.autocomplete}\"`\n  if (params.placeholder != null)\n    attributes += ` placeholder=\"${params.placeholder}\"`\n  if (params.thumbs != null) attributes += ` data-size=\"${params.thumbs}\"`\n  if (params.toolbar != null) attributes += ` data-toolbar=\"${params.toolbar}\"`\n  if (params.multiple != null)\n    attributes += ` data-multiple=\"${params.multiple}\"`\n  if (params.disabled != null) attributes += ` ${params.disabled}`\n  return attributes\n}\n\nexport function getLabel(params) {\n  var desc = params.desc + (params.required ? ' *' : '')\n  return `<label class=\"control-label\" for=\"${params.key}\" >\n            ${desc}\n          </label>`\n}\n\nexport function hint(params) {\n  if (params.hint) {\n    return `<p class=\"abe-hint help-block\">\n        <span class=\"fa fa-info-sign\"></span>&nbsp;<em>${params.hint}</em>\n      </p>`\n  }\n\n  return ''\n}\n\nexport function createInputSource(attributes, inputClass, params) {\n  var inputSource = `<div class=\"parent-${params.type} parent-${params.key}\" data-parent=\"${params.key}\">`\n  var lastValues\n\n  if (\n    (params.autocomplete != null && params.autocomplete === 'true') ||\n    (params.multiple != null && params.multiple === 'multiple')\n  ) {\n    if (cmsData.sql.getSourceType(params.sourceString) === 'url')\n      lastValues = params.source\n    else lastValues = JSON.stringify(params.source).replace(/\\'/g, '&quote;')\n    inputSource += '<div class=\"autocomplete-result-wrapper\">'\n    if (\n      params.autocomplete != null &&\n      params.autocomplete === 'true' &&\n      params.prefill === 'true'\n    ) {\n      inputSource += `<div  class=\"autocomplete-refresh\" value=''\n                            data-autocomplete-refresh=\"true\"\n                            data-autocomplete-refresh-sourcestring=\"${params.sourceString}\"\n                            data-autocomplete-refresh-prefill-quantity=\"${params[\n                              'prefill-quantity'\n                            ]}\"\n                            data-autocomplete-refresh-key=\"${params.key}\"\n                            data-autocomplete-data-display=\"${params.display}\" >\n                        <span class=\"fa fa-refresh\"></span>\n                      </div>`\n    }\n    Array.prototype.forEach.call(params.value, val => {\n      inputSource += sourceAutocomplete(val, params)\n    })\n    inputSource += '</div>'\n  }\n\n  if (params.autocomplete != null && params.autocomplete === 'true') {\n    inputSource += `<input value=\"\" type=\"text\" autocomplete=\"off\" data-value='${lastValues}' ${attributes} class=\"${inputClass}\" />`\n  } else {\n    // lastValues = JSON.stringify(params.value).replace(/\\'/g, '&quote;')\n    inputSource += `<select ${attributes} class=\"${inputClass}\">`\n\n    // if (!params.required) inputSource += '<option value=\\'\\'></option>'\n    var options = ''\n    if (\n      typeof params.source === 'object' &&\n      Object.prototype.toString.call(params.source) === '[object Array]'\n    ) {\n      Array.prototype.forEach.call(params.source, val => {\n        options += sourceOption(val, params)\n      })\n    } else {\n      options += sourceOption(params.source, params)\n    }\n\n    var defaultValueSelected = 'selected=selected'\n    if (options.indexOf('selected') > -1) {\n      defaultValueSelected = ''\n    }\n    if (params.required)\n      inputSource += `<option value=\"\" disabled ${defaultValueSelected}>Select ${params.desc.toLowerCase()}...</option>`\n    if (!params.required)\n      inputSource += `<option value=\"\" ${defaultValueSelected}></option>`\n    inputSource += options\n\n    inputSource += '</select>'\n  }\n  inputSource += `${hint(params)}</div>`\n\n  return inputSource\n}\n\nexport function createInputRich(attributes, inputClass, params) {\n  var buttons = [\n    {\n      icon: 'bold',\n      title: 'Bold (Ctrl+B)',\n      action: 'bold',\n      param: '',\n      hotkey: 'b',\n      key: 'b'\n    },\n    {\n      icon: 'ti-Italic',\n      title: 'Italic (Ctrl+I)',\n      action: 'italic',\n      param: '',\n      hotkey: 'i'\n    },\n    {\n      icon: 'ti-underline',\n      title: 'Underline (Ctrl+U)',\n      action: 'underline',\n      param: '',\n      hotkey: 'u'\n    },\n    {\n      icon: 'strikethrough',\n      title: 'Strikethrough',\n      action: 'strikethrough',\n      param: '',\n      key: 's'\n    },\n    {\n      icon: 'ti-paint-bucket',\n      title: 'Text color',\n      action: 'forecolor',\n      param: '',\n      popup: 'color'\n    },\n    {\n      icon: 'ti-paint-bucket bg',\n      title: 'Background color',\n      action: 'highlight',\n      param: '',\n      popup: 'color'\n    },\n    {icon: 'ti-align-left', title: 'Left', action: 'align', param: 'left'},\n    {\n      icon: 'ti-align-center',\n      title: 'Center',\n      action: 'align',\n      param: 'center'\n    },\n    {icon: 'ti-align-right', title: 'Right', action: 'align', param: 'right'},\n    {\n      icon: 'ti-align-justify',\n      title: 'Justify',\n      action: 'align',\n      param: 'justify'\n    },\n    {\n      icon: 'ti-text ti-text-sub',\n      title: 'Subscript',\n      action: 'subscript',\n      param: ''\n    },\n    {\n      icon: 'ti-text ti-text-sup',\n      title: 'Superscript',\n      action: 'superscript',\n      param: ''\n    },\n    {icon: 'ti-shift-right-alt', title: 'Indent', action: 'indent', param: ''},\n    {\n      icon: 'ti-shift-left-alt',\n      title: 'Outdent',\n      action: 'indent',\n      param: 'outdent'\n    },\n    {icon: 'ti-list', title: 'Unordered list', action: 'list', param: ''},\n    {\n      icon: 'ti-list-ol',\n      title: 'Ordered list',\n      action: 'list',\n      param: 'ordered'\n    },\n    {\n      icon: 'ti-eraser',\n      title: 'Remove format',\n      action: 'removeFormat',\n      param: ''\n    },\n    {\n      icon: 'ti-link',\n      title: 'Add link',\n      action: 'insertLink',\n      param: '',\n      popup: 'link'\n    },\n    {\n      icon: 'console',\n      title: 'Code style',\n      action: 'code',\n      param: '',\n      key: '{code}'\n    },\n    {\n      icon: 'ti-image',\n      title: 'media',\n      action: 'media',\n      param: '',\n      popup: 'image'\n    },\n    {\n      icon: 'ti-face-smile',\n      title: 'smiley',\n      action: 'smiley',\n      param: '',\n      popup: 'smiley'\n    }\n  ]\n\n  var selects = [\n    {\n      name: 'Formating',\n      id: 'format',\n      options: [\n        {name: 'Heading 1', regexp: '<h1>$1</h1>'},\n        {name: 'Heading 2', regexp: '<h2>$1</h2>'},\n        {name: 'Heading 3', regexp: '<h3>$1</h3>'},\n        {name: 'Heading 4', regexp: '<h4>$1</h4>'},\n        {name: 'Heading 5', regexp: '<h5>$1</h5>'},\n        {name: 'Heading 6', regexp: '<h6>$1</h6>'},\n        {name: 'Paragraph', regexp: '<p>$1</p>'}\n      ]\n    },\n    {\n      name: 'Font',\n      id: 'font',\n      options: [\n        {\n          name: 'Georgia',\n          regexp: '<span style=\"font-family:Georgia;\">$1</span>'\n        },\n        {name: 'serif', regexp: '<span style=\"font-family:serif;\">$1</span>'},\n        {\n          name: 'Helvetica',\n          regexp: '<span style=\"font-family:Helvetica;\">$1</span>'\n        },\n        {name: 'Times', regexp: '<span style=\"font-family:Times;\">$1</span>'},\n        {\n          name: 'Times New Roman',\n          regexp: '<span style=\"font-family:Times New Roman;\">$1</span>'\n        },\n        {name: 'Arial', regexp: '<span style=\"font-family:Arial;\">$1</span>'},\n        {\n          name: 'Arial Black',\n          regexp: '<span style=\"font-family:Arial Black;\">$1</span>'\n        },\n        {\n          name: 'Verdana',\n          regexp: '<span style=\"font-family:Verdana;\">$1</span>'\n        },\n        {\n          name: 'monospace',\n          regexp: '<span style=\"font-family:monospace;\">$1</span>'\n        },\n        {\n          name: 'fantasy',\n          regexp: '<span style=\"font-family:fantasy;\">$1</span>'\n        }\n      ]\n    },\n    {\n      name: 'Font size',\n      id: 'fontsize',\n      options: [\n        {name: '5', regexp: '<span style=\"font-size:5px;\">$1</span>'},\n        {name: '6', regexp: '<span style=\"font-size:6px;\">$1</span>'},\n        {name: '7', regexp: '<span style=\"font-size:7px;\">$1</span>'},\n        {name: '8', regexp: '<span style=\"font-size:8px;\">$1</span>'},\n        {name: '9', regexp: '<span style=\"font-size:9px;\">$1</span>'},\n        {name: '10', regexp: '<span style=\"font-size:10px;\">$1</span>'},\n        {name: '11', regexp: '<span style=\"font-size:11px;\">$1</span>'},\n        {name: '12', regexp: '<span style=\"font-size:12px;\">$1</span>'},\n        {name: '14', regexp: '<span style=\"font-size:14px;\">$1</span>'},\n        {name: '16', regexp: '<span style=\"font-size:16px;\">$1</span>'},\n        {name: '18', regexp: '<span style=\"font-size:18px;\">$1</span>'},\n        {name: '20', regexp: '<span style=\"font-size:20px;\">$1</span>'},\n        {name: '22', regexp: '<span style=\"font-size:22px;\">$1</span>'},\n        {name: '24', regexp: '<span style=\"font-size:24px;\">$1</span>'},\n        {name: '26', regexp: '<span style=\"font-size:26px;\">$1</span>'},\n        {name: '28', regexp: '<span style=\"font-size:28px;\">$1</span>'},\n        {name: '36', regexp: '<span style=\"font-size:36px;\">$1</span>'},\n        {name: '48', regexp: '<span style=\"font-size:48px;\">$1</span>'},\n        {name: '72', regexp: '<span style=\"font-size:72px;\">$1</span>'}\n      ]\n    }\n  ]\n\n  if (params.toolbar !== '*') params.toolbar = params.toolbar.split(',')\n  var inputRich = `<div class=\"parent-${params.type} parent-${params.key}\" data-parent=\"${params.key}\">\n                  <div class=\"wysiwyg-container rich\">\n                    <div class=\"wysiwyg-toolbar wysiwyg-toolbar-top\">`\n\n  selects.forEach(function(select) {\n    if (params.toolbar === '*' || params.toolbar.indexOf(select.id) > -1) {\n      inputRich += `<div class=\"dropdown\">\n                      <button id=\"${select.id}\" class=\"dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                        ${select.name}\n                        <span class=\"caret\"></span>\n                      </button>\n                    <ul class=\"dropdown-menu\" aria-labelledby=\"${select.id}\">`\n      select.options.forEach(function(option) {\n        inputRich += `<li>\n                        <a href='#' class='wysiwyg-dropdown-option' data-regexp='${option.regexp}'>\n                          ${option.name}\n                        </a>\n                      </li>`\n      })\n      inputRich += `</ul>\n                  </div>`\n    }\n  })\n\n  buttons.forEach(function(button) {\n    if (params.toolbar === '*' || params.toolbar.indexOf(button.action) > -1) {\n      var hotkey = button.hotkey != null ? `hotkey=\"${button.hotkey}\"` : ''\n      var popup = button.popup != null ? `data-popup=\"${button.popup}\"` : ''\n      if (button.popup === 'image') button.action = 'insertImage'\n      if (button.action === 'list') button.action = 'insertList'\n      inputRich += `<a  class=\"wysiwyg-toolbar-icon parent-${button.icon}\"\n                        data-action=\"${button.action}\"\n                        data-param=\"${button.param}\"\n                        title=\"${button.title}\"\n                        ${hotkey}\n                        ${popup}\n                        href=\"#\">\n                      <span class=\"fa theme-icon ${button.icon}\">${button.key\n        ? button.key\n        : ''}</span>\n                    </a>`\n    }\n  })\n\n  inputRich += `</div>\n                  <textarea class=\"${inputClass} form-rich\" ${attributes} rows=\"4\">${params.value}</textarea>\n                </div>\n                ${hint(params)}\n              </div>`\n  return inputRich\n}\n\nexport function createInputFile(attributes, inputClass, params) {\n  return `<div class=\"parent-${params.type} parent-${params.key}\" data-parent=\"${params.key}\">\n          <div class=\"input-group file-upload\" data-keep-name=\"${(params.keepName === undefined) ? false : params.keepName}\">\n            <div class=\"input-group-addon my-auto image\">\n              <span class=\"fa fa-file\" aria-hidden=\"true\"></span>\n            </div>\n            <input type=\"text\" ${attributes} class=\"${inputClass} file-input\" />\n\n            <div class=\"input-group-btn\">\n              <span class=\"border\">\n                <div class=\"upload-wrapper\">\n                  <input class=\"form-control\" ${attributes} name=\"${params.key}\" type=\"file\" title=\"upload file\"/>\n                  <span class=\"percent\">\n                    <span class=\"fa fa-upload\" aria-hidden=\"true\"></span>\n                  </span>\n                </div>\n              </span>\n              <span class=\"image-icon\"></span>\n            </div>\n\n          </div>\n          <div class=\"input-error\"></div>\n          ${hint(params)}\n        </div>`\n}\n\nexport function createInputTextarea(attributes, inputClass, params) {\n  return `<div class=\"parent-${params.type} parent-${params.key}\" data-parent=\"${params.key}\">\n          <textarea class=\"${inputClass}\" ${attributes} rows=\"4\">${params.value}</textarea>\n            ${hint(params)}\n          </div>`\n}\n\nexport function createInputLink(attributes, inputClass, params) {\n  return `<div class=\"parent-${params.type} parent-${params.key}\" data-parent=\"${params.key}\">\n          <div class=\"input-group\">\n            <div class=\"input-group-addon my-auto link\">\n              <span class=\"fa fa-link\" aria-hidden=\"true\"></span>\n            </div>\n            <input type=\"text\" ${attributes} class=\"${inputClass}\" />\n          </div>\n          ${hint(params)}\n        </div>`\n}\n\nexport function createInputImage(attributes, inputClass, params) {\n  return `<div class=\"parent-${params.type} parent-${params.key}\" data-parent=\"${params.key}\">\n          <div class=\"input-group img-upload\" data-keep-name=\"${(params.keepName === undefined) ? false : params.keepName}\">\n            <input type=\"text\" ${attributes} class=\"${inputClass} file-input\" />\n            <div class=\"input-group-append\">\n              <span class=\"border\">\n                <div class=\"upload-wrapper\">\n                  <input class=\"form-control\" ${attributes} name=\"${params.key}\" type=\"file\" title=\"upload an image\"/>\n                  <span class=\"percent\">\n                    <i class=\"fa fa-upload\"></i>\n                  </span>\n                </div>\n              </span>\n              <span class=\"image-icon\"></span>\n            </div>\n          </div>\n          <div class=\"input-error\">\n        </div>\n        ${hint(params)}\n      </div>`\n}\n\nexport function createInputText(attributes, inputClass, params) {\n  if (params.editable)\n    return `<div class=\"parent-${params.type} parent-${params.key}\" data-parent=\"${params.key}\">\n              <div class=\"input-group\">\n                <div class=\"input-group-addon my-auto\">\n                  <span class=\"fa fa-font\" aria-hidden=\"true\"></span>\n                </div>\n                <input type=\"text\" ${attributes} class=\"${inputClass}\" />\n              </div>\n              ${hint(params)}\n            </div>`\n  else\n    return `<div class=\"parent-${params.type} parent-${params.key}\" data-parent=\"${params.key}\">\n              <div>\n                <input type=\"hidden\" ${attributes} class=\"${inputClass}\" />\n              </div>\n            </div>`\n}\n\n/**\n * Print form input based on input data type {Textarea | text | meta | link | image | ...}\n * && add appropriate attributs / data-attributs\n * @return {String|html} input / input group ...\n */\nexport function printInput(params, root) {\n  params = abeExtend.hooks.instance.trigger('beforeEditorInput', params)\n  let userWorkflow = root.user != null ? root.user.role.workflow : ''\n  let inputClass = 'form-control form-abe'\n  let res\n  if (params.editable) {\n    res = `<div class=\"form-group\" data-precontrib-templates=\"${params.precontribTemplate}\">`\n    res += getLabel(params)\n  } else {\n    res = `<div data-precontrib-templates=\"${params.precontribTemplate}\">`\n  }\n\n  if (params.value === null && params.defaultValue != null)\n    params.value = params.defaultValue\n  params.placeholder = params.placeholder || ''\n  params.value = params.value || ''\n\n  if (typeof params.value === 'string')\n    params.value = params.value.replace(/\\\"/g, '&quot;')\n  if (!(params.toolbar != null)) params.toolbar = '*'\n\n  params.disabled = ''\n  if (\n    params.tab !== 'slug' &&\n    !User.utils.isUserAllowedOnRoute(\n      userWorkflow,\n      `/abe/operations/edit/${params.status}`\n    )\n  ) {\n    params.disabled = 'disabled=\"disabled\"'\n  }\n  let attributes = getAttributes(params)\n\n  if (params.source != null) {\n    params.multiple =\n      (params['max-length'] == null || params['max-length'] > 1) &&\n      params.source.length > 0\n        ? 'multiple'\n        : ''\n    params.disabled = params.source.length <= 0 ? 'disabled' : ''\n    res += createInputSource(getAttributes(params), inputClass, params)\n  } else if (params.type.indexOf('rich') >= 0)\n    res += createInputRich(attributes, inputClass, params)\n  else if (params.type.indexOf('file') >= 0)\n    res += createInputFile(attributes, inputClass, params)\n  else if (params.type.indexOf('textarea') >= 0)\n    res += createInputTextarea(attributes, inputClass, params)\n  else if (params.type.indexOf('link') >= 0)\n    res += createInputLink(attributes, inputClass, params)\n  else if (params.type.indexOf('image') >= 0)\n    res += createInputImage(attributes, inputClass, params)\n  else res += createInputText(attributes, inputClass, params)\n\n  res += '</div>'\n  res = abeExtend.hooks.instance.trigger('afterEditorInput', res, params)\n\n  return res\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8fdcaa393ea2b14abcbc6addfa08e5bf2e52de19","contentHash":"bbf65fea66191d232e76b970a808cb5cd0e096675e6173a24800efe7c3d27ff6"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/sourceAutocomplete.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/sourceAutocomplete.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":40}},"3":{"start":{"line":10,"column":18},"end":{"line":10,"column":65}},"4":{"start":{"line":13,"column":13},"end":{"line":13,"column":53}},"5":{"start":{"line":14,"column":2},"end":{"line":14,"column":264}}},"fnMap":{"0":{"name":"sourceAutocomplete","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":27}},"loc":{"start":{"line":12,"column":41},"end":{"line":15,"column":1}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"sources":["sourceAutocomplete.js"],"names":["sourceAutocomplete","val","params","attr","hiddenVal","key","selected"],"mappings":";;;;;;;;;AAAA;;AAEe,SAASA,kBAAT,CAA4BC,GAA5B,EAAiCC,MAAjC,EAAyC;AACtD,MAAIC,IAAI,GAAG,4BAAWF,GAAX,EAAgBC,MAAhB,CAAX;AAEA,6DAAkDC,IAAI,CAACC,SAAvD,+BAAqFF,MAAM,CAACG,GAA5F,eAAoGF,IAAI,CAACG,QAAzG,oBACIH,IAAI,CAACF,GADT;AAID","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["import sourceAttr from './sourceAttr'\n\nexport default function sourceAutocomplete(val, params) {\n  var attr = sourceAttr(val, params)\n\n  return `<div class=\"autocomplete-result\" value='${attr.hiddenVal}' data-parent-id='${params.key}' ${attr.selected}>\n    ${attr.val}\n    <span class=\"fa fa-remove\" data-autocomplete-remove=\"true\"></span>\n  </div>`\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"20e59045c94a5b330a939eb240c01815924351f7","contentHash":"ce95b0403ff70da5b40acd4f6d43585f802ee87b40eed9d0a1901d1cfdab1953"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/sourceOption.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/sourceOption.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":34}},"3":{"start":{"line":10,"column":18},"end":{"line":10,"column":65}},"4":{"start":{"line":13,"column":13},"end":{"line":13,"column":53}},"5":{"start":{"line":14,"column":2},"end":{"line":14,"column":154}}},"fnMap":{"0":{"name":"sourceOption","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":21}},"loc":{"start":{"line":12,"column":35},"end":{"line":15,"column":1}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":9,"5":9},"f":{"0":9},"b":{},"inputSourceMap":{"version":3,"sources":["sourceOption.js"],"names":["sourceOption","val","params","attr","hiddenVal","selected"],"mappings":";;;;;;;;;AAAA;;AAEe,SAASA,YAAT,CAAsBC,GAAtB,EAA2BC,MAA3B,EAAmC;AAChD,MAAIC,IAAI,GAAG,4BAAWF,GAAX,EAAgBC,MAAhB,CAAX;AACA,kCAAyBC,IAAI,CAACC,SAA9B,2BAAwDD,IAAI,CAACC,SAA7D,eAA2ED,IAAI,CAACE,QAAhF,cAA4FF,IAAI,CAACF,GAAjG;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["import sourceAttr from './sourceAttr'\n\nexport default function sourceOption(val, params) {\n  var attr = sourceAttr(val, params)\n  return `<option value='${attr.hiddenVal}' data-value='${attr.hiddenVal}' ${attr.selected}>${attr.val}</option>`\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"759ee94b20a060dc387561708885ba8ae3c35dfe","contentHash":"b76ba5cc159780273c564b9a896d4f94c3221910a2e600d732ad1eb799819a97"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/printConfig.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/printConfig.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":33}},"3":{"start":{"line":10,"column":28},"end":{"line":10,"column":85}},"4":{"start":{"line":13,"column":12},"end":{"line":13,"column":54}},"5":{"start":{"line":14,"column":2},"end":{"line":14,"column":13}}},"fnMap":{"0":{"name":"printConfig","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":20}},"loc":{"start":{"line":12,"column":26},"end":{"line":15,"column":1}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":2},"f":{"0":2},"b":{},"inputSourceMap":{"version":3,"sources":["printConfig.js"],"names":["printConfig","obj","res"],"mappings":";;;;;;;;;AAAA;;AAEe,SAASA,WAAT,CAAqBC,GAArB,EAA0B;AACvC,MAAIC,GAAG,GAAG,sCAAqBD,GAArB,CAAV;AAEA,SAAOC,GAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["import recursivePrintConfig from './recursivePrintConfig'\n\nexport default function printConfig(obj) {\n  var res = recursivePrintConfig(obj)\n\n  return res\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"faef8725a87025a25b476a92ce4e10d5ff469c0b","contentHash":"dd431f68e7e1d3c57797b4b3354a7eeed2c1dc8e46f647db024db1c52d77462e"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/recursivePrintConfig.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/recursivePrintConfig.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":42}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":79}},"4":{"start":{"line":13,"column":12},"end":{"line":13,"column":82}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":14}},"6":{"start":{"line":16,"column":2},"end":{"line":29,"column":3}},"7":{"start":{"line":17,"column":4},"end":{"line":26,"column":7}},"8":{"start":{"line":18,"column":19},"end":{"line":18,"column":22}},"9":{"start":{"line":20,"column":6},"end":{"line":22,"column":7}},"10":{"start":{"line":21,"column":8},"end":{"line":21,"column":22}},"11":{"start":{"line":24,"column":6},"end":{"line":24,"column":18}},"12":{"start":{"line":25,"column":6},"end":{"line":25,"column":50}},"13":{"start":{"line":28,"column":4},"end":{"line":28,"column":368}},"14":{"start":{"line":31,"column":2},"end":{"line":31,"column":13}}},"fnMap":{"0":{"name":"recursivePrintConfig","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":29}},"loc":{"start":{"line":12,"column":35},"end":{"line":32,"column":1}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":51},"end":{"line":17,"column":52}},"loc":{"start":{"line":17,"column":64},"end":{"line":26,"column":5}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":82}},"type":"cond-expr","locations":[{"start":{"line":13,"column":65},"end":{"line":13,"column":77}},{"start":{"line":13,"column":80},"end":{"line":13,"column":82}}],"line":13},"1":{"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":62}},"type":"binary-expr","locations":[{"start":{"line":13,"column":12},"end":{"line":13,"column":32}},{"start":{"line":13,"column":36},"end":{"line":13,"column":62}}],"line":13},"2":{"loc":{"start":{"line":16,"column":2},"end":{"line":29,"column":3}},"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":29,"column":3}},{"start":{"line":16,"column":2},"end":{"line":29,"column":3}}],"line":16},"3":{"loc":{"start":{"line":16,"column":6},"end":{"line":16,"column":109}},"type":"binary-expr","locations":[{"start":{"line":16,"column":6},"end":{"line":16,"column":48}},{"start":{"line":16,"column":52},"end":{"line":16,"column":109}}],"line":16},"4":{"loc":{"start":{"line":20,"column":6},"end":{"line":22,"column":7}},"type":"if","locations":[{"start":{"line":20,"column":6},"end":{"line":22,"column":7}},{"start":{"line":20,"column":6},"end":{"line":22,"column":7}}],"line":20}},"s":{"0":1,"1":1,"2":1,"3":1,"4":6,"5":6,"6":6,"7":2,"8":4,"9":4,"10":1,"11":4,"12":4,"13":4,"14":6},"f":{"0":6,"1":4},"b":{"0":[4,2],"1":[6,4],"2":[2,4],"3":[6,2],"4":[1,3]},"inputSourceMap":{"version":3,"sources":["recursivePrintConfig.js"],"names":["recursivePrintConfig","obj","key","res","Object","prototype","toString","call","Array","forEach","keys","k","strKey"],"mappings":";;;;;;;;;;;AAAe,SAASA,oBAAT,CAA8BC,GAA9B,EAA6C;AAAA,MAAVC,GAAU,uEAAJ,EAAI;AAC1D,MAAIC,GAAG,GAAG,EAAV;;AAEA,MACE,yBAAOF,GAAP,MAAe,QAAf,IACAG,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BN,GAA/B,MAAwC,iBAF1C,EAGE;AACAO,IAAAA,KAAK,CAACH,SAAN,CAAgBI,OAAhB,CAAwBF,IAAxB,CAA6BH,MAAM,CAACM,IAAP,CAAYT,GAAZ,CAA7B,EAA+C,UAAAU,CAAC,EAAI;AAClD,UAAIC,MAAM,GAAGV,GAAb;;AACA,UAAIU,MAAM,KAAK,EAAf,EAAmB;AACjBA,QAAAA,MAAM,IAAI,GAAV;AACD;;AACDA,MAAAA,MAAM,IAAID,CAAV;AACAR,MAAAA,GAAG,IAAIH,oBAAoB,CAACC,GAAG,CAACU,CAAD,CAAJ,EAASC,MAAT,CAA3B;AACD,KAPD;AAQD,GAZD,MAYO;AACLT,IAAAA,GAAG,8FAC4CD,GAD5C,gBACoDA,GADpD,gHAG+CA,GAH/C,gCAGsEA,GAHtE,8BAG2FD,GAH3F,wBAG0GA,GAH1G,kCAAH;AAMD;;AAED,SAAOE,GAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["export default function recursivePrintConfig(obj, key = '') {\n  var res = ''\n\n  if (\n    typeof obj === 'object' &&\n    Object.prototype.toString.call(obj) === '[object Object]'\n  ) {\n    Array.prototype.forEach.call(Object.keys(obj), k => {\n      var strKey = key\n      if (strKey !== '') {\n        strKey += '.'\n      }\n      strKey += k\n      res += recursivePrintConfig(obj[k], strKey)\n    })\n  } else {\n    res += `<div class=\"form-group\">\n      <label class=\"col-sm-4 control-label\" for=\"${key}\">${key}</label>\n      <div class=\"col-sm-8\">\n        <input type=\"text\" class=\"form-control\" id=\"${key}\" data-json-key=\"${key}\" placeholder=\"${obj}\" value=\"${obj}\">\n      </div>\n    </div>`\n  }\n\n  return res\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a75f4a4b41fa9be42700292f8304d5f3c8873d97","contentHash":"1c3385be4486106ee76da02b25e19de0ba3b2937e3f31e73bc8b3d3c7484efcb"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/raw.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/raw.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":9,"column":2},"end":{"line":9,"column":68}}},"fnMap":{"0":{"name":"raw","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":12}},"loc":{"start":{"line":8,"column":18},"end":{"line":10,"column":1}},"line":8}},"branchMap":{},"s":{"0":1,"1":1,"2":2},"f":{"0":2},"b":{},"inputSourceMap":{"version":3,"sources":["raw.js"],"names":["raw","obj","fn","replace"],"mappings":";;;;;;;AAAe,SAASA,GAAT,CAAaC,GAAb,EAAkB;AAC/B,SAAOA,GAAG,CAACC,EAAJ,CAAO,IAAP,EAAaC,OAAb,CAAqB,OAArB,EAA8B,IAA9B,EAAoCA,OAApC,CAA4C,OAA5C,EAAqD,IAArD,CAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/editor/handlebars/","sourcesContent":["export default function raw(obj) {\n  return obj.fn(this).replace(/\\[\\[/g, '{{').replace(/\\]\\]/g, '}}')\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"12185ab6ee00ba2726653e715fb8175ed930e5f1","contentHash":"4ae734a4c869f266e5c78d9413b4d93c43de253b2e84be9dd0acd5d99d4bedc1"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/manager/Manager.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/manager/Manager.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":23},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":20},"end":{"line":16,"column":89}},"7":{"start":{"line":18,"column":15},"end":{"line":18,"column":58}},"8":{"start":{"line":20,"column":14},"end":{"line":20,"column":55}},"9":{"start":{"line":22,"column":12},"end":{"line":22,"column":51}},"10":{"start":{"line":24,"column":13},"end":{"line":24,"column":53}},"11":{"start":{"line":26,"column":15},"end":{"line":26,"column":57}},"12":{"start":{"line":28,"column":18},"end":{"line":28,"column":64}},"13":{"start":{"line":30,"column":14},"end":{"line":30,"column":56}},"14":{"start":{"line":32,"column":16},"end":{"line":32,"column":60}},"15":{"start":{"line":34,"column":8},"end":{"line":34,"column":25}},"16":{"start":{"line":37,"column":16},"end":{"line":37,"column":24}},"17":{"start":{"line":38,"column":24},"end":{"line":38,"column":32}},"18":{"start":{"line":40,"column":27},"end":{"line":842,"column":3}},"19":{"start":{"line":42,"column":4},"end":{"line":42,"column":52}},"20":{"start":{"line":43,"column":4},"end":{"line":43,"column":79}},"21":{"start":{"line":43,"column":39},"end":{"line":43,"column":79}},"22":{"start":{"line":46,"column":2},"end":{"line":840,"column":6}},"23":{"start":{"line":49,"column":18},"end":{"line":126,"column":9}},"24":{"start":{"line":50,"column":8},"end":{"line":125,"column":26}},"25":{"start":{"line":51,"column":10},"end":{"line":124,"column":11}},"26":{"start":{"line":52,"column":12},"end":{"line":123,"column":13}},"27":{"start":{"line":54,"column":16},"end":{"line":54,"column":44}},"28":{"start":{"line":55,"column":16},"end":{"line":55,"column":33}},"29":{"start":{"line":58,"column":16},"end":{"line":77,"column":17}},"30":{"start":{"line":59,"column":18},"end":{"line":59,"column":108}},"31":{"start":{"line":60,"column":18},"end":{"line":60,"column":92}},"32":{"start":{"line":61,"column":23},"end":{"line":77,"column":17}},"33":{"start":{"line":62,"column":18},"end":{"line":62,"column":152}},"34":{"start":{"line":63,"column":18},"end":{"line":63,"column":150}},"35":{"start":{"line":66,"column":18},"end":{"line":70,"column":19}},"36":{"start":{"line":67,"column":20},"end":{"line":67,"column":102}},"37":{"start":{"line":69,"column":20},"end":{"line":69,"column":91}},"38":{"start":{"line":72,"column":18},"end":{"line":76,"column":19}},"39":{"start":{"line":73,"column":20},"end":{"line":73,"column":96}},"40":{"start":{"line":75,"column":20},"end":{"line":75,"column":89}},"41":{"start":{"line":79,"column":16},"end":{"line":79,"column":53}},"42":{"start":{"line":81,"column":16},"end":{"line":83,"column":17}},"43":{"start":{"line":82,"column":18},"end":{"line":82,"column":102}},"44":{"start":{"line":85,"column":16},"end":{"line":85,"column":94}},"45":{"start":{"line":87,"column":16},"end":{"line":89,"column":17}},"46":{"start":{"line":88,"column":18},"end":{"line":88,"column":108}},"47":{"start":{"line":92,"column":16},"end":{"line":100,"column":17}},"48":{"start":{"line":93,"column":18},"end":{"line":93,"column":98}},"49":{"start":{"line":94,"column":23},"end":{"line":100,"column":17}},"50":{"start":{"line":95,"column":18},"end":{"line":95,"column":90}},"51":{"start":{"line":96,"column":23},"end":{"line":100,"column":17}},"52":{"start":{"line":97,"column":18},"end":{"line":97,"column":91}},"53":{"start":{"line":99,"column":18},"end":{"line":99,"column":79}},"54":{"start":{"line":102,"column":16},"end":{"line":102,"column":75}},"55":{"start":{"line":103,"column":16},"end":{"line":103,"column":73}},"56":{"start":{"line":104,"column":16},"end":{"line":104,"column":69}},"57":{"start":{"line":105,"column":16},"end":{"line":105,"column":71}},"58":{"start":{"line":106,"column":16},"end":{"line":106,"column":65}},"59":{"start":{"line":107,"column":16},"end":{"line":107,"column":95}},"60":{"start":{"line":108,"column":16},"end":{"line":108,"column":98}},"61":{"start":{"line":109,"column":16},"end":{"line":109,"column":98}},"62":{"start":{"line":110,"column":16},"end":{"line":110,"column":83}},"63":{"start":{"line":111,"column":16},"end":{"line":111,"column":38}},"64":{"start":{"line":112,"column":16},"end":{"line":112,"column":61}},"65":{"start":{"line":114,"column":16},"end":{"line":114,"column":40}},"66":{"start":{"line":116,"column":16},"end":{"line":116,"column":51}},"67":{"start":{"line":117,"column":16},"end":{"line":117,"column":35}},"68":{"start":{"line":118,"column":16},"end":{"line":118,"column":48}},"69":{"start":{"line":122,"column":16},"end":{"line":122,"column":39}},"70":{"start":{"line":129,"column":8},"end":{"line":129,"column":44}},"71":{"start":{"line":132,"column":6},"end":{"line":132,"column":18}},"72":{"start":{"line":137,"column":18},"end":{"line":137,"column":22}},"73":{"start":{"line":139,"column":6},"end":{"line":139,"column":71}},"74":{"start":{"line":140,"column":6},"end":{"line":140,"column":161}},"75":{"start":{"line":141,"column":6},"end":{"line":141,"column":65}},"76":{"start":{"line":143,"column":6},"end":{"line":143,"column":28}},"77":{"start":{"line":145,"column":18},"end":{"line":145,"column":54}},"78":{"start":{"line":146,"column":6},"end":{"line":146,"column":48}},"79":{"start":{"line":148,"column":6},"end":{"line":160,"column":9}},"80":{"start":{"line":153,"column":8},"end":{"line":153,"column":57}},"81":{"start":{"line":155,"column":8},"end":{"line":159,"column":9}},"82":{"start":{"line":156,"column":10},"end":{"line":156,"column":218}},"83":{"start":{"line":158,"column":10},"end":{"line":158,"column":29}},"84":{"start":{"line":161,"column":6},"end":{"line":168,"column":9}},"85":{"start":{"line":162,"column":8},"end":{"line":167,"column":26}},"86":{"start":{"line":163,"column":10},"end":{"line":166,"column":13}},"87":{"start":{"line":164,"column":12},"end":{"line":164,"column":83}},"88":{"start":{"line":165,"column":12},"end":{"line":165,"column":28}},"89":{"start":{"line":169,"column":6},"end":{"line":176,"column":9}},"90":{"start":{"line":170,"column":8},"end":{"line":175,"column":26}},"91":{"start":{"line":171,"column":10},"end":{"line":174,"column":13}},"92":{"start":{"line":172,"column":12},"end":{"line":172,"column":84}},"93":{"start":{"line":173,"column":12},"end":{"line":173,"column":28}},"94":{"start":{"line":178,"column":6},"end":{"line":178,"column":35}},"95":{"start":{"line":183,"column":6},"end":{"line":183,"column":68}},"96":{"start":{"line":184,"column":6},"end":{"line":195,"column":20}},"97":{"start":{"line":185,"column":8},"end":{"line":185,"column":45}},"98":{"start":{"line":187,"column":8},"end":{"line":191,"column":9}},"99":{"start":{"line":188,"column":10},"end":{"line":188,"column":41}},"100":{"start":{"line":190,"column":10},"end":{"line":190,"column":30}},"101":{"start":{"line":193,"column":8},"end":{"line":193,"column":31}},"102":{"start":{"line":194,"column":8},"end":{"line":194,"column":59}},"103":{"start":{"line":200,"column":19},"end":{"line":200,"column":23}},"104":{"start":{"line":202,"column":6},"end":{"line":202,"column":68}},"105":{"start":{"line":203,"column":6},"end":{"line":203,"column":69}},"106":{"start":{"line":204,"column":6},"end":{"line":204,"column":69}},"107":{"start":{"line":205,"column":6},"end":{"line":205,"column":67}},"108":{"start":{"line":206,"column":6},"end":{"line":206,"column":67}},"109":{"start":{"line":208,"column":6},"end":{"line":276,"column":7}},"110":{"start":{"line":209,"column":8},"end":{"line":209,"column":85}},"111":{"start":{"line":211,"column":8},"end":{"line":273,"column":11}},"112":{"start":{"line":212,"column":10},"end":{"line":230,"column":13}},"113":{"start":{"line":213,"column":12},"end":{"line":229,"column":13}},"114":{"start":{"line":214,"column":14},"end":{"line":214,"column":43}},"115":{"start":{"line":216,"column":14},"end":{"line":216,"column":44}},"116":{"start":{"line":218,"column":14},"end":{"line":218,"column":85}},"117":{"start":{"line":220,"column":14},"end":{"line":220,"column":41}},"118":{"start":{"line":222,"column":14},"end":{"line":222,"column":51}},"119":{"start":{"line":224,"column":14},"end":{"line":226,"column":15}},"120":{"start":{"line":225,"column":16},"end":{"line":225,"column":46}},"121":{"start":{"line":228,"column":14},"end":{"line":228,"column":52}},"122":{"start":{"line":231,"column":10},"end":{"line":251,"column":13}},"123":{"start":{"line":232,"column":12},"end":{"line":250,"column":13}},"124":{"start":{"line":233,"column":14},"end":{"line":233,"column":43}},"125":{"start":{"line":235,"column":14},"end":{"line":237,"column":15}},"126":{"start":{"line":236,"column":16},"end":{"line":236,"column":46}},"127":{"start":{"line":239,"column":14},"end":{"line":239,"column":89}},"128":{"start":{"line":241,"column":14},"end":{"line":241,"column":41}},"129":{"start":{"line":243,"column":14},"end":{"line":243,"column":51}},"130":{"start":{"line":245,"column":14},"end":{"line":247,"column":15}},"131":{"start":{"line":246,"column":16},"end":{"line":246,"column":46}},"132":{"start":{"line":249,"column":14},"end":{"line":249,"column":52}},"133":{"start":{"line":252,"column":10},"end":{"line":272,"column":13}},"134":{"start":{"line":253,"column":12},"end":{"line":271,"column":13}},"135":{"start":{"line":254,"column":14},"end":{"line":254,"column":43}},"136":{"start":{"line":256,"column":14},"end":{"line":258,"column":15}},"137":{"start":{"line":257,"column":16},"end":{"line":257,"column":46}},"138":{"start":{"line":260,"column":14},"end":{"line":260,"column":85}},"139":{"start":{"line":262,"column":14},"end":{"line":262,"column":41}},"140":{"start":{"line":264,"column":14},"end":{"line":264,"column":51}},"141":{"start":{"line":266,"column":14},"end":{"line":268,"column":15}},"142":{"start":{"line":267,"column":16},"end":{"line":267,"column":46}},"143":{"start":{"line":270,"column":14},"end":{"line":270,"column":52}},"144":{"start":{"line":275,"column":8},"end":{"line":275,"column":79}},"145":{"start":{"line":279,"column":6},"end":{"line":319,"column":7}},"146":{"start":{"line":280,"column":8},"end":{"line":280,"column":84}},"147":{"start":{"line":282,"column":8},"end":{"line":316,"column":11}},"148":{"start":{"line":283,"column":10},"end":{"line":293,"column":13}},"149":{"start":{"line":284,"column":12},"end":{"line":284,"column":39}},"150":{"start":{"line":286,"column":12},"end":{"line":286,"column":49}},"151":{"start":{"line":288,"column":12},"end":{"line":290,"column":13}},"152":{"start":{"line":289,"column":14},"end":{"line":289,"column":44}},"153":{"start":{"line":292,"column":12},"end":{"line":292,"column":50}},"154":{"start":{"line":294,"column":10},"end":{"line":304,"column":13}},"155":{"start":{"line":295,"column":12},"end":{"line":295,"column":39}},"156":{"start":{"line":297,"column":12},"end":{"line":297,"column":49}},"157":{"start":{"line":299,"column":12},"end":{"line":301,"column":13}},"158":{"start":{"line":300,"column":14},"end":{"line":300,"column":44}},"159":{"start":{"line":303,"column":12},"end":{"line":303,"column":50}},"160":{"start":{"line":305,"column":10},"end":{"line":315,"column":13}},"161":{"start":{"line":306,"column":12},"end":{"line":306,"column":39}},"162":{"start":{"line":308,"column":12},"end":{"line":308,"column":49}},"163":{"start":{"line":310,"column":12},"end":{"line":312,"column":13}},"164":{"start":{"line":311,"column":14},"end":{"line":311,"column":44}},"165":{"start":{"line":314,"column":12},"end":{"line":314,"column":50}},"166":{"start":{"line":318,"column":8},"end":{"line":318,"column":78}},"167":{"start":{"line":322,"column":6},"end":{"line":344,"column":7}},"168":{"start":{"line":323,"column":8},"end":{"line":323,"column":85}},"169":{"start":{"line":325,"column":8},"end":{"line":341,"column":11}},"170":{"start":{"line":326,"column":10},"end":{"line":330,"column":13}},"171":{"start":{"line":327,"column":12},"end":{"line":327,"column":49}},"172":{"start":{"line":329,"column":12},"end":{"line":329,"column":51}},"173":{"start":{"line":331,"column":10},"end":{"line":335,"column":13}},"174":{"start":{"line":332,"column":12},"end":{"line":332,"column":49}},"175":{"start":{"line":334,"column":12},"end":{"line":334,"column":51}},"176":{"start":{"line":336,"column":10},"end":{"line":340,"column":13}},"177":{"start":{"line":337,"column":12},"end":{"line":337,"column":49}},"178":{"start":{"line":339,"column":12},"end":{"line":339,"column":51}},"179":{"start":{"line":343,"column":8},"end":{"line":343,"column":79}},"180":{"start":{"line":347,"column":6},"end":{"line":381,"column":7}},"181":{"start":{"line":348,"column":8},"end":{"line":348,"column":85}},"182":{"start":{"line":350,"column":8},"end":{"line":378,"column":11}},"183":{"start":{"line":351,"column":10},"end":{"line":359,"column":13}},"184":{"start":{"line":352,"column":12},"end":{"line":352,"column":39}},"185":{"start":{"line":354,"column":12},"end":{"line":356,"column":13}},"186":{"start":{"line":355,"column":14},"end":{"line":355,"column":44}},"187":{"start":{"line":358,"column":12},"end":{"line":358,"column":51}},"188":{"start":{"line":360,"column":10},"end":{"line":368,"column":13}},"189":{"start":{"line":361,"column":12},"end":{"line":361,"column":39}},"190":{"start":{"line":363,"column":12},"end":{"line":365,"column":13}},"191":{"start":{"line":364,"column":14},"end":{"line":364,"column":44}},"192":{"start":{"line":367,"column":12},"end":{"line":367,"column":51}},"193":{"start":{"line":369,"column":10},"end":{"line":377,"column":13}},"194":{"start":{"line":370,"column":12},"end":{"line":370,"column":38}},"195":{"start":{"line":372,"column":12},"end":{"line":374,"column":13}},"196":{"start":{"line":373,"column":14},"end":{"line":373,"column":44}},"197":{"start":{"line":376,"column":12},"end":{"line":376,"column":51}},"198":{"start":{"line":380,"column":8},"end":{"line":380,"column":79}},"199":{"start":{"line":384,"column":6},"end":{"line":418,"column":7}},"200":{"start":{"line":385,"column":8},"end":{"line":385,"column":83}},"201":{"start":{"line":387,"column":8},"end":{"line":415,"column":11}},"202":{"start":{"line":388,"column":10},"end":{"line":396,"column":13}},"203":{"start":{"line":389,"column":12},"end":{"line":389,"column":57}},"204":{"start":{"line":391,"column":12},"end":{"line":393,"column":13}},"205":{"start":{"line":392,"column":14},"end":{"line":392,"column":44}},"206":{"start":{"line":395,"column":12},"end":{"line":395,"column":49}},"207":{"start":{"line":397,"column":10},"end":{"line":405,"column":13}},"208":{"start":{"line":398,"column":12},"end":{"line":398,"column":57}},"209":{"start":{"line":400,"column":12},"end":{"line":402,"column":13}},"210":{"start":{"line":401,"column":14},"end":{"line":401,"column":44}},"211":{"start":{"line":404,"column":12},"end":{"line":404,"column":49}},"212":{"start":{"line":406,"column":10},"end":{"line":414,"column":13}},"213":{"start":{"line":407,"column":12},"end":{"line":407,"column":57}},"214":{"start":{"line":409,"column":12},"end":{"line":411,"column":13}},"215":{"start":{"line":410,"column":14},"end":{"line":410,"column":44}},"216":{"start":{"line":413,"column":12},"end":{"line":413,"column":49}},"217":{"start":{"line":417,"column":8},"end":{"line":417,"column":77}},"218":{"start":{"line":421,"column":6},"end":{"line":443,"column":7}},"219":{"start":{"line":422,"column":8},"end":{"line":422,"column":83}},"220":{"start":{"line":424,"column":8},"end":{"line":440,"column":11}},"221":{"start":{"line":425,"column":10},"end":{"line":429,"column":13}},"222":{"start":{"line":426,"column":12},"end":{"line":426,"column":57}},"223":{"start":{"line":428,"column":12},"end":{"line":428,"column":49}},"224":{"start":{"line":430,"column":10},"end":{"line":434,"column":13}},"225":{"start":{"line":431,"column":12},"end":{"line":431,"column":57}},"226":{"start":{"line":433,"column":12},"end":{"line":433,"column":49}},"227":{"start":{"line":435,"column":10},"end":{"line":439,"column":13}},"228":{"start":{"line":436,"column":12},"end":{"line":436,"column":57}},"229":{"start":{"line":438,"column":12},"end":{"line":438,"column":49}},"230":{"start":{"line":442,"column":8},"end":{"line":442,"column":77}},"231":{"start":{"line":448,"column":19},"end":{"line":448,"column":23}},"232":{"start":{"line":450,"column":6},"end":{"line":450,"column":27}},"233":{"start":{"line":451,"column":14},"end":{"line":495,"column":8}},"234":{"start":{"line":452,"column":8},"end":{"line":494,"column":11}},"235":{"start":{"line":453,"column":10},"end":{"line":489,"column":13}},"236":{"start":{"line":454,"column":12},"end":{"line":484,"column":15}},"237":{"start":{"line":455,"column":25},"end":{"line":475,"column":17}},"238":{"start":{"line":456,"column":16},"end":{"line":474,"column":29}},"239":{"start":{"line":457,"column":18},"end":{"line":473,"column":19}},"240":{"start":{"line":458,"column":20},"end":{"line":472,"column":21}},"241":{"start":{"line":460,"column":24},"end":{"line":460,"column":54}},"242":{"start":{"line":461,"column":24},"end":{"line":461,"column":103}},"243":{"start":{"line":462,"column":24},"end":{"line":462,"column":119}},"244":{"start":{"line":463,"column":24},"end":{"line":463,"column":43}},"245":{"start":{"line":464,"column":24},"end":{"line":464,"column":51}},"246":{"start":{"line":467,"column":24},"end":{"line":467,"column":34}},"247":{"start":{"line":471,"column":24},"end":{"line":471,"column":48}},"248":{"start":{"line":477,"column":14},"end":{"line":479,"column":16}},"249":{"start":{"line":478,"column":16},"end":{"line":478,"column":51}},"250":{"start":{"line":481,"column":14},"end":{"line":481,"column":73}},"251":{"start":{"line":483,"column":14},"end":{"line":483,"column":72}},"252":{"start":{"line":486,"column":12},"end":{"line":486,"column":70}},"253":{"start":{"line":488,"column":12},"end":{"line":488,"column":69}},"254":{"start":{"line":491,"column":10},"end":{"line":491,"column":60}},"255":{"start":{"line":493,"column":10},"end":{"line":493,"column":60}},"256":{"start":{"line":496,"column":6},"end":{"line":496,"column":15}},"257":{"start":{"line":501,"column":6},"end":{"line":501,"column":41}},"258":{"start":{"line":506,"column":6},"end":{"line":506,"column":87}},"259":{"start":{"line":511,"column":6},"end":{"line":511,"column":120}},"260":{"start":{"line":511,"column":72},"end":{"line":511,"column":120}},"261":{"start":{"line":512,"column":6},"end":{"line":512,"column":26}},"262":{"start":{"line":517,"column":6},"end":{"line":517,"column":49}},"263":{"start":{"line":517,"column":24},"end":{"line":517,"column":49}},"264":{"start":{"line":522,"column":6},"end":{"line":522,"column":104}},"265":{"start":{"line":522,"column":80},"end":{"line":522,"column":104}},"266":{"start":{"line":523,"column":6},"end":{"line":523,"column":30}},"267":{"start":{"line":528,"column":6},"end":{"line":528,"column":35}},"268":{"start":{"line":533,"column":6},"end":{"line":533,"column":25}},"269":{"start":{"line":538,"column":23},"end":{"line":538,"column":58}},"270":{"start":{"line":540,"column":6},"end":{"line":540,"column":149}},"271":{"start":{"line":540,"column":54},"end":{"line":540,"column":114}},"272":{"start":{"line":540,"column":119},"end":{"line":540,"column":149}},"273":{"start":{"line":541,"column":6},"end":{"line":541,"column":18}},"274":{"start":{"line":546,"column":6},"end":{"line":546,"column":24}},"275":{"start":{"line":551,"column":20},"end":{"line":551,"column":90}},"276":{"start":{"line":552,"column":17},"end":{"line":552,"column":19}},"277":{"start":{"line":553,"column":24},"end":{"line":553,"column":71}},"278":{"start":{"line":554,"column":6},"end":{"line":558,"column":9}},"279":{"start":{"line":555,"column":8},"end":{"line":557,"column":9}},"280":{"start":{"line":556,"column":10},"end":{"line":556,"column":26}},"281":{"start":{"line":559,"column":6},"end":{"line":559,"column":18}},"282":{"start":{"line":564,"column":6},"end":{"line":564,"column":24}},"283":{"start":{"line":565,"column":6},"end":{"line":565,"column":18}},"284":{"start":{"line":575,"column":20},"end":{"line":575,"column":74}},"285":{"start":{"line":577,"column":18},"end":{"line":577,"column":69}},"286":{"start":{"line":579,"column":6},"end":{"line":581,"column":7}},"287":{"start":{"line":580,"column":8},"end":{"line":580,"column":20}},"288":{"start":{"line":583,"column":6},"end":{"line":583,"column":19}},"289":{"start":{"line":593,"column":30},"end":{"line":655,"column":9}},"290":{"start":{"line":596,"column":8},"end":{"line":654,"column":27}},"291":{"start":{"line":597,"column":10},"end":{"line":653,"column":11}},"292":{"start":{"line":598,"column":12},"end":{"line":652,"column":13}},"293":{"start":{"line":600,"column":16},"end":{"line":600,"column":75}},"294":{"start":{"line":601,"column":16},"end":{"line":601,"column":76}},"295":{"start":{"line":602,"column":16},"end":{"line":602,"column":35}},"296":{"start":{"line":603,"column":16},"end":{"line":603,"column":63}},"297":{"start":{"line":606,"column":16},"end":{"line":606,"column":38}},"298":{"start":{"line":607,"column":16},"end":{"line":607,"column":28}},"299":{"start":{"line":608,"column":16},"end":{"line":608,"column":80}},"300":{"start":{"line":609,"column":16},"end":{"line":609,"column":69}},"301":{"start":{"line":610,"column":16},"end":{"line":613,"column":19}},"302":{"start":{"line":611,"column":33},"end":{"line":611,"column":50}},"303":{"start":{"line":612,"column":18},"end":{"line":612,"column":54}},"304":{"start":{"line":615,"column":16},"end":{"line":643,"column":17}},"305":{"start":{"line":616,"column":18},"end":{"line":616,"column":35}},"306":{"start":{"line":617,"column":18},"end":{"line":617,"column":54}},"307":{"start":{"line":619,"column":18},"end":{"line":625,"column":19}},"308":{"start":{"line":620,"column":20},"end":{"line":624,"column":23}},"309":{"start":{"line":621,"column":22},"end":{"line":623,"column":23}},"310":{"start":{"line":622,"column":24},"end":{"line":622,"column":70}},"311":{"start":{"line":627,"column":18},"end":{"line":627,"column":87}},"312":{"start":{"line":628,"column":18},"end":{"line":628,"column":74}},"313":{"start":{"line":630,"column":18},"end":{"line":632,"column":19}},"314":{"start":{"line":631,"column":20},"end":{"line":631,"column":54}},"315":{"start":{"line":634,"column":18},"end":{"line":634,"column":54}},"316":{"start":{"line":636,"column":18},"end":{"line":636,"column":44}},"317":{"start":{"line":637,"column":18},"end":{"line":637,"column":27}},"318":{"start":{"line":638,"column":18},"end":{"line":638,"column":37}},"319":{"start":{"line":639,"column":18},"end":{"line":639,"column":66}},"320":{"start":{"line":640,"column":18},"end":{"line":640,"column":75}},"321":{"start":{"line":642,"column":18},"end":{"line":642,"column":52}},"322":{"start":{"line":645,"column":16},"end":{"line":645,"column":73}},"323":{"start":{"line":647,"column":16},"end":{"line":647,"column":38}},"324":{"start":{"line":651,"column":16},"end":{"line":651,"column":40}},"325":{"start":{"line":658,"column":8},"end":{"line":658,"column":56}},"326":{"start":{"line":661,"column":6},"end":{"line":661,"column":30}},"327":{"start":{"line":672,"column":19},"end":{"line":672,"column":23}},"328":{"start":{"line":674,"column":6},"end":{"line":696,"column":7}},"329":{"start":{"line":675,"column":23},"end":{"line":675,"column":25}},"330":{"start":{"line":677,"column":8},"end":{"line":695,"column":9}},"331":{"start":{"line":678,"column":10},"end":{"line":694,"column":13}},"332":{"start":{"line":679,"column":12},"end":{"line":693,"column":13}},"333":{"start":{"line":680,"column":14},"end":{"line":690,"column":15}},"334":{"start":{"line":681,"column":16},"end":{"line":685,"column":17}},"335":{"start":{"line":682,"column":18},"end":{"line":682,"column":58}},"336":{"start":{"line":684,"column":18},"end":{"line":684,"column":68}},"337":{"start":{"line":687,"column":16},"end":{"line":687,"column":66}},"338":{"start":{"line":689,"column":16},"end":{"line":689,"column":69}},"339":{"start":{"line":691,"column":19},"end":{"line":693,"column":13}},"340":{"start":{"line":692,"column":14},"end":{"line":692,"column":54}},"341":{"start":{"line":706,"column":20},"end":{"line":706,"column":74}},"342":{"start":{"line":708,"column":6},"end":{"line":708,"column":79}},"343":{"start":{"line":719,"column":24},"end":{"line":740,"column":9}},"344":{"start":{"line":720,"column":8},"end":{"line":739,"column":27}},"345":{"start":{"line":721,"column":10},"end":{"line":738,"column":11}},"346":{"start":{"line":722,"column":12},"end":{"line":737,"column":13}},"347":{"start":{"line":724,"column":16},"end":{"line":724,"column":35}},"348":{"start":{"line":725,"column":16},"end":{"line":725,"column":74}},"349":{"start":{"line":728,"column":16},"end":{"line":728,"column":44}},"350":{"start":{"line":730,"column":16},"end":{"line":730,"column":73}},"351":{"start":{"line":732,"column":16},"end":{"line":732,"column":47}},"352":{"start":{"line":736,"column":16},"end":{"line":736,"column":40}},"353":{"start":{"line":743,"column":8},"end":{"line":743,"column":50}},"354":{"start":{"line":746,"column":6},"end":{"line":746,"column":24}},"355":{"start":{"line":751,"column":18},"end":{"line":751,"column":87}},"356":{"start":{"line":752,"column":19},"end":{"line":752,"column":89}},"357":{"start":{"line":753,"column":22},"end":{"line":753,"column":96}},"358":{"start":{"line":754,"column":20},"end":{"line":754,"column":90}},"359":{"start":{"line":755,"column":19},"end":{"line":755,"column":89}},"360":{"start":{"line":756,"column":25},"end":{"line":756,"column":139}},"361":{"start":{"line":757,"column":18},"end":{"line":757,"column":35}},"362":{"start":{"line":758,"column":26},"end":{"line":758,"column":31}},"363":{"start":{"line":760,"column":17},"end":{"line":760,"column":35}},"364":{"start":{"line":762,"column":6},"end":{"line":770,"column":7}},"365":{"start":{"line":763,"column":23},"end":{"line":763,"column":40}},"366":{"start":{"line":765,"column":8},"end":{"line":767,"column":9}},"367":{"start":{"line":765,"column":21},"end":{"line":765,"column":22}},"368":{"start":{"line":766,"column":10},"end":{"line":766,"column":74}},"369":{"start":{"line":769,"column":8},"end":{"line":769,"column":36}},"370":{"start":{"line":772,"column":6},"end":{"line":774,"column":7}},"371":{"start":{"line":773,"column":8},"end":{"line":773,"column":67}},"372":{"start":{"line":776,"column":6},"end":{"line":776,"column":47}},"373":{"start":{"line":777,"column":6},"end":{"line":781,"column":8}},"374":{"start":{"line":786,"column":6},"end":{"line":786,"column":42}},"375":{"start":{"line":791,"column":6},"end":{"line":791,"column":42}},"376":{"start":{"line":796,"column":6},"end":{"line":800,"column":7}},"377":{"start":{"line":797,"column":8},"end":{"line":797,"column":20}},"378":{"start":{"line":799,"column":8},"end":{"line":799,"column":21}},"379":{"start":{"line":805,"column":6},"end":{"line":805,"column":40}},"380":{"start":{"line":810,"column":6},"end":{"line":810,"column":41}},"381":{"start":{"line":815,"column":6},"end":{"line":815,"column":30}},"382":{"start":{"line":820,"column":6},"end":{"line":820,"column":33}},"383":{"start":{"line":825,"column":14},"end":{"line":825,"column":43}},"384":{"start":{"line":827,"column":6},"end":{"line":829,"column":7}},"385":{"start":{"line":828,"column":8},"end":{"line":828,"column":38}},"386":{"start":{"line":834,"column":6},"end":{"line":836,"column":7}},"387":{"start":{"line":835,"column":8},"end":{"line":835,"column":57}},"388":{"start":{"line":838,"column":6},"end":{"line":838,"column":29}},"389":{"start":{"line":841,"column":2},"end":{"line":841,"column":17}},"390":{"start":{"line":844,"column":15},"end":{"line":844,"column":22}},"391":{"start":{"line":845,"column":0},"end":{"line":845,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":40,"column":27},"end":{"line":40,"column":28}},"loc":{"start":{"line":40,"column":39},"end":{"line":842,"column":1}},"line":40},"1":{"name":"Manager","decl":{"start":{"line":41,"column":11},"end":{"line":41,"column":18}},"loc":{"start":{"line":41,"column":29},"end":{"line":44,"column":3}},"line":41},"2":{"name":"(anonymous_2)","decl":{"start":{"line":48,"column":11},"end":{"line":48,"column":12}},"loc":{"start":{"line":48,"column":23},"end":{"line":133,"column":5}},"line":48},"3":{"name":"_callee","decl":{"start":{"line":49,"column":105},"end":{"line":49,"column":112}},"loc":{"start":{"line":49,"column":115},"end":{"line":126,"column":7}},"line":49},"4":{"name":"_callee$","decl":{"start":{"line":50,"column":53},"end":{"line":50,"column":61}},"loc":{"start":{"line":50,"column":72},"end":{"line":125,"column":9}},"line":50},"5":{"name":"init","decl":{"start":{"line":128,"column":15},"end":{"line":128,"column":19}},"loc":{"start":{"line":128,"column":22},"end":{"line":130,"column":7}},"line":128},"6":{"name":"initDev","decl":{"start":{"line":136,"column":20},"end":{"line":136,"column":27}},"loc":{"start":{"line":136,"column":30},"end":{"line":179,"column":5}},"line":136},"7":{"name":"(anonymous_7)","decl":{"start":{"line":152,"column":24},"end":{"line":152,"column":25}},"loc":{"start":{"line":152,"column":36},"end":{"line":154,"column":7}},"line":152},"8":{"name":"(anonymous_8)","decl":{"start":{"line":154,"column":21},"end":{"line":154,"column":22}},"loc":{"start":{"line":154,"column":36},"end":{"line":160,"column":7}},"line":154},"9":{"name":"(anonymous_9)","decl":{"start":{"line":161,"column":27},"end":{"line":161,"column":28}},"loc":{"start":{"line":161,"column":39},"end":{"line":168,"column":7}},"line":161},"10":{"name":"(anonymous_10)","decl":{"start":{"line":163,"column":30},"end":{"line":163,"column":31}},"loc":{"start":{"line":163,"column":42},"end":{"line":166,"column":11}},"line":163},"11":{"name":"(anonymous_11)","decl":{"start":{"line":169,"column":28},"end":{"line":169,"column":29}},"loc":{"start":{"line":169,"column":40},"end":{"line":176,"column":7}},"line":169},"12":{"name":"(anonymous_12)","decl":{"start":{"line":171,"column":30},"end":{"line":171,"column":31}},"loc":{"start":{"line":171,"column":42},"end":{"line":174,"column":11}},"line":171},"13":{"name":"_watcherActivity","decl":{"start":{"line":182,"column":20},"end":{"line":182,"column":36}},"loc":{"start":{"line":182,"column":39},"end":{"line":196,"column":5}},"line":182},"14":{"name":"(anonymous_14)","decl":{"start":{"line":184,"column":42},"end":{"line":184,"column":43}},"loc":{"start":{"line":184,"column":58},"end":{"line":195,"column":7}},"line":184},"15":{"name":"_watchersStart","decl":{"start":{"line":199,"column":20},"end":{"line":199,"column":34}},"loc":{"start":{"line":199,"column":37},"end":{"line":444,"column":5}},"line":199},"16":{"name":"(anonymous_16)","decl":{"start":{"line":211,"column":88},"end":{"line":211,"column":89}},"loc":{"start":{"line":211,"column":107},"end":{"line":273,"column":9}},"line":211},"17":{"name":"(anonymous_17)","decl":{"start":{"line":212,"column":32},"end":{"line":212,"column":33}},"loc":{"start":{"line":212,"column":51},"end":{"line":230,"column":11}},"line":212},"18":{"name":"(anonymous_18)","decl":{"start":{"line":231,"column":32},"end":{"line":231,"column":33}},"loc":{"start":{"line":231,"column":57},"end":{"line":251,"column":11}},"line":231},"19":{"name":"(anonymous_19)","decl":{"start":{"line":252,"column":32},"end":{"line":252,"column":33}},"loc":{"start":{"line":252,"column":51},"end":{"line":272,"column":11}},"line":252},"20":{"name":"(anonymous_20)","decl":{"start":{"line":282,"column":87},"end":{"line":282,"column":88}},"loc":{"start":{"line":282,"column":106},"end":{"line":316,"column":9}},"line":282},"21":{"name":"(anonymous_21)","decl":{"start":{"line":283,"column":32},"end":{"line":283,"column":33}},"loc":{"start":{"line":283,"column":45},"end":{"line":293,"column":11}},"line":283},"22":{"name":"(anonymous_22)","decl":{"start":{"line":294,"column":32},"end":{"line":294,"column":33}},"loc":{"start":{"line":294,"column":45},"end":{"line":304,"column":11}},"line":294},"23":{"name":"(anonymous_23)","decl":{"start":{"line":305,"column":32},"end":{"line":305,"column":33}},"loc":{"start":{"line":305,"column":45},"end":{"line":315,"column":11}},"line":305},"24":{"name":"(anonymous_24)","decl":{"start":{"line":325,"column":83},"end":{"line":325,"column":84}},"loc":{"start":{"line":325,"column":102},"end":{"line":341,"column":9}},"line":325},"25":{"name":"(anonymous_25)","decl":{"start":{"line":326,"column":32},"end":{"line":326,"column":33}},"loc":{"start":{"line":326,"column":44},"end":{"line":330,"column":11}},"line":326},"26":{"name":"(anonymous_26)","decl":{"start":{"line":331,"column":32},"end":{"line":331,"column":33}},"loc":{"start":{"line":331,"column":44},"end":{"line":335,"column":11}},"line":331},"27":{"name":"(anonymous_27)","decl":{"start":{"line":336,"column":32},"end":{"line":336,"column":33}},"loc":{"start":{"line":336,"column":44},"end":{"line":340,"column":11}},"line":336},"28":{"name":"(anonymous_28)","decl":{"start":{"line":350,"column":89},"end":{"line":350,"column":90}},"loc":{"start":{"line":350,"column":108},"end":{"line":378,"column":9}},"line":350},"29":{"name":"(anonymous_29)","decl":{"start":{"line":351,"column":32},"end":{"line":351,"column":33}},"loc":{"start":{"line":351,"column":45},"end":{"line":359,"column":11}},"line":351},"30":{"name":"(anonymous_30)","decl":{"start":{"line":360,"column":32},"end":{"line":360,"column":33}},"loc":{"start":{"line":360,"column":45},"end":{"line":368,"column":11}},"line":360},"31":{"name":"(anonymous_31)","decl":{"start":{"line":369,"column":32},"end":{"line":369,"column":33}},"loc":{"start":{"line":369,"column":45},"end":{"line":377,"column":11}},"line":369},"32":{"name":"(anonymous_32)","decl":{"start":{"line":387,"column":85},"end":{"line":387,"column":86}},"loc":{"start":{"line":387,"column":104},"end":{"line":415,"column":9}},"line":387},"33":{"name":"(anonymous_33)","decl":{"start":{"line":388,"column":32},"end":{"line":388,"column":33}},"loc":{"start":{"line":388,"column":45},"end":{"line":396,"column":11}},"line":388},"34":{"name":"(anonymous_34)","decl":{"start":{"line":397,"column":32},"end":{"line":397,"column":33}},"loc":{"start":{"line":397,"column":45},"end":{"line":405,"column":11}},"line":397},"35":{"name":"(anonymous_35)","decl":{"start":{"line":406,"column":32},"end":{"line":406,"column":33}},"loc":{"start":{"line":406,"column":45},"end":{"line":414,"column":11}},"line":406},"36":{"name":"(anonymous_36)","decl":{"start":{"line":424,"column":79},"end":{"line":424,"column":80}},"loc":{"start":{"line":424,"column":98},"end":{"line":440,"column":9}},"line":424},"37":{"name":"(anonymous_37)","decl":{"start":{"line":425,"column":32},"end":{"line":425,"column":33}},"loc":{"start":{"line":425,"column":44},"end":{"line":429,"column":11}},"line":425},"38":{"name":"(anonymous_38)","decl":{"start":{"line":430,"column":32},"end":{"line":430,"column":33}},"loc":{"start":{"line":430,"column":44},"end":{"line":434,"column":11}},"line":430},"39":{"name":"(anonymous_39)","decl":{"start":{"line":435,"column":32},"end":{"line":435,"column":33}},"loc":{"start":{"line":435,"column":44},"end":{"line":439,"column":11}},"line":435},"40":{"name":"getKeysFromSelect","decl":{"start":{"line":447,"column":20},"end":{"line":447,"column":37}},"loc":{"start":{"line":447,"column":40},"end":{"line":497,"column":5}},"line":447},"41":{"name":"(anonymous_41)","decl":{"start":{"line":451,"column":26},"end":{"line":451,"column":27}},"loc":{"start":{"line":451,"column":45},"end":{"line":495,"column":7}},"line":451},"42":{"name":"(anonymous_42)","decl":{"start":{"line":452,"column":104},"end":{"line":452,"column":105}},"loc":{"start":{"line":452,"column":129},"end":{"line":490,"column":9}},"line":452},"43":{"name":"(anonymous_43)","decl":{"start":{"line":453,"column":79},"end":{"line":453,"column":80}},"loc":{"start":{"line":453,"column":104},"end":{"line":485,"column":11}},"line":453},"44":{"name":"(anonymous_44)","decl":{"start":{"line":454,"column":113},"end":{"line":454,"column":114}},"loc":{"start":{"line":454,"column":125},"end":{"line":480,"column":13}},"line":454},"45":{"name":"_callee2","decl":{"start":{"line":455,"column":112},"end":{"line":455,"column":120}},"loc":{"start":{"line":455,"column":132},"end":{"line":475,"column":15}},"line":455},"46":{"name":"_callee2$","decl":{"start":{"line":456,"column":61},"end":{"line":456,"column":70}},"loc":{"start":{"line":456,"column":82},"end":{"line":474,"column":17}},"line":456},"47":{"name":"(anonymous_47)","decl":{"start":{"line":477,"column":21},"end":{"line":477,"column":22}},"loc":{"start":{"line":477,"column":35},"end":{"line":479,"column":15}},"line":477},"48":{"name":"(anonymous_48)","decl":{"start":{"line":480,"column":17},"end":{"line":480,"column":18}},"loc":{"start":{"line":480,"column":30},"end":{"line":482,"column":13}},"line":480},"49":{"name":"(anonymous_49)","decl":{"start":{"line":482,"column":24},"end":{"line":482,"column":25}},"loc":{"start":{"line":482,"column":37},"end":{"line":484,"column":13}},"line":482},"50":{"name":"(anonymous_50)","decl":{"start":{"line":485,"column":13},"end":{"line":485,"column":14}},"loc":{"start":{"line":485,"column":26},"end":{"line":487,"column":11}},"line":485},"51":{"name":"(anonymous_51)","decl":{"start":{"line":487,"column":22},"end":{"line":487,"column":23}},"loc":{"start":{"line":487,"column":35},"end":{"line":489,"column":11}},"line":487},"52":{"name":"(anonymous_52)","decl":{"start":{"line":490,"column":11},"end":{"line":490,"column":12}},"loc":{"start":{"line":490,"column":24},"end":{"line":492,"column":9}},"line":490},"53":{"name":"(anonymous_53)","decl":{"start":{"line":492,"column":20},"end":{"line":492,"column":21}},"loc":{"start":{"line":492,"column":33},"end":{"line":494,"column":9}},"line":492},"54":{"name":"getStructureAndTemplates","decl":{"start":{"line":500,"column":20},"end":{"line":500,"column":44}},"loc":{"start":{"line":500,"column":47},"end":{"line":502,"column":5}},"line":500},"55":{"name":"updateStructureAndTemplates","decl":{"start":{"line":505,"column":20},"end":{"line":505,"column":47}},"loc":{"start":{"line":505,"column":50},"end":{"line":507,"column":5}},"line":505},"56":{"name":"getThumbsList","decl":{"start":{"line":510,"column":20},"end":{"line":510,"column":33}},"loc":{"start":{"line":510,"column":36},"end":{"line":513,"column":5}},"line":510},"57":{"name":"addThumbsToList","decl":{"start":{"line":516,"column":20},"end":{"line":516,"column":35}},"loc":{"start":{"line":516,"column":43},"end":{"line":518,"column":5}},"line":516},"58":{"name":"getReferences","decl":{"start":{"line":521,"column":20},"end":{"line":521,"column":33}},"loc":{"start":{"line":521,"column":36},"end":{"line":524,"column":5}},"line":521},"59":{"name":"getPrecontribution","decl":{"start":{"line":527,"column":20},"end":{"line":527,"column":38}},"loc":{"start":{"line":527,"column":41},"end":{"line":529,"column":5}},"line":527},"60":{"name":"getSlugs","decl":{"start":{"line":532,"column":20},"end":{"line":532,"column":28}},"loc":{"start":{"line":532,"column":31},"end":{"line":534,"column":5}},"line":532},"61":{"name":"updateReferences","decl":{"start":{"line":537,"column":20},"end":{"line":537,"column":36}},"loc":{"start":{"line":537,"column":52},"end":{"line":542,"column":5}},"line":537},"62":{"name":"getList","decl":{"start":{"line":545,"column":20},"end":{"line":545,"column":27}},"loc":{"start":{"line":545,"column":30},"end":{"line":547,"column":5}},"line":545},"63":{"name":"getListWithStatusOnFolder","decl":{"start":{"line":550,"column":20},"end":{"line":550,"column":45}},"loc":{"start":{"line":550,"column":54},"end":{"line":560,"column":5}},"line":550},"64":{"name":"(anonymous_64)","decl":{"start":{"line":554,"column":47},"end":{"line":554,"column":48}},"loc":{"start":{"line":554,"column":63},"end":{"line":558,"column":7}},"line":554},"65":{"name":"setList","decl":{"start":{"line":563,"column":20},"end":{"line":563,"column":27}},"loc":{"start":{"line":563,"column":34},"end":{"line":566,"column":5}},"line":563},"66":{"name":"postExist","decl":{"start":{"line":574,"column":20},"end":{"line":574,"column":29}},"loc":{"start":{"line":574,"column":39},"end":{"line":584,"column":5}},"line":574},"67":{"name":"(anonymous_67)","decl":{"start":{"line":592,"column":11},"end":{"line":592,"column":12}},"loc":{"start":{"line":592,"column":23},"end":{"line":662,"column":5}},"line":592},"68":{"name":"_callee3","decl":{"start":{"line":593,"column":117},"end":{"line":593,"column":125}},"loc":{"start":{"line":593,"column":140},"end":{"line":655,"column":7}},"line":593},"69":{"name":"_callee3$","decl":{"start":{"line":596,"column":53},"end":{"line":596,"column":62}},"loc":{"start":{"line":596,"column":74},"end":{"line":654,"column":9}},"line":596},"70":{"name":"(anonymous_70)","decl":{"start":{"line":610,"column":62},"end":{"line":610,"column":63}},"loc":{"start":{"line":610,"column":77},"end":{"line":613,"column":17}},"line":610},"71":{"name":"(anonymous_71)","decl":{"start":{"line":620,"column":76},"end":{"line":620,"column":77}},"loc":{"start":{"line":620,"column":106},"end":{"line":624,"column":21}},"line":620},"72":{"name":"updatePostInList","decl":{"start":{"line":657,"column":15},"end":{"line":657,"column":31}},"loc":{"start":{"line":657,"column":37},"end":{"line":659,"column":7}},"line":657},"73":{"name":"historize","decl":{"start":{"line":671,"column":20},"end":{"line":671,"column":29}},"loc":{"start":{"line":671,"column":37},"end":{"line":697,"column":5}},"line":671},"74":{"name":"(anonymous_74)","decl":{"start":{"line":678,"column":68},"end":{"line":678,"column":69}},"loc":{"start":{"line":678,"column":98},"end":{"line":694,"column":11}},"line":678},"75":{"name":"removePostFromList","decl":{"start":{"line":705,"column":20},"end":{"line":705,"column":38}},"loc":{"start":{"line":705,"column":48},"end":{"line":709,"column":5}},"line":705},"76":{"name":"(anonymous_76)","decl":{"start":{"line":718,"column":11},"end":{"line":718,"column":12}},"loc":{"start":{"line":718,"column":23},"end":{"line":747,"column":5}},"line":718},"77":{"name":"_callee4","decl":{"start":{"line":719,"column":111},"end":{"line":719,"column":119}},"loc":{"start":{"line":719,"column":122},"end":{"line":740,"column":7}},"line":719},"78":{"name":"_callee4$","decl":{"start":{"line":720,"column":53},"end":{"line":720,"column":62}},"loc":{"start":{"line":720,"column":74},"end":{"line":739,"column":9}},"line":720},"79":{"name":"updateList","decl":{"start":{"line":742,"column":15},"end":{"line":742,"column":25}},"loc":{"start":{"line":742,"column":28},"end":{"line":744,"column":7}},"line":742},"80":{"name":"getPage","decl":{"start":{"line":750,"column":20},"end":{"line":750,"column":27}},"loc":{"start":{"line":750,"column":30},"end":{"line":782,"column":5}},"line":750},"81":{"name":"addProcess","decl":{"start":{"line":785,"column":20},"end":{"line":785,"column":30}},"loc":{"start":{"line":785,"column":37},"end":{"line":787,"column":5}},"line":785},"82":{"name":"removeProcess","decl":{"start":{"line":790,"column":20},"end":{"line":790,"column":33}},"loc":{"start":{"line":790,"column":40},"end":{"line":792,"column":5}},"line":790},"83":{"name":"isProcessRunning","decl":{"start":{"line":795,"column":20},"end":{"line":795,"column":36}},"loc":{"start":{"line":795,"column":43},"end":{"line":801,"column":5}},"line":795},"84":{"name":"getActivities","decl":{"start":{"line":804,"column":20},"end":{"line":804,"column":33}},"loc":{"start":{"line":804,"column":36},"end":{"line":806,"column":5}},"line":804},"85":{"name":"addActivity","decl":{"start":{"line":809,"column":20},"end":{"line":809,"column":31}},"loc":{"start":{"line":809,"column":42},"end":{"line":811,"column":5}},"line":809},"86":{"name":"getConnections","decl":{"start":{"line":814,"column":20},"end":{"line":814,"column":34}},"loc":{"start":{"line":814,"column":37},"end":{"line":816,"column":5}},"line":814},"87":{"name":"addConnection","decl":{"start":{"line":819,"column":20},"end":{"line":819,"column":33}},"loc":{"start":{"line":819,"column":39},"end":{"line":821,"column":5}},"line":819},"88":{"name":"removeConnection","decl":{"start":{"line":824,"column":20},"end":{"line":824,"column":36}},"loc":{"start":{"line":824,"column":42},"end":{"line":830,"column":5}},"line":824},"89":{"name":"get","decl":{"start":{"line":833,"column":18},"end":{"line":833,"column":21}},"loc":{"start":{"line":833,"column":24},"end":{"line":839,"column":5}},"line":833}},"branchMap":{"0":{"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":79}},"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":43,"column":79}},{"start":{"line":43,"column":4},"end":{"line":43,"column":79}}],"line":43},"1":{"loc":{"start":{"line":52,"column":12},"end":{"line":123,"column":13}},"type":"switch","locations":[{"start":{"line":53,"column":14},"end":{"line":118,"column":48}},{"start":{"line":120,"column":14},"end":{"line":120,"column":22}},{"start":{"line":121,"column":14},"end":{"line":122,"column":39}}],"line":52},"2":{"loc":{"start":{"line":58,"column":16},"end":{"line":77,"column":17}},"type":"if","locations":[{"start":{"line":58,"column":16},"end":{"line":77,"column":17}},{"start":{"line":58,"column":16},"end":{"line":77,"column":17}}],"line":58},"3":{"loc":{"start":{"line":61,"column":23},"end":{"line":77,"column":17}},"type":"if","locations":[{"start":{"line":61,"column":23},"end":{"line":77,"column":17}},{"start":{"line":61,"column":23},"end":{"line":77,"column":17}}],"line":61},"4":{"loc":{"start":{"line":61,"column":27},"end":{"line":61,"column":190}},"type":"binary-expr","locations":[{"start":{"line":61,"column":27},"end":{"line":61,"column":50}},{"start":{"line":61,"column":54},"end":{"line":61,"column":190}}],"line":61},"5":{"loc":{"start":{"line":66,"column":18},"end":{"line":70,"column":19}},"type":"if","locations":[{"start":{"line":66,"column":18},"end":{"line":70,"column":19}},{"start":{"line":66,"column":18},"end":{"line":70,"column":19}}],"line":66},"6":{"loc":{"start":{"line":66,"column":22},"end":{"line":66,"column":82}},"type":"binary-expr","locations":[{"start":{"line":66,"column":22},"end":{"line":66,"column":48}},{"start":{"line":66,"column":52},"end":{"line":66,"column":82}}],"line":66},"7":{"loc":{"start":{"line":72,"column":18},"end":{"line":76,"column":19}},"type":"if","locations":[{"start":{"line":72,"column":18},"end":{"line":76,"column":19}},{"start":{"line":72,"column":18},"end":{"line":76,"column":19}}],"line":72},"8":{"loc":{"start":{"line":81,"column":16},"end":{"line":83,"column":17}},"type":"if","locations":[{"start":{"line":81,"column":16},"end":{"line":83,"column":17}},{"start":{"line":81,"column":16},"end":{"line":83,"column":17}}],"line":81},"9":{"loc":{"start":{"line":87,"column":16},"end":{"line":89,"column":17}},"type":"if","locations":[{"start":{"line":87,"column":16},"end":{"line":89,"column":17}},{"start":{"line":87,"column":16},"end":{"line":89,"column":17}}],"line":87},"10":{"loc":{"start":{"line":92,"column":16},"end":{"line":100,"column":17}},"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":100,"column":17}},{"start":{"line":92,"column":16},"end":{"line":100,"column":17}}],"line":92},"11":{"loc":{"start":{"line":94,"column":23},"end":{"line":100,"column":17}},"type":"if","locations":[{"start":{"line":94,"column":23},"end":{"line":100,"column":17}},{"start":{"line":94,"column":23},"end":{"line":100,"column":17}}],"line":94},"12":{"loc":{"start":{"line":96,"column":23},"end":{"line":100,"column":17}},"type":"if","locations":[{"start":{"line":96,"column":23},"end":{"line":100,"column":17}},{"start":{"line":96,"column":23},"end":{"line":100,"column":17}}],"line":96},"13":{"loc":{"start":{"line":145,"column":18},"end":{"line":145,"column":54}},"type":"binary-expr","locations":[{"start":{"line":145,"column":18},"end":{"line":145,"column":45}},{"start":{"line":145,"column":49},"end":{"line":145,"column":54}}],"line":145},"14":{"loc":{"start":{"line":155,"column":8},"end":{"line":159,"column":9}},"type":"if","locations":[{"start":{"line":155,"column":8},"end":{"line":159,"column":9}},{"start":{"line":155,"column":8},"end":{"line":159,"column":9}}],"line":155},"15":{"loc":{"start":{"line":187,"column":8},"end":{"line":191,"column":9}},"type":"if","locations":[{"start":{"line":187,"column":8},"end":{"line":191,"column":9}},{"start":{"line":187,"column":8},"end":{"line":191,"column":9}}],"line":187},"16":{"loc":{"start":{"line":187,"column":12},"end":{"line":187,"column":43}},"type":"binary-expr","locations":[{"start":{"line":187,"column":12},"end":{"line":187,"column":21}},{"start":{"line":187,"column":25},"end":{"line":187,"column":43}}],"line":187},"17":{"loc":{"start":{"line":213,"column":12},"end":{"line":229,"column":13}},"type":"if","locations":[{"start":{"line":213,"column":12},"end":{"line":229,"column":13}},{"start":{"line":213,"column":12},"end":{"line":229,"column":13}}],"line":213},"18":{"loc":{"start":{"line":224,"column":14},"end":{"line":226,"column":15}},"type":"if","locations":[{"start":{"line":224,"column":14},"end":{"line":226,"column":15}},{"start":{"line":224,"column":14},"end":{"line":226,"column":15}}],"line":224},"19":{"loc":{"start":{"line":232,"column":12},"end":{"line":250,"column":13}},"type":"if","locations":[{"start":{"line":232,"column":12},"end":{"line":250,"column":13}},{"start":{"line":232,"column":12},"end":{"line":250,"column":13}}],"line":232},"20":{"loc":{"start":{"line":235,"column":14},"end":{"line":237,"column":15}},"type":"if","locations":[{"start":{"line":235,"column":14},"end":{"line":237,"column":15}},{"start":{"line":235,"column":14},"end":{"line":237,"column":15}}],"line":235},"21":{"loc":{"start":{"line":245,"column":14},"end":{"line":247,"column":15}},"type":"if","locations":[{"start":{"line":245,"column":14},"end":{"line":247,"column":15}},{"start":{"line":245,"column":14},"end":{"line":247,"column":15}}],"line":245},"22":{"loc":{"start":{"line":253,"column":12},"end":{"line":271,"column":13}},"type":"if","locations":[{"start":{"line":253,"column":12},"end":{"line":271,"column":13}},{"start":{"line":253,"column":12},"end":{"line":271,"column":13}}],"line":253},"23":{"loc":{"start":{"line":256,"column":14},"end":{"line":258,"column":15}},"type":"if","locations":[{"start":{"line":256,"column":14},"end":{"line":258,"column":15}},{"start":{"line":256,"column":14},"end":{"line":258,"column":15}}],"line":256},"24":{"loc":{"start":{"line":266,"column":14},"end":{"line":268,"column":15}},"type":"if","locations":[{"start":{"line":266,"column":14},"end":{"line":268,"column":15}},{"start":{"line":266,"column":14},"end":{"line":268,"column":15}}],"line":266},"25":{"loc":{"start":{"line":288,"column":12},"end":{"line":290,"column":13}},"type":"if","locations":[{"start":{"line":288,"column":12},"end":{"line":290,"column":13}},{"start":{"line":288,"column":12},"end":{"line":290,"column":13}}],"line":288},"26":{"loc":{"start":{"line":299,"column":12},"end":{"line":301,"column":13}},"type":"if","locations":[{"start":{"line":299,"column":12},"end":{"line":301,"column":13}},{"start":{"line":299,"column":12},"end":{"line":301,"column":13}}],"line":299},"27":{"loc":{"start":{"line":310,"column":12},"end":{"line":312,"column":13}},"type":"if","locations":[{"start":{"line":310,"column":12},"end":{"line":312,"column":13}},{"start":{"line":310,"column":12},"end":{"line":312,"column":13}}],"line":310},"28":{"loc":{"start":{"line":354,"column":12},"end":{"line":356,"column":13}},"type":"if","locations":[{"start":{"line":354,"column":12},"end":{"line":356,"column":13}},{"start":{"line":354,"column":12},"end":{"line":356,"column":13}}],"line":354},"29":{"loc":{"start":{"line":363,"column":12},"end":{"line":365,"column":13}},"type":"if","locations":[{"start":{"line":363,"column":12},"end":{"line":365,"column":13}},{"start":{"line":363,"column":12},"end":{"line":365,"column":13}}],"line":363},"30":{"loc":{"start":{"line":372,"column":12},"end":{"line":374,"column":13}},"type":"if","locations":[{"start":{"line":372,"column":12},"end":{"line":374,"column":13}},{"start":{"line":372,"column":12},"end":{"line":374,"column":13}}],"line":372},"31":{"loc":{"start":{"line":391,"column":12},"end":{"line":393,"column":13}},"type":"if","locations":[{"start":{"line":391,"column":12},"end":{"line":393,"column":13}},{"start":{"line":391,"column":12},"end":{"line":393,"column":13}}],"line":391},"32":{"loc":{"start":{"line":400,"column":12},"end":{"line":402,"column":13}},"type":"if","locations":[{"start":{"line":400,"column":12},"end":{"line":402,"column":13}},{"start":{"line":400,"column":12},"end":{"line":402,"column":13}}],"line":400},"33":{"loc":{"start":{"line":409,"column":12},"end":{"line":411,"column":13}},"type":"if","locations":[{"start":{"line":409,"column":12},"end":{"line":411,"column":13}},{"start":{"line":409,"column":12},"end":{"line":411,"column":13}}],"line":409},"34":{"loc":{"start":{"line":458,"column":20},"end":{"line":472,"column":21}},"type":"switch","locations":[{"start":{"line":459,"column":22},"end":{"line":464,"column":51}},{"start":{"line":466,"column":22},"end":{"line":467,"column":34}},{"start":{"line":469,"column":22},"end":{"line":469,"column":29}},{"start":{"line":470,"column":22},"end":{"line":471,"column":48}}],"line":458},"35":{"loc":{"start":{"line":511,"column":6},"end":{"line":511,"column":120}},"type":"if","locations":[{"start":{"line":511,"column":6},"end":{"line":511,"column":120}},{"start":{"line":511,"column":6},"end":{"line":511,"column":120}}],"line":511},"36":{"loc":{"start":{"line":511,"column":10},"end":{"line":511,"column":70}},"type":"binary-expr","locations":[{"start":{"line":511,"column":10},"end":{"line":511,"column":45}},{"start":{"line":511,"column":49},"end":{"line":511,"column":70}}],"line":511},"37":{"loc":{"start":{"line":517,"column":6},"end":{"line":517,"column":49}},"type":"if","locations":[{"start":{"line":517,"column":6},"end":{"line":517,"column":49}},{"start":{"line":517,"column":6},"end":{"line":517,"column":49}}],"line":517},"38":{"loc":{"start":{"line":522,"column":6},"end":{"line":522,"column":104}},"type":"if","locations":[{"start":{"line":522,"column":6},"end":{"line":522,"column":104}},{"start":{"line":522,"column":6},"end":{"line":522,"column":104}}],"line":522},"39":{"loc":{"start":{"line":522,"column":10},"end":{"line":522,"column":78}},"type":"binary-expr","locations":[{"start":{"line":522,"column":10},"end":{"line":522,"column":49}},{"start":{"line":522,"column":53},"end":{"line":522,"column":78}}],"line":522},"40":{"loc":{"start":{"line":540,"column":6},"end":{"line":540,"column":149}},"type":"if","locations":[{"start":{"line":540,"column":6},"end":{"line":540,"column":149}},{"start":{"line":540,"column":6},"end":{"line":540,"column":149}}],"line":540},"41":{"loc":{"start":{"line":540,"column":10},"end":{"line":540,"column":52}},"type":"binary-expr","locations":[{"start":{"line":540,"column":10},"end":{"line":540,"column":23}},{"start":{"line":540,"column":27},"end":{"line":540,"column":52}}],"line":540},"42":{"loc":{"start":{"line":551,"column":20},"end":{"line":551,"column":90}},"type":"cond-expr","locations":[{"start":{"line":551,"column":73},"end":{"line":551,"column":85}},{"start":{"line":551,"column":88},"end":{"line":551,"column":90}}],"line":551},"43":{"loc":{"start":{"line":551,"column":20},"end":{"line":551,"column":70}},"type":"binary-expr","locations":[{"start":{"line":551,"column":20},"end":{"line":551,"column":40}},{"start":{"line":551,"column":44},"end":{"line":551,"column":70}}],"line":551},"44":{"loc":{"start":{"line":555,"column":8},"end":{"line":557,"column":9}},"type":"if","locations":[{"start":{"line":555,"column":8},"end":{"line":557,"column":9}},{"start":{"line":555,"column":8},"end":{"line":557,"column":9}}],"line":555},"45":{"loc":{"start":{"line":555,"column":12},"end":{"line":555,"column":129}},"type":"binary-expr","locations":[{"start":{"line":555,"column":12},"end":{"line":555,"column":47}},{"start":{"line":555,"column":51},"end":{"line":555,"column":72}},{"start":{"line":555,"column":77},"end":{"line":555,"column":91}},{"start":{"line":555,"column":95},"end":{"line":555,"column":128}}],"line":555},"46":{"loc":{"start":{"line":579,"column":6},"end":{"line":581,"column":7}},"type":"if","locations":[{"start":{"line":579,"column":6},"end":{"line":581,"column":7}},{"start":{"line":579,"column":6},"end":{"line":581,"column":7}}],"line":579},"47":{"loc":{"start":{"line":598,"column":12},"end":{"line":652,"column":13}},"type":"switch","locations":[{"start":{"line":599,"column":14},"end":{"line":603,"column":63}},{"start":{"line":605,"column":14},"end":{"line":647,"column":38}},{"start":{"line":649,"column":14},"end":{"line":649,"column":22}},{"start":{"line":650,"column":14},"end":{"line":651,"column":40}}],"line":598},"48":{"loc":{"start":{"line":615,"column":16},"end":{"line":643,"column":17}},"type":"if","locations":[{"start":{"line":615,"column":16},"end":{"line":643,"column":17}},{"start":{"line":615,"column":16},"end":{"line":643,"column":17}}],"line":615},"49":{"loc":{"start":{"line":619,"column":18},"end":{"line":625,"column":19}},"type":"if","locations":[{"start":{"line":619,"column":18},"end":{"line":625,"column":19}},{"start":{"line":619,"column":18},"end":{"line":625,"column":19}}],"line":619},"50":{"loc":{"start":{"line":621,"column":22},"end":{"line":623,"column":23}},"type":"if","locations":[{"start":{"line":621,"column":22},"end":{"line":623,"column":23}},{"start":{"line":621,"column":22},"end":{"line":623,"column":23}}],"line":621},"51":{"loc":{"start":{"line":630,"column":18},"end":{"line":632,"column":19}},"type":"if","locations":[{"start":{"line":630,"column":18},"end":{"line":632,"column":19}},{"start":{"line":630,"column":18},"end":{"line":632,"column":19}}],"line":630},"52":{"loc":{"start":{"line":630,"column":22},"end":{"line":630,"column":113}},"type":"binary-expr","locations":[{"start":{"line":630,"column":22},"end":{"line":630,"column":48}},{"start":{"line":630,"column":52},"end":{"line":630,"column":113}}],"line":630},"53":{"loc":{"start":{"line":674,"column":6},"end":{"line":696,"column":7}},"type":"if","locations":[{"start":{"line":674,"column":6},"end":{"line":696,"column":7}},{"start":{"line":674,"column":6},"end":{"line":696,"column":7}}],"line":674},"54":{"loc":{"start":{"line":674,"column":10},"end":{"line":674,"column":60}},"type":"binary-expr","locations":[{"start":{"line":674,"column":10},"end":{"line":674,"column":31}},{"start":{"line":674,"column":35},"end":{"line":674,"column":60}}],"line":674},"55":{"loc":{"start":{"line":677,"column":8},"end":{"line":695,"column":9}},"type":"if","locations":[{"start":{"line":677,"column":8},"end":{"line":695,"column":9}},{"start":{"line":677,"column":8},"end":{"line":695,"column":9}}],"line":677},"56":{"loc":{"start":{"line":679,"column":12},"end":{"line":693,"column":13}},"type":"if","locations":[{"start":{"line":679,"column":12},"end":{"line":693,"column":13}},{"start":{"line":679,"column":12},"end":{"line":693,"column":13}}],"line":679},"57":{"loc":{"start":{"line":680,"column":14},"end":{"line":690,"column":15}},"type":"if","locations":[{"start":{"line":680,"column":14},"end":{"line":690,"column":15}},{"start":{"line":680,"column":14},"end":{"line":690,"column":15}}],"line":680},"58":{"loc":{"start":{"line":681,"column":16},"end":{"line":685,"column":17}},"type":"if","locations":[{"start":{"line":681,"column":16},"end":{"line":685,"column":17}},{"start":{"line":681,"column":16},"end":{"line":685,"column":17}}],"line":681},"59":{"loc":{"start":{"line":691,"column":19},"end":{"line":693,"column":13}},"type":"if","locations":[{"start":{"line":691,"column":19},"end":{"line":693,"column":13}},{"start":{"line":691,"column":19},"end":{"line":693,"column":13}}],"line":691},"60":{"loc":{"start":{"line":722,"column":12},"end":{"line":737,"column":13}},"type":"switch","locations":[{"start":{"line":723,"column":14},"end":{"line":725,"column":74}},{"start":{"line":727,"column":14},"end":{"line":732,"column":47}},{"start":{"line":734,"column":14},"end":{"line":734,"column":21}},{"start":{"line":735,"column":14},"end":{"line":736,"column":40}}],"line":722},"61":{"loc":{"start":{"line":751,"column":18},"end":{"line":751,"column":87}},"type":"cond-expr","locations":[{"start":{"line":751,"column":71},"end":{"line":751,"column":83}},{"start":{"line":751,"column":86},"end":{"line":751,"column":87}}],"line":751},"62":{"loc":{"start":{"line":751,"column":18},"end":{"line":751,"column":68}},"type":"binary-expr","locations":[{"start":{"line":751,"column":18},"end":{"line":751,"column":38}},{"start":{"line":751,"column":42},"end":{"line":751,"column":68}}],"line":751},"63":{"loc":{"start":{"line":752,"column":19},"end":{"line":752,"column":89}},"type":"cond-expr","locations":[{"start":{"line":752,"column":72},"end":{"line":752,"column":84}},{"start":{"line":752,"column":87},"end":{"line":752,"column":89}}],"line":752},"64":{"loc":{"start":{"line":752,"column":19},"end":{"line":752,"column":69}},"type":"binary-expr","locations":[{"start":{"line":752,"column":19},"end":{"line":752,"column":39}},{"start":{"line":752,"column":43},"end":{"line":752,"column":69}}],"line":752},"65":{"loc":{"start":{"line":753,"column":22},"end":{"line":753,"column":96}},"type":"cond-expr","locations":[{"start":{"line":753,"column":75},"end":{"line":753,"column":87}},{"start":{"line":753,"column":90},"end":{"line":753,"column":96}}],"line":753},"66":{"loc":{"start":{"line":753,"column":22},"end":{"line":753,"column":72}},"type":"binary-expr","locations":[{"start":{"line":753,"column":22},"end":{"line":753,"column":42}},{"start":{"line":753,"column":46},"end":{"line":753,"column":72}}],"line":753},"67":{"loc":{"start":{"line":754,"column":20},"end":{"line":754,"column":90}},"type":"cond-expr","locations":[{"start":{"line":754,"column":73},"end":{"line":754,"column":85}},{"start":{"line":754,"column":88},"end":{"line":754,"column":90}}],"line":754},"68":{"loc":{"start":{"line":754,"column":20},"end":{"line":754,"column":70}},"type":"binary-expr","locations":[{"start":{"line":754,"column":20},"end":{"line":754,"column":40}},{"start":{"line":754,"column":44},"end":{"line":754,"column":70}}],"line":754},"69":{"loc":{"start":{"line":755,"column":19},"end":{"line":755,"column":89}},"type":"cond-expr","locations":[{"start":{"line":755,"column":72},"end":{"line":755,"column":84}},{"start":{"line":755,"column":87},"end":{"line":755,"column":89}}],"line":755},"70":{"loc":{"start":{"line":755,"column":19},"end":{"line":755,"column":69}},"type":"binary-expr","locations":[{"start":{"line":755,"column":19},"end":{"line":755,"column":39}},{"start":{"line":755,"column":43},"end":{"line":755,"column":69}}],"line":755},"71":{"loc":{"start":{"line":756,"column":25},"end":{"line":756,"column":139}},"type":"cond-expr","locations":[{"start":{"line":756,"column":78},"end":{"line":756,"column":90}},{"start":{"line":756,"column":93},"end":{"line":756,"column":139}}],"line":756},"72":{"loc":{"start":{"line":756,"column":25},"end":{"line":756,"column":75}},"type":"binary-expr","locations":[{"start":{"line":756,"column":25},"end":{"line":756,"column":45}},{"start":{"line":756,"column":49},"end":{"line":756,"column":75}}],"line":756},"73":{"loc":{"start":{"line":762,"column":6},"end":{"line":770,"column":7}},"type":"if","locations":[{"start":{"line":762,"column":6},"end":{"line":770,"column":7}},{"start":{"line":762,"column":6},"end":{"line":770,"column":7}}],"line":762},"74":{"loc":{"start":{"line":772,"column":6},"end":{"line":774,"column":7}},"type":"if","locations":[{"start":{"line":772,"column":6},"end":{"line":774,"column":7}},{"start":{"line":772,"column":6},"end":{"line":774,"column":7}}],"line":772},"75":{"loc":{"start":{"line":772,"column":10},"end":{"line":772,"column":46}},"type":"binary-expr","locations":[{"start":{"line":772,"column":10},"end":{"line":772,"column":29}},{"start":{"line":772,"column":33},"end":{"line":772,"column":46}}],"line":772},"76":{"loc":{"start":{"line":796,"column":6},"end":{"line":800,"column":7}},"type":"if","locations":[{"start":{"line":796,"column":6},"end":{"line":800,"column":7}},{"start":{"line":796,"column":6},"end":{"line":800,"column":7}}],"line":796},"77":{"loc":{"start":{"line":796,"column":10},"end":{"line":796,"column":88}},"type":"binary-expr","locations":[{"start":{"line":796,"column":10},"end":{"line":796,"column":47}},{"start":{"line":796,"column":51},"end":{"line":796,"column":88}}],"line":796},"78":{"loc":{"start":{"line":827,"column":6},"end":{"line":829,"column":7}},"type":"if","locations":[{"start":{"line":827,"column":6},"end":{"line":829,"column":7}},{"start":{"line":827,"column":6},"end":{"line":829,"column":7}}],"line":827},"79":{"loc":{"start":{"line":834,"column":6},"end":{"line":836,"column":7}},"type":"if","locations":[{"start":{"line":834,"column":6},"end":{"line":836,"column":7}},{"start":{"line":834,"column":6},"end":{"line":836,"column":7}}],"line":834}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":1,"23":1,"24":22,"25":44,"26":44,"27":22,"28":22,"29":22,"30":0,"31":0,"32":22,"33":22,"34":22,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":22,"42":22,"43":0,"44":22,"45":22,"46":0,"47":22,"48":0,"49":22,"50":0,"51":22,"52":0,"53":22,"54":22,"55":22,"56":22,"57":22,"58":22,"59":22,"60":22,"61":22,"62":22,"63":22,"64":22,"65":22,"66":22,"67":22,"68":22,"69":22,"70":22,"71":1,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":22,"96":22,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":22,"232":22,"233":22,"234":22,"235":22,"236":22,"237":22,"238":22,"239":44,"240":44,"241":22,"242":22,"243":22,"244":22,"245":22,"246":22,"247":22,"248":22,"249":22,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":22,"257":2,"258":23,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":36,"275":4,"276":4,"277":4,"278":4,"279":12,"280":5,"281":4,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":1,"290":3,"291":6,"292":6,"293":3,"294":3,"295":3,"296":3,"297":3,"298":3,"299":3,"300":3,"301":3,"302":6,"303":6,"304":3,"305":3,"306":3,"307":3,"308":0,"309":0,"310":0,"311":3,"312":3,"313":3,"314":0,"315":3,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":3,"323":3,"324":3,"325":3,"326":1,"327":4,"328":4,"329":4,"330":4,"331":3,"332":7,"333":4,"334":0,"335":0,"336":0,"337":4,"338":4,"339":3,"340":3,"341":0,"342":0,"343":1,"344":31,"345":62,"346":62,"347":31,"348":31,"349":31,"350":31,"351":31,"352":31,"353":31,"354":1,"355":1,"356":1,"357":1,"358":1,"359":1,"360":1,"361":1,"362":1,"363":1,"364":1,"365":0,"366":0,"367":0,"368":0,"369":0,"370":1,"371":0,"372":1,"373":1,"374":1,"375":0,"376":1,"377":0,"378":1,"379":0,"380":0,"381":2,"382":2,"383":1,"384":1,"385":1,"386":2487,"387":1,"388":2487,"389":1,"390":1,"391":1},"f":{"0":1,"1":1,"2":1,"3":22,"4":44,"5":22,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":22,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":22,"41":22,"42":22,"43":22,"44":22,"45":22,"46":44,"47":22,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":2,"55":23,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":36,"63":4,"64":12,"65":0,"66":0,"67":1,"68":3,"69":6,"70":6,"71":0,"72":3,"73":4,"74":7,"75":0,"76":1,"77":31,"78":62,"79":31,"80":1,"81":1,"82":0,"83":1,"84":0,"85":0,"86":2,"87":2,"88":1,"89":2487},"b":{"0":[0,1],"1":[22,22,22],"2":[0,22],"3":[22,0],"4":[22,22],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,22],"9":[0,22],"10":[0,22],"11":[0,22],"12":[0,22],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[22,22,22,22],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[1,3],"43":[4,1],"44":[5,7],"45":[12,6,6,2],"46":[0,0],"47":[3,3,3,3],"48":[3,0],"49":[0,3],"50":[0,0],"51":[0,3],"52":[3,3],"53":[4,0],"54":[4,4],"55":[3,1],"56":[4,3],"57":[0,4],"58":[0,0],"59":[3,0],"60":[31,31,31,31],"61":[0,1],"62":[1,0],"63":[0,1],"64":[1,0],"65":[0,1],"66":[1,0],"67":[0,1],"68":[1,0],"69":[0,1],"70":[1,0],"71":[0,1],"72":[1,0],"73":[0,1],"74":[0,1],"75":[1,1],"76":[0,1],"77":[1,1],"78":[1,0],"79":[1,2486]},"inputSourceMap":{"version":3,"sources":["Manager.js"],"names":["singleton","Symbol","singletonEnforcer","Manager","enforcer","_processesRunning","events","process","env","ABE_TEMPLATES_PATH","pathTemplates","path","join","config","root","pathPartials","themes","coreUtils","file","exist","name","templates","partials","url","pathAssets","ABE_ASSETS_PATH","pathPublish","publish","ABE_DESTINATION_PATH","ABE_JSON_PATH","pathData","data","replace","pathScripts","scripts","pathStructure","structure","pathReference","reference","pathLocales","connections","activities","User","utils","getActivity","_watcherActivity","updateStructureAndTemplates","getKeysFromSelect","console","log","NODE_ENV","_watchersStart","lport","LIVERELOAD_PORT","lserver","use","bodyParser","json","urlencoded","extended","tinylr","middleware","app","listen","on","err","code","error","clc","red","close","exit","cmsTemplates","assets","copy","activity","EventEmitter","time","Date","toISOString","user","username","addActivity","emit","bind","template","locales","fse","accessSync","F_OK","_watchTemplateFolder","watch","createMonitor","monitor","f","stat","indexOf","files","extension","changed","curr","prev","e","_watchPartialsFolder","_watchStructure","_watchReferenceFolder","updateReferences","_watchLocalesFolder","instance","reloadLocales","_watchScripts","abeExtend","plugins","updateScripts","_whereKeys","p","Promise","resolve","getTemplatesAndPartials","then","templatesList","getTemplatesTexts","templatesText","getAbeRequestWhereKeysFromTemplates","whereKeys","_slugs","getAbeSlugFromTemplates","_precontribution","getAbePrecontribFromTemplates","updateList","stack","_structureAndTemplates","getStructureAndTemplates","_thumbs","cmsMedia","image","getThumbsList","thumb","push","_references","referenceName","references","cmsReference","getFiles","_list","status","subPath","list","subPathFull","Array","prototype","forEach","call","startsWith","postUrl","docPath","cmsData","getDocRelativePathFromPostUrl","found","array","find","length","revisionPath","getDocRelativePath","revision","getDoc","merged","getFileObject","getAbeMeta","key","keyFirst","split","index","abe_meta","revisions","revIndex","splice","JSON","parse","stringify","sortedResult","sortRevisions","rev","mergeRevisions","sort","predicatBy","historize","history","arStatus","cmsOperations","remove","removeRevision","removeByAttr","getAllWithKeys","start","sortField","sortDir","search","searchFields","total","totalFiltered","slice","searches","i","facet","recordsTotal","recordsFiltered","res"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/manager/","sourcesContent":["//import Handlebars from 'handlebars'\nimport fse from 'fs-extra'\nimport events from 'events'\nimport path from 'path'\nimport watch from 'watch'\nimport express from 'express'\nimport bodyParser from 'body-parser'\nimport tinylr from 'tiny-lr'\nimport clc from 'cli-color'\nimport {\n  coreUtils,\n  cmsData,\n  config,\n  cmsTemplates,\n  cmsReference,\n  cmsMedia,\n  cmsOperations,\n  abeExtend,\n  User\n} from '../../'\n\nlet singleton = Symbol()\nlet singletonEnforcer = Symbol()\n\nclass Manager {\n  constructor(enforcer) {\n    if (enforcer != singletonEnforcer) throw 'Cannot construct Json singleton'\n  }\n\n  static get instance() {\n    if (!this[singleton]) {\n      this[singleton] = new Manager(singletonEnforcer)\n    }\n    return this[singleton]\n  }\n\n  async init() {\n    this._processesRunning = {}\n    this.events = {}\n\n    // Compatibility for abe version < 3.2.\n    // It's possible to reference html from any directory\n    if (process.env.ABE_TEMPLATES_PATH) {\n      this.pathTemplates = path.join(\n        config.root,\n        process.env.ABE_TEMPLATES_PATH\n      )\n      this.pathPartials = path.join(this.pathTemplates, 'partials')\n    } else if (\n      config.themes != null &&\n      coreUtils.file.exist(\n        path.join(\n          config.root,\n          config.themes.path,\n          config.themes.name,\n          config.themes.templates.path\n        )\n      )\n    ) {\n      this.pathTemplates = path.join(\n        config.root,\n        config.themes.path,\n        config.themes.name,\n        config.themes.templates.path\n      )\n      this.pathPartials = path.join(\n        config.root,\n        config.themes.path,\n        config.themes.name,\n        config.themes.partials.path\n      )\n    } else {\n      // did the users of the versions < 3.2 overriden the default templates path or partials path ?\n      if (config.templates != null && config.templates.url != null) {\n        this.pathTemplates = path.join(config.root, config.templates.url)\n      } else {\n        this.pathTemplates = path.join(config.root, 'templates')\n      }\n      if (config.partials != null) {\n        this.pathPartials = path.join(config.root, config.partials)\n      } else {\n        this.pathPartials = path.join(config.root, 'partials')\n      }\n    }\n\n    this.pathAssets = this.pathTemplates\n    if (process.env.ABE_ASSETS_PATH) {\n      this.pathAssets = path.join(config.root, process.env.ABE_ASSETS_PATH)\n    }\n    this.pathPublish = path.join(config.root, config.publish.url)\n    if (process.env.ABE_DESTINATION_PATH) {\n      this.pathPublish = path.join(\n        config.root,\n        process.env.ABE_DESTINATION_PATH\n      )\n    }\n\n    // config.data.url was the config prior to v3.7.0\n    if (process.env.ABE_JSON_PATH) {\n      this.pathData = path.join(config.root, process.env.ABE_JSON_PATH)\n    } else if (config.data.url != null) {\n      this.pathData = path.join(config.root, config.data.url)\n    } else if (coreUtils.file.exist(path.join(config.root, config.data.path))) {\n      this.pathData = path.join(config.root, config.data.path)\n    } else {\n      this.pathData = path.join(config.root, 'data')\n    }\n\n    this.pathTemplates = this.pathTemplates.replace(/\\/$/, '')\n    this.pathPartials = this.pathPartials.replace(/\\/$/, '')\n    this.pathAssets = this.pathAssets.replace(/\\/$/, '')\n    this.pathPublish = this.pathPublish.replace(/\\/$/, '')\n    this.pathData = this.pathData.replace(/\\/$/, '')\n    this.pathScripts = path.join(config.root, config.scripts.path)\n\n    this.pathStructure = path.join(config.root, config.structure.url)\n    this.pathReference = path.join(config.root, config.reference.url)\n    this.pathLocales = path.join(config.root, 'locales')\n\n    this.connections = []\n\n    this.activities =  User.utils.getActivity()\n\n    this._watcherActivity()\n\n    this.updateStructureAndTemplates()\n\n    await this.getKeysFromSelect()\n  }\n\n  initDev() {\n    console.log(`You are in ${process.env.NODE_ENV} mode`)\n    console.log(\n      'which means every change in your themes (templates, partials and assets), reference and structure folders will dynamically update your site'\n    )\n    console.log(\"In production, this mode shouldn't be used.\")\n\n    this._watchersStart()\n\n    var lport = process.env.LIVERELOAD_PORT || 35729\n    this.lserver = express()\n\n    // Launching a Livereload server\n    this.lserver\n      .use(bodyParser.json())\n      .use(bodyParser.urlencoded({extended: true}))\n      .use(tinylr.middleware({app: this.lserver}))\n      .listen(lport, function() {\n        console.log('Livereload listening on %d', lport)\n      })\n      .on('error', function(err) {\n        if (err.code == 'EADDRINUSE') {\n          console.error(\n            clc.red(\"can't start the Abe's watch server\\n\"),\n            `This watch server has tried to listen on the port ${lport} but this server is already in use by another process...`\n          )\n        } else {\n          console.error(err)\n        }\n      })\n\n    process.on('SIGINT', () => {\n      try {\n        this.lserver.close(() => {\n          console.log('SIGINT:Livereload server has been gracefully terminated')\n          process.exit(0)\n        })\n      } catch (error) {}\n    })\n    process.on('SIGTERM', () => {\n      try {\n        this.lserver.close(() => {\n          console.log(\n            'SIGTERM:Livereload server has been gracefully terminated'\n          )\n          process.exit(0)\n        })\n      } catch (error) {}\n    })\n\n    // sync assets from templates to /site\n    cmsTemplates.assets.copy()\n  }\n\n  _watcherActivity() {\n    this.events.activity = new events.EventEmitter(0)\n\n    this.events.activity.on(\n      'activity',\n      function(data) {\n        data.time = new Date().toISOString()\n        if (data.user && data.user.username) {\n          data.user = data.user.username\n        } else {\n          data.user = 'admin'\n        }\n        this.addActivity(data)\n        this.events.activity.emit('activity-stream', data)\n      }.bind(this)\n    )\n  }\n\n  _watchersStart() {\n    this.events.template = new events.EventEmitter(0)\n    this.events.structure = new events.EventEmitter(0)\n    this.events.reference = new events.EventEmitter(0)\n    this.events.scripts = new events.EventEmitter(0)\n    this.events.locales = new events.EventEmitter(0)\n\n    // watch template folder\n    try {\n      fse.accessSync(this.pathTemplates, fse.F_OK)\n      this._watchTemplateFolder = watch.createMonitor(\n        this.pathTemplates,\n        monitor => {\n          monitor.on('created', (f, stat) => {\n            if (f.indexOf(`.${config.files.templates.extension}`) < 0) {\n              cmsTemplates.assets.copy()\n              tinylr.changed(f)\n              console.log(\n                'Assets have been synchronized after this creation: ' + f\n              )\n            } else {\n              this.getKeysFromSelect()\n              this.updateStructureAndTemplates()\n              if (typeof this.lserver != 'undefined') {\n                tinylr.changed(f)\n              }\n              this.events.template.emit('update')\n            }\n          })\n          monitor.on('changed', (f, curr, prev) => {\n            if (f.indexOf(`.${config.files.templates.extension}`) < 0) {\n              cmsTemplates.assets.copy()\n              if (typeof this.lserver != 'undefined') {\n                tinylr.changed(f)\n              }\n              console.log(\n                'Assets have been synchronized after this modification: ' + f\n              )\n            } else {\n              this.getKeysFromSelect()\n              this.updateStructureAndTemplates()\n              if (typeof this.lserver != 'undefined') {\n                tinylr.changed(f)\n              }\n              this.events.template.emit('update')\n            }\n          })\n          monitor.on('removed', (f, stat) => {\n            if (f.indexOf(`.${config.files.templates.extension}`) < 0) {\n              cmsTemplates.assets.copy()\n              if (typeof this.lserver != 'undefined') {\n                tinylr.changed(f)\n              }\n              console.log(\n                'Assets have been synchronized after this deletion: ' + f\n              )\n            } else {\n              this.getKeysFromSelect()\n              this.updateStructureAndTemplates()\n              if (typeof this.lserver != 'undefined') {\n                tinylr.changed(f)\n              }\n              this.events.template.emit('update')\n            }\n          })\n        }\n      )\n    } catch (e) {\n      console.log('the directory ' + this.pathTemplates + ' does not exist')\n    }\n\n    // watch partial folder\n    try {\n      fse.accessSync(this.pathPartials, fse.F_OK)\n      this._watchPartialsFolder = watch.createMonitor(\n        this.pathPartials,\n        monitor => {\n          monitor.on('created', f => {\n            this.getKeysFromSelect()\n            this.updateStructureAndTemplates()\n            if (typeof this.lserver != 'undefined') {\n              tinylr.changed(f)\n            }\n            this.events.template.emit('update')\n          })\n          monitor.on('changed', f => {\n            this.getKeysFromSelect()\n            this.updateStructureAndTemplates()\n            if (typeof this.lserver != 'undefined') {\n              tinylr.changed(f)\n            }\n            this.events.template.emit('update')\n          })\n          monitor.on('removed', f => {\n            this.getKeysFromSelect()\n            this.updateStructureAndTemplates()\n            if (typeof this.lserver != 'undefined') {\n              tinylr.changed(f)\n            }\n            this.events.template.emit('update')\n          })\n        }\n      )\n    } catch (e) {\n      console.log('the directory ' + this.pathPartials + ' does not exist')\n    }\n\n    // watch structure folder\n    try {\n      fse.accessSync(this.pathStructure, fse.F_OK)\n      this._watchStructure = watch.createMonitor(\n        this.pathStructure,\n        monitor => {\n          monitor.on('created', () => {\n            this.updateStructureAndTemplates()\n            this.events.structure.emit('update')\n          })\n          monitor.on('changed', () => {\n            this.updateStructureAndTemplates()\n            this.events.structure.emit('update')\n          })\n          monitor.on('removed', () => {\n            this.updateStructureAndTemplates()\n            this.events.structure.emit('update')\n          })\n        }\n      )\n    } catch (e) {\n      console.log('the directory ' + this.pathStructure + ' does not exist')\n    }\n\n    // watch reference folder\n    try {\n      fse.accessSync(this.pathReference, fse.F_OK)\n      this._watchReferenceFolder = watch.createMonitor(\n        this.pathReference,\n        monitor => {\n          monitor.on('created', f => {\n            this.updateReferences(f)\n            if (typeof this.lserver != 'undefined') {\n              tinylr.changed(f)\n            }\n            this.events.reference.emit('update')\n          })\n          monitor.on('changed', f => {\n            this.updateReferences(f)\n            if (typeof this.lserver != 'undefined') {\n              tinylr.changed(f)\n            }\n            this.events.reference.emit('update')\n          })\n          monitor.on('removed', f => {\n            this.updateReferences()\n            if (typeof this.lserver != 'undefined') {\n              tinylr.changed(f)\n            }\n            this.events.reference.emit('update')\n          })\n        }\n      )\n    } catch (e) {\n      console.log('the directory ' + this.pathReference + ' does not exist')\n    }\n\n    // watch locales folder\n    try {\n      fse.accessSync(this.pathLocales, fse.F_OK)\n      this._watchLocalesFolder = watch.createMonitor(\n        this.pathLocales,\n        monitor => {\n          monitor.on('created', f => {\n            coreUtils.locales.instance.reloadLocales()\n            if (typeof this.lserver != 'undefined') {\n              tinylr.changed(f)\n            }\n            this.events.locales.emit('update')\n          })\n          monitor.on('changed', f => {\n            coreUtils.locales.instance.reloadLocales()\n            if (typeof this.lserver != 'undefined') {\n              tinylr.changed(f)\n            }\n            this.events.locales.emit('update')\n          })\n          monitor.on('removed', f => {\n            coreUtils.locales.instance.reloadLocales()\n            if (typeof this.lserver != 'undefined') {\n              tinylr.changed(f)\n            }\n            this.events.locales.emit('update')\n          })\n        }\n      )\n    } catch (e) {\n      console.log('the directory ' + this.pathLocales + ' does not exist')\n    }\n\n    // watch scripts folder\n    try {\n      fse.accessSync(this.pathScripts, fse.F_OK)\n      this._watchScripts = watch.createMonitor(this.pathScripts, monitor => {\n        monitor.on('created', () => {\n          abeExtend.plugins.instance.updateScripts()\n          this.events.scripts.emit('update')\n        })\n        monitor.on('changed', () => {\n          abeExtend.plugins.instance.updateScripts()\n          this.events.scripts.emit('update')\n        })\n        monitor.on('removed', () => {\n          abeExtend.plugins.instance.updateScripts()\n          this.events.scripts.emit('update')\n        })\n      })\n    } catch (e) {\n      console.log('the directory ' + this.pathScripts + ' does not exist')\n    }\n  }\n\n  getKeysFromSelect() {\n    this._whereKeys = []\n    var p = new Promise(resolve => {\n      cmsTemplates.template\n        .getTemplatesAndPartials(this.pathTemplates, this.pathPartials)\n        .then(\n          templatesList => {\n            return cmsTemplates.template\n              .getTemplatesTexts(templatesList)\n              .then(\n                templatesText => {\n                  return cmsTemplates.template\n                    .getAbeRequestWhereKeysFromTemplates(templatesText)\n                    .then(\n                      async whereKeys => {\n                        this._whereKeys = whereKeys\n                        this._slugs = cmsTemplates.template.getAbeSlugFromTemplates(\n                          templatesText\n                        )\n                        this._precontribution = cmsTemplates.template.getAbePrecontribFromTemplates(\n                          templatesText\n                        )\n                        await this.updateList()\n                        resolve()\n                      },\n                      e => {\n                        console.log(\n                          'Reject: Manager.findRequestColumns',\n                          e.stack\n                        )\n                      }\n                    )\n                    .catch(e => {\n                      console.log('Error: Manager.findRequestColumns', e.stack)\n                    })\n                },\n                e => {\n                  console.log('Reject: Manager.getTemplatesTexts', e.stack)\n                }\n              )\n              .catch(e => {\n                console.log('Error: Manager.getTemplatesTexts', e.stack)\n              })\n          },\n          e => {\n            console.log('Manager.getKeysFromSelect', e.stack)\n          }\n        )\n        .catch(e => {\n          console.log('Manager.getKeysFromSelect', e.stack)\n        })\n    })\n\n    return p\n  }\n\n  getStructureAndTemplates() {\n    return this._structureAndTemplates\n  }\n\n  updateStructureAndTemplates() {\n    this._structureAndTemplates = cmsTemplates.template.getStructureAndTemplates()\n  }\n\n  getThumbsList() {\n    if (typeof this._thumbs === 'undefined' || this._thumbs === null)\n      this._thumbs = cmsMedia.image.getThumbsList()\n    return this._thumbs\n  }\n\n  addThumbsToList(thumb) {\n    if (this._thumbs) this._thumbs.push(thumb)\n  }\n\n  getReferences() {\n    if (typeof this._references === 'undefined' || this._references === null)\n      this.updateReferences()\n    return this._references\n  }\n\n  getPrecontribution() {\n    return this._precontribution\n  }\n\n  getSlugs() {\n    return this._slugs\n  }\n\n  updateReferences(referenceName) {\n    var references = cmsReference.reference.getFiles()\n    if (referenceName && references[referenceName])\n      this._references[referenceName] = references[referenceName]\n    else this._references = references\n\n    return this\n  }\n\n  getList() {\n    return this._list\n  }\n\n  getListWithStatusOnFolder(status, subPath = '') {\n    let list = []\n    const subPathFull = `${subPath.replace(/^\\/|\\/$/g, '')}/`\n\n    Array.prototype.forEach.call(this._list, file => {\n      if (\n        typeof file[status] !== 'undefined' &&\n        file[status] !== null &&\n        ( subPath === '' || file.path.startsWith(subPathFull))\n      ) {\n        list.push(file)\n      }\n    })\n\n    return list\n  }\n\n  setList(list) {\n    this._list = list\n\n    return this\n  }\n\n  /**\n   * return true if postUrl is found in the Manager list\n   * @param {String} postUrl The url path of the file\n   */\n  postExist(postUrl) {\n    const docPath = cmsData.utils.getDocRelativePathFromPostUrl(postUrl)\n    const found = coreUtils.array.find(this._list, 'path', docPath)\n\n    if (found.length > 0) {\n      return true\n    }\n    return false\n  }\n\n  /**\n   * When a post is modified or created, this method is called so that the manager updates the list with the updated/new item\n   * @param {String} revisionPath The full path to the post\n   */\n  async updatePostInList(revisionPath) {\n    const docPath = cmsData.utils.getDocRelativePath(revisionPath)\n    const found = coreUtils.array.find(this._list, 'path', docPath)\n    const json = await cmsData.revision.getDoc(revisionPath)\n    let index\n    let merged = {}\n    let revision = cmsData.revision.getFileObject(revisionPath, json)\n    revision = cmsData.file.getAbeMeta(revision, json)\n    Array.prototype.forEach.call(this._whereKeys, key => {\n      var keyFirst = key.split('.')[0]\n      revision[keyFirst] = json[keyFirst]\n    })\n\n    if (found.length > 0) {\n      index = found[0]\n      merged[docPath] = this._list[index]\n      // If I publish, I remove the previous published versions\n      if (revision.abe_meta.status === 'publish') {\n        Array.prototype.forEach.call(\n          merged[docPath].revisions,\n          (revision, revIndex) => {\n            if (revision.abe_meta.status === 'publish') {\n              merged[docPath].revisions.splice(revIndex, 1)\n            }\n          }\n        )\n      }\n      merged[docPath].revisions.push(JSON.parse(JSON.stringify(revision)))\n      const sortedResult = cmsData.revision.sortRevisions(merged)\n      // Does the publish version has been removed (in the case of unpublish) ?\n      if (\n        sortedResult[0]['publish'] &&\n        !cmsData.revision.exist(sortedResult[0]['publish']['path'])\n      ) {\n        delete sortedResult[0]['publish']\n      }\n      this._list[index] = sortedResult[0]\n    } else {\n      index = this._list.length\n      let rev = []\n      rev.push(revision)\n      merged = cmsData.revision.mergeRevisions(rev)\n      const sortedResult = cmsData.revision.sortRevisions(merged)\n      this._list.push(sortedResult[0])\n    }\n\n    this._list.sort(coreUtils.sort.predicatBy('date', -1))\n    this.historize(index)\n  }\n\n  /**\n   * When data.history is set, we do keep the number of revisions = history in the most recent date order\n   * @param  {[type]} index [description]\n   * @return {[type]}       [description]\n   */\n  historize(index) {\n    if (config.data.history && config.data.history > 0) {\n      let arStatus = []\n      if (this._list[index].revisions.length > config.data.history) {\n        Array.prototype.forEach.call(\n          this._list[index].revisions,\n          (revision, revIndex) => {\n            if (revIndex >= config.data.history) {\n              if (revision.abe_meta.status === 'publish') {\n                if (arStatus.indexOf(revision.abe_meta.status) < 0) {\n                  arStatus.push(revision.abe_meta.status)\n                } else {\n                  this._list[index].revisions.splice(revIndex, 1)\n                }\n              } else {\n                this._list[index].revisions.splice(revIndex, 1)\n                cmsOperations.remove.removeRevision(revision.path)\n              }\n            } else if (arStatus.indexOf(revision.abe_meta.status) < 0) {\n              arStatus.push(revision.abe_meta.status)\n            }\n          }\n        )\n      }\n    }\n  }\n\n  /**\n   * When a post is deleted, this method is called so that the manager updates the list with the removed item\n   * @param {String} postUrl The URL of the post\n   */\n  removePostFromList(postUrl) {\n    const docPath = cmsData.utils.getDocRelativePathFromPostUrl(postUrl)\n    this._list = coreUtils.array.removeByAttr(this._list, 'path', docPath)\n  }\n\n  /**\n   * This method loads all posts into an array with values used in \"select\" statements from templates\n   * + abe_meta data\n   * @return {Array} Array of objects representing the posts including their revisions\n   */\n  async updateList() {\n    this._list = await cmsData.revision.getAllWithKeys(this._whereKeys)\n    this._list.sort(coreUtils.sort.predicatBy('date', -1))\n    console.log('Manager updated')\n  }\n\n  getPage(\n    start = 0,\n    length = 20,\n    sortField = 'date',\n    sortDir = -1,\n    search = '',\n    searchFields = ['abe_meta.link', 'abe_meta.template', 'name']\n  ) {\n    const total = this._list.length\n    let totalFiltered = total\n    let list = this._list.slice()\n\n    if (search !== '') {\n      const searches = search.split(' ')\n      for (var i = 0; i < searches.length; i++) {\n        list = coreUtils.array.facet(list, searchFields, searches[i])\n      }\n\n      totalFiltered = list.length\n    }\n\n    if (sortField != 'date' || sortDir != -1) {\n      list.sort(coreUtils.sort.predicatBy(sortField, sortDir))\n    }\n\n    list = list.slice(start, start + length)\n\n    return {\n      recordsTotal: total,\n      recordsFiltered: totalFiltered,\n      data: list\n    }\n  }\n\n  addProcess(name) {\n    this._processesRunning[name] = true\n  }\n\n  removeProcess(name) {\n    delete this._processesRunning[name]\n  }\n\n  isProcessRunning(name) {\n    if (\n      this._processesRunning[name] !== null &&\n      this._processesRunning[name] === true\n    ) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  getActivities() {\n    return User.utils.getActivity()\n  }\n\n  addActivity(activity) {\n    User.utils.addActivity(activity)\n  }\n\n  getConnections() {\n    return this.connections\n  }\n\n  addConnection(res) {\n    this.connections.push(res)\n  }\n\n  removeConnection(res) {\n    var i = this.connections.indexOf(res)\n    if (i !== -1) {\n      this.connections.splice(i, 1)\n    }\n  }\n}\n\nexport default Manager\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"407fd234b4845b69a831d1d36f26dcf0450867a8","contentHash":"99c890df2550768e9a49a7d673274405e666d2a9cccbc2e51bd3628dd1b4685f"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/Page.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/Page.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":23},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":18},"end":{"line":12,"column":63}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":51}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":58}},"7":{"start":{"line":18,"column":8},"end":{"line":18,"column":22}},"8":{"start":{"line":33,"column":0},"end":{"line":77,"column":1}},"9":{"start":{"line":34,"column":17},"end":{"line":34,"column":89}},"10":{"start":{"line":35,"column":2},"end":{"line":35,"column":47}},"11":{"start":{"line":36,"column":2},"end":{"line":36,"column":68}},"12":{"start":{"line":37,"column":2},"end":{"line":37,"column":38}},"13":{"start":{"line":38,"column":2},"end":{"line":38,"column":28}},"14":{"start":{"line":39,"column":2},"end":{"line":39,"column":27}},"15":{"start":{"line":41,"column":2},"end":{"line":41,"column":75}},"16":{"start":{"line":43,"column":2},"end":{"line":43,"column":78}},"17":{"start":{"line":45,"column":2},"end":{"line":54,"column":3}},"18":{"start":{"line":48,"column":4},"end":{"line":48,"column":86}},"19":{"start":{"line":49,"column":4},"end":{"line":49,"column":90}},"20":{"start":{"line":50,"column":4},"end":{"line":50,"column":83}},"21":{"start":{"line":51,"column":4},"end":{"line":51,"column":84}},"22":{"start":{"line":53,"column":4},"end":{"line":53,"column":86}},"23":{"start":{"line":57,"column":2},"end":{"line":57,"column":94}},"24":{"start":{"line":59,"column":2},"end":{"line":59,"column":65}},"25":{"start":{"line":61,"column":2},"end":{"line":61,"column":76}},"26":{"start":{"line":63,"column":25},"end":{"line":63,"column":127}},"27":{"start":{"line":66,"column":2},"end":{"line":70,"column":5}},"28":{"start":{"line":72,"column":2},"end":{"line":76,"column":3}},"29":{"start":{"line":73,"column":4},"end":{"line":73,"column":92}},"30":{"start":{"line":75,"column":4},"end":{"line":75,"column":94}},"31":{"start":{"line":79,"column":0},"end":{"line":79,"column":26}}},"fnMap":{"0":{"name":"Page","decl":{"start":{"line":33,"column":9},"end":{"line":33,"column":13}},"loc":{"start":{"line":33,"column":30},"end":{"line":77,"column":1}},"line":33}},"branchMap":{"0":{"loc":{"start":{"line":34,"column":17},"end":{"line":34,"column":89}},"type":"cond-expr","locations":[{"start":{"line":34,"column":70},"end":{"line":34,"column":82}},{"start":{"line":34,"column":85},"end":{"line":34,"column":89}}],"line":34},"1":{"loc":{"start":{"line":34,"column":17},"end":{"line":34,"column":67}},"type":"binary-expr","locations":[{"start":{"line":34,"column":17},"end":{"line":34,"column":37}},{"start":{"line":34,"column":41},"end":{"line":34,"column":67}}],"line":34},"2":{"loc":{"start":{"line":45,"column":2},"end":{"line":54,"column":3}},"type":"if","locations":[{"start":{"line":45,"column":2},"end":{"line":54,"column":3}},{"start":{"line":45,"column":2},"end":{"line":54,"column":3}}],"line":45},"3":{"loc":{"start":{"line":72,"column":2},"end":{"line":76,"column":3}},"type":"if","locations":[{"start":{"line":72,"column":2},"end":{"line":76,"column":3}},{"start":{"line":72,"column":2},"end":{"line":76,"column":3}}],"line":72}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":2,"14":2,"15":2,"16":2,"17":2,"18":0,"19":0,"20":0,"21":0,"22":2,"23":2,"24":2,"25":2,"26":2,"27":2,"28":2,"29":2,"30":0,"31":1},"f":{"0":2},"b":{"0":[2,0],"1":[2,2],"2":[0,2],"3":[2,0]},"inputSourceMap":{"version":3,"sources":["Page.js"],"names":["Page","template","json","onlyHTML","abeExtend","hooks","instance","trigger","abeEngine","content","_onlyHTML","cmsTemplates","prepare","removeHiddenAbeTag","replace","addAbeHtmlTagBetweenAbeTags","addAbeDataAttrForHtmlAttributes","addAbeDataAttrForHtmlTag","addAbeSourceComment","removeHandlebarsRawFromHtml","indexEachBlocks","cmsData","source","removeDataList","replaceAbeEachIndex","compiledTemplate","Handlebars","compile","insertDebugtoolUtilities","html","data","intl","config","intlData"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AAEA;;;;IAIqBA,I;AACnB;;;;;;;;AAQA,cAAYC,QAAZ,EAAsBC,IAAtB,EAA6C;AAAA,MAAjBC,QAAiB,uEAAN,IAAM;AAAA;AAC3CD,EAAAA,IAAI,GAAGE,YAAUC,KAAV,CAAgBC,QAAhB,CAAyBC,OAAzB,CAAiC,gBAAjC,EAAmDL,IAAnD,CAAP;AAEAM,cAAUF,QAAV,CAAmBG,OAAnB,GAA6BP,IAA7B;AAEA,OAAKQ,SAAL,GAAiBP,QAAjB;AACA,OAAKF,QAAL,GAAgBA,QAAhB,CAN2C,CAQ3C;;AACA,OAAKA,QAAL,GAAgBU,eAAaC,OAAb,CAAqBC,kBAArB,CAAwC,KAAKZ,QAA7C,CAAhB,CAT2C,CAW3C;;AACA,OAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAca,OAAd,CAAsB,gCAAtB,EAAwD,EAAxD,CAAhB;;AACA,MAAI,CAAC,KAAKJ,SAAV,EAAqB;AACnB;AACA;AACA,SAAKT,QAAL,GAAgBU,eAAaC,OAAb,CAAqBG,2BAArB,CACd,KAAKd,QADS,CAAhB;AAIA,SAAKA,QAAL,GAAgBU,eAAaC,OAAb,CAAqBI,+BAArB,CACd,KAAKf,QADS,CAAhB;AAIA,SAAKA,QAAL,GAAgBU,eAAaC,OAAb,CAAqBK,wBAArB,CACd,KAAKhB,QADS,CAAhB;AAIA,SAAKA,QAAL,GAAgBU,eAAaC,OAAb,CAAqBM,mBAArB,CACd,KAAKjB,QADS,EAEdC,IAFc,CAAhB;AAID,GAnBD,MAmBO;AACL,SAAKD,QAAL,GAAgBU,eAAaC,OAAb,CAAqBO,2BAArB,CACd,KAAKlB,QADS,CAAhB;AAGD,GApC0C,CAsC3C;;;AACA,OAAKA,QAAL,GAAgBU,eAAaC,OAAb,CAAqBQ,eAArB,CACd,KAAKnB,QADS,EAEdC,IAFc,EAGd,KAAKQ,SAHS,CAAhB,CAvC2C,CA6C3C;;AACA,OAAKT,QAAL,GAAgBoB,UAAQC,MAAR,CAAeC,cAAf,CAA8B,KAAKtB,QAAnC,CAAhB,CA9C2C,CAgD3C;;AACA,OAAKA,QAAL,GAAgBU,eAAaC,OAAb,CAAqBY,mBAArB,CAAyC,KAAKvB,QAA9C,CAAhB,CAjD2C,CAmD3C;;AACA,MAAIwB,gBAAgB,GAAGC,uBAAWC,OAAX,CACrBhB,eAAaiB,wBAAb,CAAsC,KAAK3B,QAA3C,EAAqD,KAAKS,SAA1D,CADqB,CAAvB,CApD2C,CAwD3C;;;AACA,OAAKmB,IAAL,GAAYJ,gBAAgB,CAACvB,IAAD,EAAO;AAAC4B,IAAAA,IAAI,EAAE;AAACC,MAAAA,IAAI,EAAEC,SAAOC;AAAd;AAAP,GAAP,CAA5B;;AAEA,MAAI,KAAKvB,SAAT,EAAoB;AAClB,SAAKmB,IAAL,GAAYzB,YAAUC,KAAV,CAAgBC,QAAhB,CAAyBC,OAAzB,CACV,sBADU,EAEV,KAAKsB,IAFK,EAGV3B,IAHU,CAAZ;AAKD,GAND,MAMO;AACL,SAAK2B,IAAL,GAAYzB,YAAUC,KAAV,CAAgBC,QAAhB,CAAyBC,OAAzB,CACV,wBADU,EAEV,KAAKsB,IAFK,EAGV3B,IAHU,CAAZ;AAKD;AACF,C","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/","sourcesContent":["import Handlebars from 'handlebars'\nimport path from 'path'\nimport fse from 'fs-extra'\n\nimport {abeEngine, cmsData, cmsTemplates, config, abeExtend, Manager} from '../'\n\n/**\n * Page class\n * manage HTML generation for page template\n */\nexport default class Page {\n  /**\n   * Create new page object\n   * @param  {Object} params req.params from express route\n   * @param  {Object} i18n translation\n   * @param  {Function} callback \n   * @param  {Boolean} onlyHTML default = true, if false HTML content will be prepared for edition (contains abe attributes)\n   * @return {String} HTML page as string\n   */\n  constructor(template, json, onlyHTML = true) {\n    json = abeExtend.hooks.instance.trigger('beforePageJson', json)\n\n    abeEngine.instance.content = json\n\n    this._onlyHTML = onlyHTML\n    this.template = template\n\n    // Remove text with attribute \"visible=false\"\n    this.template = cmsTemplates.prepare.removeHiddenAbeTag(this.template)\n\n    // remove abe type=\"slug\" from template\n    this.template = this.template.replace(/({{abe.*type=[\\'|\\\"]slug.*}})/g, '')\n    if (!this._onlyHTML) {\n      // Surrounds each Abe tag (which are text/rich/textarea and not in html attribute) with <abe> tag\n      // ie. <title><abe>{{abe type='text' key='meta_title' desc='Meta title' tab='Meta' order='4000'}}</abe></title>\n      this.template = cmsTemplates.prepare.addAbeHtmlTagBetweenAbeTags(\n        this.template\n      )\n\n      this.template = cmsTemplates.prepare.addAbeDataAttrForHtmlAttributes(\n        this.template\n      )\n\n      this.template = cmsTemplates.prepare.addAbeDataAttrForHtmlTag(\n        this.template\n      )\n\n      this.template = cmsTemplates.prepare.addAbeSourceComment(\n        this.template,\n        json\n      )\n    } else {\n      this.template = cmsTemplates.prepare.removeHandlebarsRawFromHtml(\n        this.template\n      )\n    }\n\n    // je rajoute les index pour chaque bloc li  un each\n    this.template = cmsTemplates.prepare.indexEachBlocks(\n      this.template,\n      json,\n      this._onlyHTML\n    )\n\n    // We remove the {{abe type=data ...}} from the text\n    this.template = cmsData.source.removeDataList(this.template)\n\n    // It's time to replace the [index] by {{@index}} (concerning each blocks)\n    this.template = cmsTemplates.prepare.replaceAbeEachIndex(this.template)\n\n    // I compile the text\n    var compiledTemplate = Handlebars.compile(\n      cmsTemplates.insertDebugtoolUtilities(this.template, this._onlyHTML)\n    )\n\n    // I create the html page ! yeah !!!\n    this.html = compiledTemplate(json, {data: {intl: config.intlData}})\n\n    if (this._onlyHTML) {\n      this.html = abeExtend.hooks.instance.trigger(\n        'afterPageSaveCompile',\n        this.html,\n        json\n      )\n    } else {\n      this.html = abeExtend.hooks.instance.trigger(\n        'afterPageEditorCompile',\n        this.html,\n        json\n      )\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"11ea7ba9a35737d7e9a0eb573e66ac5aafcb2911","contentHash":"e253d513f3d63ae282bcfc04328f8b5192f23bf6f20ed171e83781243e26dc77"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/config/config.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/config/config.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":58}},"4":{"start":{"line":12,"column":16},"end":{"line":12,"column":60}},"5":{"start":{"line":14,"column":14},"end":{"line":14,"column":55}},"6":{"start":{"line":16,"column":12},"end":{"line":16,"column":51}},"7":{"start":{"line":18,"column":14},"end":{"line":18,"column":62}},"8":{"start":{"line":20,"column":13},"end":{"line":20,"column":31}},"9":{"start":{"line":21,"column":0},"end":{"line":21,"column":28}},"10":{"start":{"line":23,"column":0},"end":{"line":25,"column":1}},"11":{"start":{"line":24,"column":2},"end":{"line":24,"column":52}},"12":{"start":{"line":27,"column":18},"end":{"line":27,"column":23}},"13":{"start":{"line":29,"column":22},"end":{"line":60,"column":1}},"14":{"start":{"line":30,"column":22},"end":{"line":30,"column":68}},"15":{"start":{"line":32,"column":2},"end":{"line":59,"column":3}},"16":{"start":{"line":33,"column":4},"end":{"line":58,"column":5}},"17":{"start":{"line":34,"column":17},"end":{"line":34,"column":58}},"18":{"start":{"line":36,"column":6},"end":{"line":54,"column":7}},"19":{"start":{"line":37,"column":8},"end":{"line":53,"column":9}},"20":{"start":{"line":38,"column":10},"end":{"line":38,"column":61}},"21":{"start":{"line":40,"column":10},"end":{"line":44,"column":11}},"22":{"start":{"line":41,"column":23},"end":{"line":41,"column":70}},"23":{"start":{"line":43,"column":12},"end":{"line":43,"column":65}},"24":{"start":{"line":46,"column":10},"end":{"line":52,"column":11}},"25":{"start":{"line":47,"column":12},"end":{"line":47,"column":31}},"26":{"start":{"line":56,"column":6},"end":{"line":56,"column":38}},"27":{"start":{"line":57,"column":6},"end":{"line":57,"column":21}},"28":{"start":{"line":62,"column":0},"end":{"line":62,"column":24}},"29":{"start":{"line":64,"column":0},"end":{"line":81,"column":2}},"30":{"start":{"line":65,"column":10},"end":{"line":65,"column":25}},"31":{"start":{"line":66,"column":16},"end":{"line":66,"column":20}},"32":{"start":{"line":68,"column":2},"end":{"line":80,"column":3}},"33":{"start":{"line":69,"column":4},"end":{"line":76,"column":7}},"34":{"start":{"line":70,"column":6},"end":{"line":75,"column":7}},"35":{"start":{"line":71,"column":8},"end":{"line":71,"column":29}},"36":{"start":{"line":73,"column":8},"end":{"line":73,"column":24}},"37":{"start":{"line":74,"column":8},"end":{"line":74,"column":21}},"38":{"start":{"line":77,"column":4},"end":{"line":77,"column":19}},"39":{"start":{"line":79,"column":4},"end":{"line":79,"column":17}},"40":{"start":{"line":83,"column":0},"end":{"line":105,"column":2}},"41":{"start":{"line":84,"column":2},"end":{"line":102,"column":3}},"42":{"start":{"line":85,"column":4},"end":{"line":101,"column":5}},"43":{"start":{"line":86,"column":17},"end":{"line":86,"column":58}},"44":{"start":{"line":88,"column":6},"end":{"line":98,"column":7}},"45":{"start":{"line":89,"column":8},"end":{"line":97,"column":9}},"46":{"start":{"line":90,"column":10},"end":{"line":90,"column":94}},"47":{"start":{"line":92,"column":10},"end":{"line":94,"column":11}},"48":{"start":{"line":93,"column":12},"end":{"line":93,"column":24}},"49":{"start":{"line":96,"column":10},"end":{"line":96,"column":23}},"50":{"start":{"line":100,"column":6},"end":{"line":100,"column":19}},"51":{"start":{"line":104,"column":2},"end":{"line":104,"column":15}},"52":{"start":{"line":107,"column":0},"end":{"line":113,"column":2}},"53":{"start":{"line":108,"column":2},"end":{"line":112,"column":3}},"54":{"start":{"line":109,"column":4},"end":{"line":109,"column":92}},"55":{"start":{"line":111,"column":4},"end":{"line":111,"column":14}},"56":{"start":{"line":115,"column":0},"end":{"line":117,"column":2}},"57":{"start":{"line":116,"column":2},"end":{"line":116,"column":22}},"58":{"start":{"line":119,"column":0},"end":{"line":121,"column":2}},"59":{"start":{"line":120,"column":2},"end":{"line":120,"column":36}},"60":{"start":{"line":123,"column":0},"end":{"line":126,"column":2}},"61":{"start":{"line":124,"column":2},"end":{"line":124,"column":46}},"62":{"start":{"line":125,"column":2},"end":{"line":125,"column":26}},"63":{"start":{"line":128,"column":0},"end":{"line":132,"column":2}},"64":{"start":{"line":129,"column":18},"end":{"line":129,"column":41}},"65":{"start":{"line":130,"column":2},"end":{"line":130,"column":49}},"66":{"start":{"line":131,"column":2},"end":{"line":131,"column":25}},"67":{"start":{"line":134,"column":0},"end":{"line":143,"column":2}},"68":{"start":{"line":135,"column":17},"end":{"line":135,"column":63}},"69":{"start":{"line":137,"column":2},"end":{"line":140,"column":5}},"70":{"start":{"line":142,"column":2},"end":{"line":142,"column":26}},"71":{"start":{"line":145,"column":0},"end":{"line":189,"column":2}},"72":{"start":{"line":146,"column":22},"end":{"line":146,"column":63}},"73":{"start":{"line":147,"column":21},"end":{"line":149,"column":3}},"74":{"start":{"line":150,"column":20},"end":{"line":150,"column":68}},"75":{"start":{"line":152,"column":2},"end":{"line":186,"column":3}},"76":{"start":{"line":153,"column":4},"end":{"line":185,"column":5}},"77":{"start":{"line":155,"column":8},"end":{"line":155,"column":61}},"78":{"start":{"line":156,"column":8},"end":{"line":156,"column":14}},"79":{"start":{"line":159,"column":8},"end":{"line":159,"column":62}},"80":{"start":{"line":160,"column":8},"end":{"line":160,"column":14}},"81":{"start":{"line":163,"column":8},"end":{"line":163,"column":62}},"82":{"start":{"line":164,"column":8},"end":{"line":164,"column":14}},"83":{"start":{"line":167,"column":8},"end":{"line":167,"column":57}},"84":{"start":{"line":168,"column":8},"end":{"line":168,"column":14}},"85":{"start":{"line":171,"column":8},"end":{"line":171,"column":60}},"86":{"start":{"line":172,"column":8},"end":{"line":172,"column":14}},"87":{"start":{"line":175,"column":8},"end":{"line":179,"column":10}},"88":{"start":{"line":180,"column":8},"end":{"line":180,"column":14}},"89":{"start":{"line":183,"column":8},"end":{"line":183,"column":59}},"90":{"start":{"line":184,"column":8},"end":{"line":184,"column":14}},"91":{"start":{"line":188,"column":2},"end":{"line":188,"column":22}},"92":{"start":{"line":191,"column":15},"end":{"line":191,"column":21}},"93":{"start":{"line":192,"column":0},"end":{"line":192,"column":30}}},"fnMap":{"0":{"name":"loadLocalConfig","decl":{"start":{"line":29,"column":31},"end":{"line":29,"column":46}},"loc":{"start":{"line":29,"column":55},"end":{"line":60,"column":1}},"line":29},"1":{"name":"(anonymous_1)","decl":{"start":{"line":64,"column":15},"end":{"line":64,"column":16}},"loc":{"start":{"line":64,"column":37},"end":{"line":81,"column":1}},"line":64},"2":{"name":"(anonymous_2)","decl":{"start":{"line":69,"column":36},"end":{"line":69,"column":37}},"loc":{"start":{"line":69,"column":49},"end":{"line":76,"column":5}},"line":69},"3":{"name":"(anonymous_3)","decl":{"start":{"line":83,"column":26},"end":{"line":83,"column":27}},"loc":{"start":{"line":83,"column":38},"end":{"line":105,"column":1}},"line":83},"4":{"name":"(anonymous_4)","decl":{"start":{"line":107,"column":24},"end":{"line":107,"column":25}},"loc":{"start":{"line":107,"column":36},"end":{"line":113,"column":1}},"line":107},"5":{"name":"(anonymous_5)","decl":{"start":{"line":115,"column":20},"end":{"line":115,"column":21}},"loc":{"start":{"line":115,"column":36},"end":{"line":117,"column":1}},"line":115},"6":{"name":"(anonymous_6)","decl":{"start":{"line":119,"column":13},"end":{"line":119,"column":14}},"loc":{"start":{"line":119,"column":29},"end":{"line":121,"column":1}},"line":119},"7":{"name":"(anonymous_7)","decl":{"start":{"line":123,"column":13},"end":{"line":123,"column":14}},"loc":{"start":{"line":123,"column":29},"end":{"line":126,"column":1}},"line":123},"8":{"name":"(anonymous_8)","decl":{"start":{"line":128,"column":16},"end":{"line":128,"column":17}},"loc":{"start":{"line":128,"column":32},"end":{"line":132,"column":1}},"line":128},"9":{"name":"(anonymous_9)","decl":{"start":{"line":134,"column":14},"end":{"line":134,"column":15}},"loc":{"start":{"line":134,"column":30},"end":{"line":143,"column":1}},"line":134},"10":{"name":"(anonymous_10)","decl":{"start":{"line":145,"column":28},"end":{"line":145,"column":29}},"loc":{"start":{"line":145,"column":40},"end":{"line":189,"column":1}},"line":145}},"branchMap":{"0":{"loc":{"start":{"line":23,"column":0},"end":{"line":25,"column":1}},"type":"if","locations":[{"start":{"line":23,"column":0},"end":{"line":25,"column":1}},{"start":{"line":23,"column":0},"end":{"line":25,"column":1}}],"line":23},"1":{"loc":{"start":{"line":32,"column":2},"end":{"line":59,"column":3}},"type":"if","locations":[{"start":{"line":32,"column":2},"end":{"line":59,"column":3}},{"start":{"line":32,"column":2},"end":{"line":59,"column":3}}],"line":32},"2":{"loc":{"start":{"line":36,"column":6},"end":{"line":54,"column":7}},"type":"if","locations":[{"start":{"line":36,"column":6},"end":{"line":54,"column":7}},{"start":{"line":36,"column":6},"end":{"line":54,"column":7}}],"line":36},"3":{"loc":{"start":{"line":36,"column":10},"end":{"line":36,"column":36}},"type":"binary-expr","locations":[{"start":{"line":36,"column":10},"end":{"line":36,"column":14}},{"start":{"line":36,"column":18},"end":{"line":36,"column":36}}],"line":36},"4":{"loc":{"start":{"line":40,"column":10},"end":{"line":44,"column":11}},"type":"if","locations":[{"start":{"line":40,"column":10},"end":{"line":44,"column":11}},{"start":{"line":40,"column":10},"end":{"line":44,"column":11}}],"line":40},"5":{"loc":{"start":{"line":46,"column":10},"end":{"line":52,"column":11}},"type":"if","locations":[{"start":{"line":46,"column":10},"end":{"line":52,"column":11}},{"start":{"line":46,"column":10},"end":{"line":52,"column":11}}],"line":46},"6":{"loc":{"start":{"line":68,"column":2},"end":{"line":80,"column":3}},"type":"if","locations":[{"start":{"line":68,"column":2},"end":{"line":80,"column":3}},{"start":{"line":68,"column":2},"end":{"line":80,"column":3}}],"line":68},"7":{"loc":{"start":{"line":68,"column":6},"end":{"line":68,"column":56}},"type":"binary-expr","locations":[{"start":{"line":68,"column":6},"end":{"line":68,"column":36}},{"start":{"line":68,"column":40},"end":{"line":68,"column":56}}],"line":68},"8":{"loc":{"start":{"line":70,"column":6},"end":{"line":75,"column":7}},"type":"if","locations":[{"start":{"line":70,"column":6},"end":{"line":75,"column":7}},{"start":{"line":70,"column":6},"end":{"line":75,"column":7}}],"line":70},"9":{"loc":{"start":{"line":70,"column":10},"end":{"line":70,"column":87}},"type":"binary-expr","locations":[{"start":{"line":70,"column":10},"end":{"line":70,"column":27}},{"start":{"line":70,"column":31},"end":{"line":70,"column":64}},{"start":{"line":70,"column":68},"end":{"line":70,"column":87}}],"line":70},"10":{"loc":{"start":{"line":84,"column":2},"end":{"line":102,"column":3}},"type":"if","locations":[{"start":{"line":84,"column":2},"end":{"line":102,"column":3}},{"start":{"line":84,"column":2},"end":{"line":102,"column":3}}],"line":84},"11":{"loc":{"start":{"line":88,"column":6},"end":{"line":98,"column":7}},"type":"if","locations":[{"start":{"line":88,"column":6},"end":{"line":98,"column":7}},{"start":{"line":88,"column":6},"end":{"line":98,"column":7}}],"line":88},"12":{"loc":{"start":{"line":88,"column":10},"end":{"line":88,"column":36}},"type":"binary-expr","locations":[{"start":{"line":88,"column":10},"end":{"line":88,"column":14}},{"start":{"line":88,"column":18},"end":{"line":88,"column":36}}],"line":88},"13":{"loc":{"start":{"line":92,"column":10},"end":{"line":94,"column":11}},"type":"if","locations":[{"start":{"line":92,"column":10},"end":{"line":94,"column":11}},{"start":{"line":92,"column":10},"end":{"line":94,"column":11}}],"line":92},"14":{"loc":{"start":{"line":108,"column":2},"end":{"line":112,"column":3}},"type":"if","locations":[{"start":{"line":108,"column":2},"end":{"line":112,"column":3}},{"start":{"line":108,"column":2},"end":{"line":112,"column":3}}],"line":108},"15":{"loc":{"start":{"line":153,"column":4},"end":{"line":185,"column":5}},"type":"switch","locations":[{"start":{"line":154,"column":6},"end":{"line":156,"column":14}},{"start":{"line":158,"column":6},"end":{"line":160,"column":14}},{"start":{"line":162,"column":6},"end":{"line":164,"column":14}},{"start":{"line":166,"column":6},"end":{"line":168,"column":14}},{"start":{"line":170,"column":6},"end":{"line":172,"column":14}},{"start":{"line":174,"column":6},"end":{"line":180,"column":14}},{"start":{"line":182,"column":6},"end":{"line":184,"column":14}}],"line":153}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":1,"13":1,"14":52,"15":52,"16":52,"17":52,"18":52,"19":52,"20":52,"21":51,"22":51,"23":51,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":2,"32":2,"33":2,"34":4,"35":3,"36":1,"37":1,"38":2,"39":0,"40":1,"41":11,"42":11,"43":11,"44":11,"45":11,"46":11,"47":11,"48":11,"49":0,"50":0,"51":0,"52":1,"53":6,"54":6,"55":0,"56":1,"57":0,"58":1,"59":0,"60":1,"61":48,"62":48,"63":1,"64":0,"65":0,"66":0,"67":1,"68":3,"69":3,"70":3,"71":1,"72":1,"73":1,"74":1,"75":1,"76":42,"77":1,"78":1,"79":0,"80":0,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1},"f":{"0":52,"1":2,"2":4,"3":11,"4":6,"5":0,"6":0,"7":48,"8":0,"9":3,"10":1},"b":{"0":[0,1],"1":[52,0],"2":[52,0],"3":[52,52],"4":[51,0],"5":[1,0],"6":[2,0],"7":[2,2],"8":[3,1],"9":[4,4,3],"10":[11,0],"11":[11,0],"12":[11,11],"13":[11,0],"14":[6,0],"15":[1,0,1,1,1,1,1]},"inputSourceMap":{"version":3,"sources":["config.js"],"names":["result","config","root","process","cwd","env","ROOT","replace","hintAbeJson","loadLocalConfig","abeConfigPath","path","join","stat","fse","statSync","isDirectory","json","readJsonSync","e","console","log","exist","conf","c","split","current","Array","prototype","forEach","call","localConfigExist","getLocalConfig","getDefault","get","set","extend","localConf","save","confPath","writeJsonSync","space","encoding","getConfigByWebsite","defaultConfig","configBySite","localConfig","item","intlData","templates","structure","data","publish","files","extension","upload"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/config/","sourcesContent":["import fse from 'fs-extra'\nimport clc from 'cli-color'\nimport extend from 'extend'\nimport path from 'path'\n\nimport config from './config.json'\n\nvar result = config\nresult.root = process.cwd()\nif (process.env.ROOT) {\n  result.root = process.env.ROOT.replace(/\\/$/, '')\n}\n\nvar hintAbeJson = false\n\nvar loadLocalConfig = result => {\n  const abeConfigPath = path.join(result.root, 'abe.json')\n  if (result.root !== '') {\n    try {\n      var stat = fse.statSync(result.root)\n      if (stat && stat.isDirectory()) {\n        try {\n          stat = fse.statSync(abeConfigPath)\n          if (stat) {\n            var json = fse.readJsonSync(abeConfigPath)\n            result = extend(true, result, json)\n          }\n        } catch (e) {\n          if (!hintAbeJson) {\n            hintAbeJson = true\n            // console.log(\n            //   clc.green('[ Hint ]'),\n            //   'you can create a specific config file named abe.json to customize your abe install',\n            //   clc.cyan.underline('https://github.com/abecms/abecms/blob/master/docs/abe-config.md')\n            // )\n          }\n        }\n      }\n    } catch (e) {\n      console.log('LoadConfig Error')\n      console.log(e)\n    }\n  }\n}\n\nloadLocalConfig(result)\n\nresult.exist = (conf, json) => {\n  var c = conf.split('.')\n  var current = json\n  if (typeof current !== 'undefined' && current !== null) {\n    Array.prototype.forEach.call(c, c => {\n      if (\n        current !== false &&\n        typeof current[c] !== 'undefined' &&\n        current[c] !== null\n      ) {\n        current = current[c]\n      } else {\n        current = false\n        return false\n      }\n    })\n    return current\n  } else {\n    return false\n  }\n}\n\nresult.localConfigExist = () => {\n  if (result.root !== '') {\n    try {\n      var stat = fse.statSync(result.root)\n      if (stat && stat.isDirectory()) {\n        try {\n          stat = fse.statSync(path.join(result.root, 'abe.json'))\n          if (stat) {\n            return true\n          }\n        } catch (e) {\n          return false\n        }\n      }\n    } catch (e) {\n      return false\n    }\n  }\n\n  return false\n}\n\nresult.getLocalConfig = () => {\n  if (result.localConfigExist()) {\n    return fse.readJsonSync(path.join(result.root, 'abe.json'))\n  } else {\n    return {}\n  }\n}\n\nresult.getDefault = conf => {\n  return result[conf]\n}\n\nresult.get = conf => {\n  return result.exist(conf, result)\n}\n\nresult.set = json => {\n  extend(true, result, json)\n  loadLocalConfig(result)\n}\n\nresult.extend = json => {\n  const localConf = result.getLocalConfig()\n  extend(true, localConf, json)\n  result.save(localConf)\n}\n\nresult.save = json => {\n  const confPath = path.join(result.root, 'abe.json')\n  fse.writeJsonSync(confPath, json, {space: 2, encoding: 'utf-8'})\n  loadLocalConfig(result)\n}\n\nresult.getConfigByWebsite = () => {\n  var defaultConfig = extend(true, {}, result)\n  var configBySite = {\n    default: {}\n  }\n\n  var localConfig = extend(true, {}, defaultConfig)\n  for (var item in localConfig) {\n    switch (item) {\n      case 'intlData':\n        configBySite.default.intlData = localConfig[item]\n        break\n      case 'templates':\n        configBySite.default.templates = localConfig[item]\n        break\n      case 'structure':\n        configBySite.default.structure = localConfig[item]\n        break\n      case 'data':\n        configBySite.default.data = localConfig[item]\n        break\n      case 'publish':\n        configBySite.default.publish = localConfig[item]\n        break\n      case 'files':\n        configBySite.default.files = {\n          templates: {\n            extension: localConfig[item].templates.extension\n          }\n        }\n        break\n      case 'upload':\n        configBySite.default.upload = localConfig[item]\n        break\n    }\n  }\n\n  return configBySite\n}\n\nexport default result\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d6be3f0358b635403cc87abbe9bb8898fdb02bec","contentHash":"909e7bd37cd32edb914d98e0c9037b77b550d53f4912d7dbd1aa927193471e01"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/database/mongo.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/database/mongo.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":42}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":22}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":24}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":40}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":22}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":38}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":40}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":28}},"10":{"start":{"line":17,"column":19},"end":{"line":17,"column":80}},"11":{"start":{"line":19,"column":25},"end":{"line":19,"column":99}},"12":{"start":{"line":21,"column":9},"end":{"line":21,"column":26}},"13":{"start":{"line":23,"column":12},"end":{"line":23,"column":51}},"14":{"start":{"line":25,"column":15},"end":{"line":25,"column":33}},"15":{"start":{"line":27,"column":14},"end":{"line":27,"column":55}},"16":{"start":{"line":29,"column":14},"end":{"line":32,"column":1}},"17":{"start":{"line":33,"column":10},"end":{"line":33,"column":260}},"18":{"start":{"line":38,"column":2},"end":{"line":40,"column":3}},"19":{"start":{"line":39,"column":4},"end":{"line":39,"column":41}},"20":{"start":{"line":42,"column":2},"end":{"line":49,"column":5}},"21":{"start":{"line":43,"column":4},"end":{"line":45,"column":5}},"22":{"start":{"line":44,"column":6},"end":{"line":44,"column":27}},"23":{"start":{"line":47,"column":4},"end":{"line":47,"column":89}},"24":{"start":{"line":48,"column":4},"end":{"line":48,"column":25}},"25":{"start":{"line":53,"column":2},"end":{"line":53,"column":13}},"26":{"start":{"line":57,"column":2},"end":{"line":57,"column":40}},"27":{"start":{"line":61,"column":2},"end":{"line":106,"column":6}},"28":{"start":{"line":63,"column":4},"end":{"line":105,"column":33}},"29":{"start":{"line":64,"column":6},"end":{"line":104,"column":7}},"30":{"start":{"line":65,"column":8},"end":{"line":103,"column":9}},"31":{"start":{"line":67,"column":12},"end":{"line":67,"column":74}},"32":{"start":{"line":68,"column":12},"end":{"line":68,"column":34}},"33":{"start":{"line":69,"column":12},"end":{"line":69,"column":43}},"34":{"start":{"line":70,"column":12},"end":{"line":70,"column":22}},"35":{"start":{"line":71,"column":12},"end":{"line":71,"column":30}},"36":{"start":{"line":72,"column":12},"end":{"line":72,"column":30}},"37":{"start":{"line":73,"column":12},"end":{"line":75,"column":15}},"38":{"start":{"line":78,"column":12},"end":{"line":78,"column":32}},"39":{"start":{"line":80,"column":12},"end":{"line":87,"column":13}},"40":{"start":{"line":81,"column":14},"end":{"line":81,"column":30}},"41":{"start":{"line":82,"column":14},"end":{"line":82,"column":35}},"42":{"start":{"line":84,"column":14},"end":{"line":86,"column":16}},"43":{"start":{"line":89,"column":12},"end":{"line":89,"column":31}},"44":{"start":{"line":90,"column":12},"end":{"line":90,"column":18}},"45":{"start":{"line":93,"column":12},"end":{"line":93,"column":31}},"46":{"start":{"line":94,"column":12},"end":{"line":94,"column":47}},"47":{"start":{"line":95,"column":12},"end":{"line":95,"column":39}},"48":{"start":{"line":98,"column":12},"end":{"line":98,"column":51}},"49":{"start":{"line":102,"column":12},"end":{"line":102,"column":35}},"50":{"start":{"line":107,"column":2},"end":{"line":107,"column":40}},"51":{"start":{"line":111,"column":2},"end":{"line":111,"column":48}},"52":{"start":{"line":115,"column":2},"end":{"line":148,"column":6}},"53":{"start":{"line":117,"column":4},"end":{"line":147,"column":17}},"54":{"start":{"line":118,"column":6},"end":{"line":146,"column":7}},"55":{"start":{"line":119,"column":8},"end":{"line":145,"column":9}},"56":{"start":{"line":121,"column":12},"end":{"line":121,"column":34}},"57":{"start":{"line":122,"column":12},"end":{"line":122,"column":43}},"58":{"start":{"line":123,"column":12},"end":{"line":123,"column":31}},"59":{"start":{"line":124,"column":12},"end":{"line":124,"column":42}},"60":{"start":{"line":127,"column":12},"end":{"line":127,"column":34}},"61":{"start":{"line":128,"column":12},"end":{"line":128,"column":25}},"62":{"start":{"line":130,"column":12},"end":{"line":138,"column":13}},"63":{"start":{"line":131,"column":14},"end":{"line":131,"column":35}},"64":{"start":{"line":132,"column":14},"end":{"line":135,"column":16}},"65":{"start":{"line":136,"column":14},"end":{"line":136,"column":73}},"66":{"start":{"line":137,"column":14},"end":{"line":137,"column":39}},"67":{"start":{"line":140,"column":12},"end":{"line":140,"column":55}},"68":{"start":{"line":144,"column":12},"end":{"line":144,"column":36}},"69":{"start":{"line":149,"column":2},"end":{"line":149,"column":48}},"70":{"start":{"line":153,"column":2},"end":{"line":153,"column":39}},"71":{"start":{"line":157,"column":2},"end":{"line":197,"column":6}},"72":{"start":{"line":159,"column":4},"end":{"line":196,"column":34}},"73":{"start":{"line":160,"column":6},"end":{"line":195,"column":7}},"74":{"start":{"line":161,"column":8},"end":{"line":194,"column":9}},"75":{"start":{"line":163,"column":12},"end":{"line":163,"column":74}},"76":{"start":{"line":164,"column":12},"end":{"line":164,"column":27}},"77":{"start":{"line":165,"column":12},"end":{"line":165,"column":34}},"78":{"start":{"line":166,"column":12},"end":{"line":166,"column":43}},"79":{"start":{"line":167,"column":12},"end":{"line":167,"column":31}},"80":{"start":{"line":168,"column":12},"end":{"line":168,"column":31}},"81":{"start":{"line":169,"column":12},"end":{"line":171,"column":15}},"82":{"start":{"line":174,"column":12},"end":{"line":174,"column":33}},"83":{"start":{"line":176,"column":12},"end":{"line":178,"column":13}},"84":{"start":{"line":177,"column":14},"end":{"line":177,"column":28}},"85":{"start":{"line":180,"column":12},"end":{"line":180,"column":32}},"86":{"start":{"line":181,"column":12},"end":{"line":181,"column":18}},"87":{"start":{"line":184,"column":12},"end":{"line":184,"column":32}},"88":{"start":{"line":185,"column":12},"end":{"line":185,"column":49}},"89":{"start":{"line":186,"column":12},"end":{"line":186,"column":40}},"90":{"start":{"line":189,"column":12},"end":{"line":189,"column":54}},"91":{"start":{"line":193,"column":12},"end":{"line":193,"column":36}},"92":{"start":{"line":198,"column":2},"end":{"line":198,"column":39}},"93":{"start":{"line":202,"column":13},"end":{"line":202,"column":49}},"94":{"start":{"line":204,"column":2},"end":{"line":204,"column":45}},"95":{"start":{"line":205,"column":13},"end":{"line":205,"column":29}},"96":{"start":{"line":206,"column":19},"end":{"line":210,"column":3}},"97":{"start":{"line":211,"column":2},"end":{"line":211,"column":20}},"98":{"start":{"line":215,"column":2},"end":{"line":215,"column":48}},"99":{"start":{"line":219,"column":2},"end":{"line":249,"column":6}},"100":{"start":{"line":221,"column":4},"end":{"line":248,"column":33}},"101":{"start":{"line":222,"column":6},"end":{"line":247,"column":7}},"102":{"start":{"line":223,"column":8},"end":{"line":246,"column":9}},"103":{"start":{"line":225,"column":12},"end":{"line":225,"column":34}},"104":{"start":{"line":226,"column":12},"end":{"line":226,"column":43}},"105":{"start":{"line":227,"column":12},"end":{"line":227,"column":31}},"106":{"start":{"line":228,"column":12},"end":{"line":228,"column":31}},"107":{"start":{"line":229,"column":12},"end":{"line":231,"column":15}},"108":{"start":{"line":234,"column":12},"end":{"line":234,"column":32}},"109":{"start":{"line":235,"column":12},"end":{"line":235,"column":18}},"110":{"start":{"line":238,"column":12},"end":{"line":238,"column":31}},"111":{"start":{"line":239,"column":12},"end":{"line":239,"column":49}},"112":{"start":{"line":240,"column":12},"end":{"line":240,"column":40}},"113":{"start":{"line":241,"column":12},"end":{"line":241,"column":53}},"114":{"start":{"line":245,"column":12},"end":{"line":245,"column":36}},"115":{"start":{"line":250,"column":2},"end":{"line":250,"column":48}},"116":{"start":{"line":254,"column":2},"end":{"line":254,"column":42}},"117":{"start":{"line":258,"column":2},"end":{"line":301,"column":6}},"118":{"start":{"line":260,"column":4},"end":{"line":300,"column":33}},"119":{"start":{"line":261,"column":6},"end":{"line":299,"column":7}},"120":{"start":{"line":262,"column":8},"end":{"line":298,"column":9}},"121":{"start":{"line":264,"column":12},"end":{"line":264,"column":34}},"122":{"start":{"line":265,"column":12},"end":{"line":265,"column":43}},"123":{"start":{"line":266,"column":12},"end":{"line":266,"column":74}},"124":{"start":{"line":267,"column":12},"end":{"line":267,"column":31}},"125":{"start":{"line":268,"column":12},"end":{"line":268,"column":31}},"126":{"start":{"line":269,"column":12},"end":{"line":269,"column":31}},"127":{"start":{"line":270,"column":12},"end":{"line":280,"column":15}},"128":{"start":{"line":283,"column":12},"end":{"line":283,"column":32}},"129":{"start":{"line":284,"column":12},"end":{"line":284,"column":18}},"130":{"start":{"line":287,"column":12},"end":{"line":287,"column":31}},"131":{"start":{"line":288,"column":12},"end":{"line":288,"column":49}},"132":{"start":{"line":289,"column":12},"end":{"line":289,"column":40}},"133":{"start":{"line":290,"column":12},"end":{"line":290,"column":53}},"134":{"start":{"line":293,"column":12},"end":{"line":293,"column":52}},"135":{"start":{"line":297,"column":12},"end":{"line":297,"column":36}},"136":{"start":{"line":302,"column":2},"end":{"line":302,"column":42}}},"fnMap":{"0":{"name":"connectToServer","decl":{"start":{"line":37,"column":9},"end":{"line":37,"column":24}},"loc":{"start":{"line":37,"column":35},"end":{"line":50,"column":1}},"line":37},"1":{"name":"(anonymous_1)","decl":{"start":{"line":42,"column":45},"end":{"line":42,"column":46}},"loc":{"start":{"line":42,"column":68},"end":{"line":49,"column":3}},"line":42},"2":{"name":"getDb","decl":{"start":{"line":52,"column":9},"end":{"line":52,"column":14}},"loc":{"start":{"line":52,"column":17},"end":{"line":54,"column":1}},"line":52},"3":{"name":"getDoc","decl":{"start":{"line":56,"column":9},"end":{"line":56,"column":15}},"loc":{"start":{"line":56,"column":20},"end":{"line":58,"column":1}},"line":56},"4":{"name":"_getDoc","decl":{"start":{"line":60,"column":9},"end":{"line":60,"column":16}},"loc":{"start":{"line":60,"column":19},"end":{"line":108,"column":1}},"line":60},"5":{"name":"_callee","decl":{"start":{"line":61,"column":99},"end":{"line":61,"column":106}},"loc":{"start":{"line":61,"column":117},"end":{"line":106,"column":3}},"line":61},"6":{"name":"_callee$","decl":{"start":{"line":63,"column":49},"end":{"line":63,"column":57}},"loc":{"start":{"line":63,"column":68},"end":{"line":105,"column":5}},"line":63},"7":{"name":"getAllWithKeys","decl":{"start":{"line":110,"column":9},"end":{"line":110,"column":23}},"loc":{"start":{"line":110,"column":29},"end":{"line":112,"column":1}},"line":110},"8":{"name":"_getAllWithKeys","decl":{"start":{"line":114,"column":9},"end":{"line":114,"column":24}},"loc":{"start":{"line":114,"column":27},"end":{"line":150,"column":1}},"line":114},"9":{"name":"_callee2","decl":{"start":{"line":115,"column":107},"end":{"line":115,"column":115}},"loc":{"start":{"line":115,"column":126},"end":{"line":148,"column":3}},"line":115},"10":{"name":"_callee2$","decl":{"start":{"line":117,"column":49},"end":{"line":117,"column":58}},"loc":{"start":{"line":117,"column":70},"end":{"line":147,"column":5}},"line":117},"11":{"name":"exist","decl":{"start":{"line":152,"column":9},"end":{"line":152,"column":14}},"loc":{"start":{"line":152,"column":20},"end":{"line":154,"column":1}},"line":152},"12":{"name":"_exist","decl":{"start":{"line":156,"column":9},"end":{"line":156,"column":15}},"loc":{"start":{"line":156,"column":18},"end":{"line":199,"column":1}},"line":156},"13":{"name":"_callee3","decl":{"start":{"line":157,"column":98},"end":{"line":157,"column":106}},"loc":{"start":{"line":157,"column":117},"end":{"line":197,"column":3}},"line":157},"14":{"name":"_callee3$","decl":{"start":{"line":159,"column":49},"end":{"line":159,"column":58}},"loc":{"start":{"line":159,"column":70},"end":{"line":196,"column":5}},"line":159},"15":{"name":"getFileObject","decl":{"start":{"line":201,"column":9},"end":{"line":201,"column":22}},"loc":{"start":{"line":201,"column":29},"end":{"line":212,"column":1}},"line":201},"16":{"name":"removeRevision","decl":{"start":{"line":214,"column":9},"end":{"line":214,"column":23}},"loc":{"start":{"line":214,"column":29},"end":{"line":216,"column":1}},"line":214},"17":{"name":"_removeRevision","decl":{"start":{"line":218,"column":9},"end":{"line":218,"column":24}},"loc":{"start":{"line":218,"column":27},"end":{"line":251,"column":1}},"line":218},"18":{"name":"_callee4","decl":{"start":{"line":219,"column":107},"end":{"line":219,"column":115}},"loc":{"start":{"line":219,"column":126},"end":{"line":249,"column":3}},"line":219},"19":{"name":"_callee4$","decl":{"start":{"line":221,"column":49},"end":{"line":221,"column":58}},"loc":{"start":{"line":221,"column":70},"end":{"line":248,"column":5}},"line":221},"20":{"name":"saveJson","decl":{"start":{"line":253,"column":9},"end":{"line":253,"column":17}},"loc":{"start":{"line":253,"column":28},"end":{"line":255,"column":1}},"line":253},"21":{"name":"_saveJson","decl":{"start":{"line":257,"column":9},"end":{"line":257,"column":18}},"loc":{"start":{"line":257,"column":21},"end":{"line":303,"column":1}},"line":257},"22":{"name":"_callee5","decl":{"start":{"line":258,"column":101},"end":{"line":258,"column":109}},"loc":{"start":{"line":258,"column":126},"end":{"line":301,"column":3}},"line":258},"23":{"name":"_callee5$","decl":{"start":{"line":260,"column":49},"end":{"line":260,"column":58}},"loc":{"start":{"line":260,"column":70},"end":{"line":300,"column":5}},"line":260}},"branchMap":{"0":{"loc":{"start":{"line":38,"column":2},"end":{"line":40,"column":3}},"type":"if","locations":[{"start":{"line":38,"column":2},"end":{"line":40,"column":3}},{"start":{"line":38,"column":2},"end":{"line":40,"column":3}}],"line":38},"1":{"loc":{"start":{"line":43,"column":4},"end":{"line":45,"column":5}},"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":45,"column":5}},{"start":{"line":43,"column":4},"end":{"line":45,"column":5}}],"line":43},"2":{"loc":{"start":{"line":43,"column":8},"end":{"line":43,"column":22}},"type":"binary-expr","locations":[{"start":{"line":43,"column":8},"end":{"line":43,"column":15}},{"start":{"line":43,"column":19},"end":{"line":43,"column":22}}],"line":43},"3":{"loc":{"start":{"line":65,"column":8},"end":{"line":103,"column":9}},"type":"switch","locations":[{"start":{"line":66,"column":10},"end":{"line":75,"column":15}},{"start":{"line":77,"column":10},"end":{"line":90,"column":18}},{"start":{"line":92,"column":10},"end":{"line":95,"column":39}},{"start":{"line":97,"column":10},"end":{"line":98,"column":51}},{"start":{"line":100,"column":10},"end":{"line":100,"column":18}},{"start":{"line":101,"column":10},"end":{"line":102,"column":35}}],"line":65},"4":{"loc":{"start":{"line":80,"column":12},"end":{"line":87,"column":13}},"type":"if","locations":[{"start":{"line":80,"column":12},"end":{"line":87,"column":13}},{"start":{"line":80,"column":12},"end":{"line":87,"column":13}}],"line":80},"5":{"loc":{"start":{"line":119,"column":8},"end":{"line":145,"column":9}},"type":"switch","locations":[{"start":{"line":120,"column":10},"end":{"line":124,"column":42}},{"start":{"line":126,"column":10},"end":{"line":140,"column":55}},{"start":{"line":142,"column":10},"end":{"line":142,"column":17}},{"start":{"line":143,"column":10},"end":{"line":144,"column":36}}],"line":119},"6":{"loc":{"start":{"line":161,"column":8},"end":{"line":194,"column":9}},"type":"switch","locations":[{"start":{"line":162,"column":10},"end":{"line":171,"column":15}},{"start":{"line":173,"column":10},"end":{"line":181,"column":18}},{"start":{"line":183,"column":10},"end":{"line":186,"column":40}},{"start":{"line":188,"column":10},"end":{"line":189,"column":54}},{"start":{"line":191,"column":10},"end":{"line":191,"column":18}},{"start":{"line":192,"column":10},"end":{"line":193,"column":36}}],"line":161},"7":{"loc":{"start":{"line":176,"column":12},"end":{"line":178,"column":13}},"type":"if","locations":[{"start":{"line":176,"column":12},"end":{"line":178,"column":13}},{"start":{"line":176,"column":12},"end":{"line":178,"column":13}}],"line":176},"8":{"loc":{"start":{"line":223,"column":8},"end":{"line":246,"column":9}},"type":"switch","locations":[{"start":{"line":224,"column":10},"end":{"line":231,"column":15}},{"start":{"line":233,"column":10},"end":{"line":235,"column":18}},{"start":{"line":237,"column":10},"end":{"line":241,"column":53}},{"start":{"line":243,"column":10},"end":{"line":243,"column":18}},{"start":{"line":244,"column":10},"end":{"line":245,"column":36}}],"line":223},"9":{"loc":{"start":{"line":262,"column":8},"end":{"line":298,"column":9}},"type":"switch","locations":[{"start":{"line":263,"column":10},"end":{"line":280,"column":15}},{"start":{"line":282,"column":10},"end":{"line":284,"column":18}},{"start":{"line":286,"column":10},"end":{"line":290,"column":53}},{"start":{"line":292,"column":10},"end":{"line":293,"column":52}},{"start":{"line":295,"column":10},"end":{"line":295,"column":18}},{"start":{"line":296,"column":10},"end":{"line":297,"column":36}}],"line":262}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0,0,0],"4":[0,0],"5":[0,0,0,0],"6":[0,0,0,0,0,0],"7":[0,0],"8":[0,0,0,0,0],"9":[0,0,0,0,0,0]},"inputSourceMap":{"version":3,"sources":["mongo.js"],"names":["options","useNewUrlParser","poolSize","url","_","get","config","_db","connectToServer","callback","MongoClient","connect","err","client","db","getDb","getDoc","jsonPath","cmsData","utils","getRevisionRelativePath","mongo","JSONs","collection","json","findOne","doc","path","console","error","getAllWithKeys","withKeys","find","toArray","docs","docsArr","i","fjson","fileObject","date","mtime","toString","file","getAbeMeta","push","exist","exists","getFileObject","name","basename","fileAttr","updatedDate","removeRevision","deleteOne","saveJson","Date","now","updateOne","$set","upsert"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,IAAMA,OAAO,GAAG;AACdC,EAAAA,eAAe,EAAE,IADH;AAEdC,EAAAA,QAAQ,EAAE;AAFI,CAAhB;AAKA,IAAMC,GAAG,aAAMC,mBAAEC,GAAF,CACbC,SADa,EAEb,uBAFa,EAGb,qBAHa,CAAN,cAIJF,mBAAEC,GAAF,CAAMC,SAAN,EAAc,qBAAd,EAAqC,KAArC,CAJI,cAI2CF,mBAAEC,GAAF,CAClDC,SADkD,EAElD,yBAFkD,EAGlD,KAHkD,CAJ3C,CAAT;;AAUA,IAAIC,GAAJ;;AAEO,SAASC,eAAT,CAAyBC,QAAzB,EAAmC;AACxC,MAAI,CAACN,GAAL,EAAU;AACR,WAAOM,QAAQ,CAAC,mBAAD,CAAf;AACD;;AACDC,uBAAYC,OAAZ,CAAoBR,GAApB,EAAyBH,OAAzB,EAAkC,UAASY,GAAT,EAAcC,MAAd,EAAsB;AACtD,QAAI,CAACA,MAAD,IAAWD,GAAf,EAAoB;AAClB,aAAOH,QAAQ,CAACG,GAAD,CAAf;AACD;;AACDL,IAAAA,GAAG,GAAGM,MAAM,CAACC,EAAP,CAAUV,mBAAEC,GAAF,CAAMC,SAAN,EAAc,yBAAd,EAAyC,KAAzC,CAAV,CAAN;AACA,WAAOG,QAAQ,CAACG,GAAD,CAAf;AACD,GAND;AAOD;;AAEM,SAASG,KAAT,GAAiB;AACtB,SAAOR,GAAP;AACD;;SAEqBS,M;;;;;0FAAf,iBAAsBC,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AACLA,YAAAA,QAAQ,GAAGC,WAAQC,KAAR,CAAcC,uBAAd,CAAsCH,QAAtC,CAAX;AACMH,YAAAA,EAFD,GAEMO,SAAMN,KAAN,EAFN;AAGCO,YAAAA,KAHD,GAGSR,EAAE,CAACS,UAAH,CAAc,OAAd,CAHT;AAIDC,YAAAA,IAJC,GAIM,EAJN;AAAA;AAAA;AAAA,mBAOeF,KAAK,CAACG,OAAN,CAAc;AAAER,cAAAA,QAAQ,EAARA;AAAF,aAAd,CAPf;;AAAA;AAOGS,YAAAA,GAPH;;AAQH,gBAAIA,GAAJ,EAAS;AACPF,cAAAA,IAAI,GAAGE,GAAG,CAACF,IAAX;AACAA,cAAAA,IAAI,CAACG,IAAL,GAAYV,QAAZ;AACD,aAHD,MAGO;AACLO,cAAAA,IAAI,GAAG;AAAEZ,gBAAAA,GAAG,EAAE;AAAP,eAAP;AACD;;AAbE;AAAA;;AAAA;AAAA;AAAA;AAeHgB,YAAAA,OAAO,CAACC,KAAR;;AAfG;AAAA,6CAkBEL,IAlBF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAqBeM,c;;;;;kGAAf,kBAA8BC,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AACDjB,YAAAA,EADC,GACIO,SAAMN,KAAN,EADJ;AAEDO,YAAAA,KAFC,GAEOR,EAAE,CAACS,UAAH,CAAc,OAAd,CAFP;AAAA;AAAA,mBAIYD,KAAK,CAACU,IAAN,GAAaC,OAAb,EAJZ;;AAAA;AAIDC,YAAAA,IAJC;AAMDC,YAAAA,OANC,GAMS,EANT;;AAQL,iBAASC,CAAT,IAAcF,IAAd,EAAoB;AACdG,cAAAA,KADc,GACNH,IAAI,CAACE,CAAD,CAAJ,CAAQZ,IADF;AAEdc,cAAAA,UAFc,GAED;AACfC,gBAAAA,IAAI,EAAE,KAAKL,IAAI,CAACE,CAAD,CAAJ,CAAQI,KAAR,CAAcC,QAAd,EAAL,GAAgC,EADvB;AAEfd,gBAAAA,IAAI,EAAEO,IAAI,CAACE,CAAD,CAAJ,CAAQnB;AAFC,eAFC;AAMlBqB,cAAAA,UAAU,GAAGpB,WAAQwB,IAAR,CAAaC,UAAb,CAAwBL,UAAxB,EAAoCD,KAApC,CAAb;AAEAF,cAAAA,OAAO,CAACS,IAAR,CAAaN,UAAb;AACD;;AAjBI,8CAmBEH,OAnBF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAsBeU,K;;;;;yFAAf,kBAAqB5B,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AACLA,YAAAA,QAAQ,GAAGC,WAAQC,KAAR,CAAcC,uBAAd,CAAsCH,QAAtC,CAAX;AACI6B,YAAAA,MAFC,GAEQ,KAFR;AAGChC,YAAAA,EAHD,GAGMO,SAAMN,KAAN,EAHN;AAICO,YAAAA,KAJD,GAISR,EAAE,CAACS,UAAH,CAAc,OAAd,CAJT;AAAA;AAAA;AAAA,mBAOeD,KAAK,CAACG,OAAN,CAAc;AAAER,cAAAA,QAAQ,EAARA;AAAF,aAAd,CAPf;;AAAA;AAOGS,YAAAA,GAPH;;AAQH,gBAAIA,GAAJ,EAAS;AACPoB,cAAAA,MAAM,GAAG,IAAT;AACD;;AAVE;AAAA;;AAAA;AAAA;AAAA;AAYHlB,YAAAA,OAAO,CAACC,KAAR;;AAZG;AAAA,8CAeEiB,MAfF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAkBA,SAASC,aAAT,CAAuBvB,IAAvB,EAA6B;AAClC,MAAIwB,IAAI,GAAGrB,iBAAKsB,QAAL,CAAczB,IAAI,CAACG,IAAnB,CAAX;;AACAqB,EAAAA,IAAI,GAAG9B,WAAQgC,QAAR,WAAwBF,IAAxB,CAAP;AAEA,MAAMT,IAAI,GAAGf,IAAI,CAAC2B,WAAlB;AAEA,MAAMb,UAAU,GAAG;AACjBU,IAAAA,IAAI,EAAEA,IADW;AAEjBrB,IAAAA,IAAI,EAAEH,IAAI,CAACG,IAFM;AAGjBY,IAAAA,IAAI,EAAEA;AAHW,GAAnB;AAMA,SAAOD,UAAP;AACD;;SAEqBc,c;;;;;kGAAf,kBAA8BnC,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AACDH,YAAAA,EADC,GACIO,SAAMN,KAAN,EADJ;AAEDO,YAAAA,KAFC,GAEOR,EAAE,CAACS,UAAH,CAAc,OAAd,CAFP;AAAA;AAAA;AAAA,mBAIGD,KAAK,CAAC+B,SAAN,CAAgB;AAAEpC,cAAAA,QAAQ,EAARA;AAAF,aAAhB,CAJH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAMHW,YAAAA,OAAO,CAACC,KAAR;AANG,8CAOI,KAPJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAWeyB,Q;;;;;4FAAf,kBAAwBrC,QAAxB,EAAkCO,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AACDV,YAAAA,EADC,GACIO,SAAMN,KAAN,EADJ;AAEDO,YAAAA,KAFC,GAEOR,EAAE,CAACS,UAAH,CAAc,OAAd,CAFP;AAILN,YAAAA,QAAQ,GAAGC,WAAQC,KAAR,CAAcC,uBAAd,CAAsCH,QAAtC,CAAX;AAJK;AAOCuB,YAAAA,KAPD,GAOSe,IAAI,CAACC,GAAL,EAPT;AAAA;AAAA,mBAQGlC,KAAK,CAACmC,SAAN,CACJ;AACExC,cAAAA,QAAQ,EAARA;AADF,aADI,EAIJ;AACEyC,cAAAA,IAAI,EAAE;AACJlC,gBAAAA,IAAI,EAAJA,IADI;AAEJP,gBAAAA,QAAQ,EAARA,QAFI;AAGJuB,gBAAAA,KAAK,EAALA;AAHI;AADR,aAJI,EAWJ;AACEmB,cAAAA,MAAM,EAAE;AADV,aAXI,CARH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAwBH/B,YAAAA,OAAO,CAACC,KAAR;AAxBG,8CAyBI,KAzBJ;;AAAA;AAAA,8CA4BE,IA5BF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/database/","sourcesContent":["import { config, mongo, cmsData, abeExtend, coreUtils, Manager } from \"../../\";\nimport path from \"path\";\nimport { MongoClient } from \"mongodb\";\nimport _ from \"lodash\";\n\nconst options = {\n  useNewUrlParser: true,\n  poolSize: 10\n};\n\nconst url = `${_.get(\n  config,\n  \"database.mongo.server\",\n  \"mongodb://localhost\"\n)}:${_.get(config, \"database.mongo.port\", 27017)}/${_.get(\n  config,\n  \"database.mongo.database\",\n  \"abe\"\n)}`;\n\nlet _db;\n\nexport function connectToServer(callback) {\n  if (!url) {\n    return callback(\"Missing mongo URL\");\n  }\n  MongoClient.connect(url, options, function(err, client) {\n    if (!client || err) {\n      return callback(err);\n    }\n    _db = client.db(_.get(config, \"database.mongo.database\", \"abe\"));\n    return callback(err);\n  });\n}\n\nexport function getDb() {\n  return _db;\n}\n\nexport async function getDoc(jsonPath) {\n  jsonPath = cmsData.utils.getRevisionRelativePath(jsonPath);\n  const db = mongo.getDb();\n  const JSONs = db.collection(\"jsons\");\n  let json = {};\n\n  try {\n    const doc = await JSONs.findOne({ jsonPath });\n    if (doc) {\n      json = doc.json;\n      json.path = jsonPath;\n    } else {\n      json = { err: true };\n    }\n  } catch (e) {\n    console.error(e);\n  }\n\n  return json;\n}\n\nexport async function getAllWithKeys(withKeys) {\n  var db = mongo.getDb();\n  var JSONs = db.collection(\"jsons\");\n\n  let docs = await JSONs.find().toArray();\n\n  let docsArr = [];\n\n  for (var i in docs) {\n    let fjson = docs[i].json;\n    let fileObject = {\n      date: \"\" + docs[i].mtime.toString() + \"\",\n      path: docs[i].jsonPath\n    };\n    fileObject = cmsData.file.getAbeMeta(fileObject, fjson);\n\n    docsArr.push(fileObject);\n  }\n\n  return docsArr;\n}\n\nexport async function exist(jsonPath) {\n  jsonPath = cmsData.utils.getRevisionRelativePath(jsonPath);\n  let exists = false;\n  const db = mongo.getDb();\n  const JSONs = db.collection(\"jsons\");\n\n  try {\n    const doc = await JSONs.findOne({ jsonPath });\n    if (doc) {\n      exists = true;\n    }\n  } catch (e) {\n    console.error(e);\n  }\n\n  return exists;\n}\n\nexport function getFileObject(json) {\n  let name = path.basename(json.path);\n  name = cmsData.fileAttr.delete(name);\n\n  const date = json.updatedDate;\n\n  const fileObject = {\n    name: name,\n    path: json.path,\n    date: date\n  };\n\n  return fileObject;\n}\n\nexport async function removeRevision(jsonPath) {\n  var db = mongo.getDb();\n  var JSONs = db.collection(\"jsons\");\n  try {\n    await JSONs.deleteOne({ jsonPath });\n  } catch (e) {\n    console.error(e);\n    return false;\n  }\n}\n\nexport async function saveJson(jsonPath, json) {\n  var db = mongo.getDb();\n  var JSONs = db.collection(\"jsons\");\n\n  jsonPath = cmsData.utils.getRevisionRelativePath(jsonPath);\n\n  try {\n    var mtime = Date.now();\n    await JSONs.updateOne(\n      {\n        jsonPath\n      },\n      {\n        $set: {\n          json,\n          jsonPath,\n          mtime\n        }\n      },\n      {\n        upsert: true\n      }\n    );\n  } catch (e) {\n    console.error(e);\n    return false;\n  }\n\n  return true;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1ade307ccad637176b1d36ead05a45c84f99030c","contentHash":"e3517a91a486cc6b751b210ee023fe8dd640c8b48c943df111c33fe395268345"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/index.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":29},"end":{"line":5,"column":84}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":3}},"3":{"start":{"line":10,"column":0},"end":{"line":15,"column":3}},"4":{"start":{"line":13,"column":4},"end":{"line":13,"column":28}},"5":{"start":{"line":16,"column":0},"end":{"line":21,"column":3}},"6":{"start":{"line":19,"column":4},"end":{"line":19,"column":32}},"7":{"start":{"line":22,"column":0},"end":{"line":22,"column":173}},"8":{"start":{"line":24,"column":12},"end":{"line":24,"column":53}},"9":{"start":{"line":26,"column":16},"end":{"line":26,"column":61}},"10":{"start":{"line":28,"column":17},"end":{"line":28,"column":65}},"11":{"start":{"line":30,"column":0},"end":{"line":30,"column":32}},"12":{"start":{"line":32,"column":13},"end":{"line":32,"column":57}},"13":{"start":{"line":34,"column":0},"end":{"line":34,"column":24}},"14":{"start":{"line":36,"column":12},"end":{"line":36,"column":55}},"15":{"start":{"line":38,"column":0},"end":{"line":38,"column":22}},"16":{"start":{"line":40,"column":10},"end":{"line":40,"column":51}},"17":{"start":{"line":42,"column":0},"end":{"line":42,"column":18}},"18":{"start":{"line":44,"column":13},"end":{"line":44,"column":57}},"19":{"start":{"line":46,"column":0},"end":{"line":46,"column":24}},"20":{"start":{"line":48,"column":15},"end":{"line":48,"column":61}},"21":{"start":{"line":50,"column":0},"end":{"line":50,"column":28}},"22":{"start":{"line":52,"column":12},"end":{"line":52,"column":55}},"23":{"start":{"line":54,"column":0},"end":{"line":54,"column":22}},"24":{"start":{"line":56,"column":11},"end":{"line":56,"column":53}},"25":{"start":{"line":58,"column":0},"end":{"line":58,"column":20}},"26":{"start":{"line":60,"column":12},"end":{"line":60,"column":55}},"27":{"start":{"line":62,"column":0},"end":{"line":62,"column":22}},"28":{"start":{"line":64,"column":11},"end":{"line":64,"column":53}},"29":{"start":{"line":66,"column":0},"end":{"line":66,"column":20}}},"fnMap":{"0":{"name":"get","decl":{"start":{"line":12,"column":16},"end":{"line":12,"column":19}},"loc":{"start":{"line":12,"column":22},"end":{"line":14,"column":3}},"line":12},"1":{"name":"get","decl":{"start":{"line":18,"column":16},"end":{"line":18,"column":19}},"loc":{"start":{"line":18,"column":22},"end":{"line":20,"column":3}},"line":18}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":4,"5":1,"6":746,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1},"f":{"0":4,"1":746},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import attr from './attr'\nimport fileAttr from './fileAttr'\nimport * as attributes from './attributes'\nimport * as values from './values'\nimport * as regex from './regex'\nimport * as sql from './sql'\nimport * as source from './source'\nimport * as revision from './revision'\nimport * as metas from './metas'\nimport * as file from './file'\nimport * as utils from './utils'\nimport * as sort from './sort'\n\nexport {\n  values,\n  attributes,\n  attr,\n  fileAttr,\n  sql,\n  source,\n  revision,\n  regex,\n  metas,\n  file,\n  utils,\n  sort\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f19ed2ec5ba6d25809f130397d50e27cfaeb7c17","contentHash":"7ce51f5fd2755ae7b6826b9a527b071eb1f2978fca031e30c538236c7f596e1e"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/attr.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/attr.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":23},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":20},"end":{"line":12,"column":89}},"5":{"start":{"line":14,"column":8},"end":{"line":14,"column":25}},"6":{"start":{"line":16,"column":18},"end":{"line":16,"column":54}},"7":{"start":{"line":22,"column":24},"end":{"line":91,"column":3}},"8":{"start":{"line":28,"column":4},"end":{"line":28,"column":49}},"9":{"start":{"line":29,"column":4},"end":{"line":29,"column":19}},"10":{"start":{"line":30,"column":4},"end":{"line":30,"column":18}},"11":{"start":{"line":31,"column":4},"end":{"line":31,"column":19}},"12":{"start":{"line":38,"column":2},"end":{"line":89,"column":6}},"13":{"start":{"line":41,"column":16},"end":{"line":41,"column":67}},"14":{"start":{"line":43,"column":6},"end":{"line":49,"column":7}},"15":{"start":{"line":44,"column":22},"end":{"line":44,"column":65}},"16":{"start":{"line":45,"column":8},"end":{"line":48,"column":10}},"17":{"start":{"line":51,"column":6},"end":{"line":51,"column":22}},"18":{"start":{"line":60,"column":6},"end":{"line":62,"column":7}},"19":{"start":{"line":61,"column":8},"end":{"line":61,"column":89}},"20":{"start":{"line":64,"column":6},"end":{"line":64,"column":22}},"21":{"start":{"line":69,"column":6},"end":{"line":72,"column":7}},"22":{"start":{"line":70,"column":18},"end":{"line":70,"column":37}},"23":{"start":{"line":71,"column":8},"end":{"line":71,"column":35}},"24":{"start":{"line":74,"column":6},"end":{"line":74,"column":16}},"25":{"start":{"line":85,"column":27},"end":{"line":85,"column":40}},"26":{"start":{"line":86,"column":6},"end":{"line":86,"column":91}},"27":{"start":{"line":87,"column":6},"end":{"line":87,"column":78}},"28":{"start":{"line":90,"column":2},"end":{"line":90,"column":14}},"29":{"start":{"line":93,"column":0},"end":{"line":93,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":22,"column":24},"end":{"line":22,"column":25}},"loc":{"start":{"line":22,"column":36},"end":{"line":91,"column":1}},"line":22},"1":{"name":"Attr","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":15}},"loc":{"start":{"line":27,"column":21},"end":{"line":32,"column":3}},"line":27},"2":{"name":"extract","decl":{"start":{"line":40,"column":20},"end":{"line":40,"column":27}},"loc":{"start":{"line":40,"column":30},"end":{"line":52,"column":5}},"line":40},"3":{"name":"remove","decl":{"start":{"line":59,"column":20},"end":{"line":59,"column":26}},"loc":{"start":{"line":59,"column":29},"end":{"line":65,"column":5}},"line":59},"4":{"name":"getExtension","decl":{"start":{"line":68,"column":20},"end":{"line":68,"column":32}},"loc":{"start":{"line":68,"column":35},"end":{"line":75,"column":5}},"line":68},"5":{"name":"insert","decl":{"start":{"line":84,"column":20},"end":{"line":84,"column":26}},"loc":{"start":{"line":84,"column":38},"end":{"line":88,"column":5}},"line":84}},"branchMap":{"0":{"loc":{"start":{"line":43,"column":6},"end":{"line":49,"column":7}},"type":"if","locations":[{"start":{"line":43,"column":6},"end":{"line":49,"column":7}},{"start":{"line":43,"column":6},"end":{"line":49,"column":7}}],"line":43},"1":{"loc":{"start":{"line":60,"column":6},"end":{"line":62,"column":7}},"type":"if","locations":[{"start":{"line":60,"column":6},"end":{"line":62,"column":7}},{"start":{"line":60,"column":6},"end":{"line":62,"column":7}}],"line":60},"2":{"loc":{"start":{"line":69,"column":6},"end":{"line":72,"column":7}},"type":"if","locations":[{"start":{"line":69,"column":6},"end":{"line":72,"column":7}},{"start":{"line":69,"column":6},"end":{"line":72,"column":7}}],"line":69}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":617,"9":617,"10":617,"11":617,"12":1,"13":617,"14":617,"15":326,"16":326,"17":617,"18":483,"19":483,"20":0,"21":1105,"22":1105,"23":1105,"24":0,"25":2,"26":2,"27":2,"28":1,"29":1},"f":{"0":1,"1":617,"2":617,"3":483,"4":1105,"5":2},"b":{"0":[326,291],"1":[483,0],"2":[1105,0]},"inputSourceMap":{"version":3,"sources":["attr.js"],"names":["captureAttr","Attr","str","val","extract","rex","RegExp","getExtension","test","arrAttr","match","replace","s","d","cmsData","revision","getStatusAndDateToFileName","slice","ext","split","length","newValues","strWithoutAttr","remove"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA,IAAMA,WAAW,GAAG,oCAApB;AACA;;;;;IAIqBC,I;AACnB;;;;AAIA,gBAAYC,GAAZ,EAAiB;AAAA;AACf,SAAKA,GAAL,GAAWA,GAAX;AACA,SAAKC,GAAL,GAAW,EAAX;AACA,SAAKC,OAAL;AACD;AAED;;;;;;;8BAGU;AACR,UAAIC,GAAG,GAAG,IAAIC,MAAJ,CAAWN,WAAW,GAAG,KAAKO,YAAL,EAAd,GAAoC,GAA/C,CAAV;;AACA,UAAIF,GAAG,CAACG,IAAJ,CAAS,KAAKN,GAAd,CAAJ,EAAwB;AACtB,YAAIO,OAAO,GAAG,KAAKP,GAAL,CAASQ,KAAT,CAAeL,GAAf,EAAoB,CAApB,EAAuBM,OAAvB,CAA+B,OAA/B,EAAwC,EAAxC,CAAd;AACA,aAAKR,GAAL,GAAW;AACTS,UAAAA,CAAC,EAAEH,OAAO,CAAC,CAAD,CADD;AAETI,UAAAA,CAAC,EAAEC,UAAQC,QAAR,CAAiBC,0BAAjB,CAA4CP,OAAO,CAACQ,KAAR,CAAc,CAAd,CAA5C;AAFM,SAAX;AAID;;AACD,aAAO,KAAKd,GAAZ;AACD;AAED;;;;;;6BAGS;AACP,UAAI,KAAKD,GAAL,IAAY,IAAhB,EAAsB;AACpB,eAAO,KAAKA,GAAL,CAASS,OAAT,CACL,IAAIL,MAAJ,CAAWN,WAAW,GAAG,KAAKO,YAAL,EAAd,GAAoC,GAA/C,CADK,EAEL,EAFK,CAAP;AAID;;AACD,aAAO,KAAKL,GAAZ;AACD;;;mCAEc;AACb,UAAI,KAAKA,GAAL,IAAY,IAAhB,EAAsB;AACpB,YAAIgB,GAAG,GAAG,KAAKhB,GAAL,CAASiB,KAAT,CAAe,GAAf,CAAV;AACA,eAAOD,GAAG,CAACA,GAAG,CAACE,MAAJ,GAAa,CAAd,CAAV;AACD;;AACD,aAAO,EAAP;AACD;AAED;;;;;;;;2BAKOC,S,EAAW;AAChB,UAAIC,cAAc,GAAG,KAAKC,MAAL,EAArB;AACAD,MAAAA,cAAc,GAAGA,cAAc,CAACX,OAAf,CACf,IAAIL,MAAJ,CAAW,QAAQ,KAAKC,YAAL,EAAnB,CADe,EAEf,EAFe,CAAjB;AAIA,aAAOe,cAAc,GAAG,OAAjB,GAA2BD,SAA3B,GAAuC,GAAvC,GAA6C,KAAKd,YAAL,EAApD;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import {cmsData} from '../../'\n\nconst captureAttr = '-abe-([a-z A-Z]{1}[0-9]{1}.+?)(?=.'\n/**\n * Class Attr\n * Work string to manage string attributes key/value\n */\nexport default class Attr {\n  /**\n   * @param  {String} str string to work with\n   * @return {void}\n   */\n  constructor(str) {\n    this.str = str\n    this.val = {}\n    this.extract()\n  }\n\n  /**\n   * @return {Object} attributes extracted from string as an object\n   */\n  extract() {\n    var rex = new RegExp(captureAttr + this.getExtension() + ')')\n    if (rex.test(this.str)) {\n      var arrAttr = this.str.match(rex)[0].replace('-abe-', '')\n      this.val = {\n        s: arrAttr[0],\n        d: cmsData.revision.getStatusAndDateToFileName(arrAttr.slice(1))\n      }\n    }\n    return this.val\n  }\n\n  /**\n   * @return {String} str without attributes\n   */\n  remove() {\n    if (this.str != null) {\n      return this.str.replace(\n        new RegExp(captureAttr + this.getExtension() + ')'),\n        ''\n      )\n    }\n    return this.str\n  }\n\n  getExtension() {\n    if (this.str != null) {\n      var ext = this.str.split('.')\n      return ext[ext.length - 1]\n    }\n    return ''\n  }\n\n  /**\n   * Insert attributes to the string\n   * @param  {String} string composed of a status (ex: v for validate, d for draft ...) and a date\n   * @return {String} the new string with added attributes\n   */\n  insert(newValues) {\n    var strWithoutAttr = this.remove()\n    strWithoutAttr = strWithoutAttr.replace(\n      new RegExp('\\\\.' + this.getExtension()),\n      ''\n    )\n    return strWithoutAttr + '-abe-' + newValues + '.' + this.getExtension()\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a0249262dc12ae824fae7e569c71e76f27385009","contentHash":"0a17c40e2abb771457014be203d24c6d066a7b7e7566c53e966de54dafe36472"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/fileAttr.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/fileAttr.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":23},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":20},"end":{"line":12,"column":89}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":51}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":58}},"7":{"start":{"line":18,"column":12},"end":{"line":18,"column":53}},"8":{"start":{"line":20,"column":8},"end":{"line":20,"column":25}},"9":{"start":{"line":26,"column":28},"end":{"line":105,"column":3}},"10":{"start":{"line":28,"column":4},"end":{"line":28,"column":53}},"11":{"start":{"line":31,"column":2},"end":{"line":103,"column":6}},"12":{"start":{"line":41,"column":16},"end":{"line":41,"column":41}},"13":{"start":{"line":42,"column":6},"end":{"line":42,"column":33}},"14":{"start":{"line":53,"column":6},"end":{"line":53,"column":48}},"15":{"start":{"line":63,"column":6},"end":{"line":63,"column":43}},"16":{"start":{"line":73,"column":16},"end":{"line":73,"column":45}},"17":{"start":{"line":74,"column":6},"end":{"line":74,"column":27}},"18":{"start":{"line":84,"column":17},"end":{"line":84,"column":52}},"19":{"start":{"line":86,"column":21},"end":{"line":86,"column":49}},"20":{"start":{"line":88,"column":6},"end":{"line":88,"column":48}},"21":{"start":{"line":91,"column":6},"end":{"line":99,"column":7}},"22":{"start":{"line":92,"column":8},"end":{"line":92,"column":26}},"23":{"start":{"line":94,"column":8},"end":{"line":94,"column":61}},"24":{"start":{"line":96,"column":19},"end":{"line":96,"column":57}},"25":{"start":{"line":98,"column":8},"end":{"line":98,"column":26}},"26":{"start":{"line":101,"column":6},"end":{"line":101,"column":18}},"27":{"start":{"line":104,"column":2},"end":{"line":104,"column":18}},"28":{"start":{"line":107,"column":0},"end":{"line":107,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":26,"column":28},"end":{"line":26,"column":29}},"loc":{"start":{"line":26,"column":40},"end":{"line":105,"column":1}},"line":26},"1":{"name":"FileAttr","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":19}},"loc":{"start":{"line":27,"column":22},"end":{"line":29,"column":3}},"line":27},"2":{"name":"add","decl":{"start":{"line":40,"column":20},"end":{"line":40,"column":23}},"loc":{"start":{"line":40,"column":38},"end":{"line":43,"column":5}},"line":40},"3":{"name":"_delete","decl":{"start":{"line":52,"column":20},"end":{"line":52,"column":27}},"loc":{"start":{"line":52,"column":33},"end":{"line":54,"column":5}},"line":52},"4":{"name":"get","decl":{"start":{"line":62,"column":20},"end":{"line":62,"column":23}},"loc":{"start":{"line":62,"column":29},"end":{"line":64,"column":5}},"line":62},"5":{"name":"test","decl":{"start":{"line":72,"column":20},"end":{"line":72,"column":24}},"loc":{"start":{"line":72,"column":30},"end":{"line":75,"column":5}},"line":72},"6":{"name":"getDate","decl":{"start":{"line":83,"column":20},"end":{"line":83,"column":27}},"loc":{"start":{"line":83,"column":38},"end":{"line":102,"column":5}},"line":83}},"branchMap":{"0":{"loc":{"start":{"line":91,"column":6},"end":{"line":99,"column":7}},"type":"if","locations":[{"start":{"line":91,"column":6},"end":{"line":99,"column":7}},{"start":{"line":91,"column":6},"end":{"line":99,"column":7}}],"line":91}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":1,"13":1,"14":480,"15":128,"16":4,"17":4,"18":127,"19":127,"20":127,"21":127,"22":65,"23":62,"24":62,"25":62,"26":127,"27":1,"28":1},"f":{"0":1,"1":0,"2":1,"3":480,"4":128,"5":4,"6":127},"b":{"0":[65,62]},"inputSourceMap":{"version":3,"sources":["fileAttr.js"],"names":["FileAttr","str","options","att","attr","insert","remove","val","s","pathFile","name","path","basename","fileData","cmsData","fileAttr","get","date","d","utils","getRevisionPath","stat","fse","statSync","mtime"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AAEA;;;;IAIqBA,Q;;;;;;;;AACnB;;;;;;wBAMWC,G,EAAKC,O,EAAS;AACvB,UAAIC,GAAG,GAAG,IAAIC,gBAAJ,CAASH,GAAT,CAAV;AAEA,aAAOE,GAAG,CAACE,MAAJ,CAAWH,OAAX,CAAP;AACD;AAED;;;;;;;;4BAKcD,G,EAAK;AACjB,aAAO,IAAIG,gBAAJ,CAASH,GAAT,EAAcK,MAAd,EAAP;AACD;AAED;;;;;;;wBAIWL,G,EAAK;AACd,aAAO,IAAIG,gBAAJ,CAASH,GAAT,EAAcM,GAArB;AACD;AAED;;;;;;;yBAIYN,G,EAAK;AACf,UAAIE,GAAG,GAAG,IAAIC,gBAAJ,CAASH,GAAT,EAAcM,GAAxB;AAEA,aAAOJ,GAAG,CAACK,CAAJ,IAAS,IAAhB;AACD;AAED;;;;;;;4BAIeC,Q,EAAU;AACvB,UAAIC,IAAI,GAAGC,iBAAKC,QAAL,CAAcH,QAAd,CAAX;;AACA,UAAMI,QAAQ,GAAGC,UAAQC,QAAR,CAAiBC,GAAjB,CAAqBN,IAArB,CAAjB;;AACAA,MAAAA,IAAI,GAAGI,UAAQC,QAAR,WAAwBL,IAAxB,CAAP;AAEA,UAAIO,IAAJ;;AACA,UAAIJ,QAAQ,CAACK,CAAb,EAAgB;AACdD,QAAAA,IAAI,GAAGJ,QAAQ,CAACK,CAAhB;AACD,OAFD,MAEO;AACLT,QAAAA,QAAQ,GAAGK,UAAQK,KAAR,CAAcC,eAAd,CAA8BX,QAA9B,CAAX;;AACA,YAAMY,IAAI,GAAGC,oBAAIC,QAAJ,CAAad,QAAb,CAAb;;AACAQ,QAAAA,IAAI,GAAGI,IAAI,CAACG,KAAZ;AACD;;AAED,aAAOP,IAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import path from 'path'\nimport fse from 'fs-extra'\nimport attr from './attr'\n\nimport {cmsData} from '../../'\n\n/**\n * Class FileAttr\n * Manage string with attributes encoded inside\n */\nexport default class FileAttr {\n  /**\n   * Add attributes or modify them if they already exists\n   * @param {String} str the string to modify\n   * @param {Object} options object with attributes to add\n   * @return {String} the string with the new attributes\n   */\n  static add(str, options) {\n    var att = new attr(str)\n\n    return att.insert(options)\n  }\n\n  /**\n   * Remove attributes from string\n   * @param {String} str the string to modify\n   * @return {String} the string modified\n   */\n  static delete(str) {\n    return new attr(str).remove()\n  }\n\n  /**\n   * @param  {String} str the string to get attributes from\n   * @return {object|String} object (all the attributes) if the key is null, if not the value of the attribute\n   */\n  static get(str) {\n    return new attr(str).val\n  }\n\n  /**\n   * @param  {String} str the string to test attributes from\n   * @return {boolean} true if string has attr\n   */\n  static test(str) {\n    var att = new attr(str).val\n\n    return att.s != null\n  }\n\n  /**\n   * \n   * @param {String} pathFile \n   */\n  static getDate(pathFile) {\n    let name = path.basename(pathFile)\n    const fileData = cmsData.fileAttr.get(name)\n    name = cmsData.fileAttr.delete(name)\n \n    let date\n    if (fileData.d) {\n      date = fileData.d\n    } else {\n      pathFile = cmsData.utils.getRevisionPath(pathFile)\n      const stat = fse.statSync(pathFile)\n      date = stat.mtime\n    }\n\n    return date\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"25bd14b2e2e41b00d5bd015cfe00934c6a9e84c0","contentHash":"d58a8181d3d30e4b2c2cb21ac9fefba9a6aca2ca5ff57c88aa873780bea561d7"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/attributes.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/attributes.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":24}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":58}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":50}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":54}},"6":{"start":{"line":13,"column":8},"end":{"line":13,"column":25}},"7":{"start":{"line":15,"column":17},"end":{"line":15,"column":91}},"8":{"start":{"line":22,"column":2},"end":{"line":22,"column":77}},"9":{"start":{"line":24,"column":11},"end":{"line":24,"column":69}},"10":{"start":{"line":25,"column":14},"end":{"line":45,"column":3}},"11":{"start":{"line":47,"column":2},"end":{"line":49,"column":3}},"12":{"start":{"line":48,"column":4},"end":{"line":48,"column":55}},"13":{"start":{"line":51,"column":2},"end":{"line":51,"column":36}},"14":{"start":{"line":52,"column":2},"end":{"line":52,"column":121}},"15":{"start":{"line":53,"column":2},"end":{"line":53,"column":79}},"16":{"start":{"line":54,"column":2},"end":{"line":54,"column":85}},"17":{"start":{"line":55,"column":2},"end":{"line":55,"column":15}},"18":{"start":{"line":59,"column":2},"end":{"line":75,"column":3}},"19":{"start":{"line":60,"column":18},"end":{"line":60,"column":62}},"20":{"start":{"line":62,"column":4},"end":{"line":74,"column":5}},"21":{"start":{"line":63,"column":6},"end":{"line":73,"column":9}},"22":{"start":{"line":64,"column":18},"end":{"line":64,"column":41}},"23":{"start":{"line":65,"column":8},"end":{"line":65,"column":36}},"24":{"start":{"line":67,"column":8},"end":{"line":72,"column":9}},"25":{"start":{"line":68,"column":10},"end":{"line":68,"column":40}},"26":{"start":{"line":69,"column":10},"end":{"line":69,"column":66}},"27":{"start":{"line":71,"column":10},"end":{"line":71,"column":19}},"28":{"start":{"line":77,"column":2},"end":{"line":77,"column":13}},"29":{"start":{"line":81,"column":14},"end":{"line":81,"column":18}},"30":{"start":{"line":83,"column":16},"end":{"line":83,"column":63}},"31":{"start":{"line":85,"column":2},"end":{"line":91,"column":3}},"32":{"start":{"line":86,"column":15},"end":{"line":86,"column":56}},"33":{"start":{"line":88,"column":4},"end":{"line":90,"column":5}},"34":{"start":{"line":89,"column":6},"end":{"line":89,"column":69}},"35":{"start":{"line":93,"column":2},"end":{"line":93,"column":15}},"36":{"start":{"line":110,"column":15},"end":{"line":110,"column":20}},"37":{"start":{"line":112,"column":2},"end":{"line":149,"column":3}},"38":{"start":{"line":113,"column":15},"end":{"line":113,"column":40}},"39":{"start":{"line":114,"column":15},"end":{"line":114,"column":20}},"40":{"start":{"line":115,"column":4},"end":{"line":148,"column":7}},"41":{"start":{"line":116,"column":19},"end":{"line":116,"column":64}},"42":{"start":{"line":117,"column":23},"end":{"line":117,"column":37}},"43":{"start":{"line":118,"column":6},"end":{"line":132,"column":9}},"44":{"start":{"line":119,"column":8},"end":{"line":131,"column":9}},"45":{"start":{"line":120,"column":10},"end":{"line":120,"column":22}},"46":{"start":{"line":121,"column":15},"end":{"line":131,"column":9}},"47":{"start":{"line":122,"column":10},"end":{"line":122,"column":40}},"48":{"start":{"line":123,"column":10},"end":{"line":123,"column":38}},"49":{"start":{"line":124,"column":10},"end":{"line":124,"column":22}},"50":{"start":{"line":125,"column":15},"end":{"line":131,"column":9}},"51":{"start":{"line":126,"column":10},"end":{"line":126,"column":40}},"52":{"start":{"line":127,"column":10},"end":{"line":127,"column":38}},"53":{"start":{"line":128,"column":15},"end":{"line":131,"column":9}},"54":{"start":{"line":129,"column":10},"end":{"line":129,"column":52}},"55":{"start":{"line":130,"column":10},"end":{"line":130,"column":38}},"56":{"start":{"line":133,"column":6},"end":{"line":133,"column":33}},"57":{"start":{"line":135,"column":6},"end":{"line":147,"column":20}},"58":{"start":{"line":136,"column":8},"end":{"line":146,"column":9}},"59":{"start":{"line":137,"column":10},"end":{"line":137,"column":22}},"60":{"start":{"line":138,"column":27},"end":{"line":138,"column":42}},"61":{"start":{"line":139,"column":23},"end":{"line":139,"column":58}},"62":{"start":{"line":140,"column":10},"end":{"line":143,"column":13}},"63":{"start":{"line":141,"column":26},"end":{"line":141,"column":31}},"64":{"start":{"line":142,"column":12},"end":{"line":142,"column":121}},"65":{"start":{"line":145,"column":10},"end":{"line":145,"column":105}},"66":{"start":{"line":151,"column":2},"end":{"line":151,"column":16}}},"fnMap":{"0":{"name":"getAll","decl":{"start":{"line":21,"column":9},"end":{"line":21,"column":15}},"loc":{"start":{"line":21,"column":27},"end":{"line":56,"column":1}},"line":21},"1":{"name":"sanitizeSourceAttribute","decl":{"start":{"line":58,"column":9},"end":{"line":58,"column":32}},"loc":{"start":{"line":58,"column":48},"end":{"line":78,"column":1}},"line":58},"2":{"name":"(anonymous_2)","decl":{"start":{"line":63,"column":44},"end":{"line":63,"column":45}},"loc":{"start":{"line":63,"column":61},"end":{"line":73,"column":7}},"line":63},"3":{"name":"getAttrValuefromKey","decl":{"start":{"line":80,"column":9},"end":{"line":80,"column":28}},"loc":{"start":{"line":80,"column":56},"end":{"line":94,"column":1}},"line":80},"4":{"name":"getValueFromAttribute","decl":{"start":{"line":109,"column":9},"end":{"line":109,"column":30}},"loc":{"start":{"line":109,"column":44},"end":{"line":152,"column":1}},"line":109},"5":{"name":"(anonymous_5)","decl":{"start":{"line":115,"column":39},"end":{"line":115,"column":40}},"loc":{"start":{"line":115,"column":54},"end":{"line":148,"column":5}},"line":115},"6":{"name":"(anonymous_6)","decl":{"start":{"line":118,"column":47},"end":{"line":118,"column":48}},"loc":{"start":{"line":118,"column":70},"end":{"line":132,"column":7}},"line":118},"7":{"name":"(anonymous_7)","decl":{"start":{"line":140,"column":47},"end":{"line":140,"column":48}},"loc":{"start":{"line":140,"column":70},"end":{"line":143,"column":11}},"line":140}},"branchMap":{"0":{"loc":{"start":{"line":48,"column":22},"end":{"line":48,"column":54}},"type":"binary-expr","locations":[{"start":{"line":48,"column":22},"end":{"line":48,"column":30}},{"start":{"line":48,"column":34},"end":{"line":48,"column":42}},{"start":{"line":48,"column":46},"end":{"line":48,"column":54}}],"line":48},"1":{"loc":{"start":{"line":52,"column":17},"end":{"line":52,"column":120}},"type":"cond-expr","locations":[{"start":{"line":52,"column":32},"end":{"line":52,"column":113}},{"start":{"line":52,"column":116},"end":{"line":52,"column":120}}],"line":52},"2":{"loc":{"start":{"line":52,"column":32},"end":{"line":52,"column":113}},"type":"cond-expr","locations":[{"start":{"line":52,"column":77},"end":{"line":52,"column":106}},{"start":{"line":52,"column":109},"end":{"line":52,"column":113}}],"line":52},"3":{"loc":{"start":{"line":52,"column":32},"end":{"line":52,"column":74}},"type":"binary-expr","locations":[{"start":{"line":52,"column":32},"end":{"line":52,"column":44}},{"start":{"line":52,"column":48},"end":{"line":52,"column":74}}],"line":52},"4":{"loc":{"start":{"line":53,"column":19},"end":{"line":53,"column":78}},"type":"cond-expr","locations":[{"start":{"line":53,"column":66},"end":{"line":53,"column":70}},{"start":{"line":53,"column":73},"end":{"line":53,"column":78}}],"line":53},"5":{"loc":{"start":{"line":53,"column":19},"end":{"line":53,"column":63}},"type":"binary-expr","locations":[{"start":{"line":53,"column":19},"end":{"line":53,"column":33}},{"start":{"line":53,"column":37},"end":{"line":53,"column":63}}],"line":53},"6":{"loc":{"start":{"line":59,"column":2},"end":{"line":75,"column":3}},"type":"if","locations":[{"start":{"line":59,"column":2},"end":{"line":75,"column":3}},{"start":{"line":59,"column":2},"end":{"line":75,"column":3}}],"line":59},"7":{"loc":{"start":{"line":59,"column":6},"end":{"line":59,"column":69}},"type":"binary-expr","locations":[{"start":{"line":59,"column":6},"end":{"line":59,"column":30}},{"start":{"line":59,"column":34},"end":{"line":59,"column":69}}],"line":59},"8":{"loc":{"start":{"line":62,"column":4},"end":{"line":74,"column":5}},"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":74,"column":5}},{"start":{"line":62,"column":4},"end":{"line":74,"column":5}}],"line":62},"9":{"loc":{"start":{"line":85,"column":2},"end":{"line":91,"column":3}},"type":"if","locations":[{"start":{"line":85,"column":2},"end":{"line":91,"column":3}},{"start":{"line":85,"column":2},"end":{"line":91,"column":3}}],"line":85},"10":{"loc":{"start":{"line":88,"column":4},"end":{"line":90,"column":5}},"type":"if","locations":[{"start":{"line":88,"column":4},"end":{"line":90,"column":5}},{"start":{"line":88,"column":4},"end":{"line":90,"column":5}}],"line":88},"11":{"loc":{"start":{"line":112,"column":2},"end":{"line":149,"column":3}},"type":"if","locations":[{"start":{"line":112,"column":2},"end":{"line":149,"column":3}},{"start":{"line":112,"column":2},"end":{"line":149,"column":3}}],"line":112},"12":{"loc":{"start":{"line":119,"column":8},"end":{"line":131,"column":9}},"type":"if","locations":[{"start":{"line":119,"column":8},"end":{"line":131,"column":9}},{"start":{"line":119,"column":8},"end":{"line":131,"column":9}}],"line":119},"13":{"loc":{"start":{"line":121,"column":15},"end":{"line":131,"column":9}},"type":"if","locations":[{"start":{"line":121,"column":15},"end":{"line":131,"column":9}},{"start":{"line":121,"column":15},"end":{"line":131,"column":9}}],"line":121},"14":{"loc":{"start":{"line":121,"column":19},"end":{"line":121,"column":55}},"type":"binary-expr","locations":[{"start":{"line":121,"column":19},"end":{"line":121,"column":42}},{"start":{"line":121,"column":46},"end":{"line":121,"column":55}}],"line":121},"15":{"loc":{"start":{"line":125,"column":15},"end":{"line":131,"column":9}},"type":"if","locations":[{"start":{"line":125,"column":15},"end":{"line":131,"column":9}},{"start":{"line":125,"column":15},"end":{"line":131,"column":9}}],"line":125},"16":{"loc":{"start":{"line":125,"column":19},"end":{"line":125,"column":54}},"type":"binary-expr","locations":[{"start":{"line":125,"column":19},"end":{"line":125,"column":41}},{"start":{"line":125,"column":45},"end":{"line":125,"column":54}}],"line":125},"17":{"loc":{"start":{"line":128,"column":15},"end":{"line":131,"column":9}},"type":"if","locations":[{"start":{"line":128,"column":15},"end":{"line":131,"column":9}},{"start":{"line":128,"column":15},"end":{"line":131,"column":9}}],"line":128},"18":{"loc":{"start":{"line":128,"column":19},"end":{"line":128,"column":50}},"type":"binary-expr","locations":[{"start":{"line":128,"column":19},"end":{"line":128,"column":37}},{"start":{"line":128,"column":41},"end":{"line":128,"column":50}}],"line":128},"19":{"loc":{"start":{"line":136,"column":8},"end":{"line":146,"column":9}},"type":"if","locations":[{"start":{"line":136,"column":8},"end":{"line":146,"column":9}},{"start":{"line":136,"column":8},"end":{"line":146,"column":9}}],"line":136}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":957,"9":957,"10":957,"11":957,"12":2602,"13":957,"14":957,"15":957,"16":957,"17":957,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":98,"37":98,"38":6,"39":6,"40":6,"41":6,"42":6,"43":6,"44":15,"45":2,"46":13,"47":0,"48":0,"49":0,"50":13,"51":1,"52":1,"53":12,"54":1,"55":1,"56":6,"57":6,"58":6,"59":2,"60":2,"61":2,"62":2,"63":4,"64":4,"65":4,"66":98},"f":{"0":957,"1":1,"2":0,"3":0,"4":98,"5":6,"6":15,"7":4},"b":{"0":[2602,1122,0],"1":[863,94],"2":[3,860],"3":[863,862],"4":[866,91],"5":[957,957],"6":[0,1],"7":[1,1],"8":[0,0],"9":[0,0],"10":[0,0],"11":[6,92],"12":[2,13],"13":[0,13],"14":[13,0],"15":[1,12],"16":[13,1],"17":[1,11],"18":[12,1],"19":[2,4]},"inputSourceMap":{"version":3,"sources":["attributes.js"],"names":["getAll","str","json","abeExtend","hooks","instance","trigger","re","attrs","autocomplete","desc","hint","display","editable","key","order","prefill","reload","required","source","tab","type","value","file","visible","match","exec","sourceString","sanitizeSourceAttribute","obj","jsonPage","indexOf","matches","Array","prototype","forEach","call","val","replace","eval","e","getAttrValuefromKey","template","attr","abeTags","cmsData","regex","getTagAbeWithKey","length","getAttr","attributes","getValueFromAttribute","result","keys","sourceAttr","getKeys","isAr","toEval","properties","split","prop","index","splice","test","join","jsonAr","resTemp","push","RegExp"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import {abeExtend} from '../../'\nimport {cmsData} from '../../'\nimport * as sourceAttr from '../../cms/editor/handlebars/sourceAttr'\n/**\n* Get All attributes from a Abe tag\n* @return {Object} parsed attributes\n*/\nexport function getAll(str, json) {\n  str = abeExtend.hooks.instance.trigger('beforeAbeAttributes', str, json)\n\n  //This regex analyzes all attributes of a Abe tag\n  var re = /\\b([a-z][a-z0-9\\-]*)\\s*=\\s*(\"([^\"]+)\"|'([^']+)'|(\\S+))/gi\n\n  var attrs = {\n    autocomplete: null,\n    desc: '',\n    hint: '',\n    display: null,\n    editable: true,\n    key: '',\n    'max-length': null,\n    'min-length': 0,\n    order: 0,\n    prefill: false,\n    'prefill-quantity': null,\n    reload: false,\n    required: false,\n    source: null,\n    tab: 'default',\n    type: '',\n    value: null,\n    file: '',\n    visible: true\n  }\n\n  for (var match; (match = re.exec(str)); ) {\n    attrs[match[1]] = match[3] || match[4] || match[5]\n  }\n\n  attrs.sourceString = attrs.source\n  attrs.source = attrs.source\n    ? json != null && json['abe_source'] != null\n      ? json['abe_source'][attrs.key]\n      : null\n    : null\n  attrs.editable = attrs.editable && attrs.editable !== 'false' ? true : false\n\n  attrs = abeExtend.hooks.instance.trigger(\n    'afterAbeAttributes',\n    attrs,\n    str,\n    json\n  )\n\n  return attrs\n}\n\nexport function sanitizeSourceAttribute(obj, jsonPage) {\n  if (obj.sourceString != null && obj.sourceString.indexOf('{{') > -1) {\n    var matches = obj.sourceString.match(/({{[a-zA-Z._]+}})/g)\n    if (matches !== null) {\n      Array.prototype.forEach.call(matches, match => {\n        var val = match.replace('{{', '')\n        val = val.replace('}}', '')\n\n        try {\n          val = eval('jsonPage.' + val)\n          obj.sourceString = obj.sourceString.replace(match, val)\n        } catch (e) {\n          val = ''\n        }\n      })\n    }\n  }\n\n  return obj\n}\n\nexport function getAttrValuefromKey(template, key, attr, json) {\n  var value = null\n  var abeTags = cmsData.regex.getTagAbeWithKey(template, key)\n  if (abeTags.length > 0) {\n    var attr = cmsData.regex.getAttr(abeTags[0], attr)\n    if (attr !== '') {\n      value = cmsData.attributes.getValueFromAttribute(attr, json)\n    }\n  }\n\n  return value\n}\n/**\n * This function will take the value of an Abe attribute and analyze its content.\n * If it contains a var {{variable.prop.value}}, it will extract its content with these rules\n * element.[0].value\n * element[0].value\n * element.0.value\n * will all be transformed into element[0].value and evaluated with the json\n * If it contains a [] ie. {{variable[].value}} or {{variable.[].value}}\n * It will return the array of values\n * @param  {String} value \n * @return {String}       \n */\nexport function getValueFromAttribute(value, json) {\n  var result = value\n  if (value.indexOf('{{') > -1) {\n    var keys = sourceAttr.getKeys(value)\n    var isAr = false\n    Array.prototype.forEach.call(keys, key => {\n      var toEval = `${key.replace(/(\\[|\\.|\\])/g, '\\\\$1')}`\n      var properties = key.split('.')\n      Array.prototype.forEach.call(properties, (prop, index) => {\n        if (prop.indexOf('[]') > 0) {\n          isAr = true\n        } else if (prop.indexOf('[]') == 0 && index > 0) {\n          properties[index - 1] += prop\n          properties.splice(index, 1)\n          isAr = true\n        } else if (prop.indexOf('[') == 0 && index > 0) {\n          properties[index - 1] += prop\n          properties.splice(index, 1)\n        } else if (/^\\d+$/.test(prop) && index > 0) {\n          properties[index - 1] += '[' + prop + ']'\n          properties.splice(index, 1)\n        }\n      })\n      key = properties.join('.')\n      try {\n        if (isAr) {\n          result = []\n          var properties = key.split('[]')\n          var jsonAr = eval(`json.${properties[0]}`)\n          Array.prototype.forEach.call(jsonAr, (prop, index) => {\n            var resTemp = value\n            result.push(\n              resTemp.replace(\n                new RegExp(`\\{\\{${toEval}\\}\\}`, 'g'),\n                eval(`prop${properties[1]}`)\n              )\n            )\n          })\n        } else {\n          result = result.replace(\n            new RegExp(`\\{\\{${toEval}\\}\\}`, 'g'),\n            eval(`json.${key}`)\n          )\n        }\n      } catch (e) {}\n    })\n  }\n\n  return result\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a012d2987411155ad7cbf13a49198dd677a27cf3","contentHash":"611119851ff875313b501eab1e771ae7948c90828e34b98164d7dbff4eb7c33a"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/values.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/values.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":42}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":79}},"4":{"start":{"line":12,"column":8},"end":{"line":12,"column":25}},"5":{"start":{"line":15,"column":21},"end":{"line":15,"column":42}},"6":{"start":{"line":17,"column":2},"end":{"line":19,"column":3}},"7":{"start":{"line":18,"column":4},"end":{"line":18,"column":41}},"8":{"start":{"line":21,"column":2},"end":{"line":35,"column":5}},"9":{"start":{"line":22,"column":4},"end":{"line":34,"column":5}},"10":{"start":{"line":23,"column":6},"end":{"line":23,"column":39}},"11":{"start":{"line":24,"column":6},"end":{"line":24,"column":27}},"12":{"start":{"line":25,"column":6},"end":{"line":25,"column":51}},"13":{"start":{"line":27,"column":6},"end":{"line":33,"column":7}},"14":{"start":{"line":28,"column":8},"end":{"line":30,"column":11}},"15":{"start":{"line":29,"column":10},"end":{"line":29,"column":47}},"16":{"start":{"line":32,"column":8},"end":{"line":32,"column":53}},"17":{"start":{"line":39,"column":15},"end":{"line":39,"column":67}},"18":{"start":{"line":40,"column":16},"end":{"line":40,"column":34}},"19":{"start":{"line":42,"column":2},"end":{"line":51,"column":3}},"20":{"start":{"line":43,"column":4},"end":{"line":50,"column":7}},"21":{"start":{"line":44,"column":20},"end":{"line":44,"column":57}},"22":{"start":{"line":46,"column":6},"end":{"line":49,"column":7}},"23":{"start":{"line":47,"column":27},"end":{"line":47,"column":45}},"24":{"start":{"line":48,"column":8},"end":{"line":48,"column":45}},"25":{"start":{"line":53,"column":2},"end":{"line":53,"column":14}}},"fnMap":{"0":{"name":"recurseDeleteKey","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":25}},"loc":{"start":{"line":14,"column":54},"end":{"line":36,"column":1}},"line":14},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":45},"end":{"line":21,"column":46}},"loc":{"start":{"line":21,"column":60},"end":{"line":35,"column":3}},"line":21},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":51},"end":{"line":28,"column":52}},"loc":{"start":{"line":28,"column":67},"end":{"line":30,"column":9}},"line":28},"3":{"name":"removeDuplicate","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":24}},"loc":{"start":{"line":38,"column":37},"end":{"line":54,"column":1}},"line":38},"4":{"name":"(anonymous_4)","decl":{"start":{"line":43,"column":42},"end":{"line":43,"column":43}},"loc":{"start":{"line":43,"column":59},"end":{"line":50,"column":5}},"line":43}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":2},"end":{"line":19,"column":3}},"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":19,"column":3}},{"start":{"line":17,"column":2},"end":{"line":19,"column":3}}],"line":17},"1":{"loc":{"start":{"line":22,"column":4},"end":{"line":34,"column":5}},"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":34,"column":5}},{"start":{"line":22,"column":4},"end":{"line":34,"column":5}}],"line":22},"2":{"loc":{"start":{"line":27,"column":6},"end":{"line":33,"column":7}},"type":"if","locations":[{"start":{"line":27,"column":6},"end":{"line":33,"column":7}},{"start":{"line":27,"column":6},"end":{"line":33,"column":7}}],"line":27},"3":{"loc":{"start":{"line":27,"column":10},"end":{"line":27,"column":130}},"type":"binary-expr","locations":[{"start":{"line":27,"column":10},"end":{"line":27,"column":61}},{"start":{"line":27,"column":65},"end":{"line":27,"column":130}}],"line":27},"4":{"loc":{"start":{"line":42,"column":2},"end":{"line":51,"column":3}},"type":"if","locations":[{"start":{"line":42,"column":2},"end":{"line":51,"column":3}},{"start":{"line":42,"column":2},"end":{"line":51,"column":3}}],"line":42},"5":{"loc":{"start":{"line":46,"column":6},"end":{"line":49,"column":7}},"type":"if","locations":[{"start":{"line":46,"column":6},"end":{"line":49,"column":7}},{"start":{"line":46,"column":6},"end":{"line":49,"column":7}}],"line":46}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":2,"7":2,"8":2,"9":2,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":2,"18":2,"19":2,"20":2,"21":2,"22":2,"23":2,"24":2,"25":2},"f":{"0":2,"1":2,"2":0,"3":2,"4":2},"b":{"0":[2,0],"1":[0,2],"2":[0,0],"3":[0,0],"4":[2,0],"5":[2,0]},"inputSourceMap":{"version":3,"sources":["values.js"],"names":["recurseDeleteKey","currentLevel","arrayKeyAttr","currentArray","slice","length","Array","prototype","forEach","call","key","shift","Object","toString","item","removeDuplicate","text","json","regAbe","matches","match","keyAttr","cmsData","regex","getAttr","split"],"mappings":";;;;;;;;;;;AAAA;;AAEA,SAASA,gBAAT,CAA0BC,YAA1B,EAAwCC,YAAxC,EAAsD;AACpD,MAAIC,YAAY,GAAGD,YAAY,CAACE,KAAb,CAAmB,CAAnB,CAAnB;;AAEA,MAAIF,YAAY,CAACG,MAAb,KAAwB,CAA5B,EAA+B;AAC7B,WAAOJ,YAAY,CAACC,YAAY,CAAC,CAAD,CAAb,CAAnB;AACD;;AAEDI,EAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BN,YAA7B,EAA2C,UAAAO,GAAG,EAAI;AAChD,QAAIT,YAAY,CAACS,GAAD,CAAZ,IAAqB,IAAzB,EAA+B;AAC7BT,MAAAA,YAAY,GAAGA,YAAY,CAACS,GAAD,CAA3B;AACAP,MAAAA,YAAY,CAACQ,KAAb;AACAX,MAAAA,gBAAgB,CAACC,YAAD,EAAeE,YAAf,CAAhB;;AACA,UACE,yBAAOF,YAAP,MAAwB,QAAxB,IACAW,MAAM,CAACL,SAAP,CAAiBM,QAAjB,CAA0BJ,IAA1B,CAA+BR,YAA/B,MAAiD,gBAFnD,EAGE;AACAK,QAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BR,YAA7B,EAA2C,UAAAa,IAAI,EAAI;AACjDd,UAAAA,gBAAgB,CAACc,IAAD,EAAOX,YAAP,CAAhB;AACD,SAFD;AAGD,OAPD,MAOO;AACLH,QAAAA,gBAAgB,CAACC,YAAD,EAAeE,YAAf,CAAhB;AACD;AACF;AACF,GAhBD;AAiBD;;AAEM,SAASY,eAAT,CAAyBC,IAAzB,EAA+BC,IAA/B,EAAqC;AAC1C,MAAIC,MAAM,GAAG,oDAAb;AACA,MAAIC,OAAO,GAAGH,IAAI,CAACI,KAAL,CAAWF,MAAX,CAAd;;AACA,MAAIC,OAAO,IAAI,IAAf,EAAqB;AACnBb,IAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BU,OAA7B,EAAsC,UAAAC,KAAK,EAAI;AAC7C,UAAIC,OAAO,GAAGC,UAAQC,KAAR,CAAcC,OAAd,CAAsBJ,KAAtB,EAA6B,KAA7B,CAAd;;AAEA,UAAIA,KAAK,IAAI,IAAb,EAAmB;AACjB,YAAIlB,YAAY,GAAGmB,OAAO,CAACI,KAAR,CAAc,GAAd,CAAnB;AACAzB,QAAAA,gBAAgB,CAACiB,IAAD,EAAOf,YAAP,CAAhB;AACD;AACF,KAPD;AAQD;;AAED,SAAOe,IAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import {cmsData} from '../../'\n\nfunction recurseDeleteKey(currentLevel, arrayKeyAttr) {\n  var currentArray = arrayKeyAttr.slice(0)\n\n  if (arrayKeyAttr.length === 1) {\n    delete currentLevel[arrayKeyAttr[0]]\n  }\n\n  Array.prototype.forEach.call(currentArray, key => {\n    if (currentLevel[key] != null) {\n      currentLevel = currentLevel[key]\n      currentArray.shift()\n      recurseDeleteKey(currentLevel, currentArray)\n      if (\n        typeof currentLevel === 'object' &&\n        Object.prototype.toString.call(currentLevel) === '[object Array]'\n      ) {\n        Array.prototype.forEach.call(currentLevel, item => {\n          recurseDeleteKey(item, currentArray)\n        })\n      } else {\n        recurseDeleteKey(currentLevel, currentArray)\n      }\n    }\n  })\n}\n\nexport function removeDuplicate(text, json) {\n  var regAbe = /{{abe[\\S\\s].*?duplicate=['|\"]([\\S\\s].*?['|\"| ]}})/g\n  var matches = text.match(regAbe)\n  if (matches != null) {\n    Array.prototype.forEach.call(matches, match => {\n      var keyAttr = cmsData.regex.getAttr(match, 'key')\n\n      if (match != null) {\n        var arrayKeyAttr = keyAttr.split('.')\n        recurseDeleteKey(json, arrayKeyAttr)\n      }\n    })\n  }\n\n  return json\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"91017d393c190c861b5f5cd960ee078613de4f6c","contentHash":"785f9445340d28101c346479482fd712608ce186ae96d7acfc3762aaa74f1460"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/regex.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/regex.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":32}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":32}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":42}},"4":{"start":{"line":9,"column":0},"end":{"line":9,"column":26}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":44}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":46}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":34}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":44}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":32}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":42}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":52}},"12":{"start":{"line":17,"column":0},"end":{"line":17,"column":46}},"13":{"start":{"line":18,"column":0},"end":{"line":18,"column":44}},"14":{"start":{"line":19,"column":0},"end":{"line":19,"column":44}},"15":{"start":{"line":20,"column":0},"end":{"line":20,"column":50}},"16":{"start":{"line":21,"column":0},"end":{"line":21,"column":36}},"17":{"start":{"line":22,"column":0},"end":{"line":22,"column":68}},"18":{"start":{"line":23,"column":0},"end":{"line":23,"column":134}},"19":{"start":{"line":25,"column":8},"end":{"line":25,"column":25}},"20":{"start":{"line":28,"column":16},"end":{"line":28,"column":18}},"21":{"start":{"line":29,"column":2},"end":{"line":31,"column":5}},"22":{"start":{"line":30,"column":4},"end":{"line":30,"column":43}},"23":{"start":{"line":32,"column":2},"end":{"line":32,"column":17}},"24":{"start":{"line":35,"column":13},"end":{"line":35,"column":45}},"25":{"start":{"line":40,"column":0},"end":{"line":40,"column":24}},"26":{"start":{"line":43,"column":2},"end":{"line":43,"column":106}},"27":{"start":{"line":47,"column":2},"end":{"line":47,"column":93}},"28":{"start":{"line":53,"column":28},"end":{"line":53,"column":92}},"29":{"start":{"line":55,"column":0},"end":{"line":55,"column":54}},"30":{"start":{"line":56,"column":23},"end":{"line":56,"column":68}},"31":{"start":{"line":58,"column":0},"end":{"line":58,"column":44}},"32":{"start":{"line":59,"column":25},"end":{"line":59,"column":107}},"33":{"start":{"line":62,"column":0},"end":{"line":62,"column":48}},"34":{"start":{"line":63,"column":18},"end":{"line":63,"column":51}},"35":{"start":{"line":71,"column":0},"end":{"line":71,"column":34}},"36":{"start":{"line":74,"column":12},"end":{"line":74,"column":80}},"37":{"start":{"line":75,"column":12},"end":{"line":75,"column":25}},"38":{"start":{"line":76,"column":2},"end":{"line":76,"column":52}},"39":{"start":{"line":77,"column":2},"end":{"line":77,"column":13}},"40":{"start":{"line":88,"column":12},"end":{"line":88,"column":14}},"41":{"start":{"line":89,"column":16},"end":{"line":89,"column":28}},"42":{"start":{"line":90,"column":16},"end":{"line":90,"column":34}},"43":{"start":{"line":91,"column":2},"end":{"line":93,"column":5}},"44":{"start":{"line":92,"column":4},"end":{"line":92,"column":20}},"45":{"start":{"line":94,"column":2},"end":{"line":94,"column":13}},"46":{"start":{"line":105,"column":2},"end":{"line":105,"column":54}},"47":{"start":{"line":106,"column":2},"end":{"line":106,"column":33}},"48":{"start":{"line":121,"column":2},"end":{"line":121,"column":192}},"49":{"start":{"line":131,"column":2},"end":{"line":131,"column":43}},"50":{"start":{"line":141,"column":2},"end":{"line":141,"column":74}},"51":{"start":{"line":151,"column":2},"end":{"line":151,"column":64}},"52":{"start":{"line":162,"column":16},"end":{"line":162,"column":18}},"53":{"start":{"line":165,"column":2},"end":{"line":167,"column":3}},"54":{"start":{"line":166,"column":4},"end":{"line":166,"column":24}},"55":{"start":{"line":169,"column":2},"end":{"line":169,"column":17}},"56":{"start":{"line":176,"column":16},"end":{"line":176,"column":81}},"57":{"start":{"line":177,"column":16},"end":{"line":177,"column":18}},"58":{"start":{"line":180,"column":2},"end":{"line":182,"column":3}},"59":{"start":{"line":181,"column":4},"end":{"line":181,"column":27}},"60":{"start":{"line":184,"column":2},"end":{"line":184,"column":17}},"61":{"start":{"line":188,"column":16},"end":{"line":188,"column":79}},"62":{"start":{"line":189,"column":16},"end":{"line":189,"column":18}},"63":{"start":{"line":192,"column":2},"end":{"line":194,"column":3}},"64":{"start":{"line":193,"column":4},"end":{"line":193,"column":27}},"65":{"start":{"line":196,"column":2},"end":{"line":196,"column":17}},"66":{"start":{"line":203,"column":16},"end":{"line":203,"column":79}},"67":{"start":{"line":204,"column":16},"end":{"line":204,"column":18}},"68":{"start":{"line":207,"column":2},"end":{"line":209,"column":3}},"69":{"start":{"line":208,"column":4},"end":{"line":208,"column":27}},"70":{"start":{"line":211,"column":2},"end":{"line":211,"column":17}},"71":{"start":{"line":215,"column":16},"end":{"line":215,"column":66}},"72":{"start":{"line":216,"column":16},"end":{"line":216,"column":18}},"73":{"start":{"line":219,"column":2},"end":{"line":221,"column":3}},"74":{"start":{"line":220,"column":4},"end":{"line":220,"column":27}},"75":{"start":{"line":223,"column":2},"end":{"line":223,"column":17}},"76":{"start":{"line":227,"column":2},"end":{"line":227,"column":44}},"77":{"start":{"line":231,"column":15},"end":{"line":231,"column":50}},"78":{"start":{"line":232,"column":17},"end":{"line":232,"column":24}},"79":{"start":{"line":233,"column":14},"end":{"line":233,"column":31}},"80":{"start":{"line":235,"column":2},"end":{"line":237,"column":3}},"81":{"start":{"line":236,"column":4},"end":{"line":236,"column":24}},"82":{"start":{"line":239,"column":16},"end":{"line":239,"column":39}},"83":{"start":{"line":240,"column":2},"end":{"line":243,"column":4}}},"fnMap":{"0":{"name":"getAbeTags","decl":{"start":{"line":27,"column":9},"end":{"line":27,"column":19}},"loc":{"start":{"line":27,"column":22},"end":{"line":33,"column":1}},"line":27},"1":{"name":"(anonymous_1)","decl":{"start":{"line":29,"column":36},"end":{"line":29,"column":37}},"loc":{"start":{"line":29,"column":58},"end":{"line":31,"column":3}},"line":29},"2":{"name":"abePattern","decl":{"start":{"line":42,"column":9},"end":{"line":42,"column":19}},"loc":{"start":{"line":42,"column":22},"end":{"line":44,"column":1}},"line":42},"3":{"name":"abeAsTagPattern","decl":{"start":{"line":46,"column":9},"end":{"line":46,"column":24}},"loc":{"start":{"line":46,"column":27},"end":{"line":48,"column":1}},"line":46},"4":{"name":"getAttr","decl":{"start":{"line":73,"column":9},"end":{"line":73,"column":16}},"loc":{"start":{"line":73,"column":28},"end":{"line":78,"column":1}},"line":73},"5":{"name":"getAllAbeHtmlTag","decl":{"start":{"line":87,"column":9},"end":{"line":87,"column":25}},"loc":{"start":{"line":87,"column":31},"end":{"line":95,"column":1}},"line":87},"6":{"name":"(anonymous_6)","decl":{"start":{"line":91,"column":40},"end":{"line":91,"column":41}},"loc":{"start":{"line":91,"column":57},"end":{"line":93,"column":3}},"line":91},"7":{"name":"escapeTextToRegex","decl":{"start":{"line":104,"column":9},"end":{"line":104,"column":26}},"loc":{"start":{"line":104,"column":40},"end":{"line":107,"column":1}},"line":104},"8":{"name":"isSingleAbe","decl":{"start":{"line":120,"column":9},"end":{"line":120,"column":20}},"loc":{"start":{"line":120,"column":32},"end":{"line":122,"column":1}},"line":120},"9":{"name":"getEachParentKey","decl":{"start":{"line":130,"column":9},"end":{"line":130,"column":25}},"loc":{"start":{"line":130,"column":31},"end":{"line":132,"column":1}},"line":130},"10":{"name":"isBlockAbe","decl":{"start":{"line":140,"column":9},"end":{"line":140,"column":19}},"loc":{"start":{"line":140,"column":25},"end":{"line":142,"column":1}},"line":140},"11":{"name":"isEachStatement","decl":{"start":{"line":150,"column":9},"end":{"line":150,"column":24}},"loc":{"start":{"line":150,"column":30},"end":{"line":152,"column":1}},"line":150},"12":{"name":"getTagAbeTypeRequest","decl":{"start":{"line":161,"column":9},"end":{"line":161,"column":29}},"loc":{"start":{"line":161,"column":36},"end":{"line":170,"column":1}},"line":161},"13":{"name":"getTagAbeWithType","decl":{"start":{"line":175,"column":9},"end":{"line":175,"column":26}},"loc":{"start":{"line":175,"column":39},"end":{"line":185,"column":1}},"line":175},"14":{"name":"getTagAbeWithKey","decl":{"start":{"line":187,"column":9},"end":{"line":187,"column":25}},"loc":{"start":{"line":187,"column":37},"end":{"line":197,"column":1}},"line":187},"15":{"name":"getTagAbeWithTab","decl":{"start":{"line":202,"column":9},"end":{"line":202,"column":25}},"loc":{"start":{"line":202,"column":37},"end":{"line":212,"column":1}},"line":202},"16":{"name":"getTagAbeWithSource","decl":{"start":{"line":214,"column":9},"end":{"line":214,"column":28}},"loc":{"start":{"line":214,"column":35},"end":{"line":224,"column":1}},"line":214},"17":{"name":"validDataAbe","decl":{"start":{"line":226,"column":9},"end":{"line":226,"column":21}},"loc":{"start":{"line":226,"column":27},"end":{"line":228,"column":1}},"line":226},"18":{"name":"getWorkflowFromOperationsUrl","decl":{"start":{"line":230,"column":9},"end":{"line":230,"column":37}},"loc":{"start":{"line":230,"column":43},"end":{"line":244,"column":1}},"line":230}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":15},"end":{"line":30,"column":42}},"type":"cond-expr","locations":[{"start":{"line":30,"column":27},"end":{"line":30,"column":36}},{"start":{"line":30,"column":39},"end":{"line":30,"column":42}}],"line":30},"1":{"loc":{"start":{"line":76,"column":8},"end":{"line":76,"column":51}},"type":"cond-expr","locations":[{"start":{"line":76,"column":40},"end":{"line":76,"column":46}},{"start":{"line":76,"column":49},"end":{"line":76,"column":51}}],"line":76},"2":{"loc":{"start":{"line":76,"column":8},"end":{"line":76,"column":37}},"type":"binary-expr","locations":[{"start":{"line":76,"column":8},"end":{"line":76,"column":19}},{"start":{"line":76,"column":23},"end":{"line":76,"column":37}}],"line":76},"3":{"loc":{"start":{"line":121,"column":9},"end":{"line":121,"column":191}},"type":"binary-expr","locations":[{"start":{"line":121,"column":9},"end":{"line":121,"column":81}},{"start":{"line":121,"column":85},"end":{"line":121,"column":107}},{"start":{"line":121,"column":111},"end":{"line":121,"column":135}},{"start":{"line":121,"column":139},"end":{"line":121,"column":161}},{"start":{"line":121,"column":165},"end":{"line":121,"column":191}}],"line":121},"4":{"loc":{"start":{"line":141,"column":9},"end":{"line":141,"column":73}},"type":"binary-expr","locations":[{"start":{"line":141,"column":9},"end":{"line":141,"column":32}},{"start":{"line":141,"column":36},"end":{"line":141,"column":73}}],"line":141},"5":{"loc":{"start":{"line":151,"column":9},"end":{"line":151,"column":63}},"type":"binary-expr","locations":[{"start":{"line":151,"column":9},"end":{"line":151,"column":34}},{"start":{"line":151,"column":38},"end":{"line":151,"column":63}}],"line":151},"6":{"loc":{"start":{"line":235,"column":2},"end":{"line":237,"column":3}},"type":"if","locations":[{"start":{"line":235,"column":2},"end":{"line":237,"column":3}},{"start":{"line":235,"column":2},"end":{"line":237,"column":3}}],"line":235},"7":{"loc":{"start":{"line":235,"column":6},"end":{"line":235,"column":39}},"type":"binary-expr","locations":[{"start":{"line":235,"column":6},"end":{"line":235,"column":19}},{"start":{"line":235,"column":23},"end":{"line":235,"column":39}}],"line":235}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":6,"21":6,"22":18,"23":6,"24":1,"25":1,"26":3,"27":3,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":101,"37":101,"38":101,"39":101,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":138,"47":138,"48":20,"49":0,"50":10,"51":10,"52":665,"53":665,"54":202,"55":665,"56":1320,"57":1320,"58":1320,"59":682,"60":1320,"61":0,"62":0,"63":0,"64":0,"65":0,"66":661,"67":661,"68":661,"69":23,"70":661,"71":1,"72":1,"73":1,"74":1,"75":1,"76":29,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"f":{"0":6,"1":18,"2":3,"3":3,"4":101,"5":0,"6":0,"7":138,"8":20,"9":0,"10":10,"11":10,"12":665,"13":1320,"14":0,"15":661,"16":1,"17":29,"18":0},"b":{"0":[12,6],"1":[88,13],"2":[101,88],"3":[20,12,11,11,11],"4":[10,10],"5":[10,9],"6":[0,0],"7":[0,0]},"inputSourceMap":{"version":3,"sources":["regex.js"],"names":["getAbeTags","abeTags","Object","keys","config","map","key","index","abeTag","abePattern","RegExp","abeAsTagPattern","abeAsAttributePattern","eachBlockPattern","nonEditableDataReg","dataTypeReg","getAttr","str","attr","rex","res","exec","length","getAllAbeHtmlTag","pattern","matches","match","Array","prototype","forEach","call","push","escapeTextToRegex","params","replace","isSingleAbe","text","split","test","indexOf","getEachParentKey","isBlockAbe","isEachStatement","getTagAbeTypeRequest","getTagAbeWithType","type","listReg","getTagAbeWithKey","getTagAbeWithTab","tab","getTagAbeWithSource","validDataAbe","getWorkflowFromOperationsUrl","regUrl","workflow","postUrl"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import {config} from '../../'\n\nexport function getAbeTags() {\n  let abeTags = ''\n  Object.keys(config.abeTags).map(function(key, index) {\n    abeTags += index > 0 ? '|' + key : key\n  })\n\n  return abeTags\n}\n\nexport let abeTag = /({{abe .*?[\\s\\S].*?['|\"] *}})/g\n\n// export let abePattern = /(--->(\\*\\/)?{{abe.*?type=[\\'|\\\"][text|rich|textarea|code]+[\\'|\\\"][\\s\\S].*?}})/g\n// export let abeAsTagPattern = /({{abe.*?type=[\\'|\\\"][text|rich|textarea|code]+[\\'|\\\"][\\s\\S].*?}})/g\n\n// pattern to detect every abe tags\n//var patt = /abe [^{{}}]+?(?=\\}})/g\nexport function abePattern() {\n  return new RegExp(\n    '(--->(\\\\*\\\\/)?{{abe .*?type=[\\'|\"][' +\n      getAbeTags() +\n      ']+[\\'|\"][\\\\s\\\\S].*?}})',\n    'g'\n  )\n}\n\nexport function abeAsTagPattern() {\n  return new RegExp(\n    '({{abe .*?type=[\\'|\"][' + getAbeTags() + ']+[\\'|\"][\\\\s\\\\S].*?}})',\n    'g'\n  )\n}\n\n// This pattern finds all abe tags enclosed in a HTML tag attribute\n// export let abeAsAttributePattern = /( [A-Za-z0-9\\-\\_]+=[\"|']{1}{{abe.*?}})/g;\n// export let abeAsAttributePattern = /( [A-Za-z0-9\\-\\_]+=[\"|']{1})(.*?)({{abe.*?}})/g\nexport let abeAsAttributePattern = /( [A-Za-z0-9\\-\\_]+=[\"|']{1})([^=]*?)({{abe .*?[\"|'| ]}})[\"|']/g\n\n// This pattern finds all {{#each ...}}...{{/each}} blocks\nexport let eachBlockPattern = /(\\{\\{#each ([\\s\\S]*?)}}[\\s\\S]*?\\/each\\}\\})/g\n\n// This pattern finds all non editable data types\nexport let nonEditableDataReg = /({{abe .*(type=[\\'|\\\"]data')?.*editable=[\\'|\\\"]false.*(type=[\\'|\\\"]data')?.*}})/g\n\n// This pattern finds all data types\n//export let dataTypeReg = /({{abe .*?type=[\\'|\\\"]data[\\s\\S].*?}})/g\nexport let dataTypeReg = /({{abe .*type=[\\'|\\\"]data.*}})/g\n\n/**\n * escape a regex\n * @param  {String} str\n * @param  {String} params g,m,i\n * @return {Object} RegExp\n */\nexport function getAttr(str, attr) {\n  var rex = new RegExp(attr + '=[\"|\\']([\\\\S\\\\s]*?)[\"|\\']( +[a-zA-Z0-9-]*?=|}})')\n  var res = rex.exec(str)\n  res = res != null && res.length > 1 ? res[1] : ''\n  return res\n}\n\n/**\n * escape a regex\n * @param  {String} str\n * @param  {String} params g,m,i\n * @return {Object} RegExp\n */\nexport function getAllAbeHtmlTag(str) {\n  var res = []\n  var pattern = abePattern()\n  var matches = str.match(pattern)\n  Array.prototype.forEach.call(matches, match => {\n    res.push(match)\n  })\n\n  return res\n}\n\n/**\n * escape a regex\n * @param  {String} str\n * @param  {String} params g,m,i\n * @return {Object} RegExp\n */\nexport function escapeTextToRegex(str, params) {\n  str = str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n  return new RegExp(str, params)\n}\n\n/**\n * Test if a string don't contains string key from ABE block statement\n * Not contains {{#each keyName}}\n * nor contains {{#}}\n * nor contains {{/\n * nor contains {{/each\n * \n * @param  {String}  str string to test\n * @return {Boolean} true = this is not a block content\n */\nexport function isSingleAbe(str, text) {\n  return (\n    !new RegExp('#each(.)+?' + getAttr(str, 'key').split('.')[0]).test(text) &&\n    str.indexOf('{{#') < 0 &&\n    str.indexOf('#each') < 0 &&\n    str.indexOf('{{/') < 0 &&\n    str.indexOf('{{/each') < 0\n  )\n}\n\n/**\n * Test if a string don't contains string key from ABE block statement\n * @param  {String}  str string to test\n * @return {Boolean} true = this is not a block content\n */\nexport function getEachParentKey(str) {\n  return getAttr(str, 'key').split('.')[0]\n}\n\n/**\n * Test if a string contains string key from ABE block statement\n * @param  {String}  str string to test\n * @return {Boolean} true = this is a block content\n */\nexport function isBlockAbe(str) {\n  return str.indexOf('abe') > -1 && getAttr(str, 'key').indexOf('.') > -1\n}\n\n/**\n * Test if a string contains string key from {{#each}} block statement\n * @param  {String}  str string to test\n * @return {Boolean} true = this is a block content\n */\nexport function isEachStatement(str) {\n  return str.indexOf('#each') > -1 || str.indexOf('/each') > -1\n}\n\n/**\n * Test if a string contains data type statement\n *\n * @param  {String}  str string to test\n * @return {Boolean} true = this is a block content\n */\nexport function getTagAbeTypeRequest(text) {\n  var matches = []\n  var match\n  while ((match = dataTypeReg.exec(text))) {\n    matches.push(match)\n  }\n  return matches\n}\n\n/**\n */\nexport function getTagAbeWithType(text, type) {\n  var listReg = new RegExp(`({{abe .*type=[\\\\'|\\\\\"]${type}.*}})`, 'g')\n  var matches = []\n  var match\n  while ((match = listReg.exec(text))) {\n    matches.push(match[0])\n  }\n  return matches\n}\n\nexport function getTagAbeWithKey(text, key) {\n  var listReg = new RegExp(`({{abe .*key=[\\\\'|\\\\\"]${key}.*}})`, 'g')\n  var matches = []\n  var match\n  while ((match = listReg.exec(text))) {\n    matches.push(match[0])\n  }\n  return matches\n}\n\n/**\n */\nexport function getTagAbeWithTab(text, tab) {\n  var listReg = new RegExp(`({{abe .*tab=[\\\\'|\\\\\"]${tab}.*}})`, 'g')\n  var matches = []\n  var match\n  while ((match = listReg.exec(text))) {\n    matches.push(match[0])\n  }\n  return matches\n}\n\nexport function getTagAbeWithSource(text) {\n  var listReg = new RegExp(`({{abe .*source=[\\\\'|\\\\\"].*}})`, 'g')\n  var matches = []\n  var match\n  while ((match = listReg.exec(text))) {\n    matches.push(match[0])\n  }\n  return matches\n}\n\nexport function validDataAbe(str) {\n  return str.replace(/\\[([0-9]*)\\]/g, '$1')\n}\n\nexport function getWorkflowFromOperationsUrl(str) {\n  let regUrl = /\\/abe\\/operations\\/(.*?)\\/(.*?)\\//\n  var workflow = 'draft'\n  var match = str.match(regUrl)\n  if (match != null && match[2] != null) {\n    workflow = match[2]\n  }\n  var postUrl = str.replace(regUrl, '')\n  return {\n    workflow: workflow,\n    postUrl: postUrl\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b9205c1ce27bf3c2abf47bab53d88e592e9c68e4","contentHash":"04e94757d9267df31e79e921dc21a08340904c13d5097048dd3b39a4523af587"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/sql.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/sql.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":76}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":44}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":38}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":54}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":44}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":52}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":54}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":46}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":30}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":44}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":36}},"13":{"start":{"line":19,"column":0},"end":{"line":19,"column":38}},"14":{"start":{"line":20,"column":0},"end":{"line":20,"column":48}},"15":{"start":{"line":21,"column":0},"end":{"line":21,"column":48}},"16":{"start":{"line":22,"column":0},"end":{"line":22,"column":58}},"17":{"start":{"line":23,"column":0},"end":{"line":23,"column":52}},"18":{"start":{"line":24,"column":0},"end":{"line":24,"column":36}},"19":{"start":{"line":26,"column":21},"end":{"line":26,"column":46}},"20":{"start":{"line":28,"column":16},"end":{"line":28,"column":35}},"21":{"start":{"line":30,"column":12},"end":{"line":30,"column":51}},"22":{"start":{"line":32,"column":14},"end":{"line":32,"column":55}},"23":{"start":{"line":34,"column":9},"end":{"line":34,"column":26}},"24":{"start":{"line":36,"column":65},"end":{"line":36,"column":623}},"25":{"start":{"line":36,"column":132},"end":{"line":36,"column":463}},"26":{"start":{"line":36,"column":252},"end":{"line":36,"column":267}},"27":{"start":{"line":36,"column":260},"end":{"line":36,"column":267}},"28":{"start":{"line":36,"column":276},"end":{"line":36,"column":277}},"29":{"start":{"line":36,"column":287},"end":{"line":36,"column":302}},"30":{"start":{"line":36,"column":304},"end":{"line":36,"column":461}},"31":{"start":{"line":36,"column":337},"end":{"line":36,"column":378}},"32":{"start":{"line":36,"column":356},"end":{"line":36,"column":378}},"33":{"start":{"line":36,"column":379},"end":{"line":36,"column":417}},"34":{"start":{"line":36,"column":441},"end":{"line":36,"column":450}},"35":{"start":{"line":36,"column":464},"end":{"line":36,"column":621}},"36":{"start":{"line":36,"column":647},"end":{"line":36,"column":651}},"37":{"start":{"line":36,"column":662},"end":{"line":36,"column":667}},"38":{"start":{"line":36,"column":674},"end":{"line":36,"column":995}},"39":{"start":{"line":36,"column":701},"end":{"line":36,"column":727}},"40":{"start":{"line":36,"column":760},"end":{"line":36,"column":769}},"41":{"start":{"line":36,"column":771},"end":{"line":36,"column":800}},"42":{"start":{"line":36,"column":801},"end":{"line":36,"column":813}},"43":{"start":{"line":36,"column":838},"end":{"line":36,"column":852}},"44":{"start":{"line":36,"column":853},"end":{"line":36,"column":863}},"45":{"start":{"line":36,"column":885},"end":{"line":36,"column":990}},"46":{"start":{"line":36,"column":891},"end":{"line":36,"column":953}},"47":{"start":{"line":36,"column":938},"end":{"line":36,"column":953}},"48":{"start":{"line":36,"column":966},"end":{"line":36,"column":988}},"49":{"start":{"line":36,"column":978},"end":{"line":36,"column":988}},"50":{"start":{"line":38,"column":50},"end":{"line":38,"column":65}},"51":{"start":{"line":38,"column":58},"end":{"line":38,"column":65}},"52":{"start":{"line":38,"column":66},"end":{"line":38,"column":129}},"53":{"start":{"line":38,"column":93},"end":{"line":38,"column":129}},"54":{"start":{"line":38,"column":138},"end":{"line":38,"column":184}},"55":{"start":{"line":38,"column":186},"end":{"line":38,"column":246}},"56":{"start":{"line":38,"column":223},"end":{"line":38,"column":246}},"57":{"start":{"line":38,"column":247},"end":{"line":38,"column":300}},"58":{"start":{"line":38,"column":279},"end":{"line":38,"column":300}},"59":{"start":{"line":38,"column":301},"end":{"line":38,"column":414}},"60":{"start":{"line":38,"column":378},"end":{"line":38,"column":414}},"61":{"start":{"line":40,"column":39},"end":{"line":40,"column":93}},"62":{"start":{"line":40,"column":76},"end":{"line":40,"column":93}},"63":{"start":{"line":40,"column":94},"end":{"line":40,"column":168}},"64":{"start":{"line":40,"column":107},"end":{"line":40,"column":108}},"65":{"start":{"line":40,"column":117},"end":{"line":40,"column":131}},"66":{"start":{"line":40,"column":149},"end":{"line":40,"column":166}},"67":{"start":{"line":40,"column":169},"end":{"line":40,"column":181}},"68":{"start":{"line":55,"column":18},"end":{"line":55,"column":32}},"69":{"start":{"line":56,"column":22},"end":{"line":56,"column":33}},"70":{"start":{"line":57,"column":22},"end":{"line":57,"column":41}},"71":{"start":{"line":59,"column":2},"end":{"line":78,"column":3}},"72":{"start":{"line":61,"column":20},"end":{"line":61,"column":36}},"73":{"start":{"line":63,"column":4},"end":{"line":75,"column":5}},"74":{"start":{"line":64,"column":6},"end":{"line":74,"column":20}},"75":{"start":{"line":65,"column":21},"end":{"line":65,"column":44}},"76":{"start":{"line":67,"column":20},"end":{"line":67,"column":60}},"77":{"start":{"line":69,"column":8},"end":{"line":73,"column":9}},"78":{"start":{"line":70,"column":10},"end":{"line":70,"column":75}},"79":{"start":{"line":72,"column":10},"end":{"line":72,"column":72}},"80":{"start":{"line":77,"column":4},"end":{"line":77,"column":51}},"81":{"start":{"line":80,"column":13},"end":{"line":80,"column":39}},"82":{"start":{"line":81,"column":16},"end":{"line":81,"column":20}},"83":{"start":{"line":83,"column":2},"end":{"line":97,"column":3}},"84":{"start":{"line":84,"column":14},"end":{"line":84,"column":24}},"85":{"start":{"line":85,"column":20},"end":{"line":85,"column":92}},"86":{"start":{"line":87,"column":4},"end":{"line":91,"column":5}},"87":{"start":{"line":87,"column":17},"end":{"line":87,"column":18}},"88":{"start":{"line":88,"column":6},"end":{"line":90,"column":7}},"89":{"start":{"line":89,"column":8},"end":{"line":89,"column":58}},"90":{"start":{"line":93,"column":22},"end":{"line":93,"column":53}},"91":{"start":{"line":94,"column":4},"end":{"line":94,"column":62}},"92":{"start":{"line":95,"column":4},"end":{"line":95,"column":62}},"93":{"start":{"line":96,"column":4},"end":{"line":96,"column":40}},"94":{"start":{"line":99,"column":2},"end":{"line":99,"column":33}},"95":{"start":{"line":100,"column":2},"end":{"line":100,"column":13}},"96":{"start":{"line":114,"column":12},"end":{"line":114,"column":59}},"97":{"start":{"line":115,"column":16},"end":{"line":115,"column":46}},"98":{"start":{"line":116,"column":23},"end":{"line":116,"column":25}},"99":{"start":{"line":118,"column":13},"end":{"line":118,"column":15}},"100":{"start":{"line":120,"column":2},"end":{"line":122,"column":3}},"101":{"start":{"line":121,"column":4},"end":{"line":121,"column":24}},"102":{"start":{"line":124,"column":2},"end":{"line":124,"column":41}},"103":{"start":{"line":126,"column":16},"end":{"line":126,"column":18}},"104":{"start":{"line":128,"column":2},"end":{"line":140,"column":3}},"105":{"start":{"line":129,"column":4},"end":{"line":139,"column":5}},"106":{"start":{"line":130,"column":6},"end":{"line":130,"column":24}},"107":{"start":{"line":132,"column":6},"end":{"line":138,"column":9}},"108":{"start":{"line":133,"column":8},"end":{"line":137,"column":9}},"109":{"start":{"line":134,"column":10},"end":{"line":134,"column":115}},"110":{"start":{"line":136,"column":10},"end":{"line":136,"column":41}},"111":{"start":{"line":142,"column":2},"end":{"line":142,"column":60}},"112":{"start":{"line":144,"column":13},"end":{"line":144,"column":15}},"113":{"start":{"line":146,"column":2},"end":{"line":152,"column":3}},"114":{"start":{"line":147,"column":4},"end":{"line":149,"column":7}},"115":{"start":{"line":148,"column":6},"end":{"line":148,"column":28}},"116":{"start":{"line":151,"column":4},"end":{"line":151,"column":19}},"117":{"start":{"line":154,"column":2},"end":{"line":154,"column":62}},"118":{"start":{"line":155,"column":14},"end":{"line":155,"column":18}},"119":{"start":{"line":157,"column":2},"end":{"line":159,"column":3}},"120":{"start":{"line":158,"column":4},"end":{"line":158,"column":26}},"121":{"start":{"line":161,"column":14},"end":{"line":161,"column":16}},"122":{"start":{"line":163,"column":2},"end":{"line":165,"column":3}},"123":{"start":{"line":164,"column":4},"end":{"line":164,"column":58}},"124":{"start":{"line":167,"column":16},"end":{"line":167,"column":20}},"125":{"start":{"line":169,"column":2},"end":{"line":175,"column":3}},"126":{"start":{"line":170,"column":4},"end":{"line":173,"column":6}},"127":{"start":{"line":174,"column":4},"end":{"line":174,"column":88}},"128":{"start":{"line":177,"column":2},"end":{"line":185,"column":4}},"129":{"start":{"line":201,"column":12},"end":{"line":201,"column":42}},"130":{"start":{"line":202,"column":14},"end":{"line":202,"column":27}},"131":{"start":{"line":204,"column":2},"end":{"line":206,"column":3}},"132":{"start":{"line":205,"column":4},"end":{"line":205,"column":20}},"133":{"start":{"line":208,"column":2},"end":{"line":208,"column":12}},"134":{"start":{"line":218,"column":13},"end":{"line":218,"column":15}},"135":{"start":{"line":220,"column":2},"end":{"line":224,"column":3}},"136":{"start":{"line":221,"column":4},"end":{"line":221,"column":55}},"137":{"start":{"line":222,"column":4},"end":{"line":222,"column":43}},"138":{"start":{"line":223,"column":4},"end":{"line":223,"column":48}},"139":{"start":{"line":226,"column":2},"end":{"line":226,"column":14}},"140":{"start":{"line":237,"column":16},"end":{"line":237,"column":87}},"141":{"start":{"line":238,"column":20},"end":{"line":238,"column":22}},"142":{"start":{"line":240,"column":2},"end":{"line":248,"column":3}},"143":{"start":{"line":241,"column":4},"end":{"line":241,"column":47}},"144":{"start":{"line":242,"column":9},"end":{"line":248,"column":3}},"145":{"start":{"line":243,"column":4},"end":{"line":243,"column":79}},"146":{"start":{"line":244,"column":9},"end":{"line":248,"column":3}},"147":{"start":{"line":245,"column":4},"end":{"line":245,"column":81}},"148":{"start":{"line":246,"column":9},"end":{"line":248,"column":3}},"149":{"start":{"line":247,"column":4},"end":{"line":247,"column":90}},"150":{"start":{"line":250,"column":2},"end":{"line":250,"column":21}},"151":{"start":{"line":262,"column":2},"end":{"line":274,"column":3}},"152":{"start":{"line":263,"column":4},"end":{"line":273,"column":5}},"153":{"start":{"line":264,"column":6},"end":{"line":264,"column":47}},"154":{"start":{"line":265,"column":11},"end":{"line":273,"column":5}},"155":{"start":{"line":266,"column":6},"end":{"line":270,"column":7}},"156":{"start":{"line":267,"column":8},"end":{"line":267,"column":46}},"157":{"start":{"line":268,"column":13},"end":{"line":270,"column":7}},"158":{"start":{"line":269,"column":8},"end":{"line":269,"column":47}},"159":{"start":{"line":272,"column":6},"end":{"line":272,"column":125}},"160":{"start":{"line":276,"column":2},"end":{"line":276,"column":15}},"161":{"start":{"line":289,"column":23},"end":{"line":289,"column":25}},"162":{"start":{"line":290,"column":2},"end":{"line":294,"column":5}},"163":{"start":{"line":291,"column":4},"end":{"line":293,"column":5}},"164":{"start":{"line":292,"column":6},"end":{"line":292,"column":40}},"165":{"start":{"line":295,"column":2},"end":{"line":295,"column":24}},"166":{"start":{"line":309,"column":13},"end":{"line":309,"column":45}},"167":{"start":{"line":311,"column":2},"end":{"line":313,"column":3}},"168":{"start":{"line":312,"column":4},"end":{"line":312,"column":29}},"169":{"start":{"line":315,"column":22},"end":{"line":315,"column":60}},"170":{"start":{"line":316,"column":20},"end":{"line":322,"column":4}},"171":{"start":{"line":317,"column":4},"end":{"line":319,"column":5}},"172":{"start":{"line":318,"column":6},"end":{"line":318,"column":18}},"173":{"start":{"line":321,"column":4},"end":{"line":321,"column":17}},"174":{"start":{"line":323,"column":2},"end":{"line":323,"column":21}},"175":{"start":{"line":336,"column":14},"end":{"line":336,"column":66}},"176":{"start":{"line":337,"column":16},"end":{"line":337,"column":85}},"177":{"start":{"line":338,"column":18},"end":{"line":338,"column":146}},"178":{"start":{"line":339,"column":2},"end":{"line":339,"column":60}},"179":{"start":{"line":340,"column":2},"end":{"line":340,"column":78}},"180":{"start":{"line":341,"column":2},"end":{"line":341,"column":55}},"181":{"start":{"line":342,"column":2},"end":{"line":342,"column":51}},"182":{"start":{"line":343,"column":2},"end":{"line":343,"column":15}},"183":{"start":{"line":347,"column":2},"end":{"line":347,"column":36}},"184":{"start":{"line":351,"column":10},"end":{"line":356,"column":4}},"185":{"start":{"line":352,"column":14},"end":{"line":352,"column":40}},"186":{"start":{"line":353,"column":4},"end":{"line":353,"column":17}},"187":{"start":{"line":355,"column":4},"end":{"line":355,"column":21}},"188":{"start":{"line":357,"column":2},"end":{"line":357,"column":11}},"189":{"start":{"line":373,"column":2},"end":{"line":375,"column":3}},"190":{"start":{"line":374,"column":4},"end":{"line":374,"column":17}},"191":{"start":{"line":377,"column":2},"end":{"line":379,"column":3}},"192":{"start":{"line":378,"column":4},"end":{"line":378,"column":21}},"193":{"start":{"line":381,"column":2},"end":{"line":384,"column":16}},"194":{"start":{"line":382,"column":4},"end":{"line":382,"column":20}},"195":{"start":{"line":383,"column":4},"end":{"line":383,"column":19}},"196":{"start":{"line":386,"column":2},"end":{"line":388,"column":3}},"197":{"start":{"line":387,"column":4},"end":{"line":387,"column":18}},"198":{"start":{"line":390,"column":2},"end":{"line":390,"column":17}},"199":{"start":{"line":407,"column":2},"end":{"line":407,"column":69}},"200":{"start":{"line":407,"column":56},"end":{"line":407,"column":69}},"201":{"start":{"line":408,"column":12},"end":{"line":408,"column":14}},"202":{"start":{"line":409,"column":13},"end":{"line":409,"column":15}},"203":{"start":{"line":410,"column":19},"end":{"line":410,"column":21}},"204":{"start":{"line":412,"column":18},"end":{"line":412,"column":51}},"205":{"start":{"line":415,"column":2},"end":{"line":443,"column":3}},"206":{"start":{"line":416,"column":4},"end":{"line":438,"column":5}},"207":{"start":{"line":417,"column":17},"end":{"line":417,"column":28}},"208":{"start":{"line":419,"column":6},"end":{"line":437,"column":7}},"209":{"start":{"line":420,"column":8},"end":{"line":436,"column":9}},"210":{"start":{"line":421,"column":10},"end":{"line":421,"column":50}},"211":{"start":{"line":422,"column":10},"end":{"line":422,"column":26}},"212":{"start":{"line":424,"column":10},"end":{"line":433,"column":11}},"213":{"start":{"line":425,"column":12},"end":{"line":429,"column":15}},"214":{"start":{"line":426,"column":14},"end":{"line":428,"column":15}},"215":{"start":{"line":427,"column":16},"end":{"line":427,"column":50}},"216":{"start":{"line":430,"column":12},"end":{"line":430,"column":54}},"217":{"start":{"line":432,"column":12},"end":{"line":432,"column":30}},"218":{"start":{"line":435,"column":10},"end":{"line":435,"column":31}},"219":{"start":{"line":440,"column":4},"end":{"line":440,"column":21}},"220":{"start":{"line":442,"column":4},"end":{"line":442,"column":18}},"221":{"start":{"line":445,"column":2},"end":{"line":445,"column":13}},"222":{"start":{"line":459,"column":2},"end":{"line":461,"column":3}},"223":{"start":{"line":460,"column":4},"end":{"line":460,"column":52}},"224":{"start":{"line":463,"column":2},"end":{"line":463,"column":15}},"225":{"start":{"line":476,"column":24},"end":{"line":476,"column":36}},"226":{"start":{"line":477,"column":14},"end":{"line":477,"column":18}},"227":{"start":{"line":478,"column":16},"end":{"line":478,"column":20}},"228":{"start":{"line":480,"column":2},"end":{"line":492,"column":3}},"229":{"start":{"line":481,"column":23},"end":{"line":481,"column":40}},"230":{"start":{"line":482,"column":26},"end":{"line":482,"column":43}},"231":{"start":{"line":483,"column":33},"end":{"line":483,"column":67}},"232":{"start":{"line":485,"column":4},"end":{"line":487,"column":5}},"233":{"start":{"line":486,"column":6},"end":{"line":486,"column":47}},"234":{"start":{"line":489,"column":25},"end":{"line":489,"column":48}},"235":{"start":{"line":490,"column":4},"end":{"line":490,"column":60}},"236":{"start":{"line":494,"column":2},"end":{"line":566,"column":3}},"237":{"start":{"line":495,"column":4},"end":{"line":520,"column":5}},"238":{"start":{"line":498,"column":21},"end":{"line":498,"column":44}},"239":{"start":{"line":499,"column":16},"end":{"line":499,"column":27}},"240":{"start":{"line":501,"column":6},"end":{"line":503,"column":7}},"241":{"start":{"line":502,"column":8},"end":{"line":502,"column":31}},"242":{"start":{"line":505,"column":20},"end":{"line":505,"column":56}},"243":{"start":{"line":507,"column":6},"end":{"line":507,"column":36}},"244":{"start":{"line":508,"column":6},"end":{"line":508,"column":17}},"245":{"start":{"line":510,"column":6},"end":{"line":519,"column":7}},"246":{"start":{"line":511,"column":8},"end":{"line":518,"column":11}},"247":{"start":{"line":512,"column":10},"end":{"line":517,"column":11}},"248":{"start":{"line":513,"column":22},"end":{"line":513,"column":41}},"249":{"start":{"line":514,"column":12},"end":{"line":514,"column":28}},"250":{"start":{"line":516,"column":12},"end":{"line":516,"column":33}},"251":{"start":{"line":522,"column":4},"end":{"line":522,"column":17}},"252":{"start":{"line":523,"column":4},"end":{"line":541,"column":7}},"253":{"start":{"line":524,"column":31},"end":{"line":524,"column":65}},"254":{"start":{"line":526,"column":6},"end":{"line":540,"column":7}},"255":{"start":{"line":527,"column":8},"end":{"line":537,"column":22}},"256":{"start":{"line":528,"column":35},"end":{"line":528,"column":97}},"257":{"start":{"line":530,"column":10},"end":{"line":536,"column":11}},"258":{"start":{"line":531,"column":12},"end":{"line":533,"column":15}},"259":{"start":{"line":532,"column":14},"end":{"line":532,"column":87}},"260":{"start":{"line":535,"column":12},"end":{"line":535,"column":45}},"261":{"start":{"line":539,"column":8},"end":{"line":539,"column":35}},"262":{"start":{"line":543,"column":4},"end":{"line":547,"column":5}},"263":{"start":{"line":544,"column":6},"end":{"line":544,"column":35}},"264":{"start":{"line":545,"column":11},"end":{"line":547,"column":5}},"265":{"start":{"line":546,"column":6},"end":{"line":546,"column":34}},"266":{"start":{"line":549,"column":29},"end":{"line":549,"column":58}},"267":{"start":{"line":551,"column":4},"end":{"line":565,"column":5}},"268":{"start":{"line":552,"column":6},"end":{"line":564,"column":7}},"269":{"start":{"line":553,"column":30},"end":{"line":553,"column":62}},"270":{"start":{"line":555,"column":28},"end":{"line":555,"column":84}},"271":{"start":{"line":557,"column":8},"end":{"line":561,"column":9}},"272":{"start":{"line":558,"column":10},"end":{"line":558,"column":34}},"273":{"start":{"line":560,"column":10},"end":{"line":560,"column":25}},"274":{"start":{"line":563,"column":8},"end":{"line":563,"column":23}},"275":{"start":{"line":568,"column":2},"end":{"line":571,"column":4}},"276":{"start":{"line":575,"column":22},"end":{"line":575,"column":27}},"277":{"start":{"line":577,"column":2},"end":{"line":591,"column":3}},"278":{"start":{"line":578,"column":4},"end":{"line":584,"column":7}},"279":{"start":{"line":579,"column":6},"end":{"line":583,"column":9}},"280":{"start":{"line":580,"column":8},"end":{"line":582,"column":9}},"281":{"start":{"line":581,"column":10},"end":{"line":581,"column":31}},"282":{"start":{"line":586,"column":4},"end":{"line":590,"column":7}},"283":{"start":{"line":587,"column":6},"end":{"line":589,"column":7}},"284":{"start":{"line":588,"column":8},"end":{"line":588,"column":29}},"285":{"start":{"line":593,"column":2},"end":{"line":593,"column":44}},"286":{"start":{"line":593,"column":21},"end":{"line":593,"column":44}},"287":{"start":{"line":594,"column":2},"end":{"line":594,"column":19}},"288":{"start":{"line":610,"column":25},"end":{"line":610,"column":30}},"289":{"start":{"line":611,"column":26},"end":{"line":611,"column":31}},"290":{"start":{"line":612,"column":21},"end":{"line":612,"column":26}},"291":{"start":{"line":615,"column":2},"end":{"line":677,"column":3}},"292":{"start":{"line":617,"column":6},"end":{"line":617,"column":72}},"293":{"start":{"line":618,"column":6},"end":{"line":618,"column":53}},"294":{"start":{"line":619,"column":6},"end":{"line":619,"column":12}},"295":{"start":{"line":622,"column":6},"end":{"line":622,"column":72}},"296":{"start":{"line":623,"column":6},"end":{"line":623,"column":53}},"297":{"start":{"line":624,"column":6},"end":{"line":624,"column":12}},"298":{"start":{"line":627,"column":6},"end":{"line":627,"column":72}},"299":{"start":{"line":628,"column":6},"end":{"line":628,"column":51}},"300":{"start":{"line":629,"column":6},"end":{"line":629,"column":12}},"301":{"start":{"line":632,"column":6},"end":{"line":632,"column":72}},"302":{"start":{"line":633,"column":6},"end":{"line":633,"column":52}},"303":{"start":{"line":634,"column":6},"end":{"line":634,"column":12}},"304":{"start":{"line":637,"column":6},"end":{"line":637,"column":72}},"305":{"start":{"line":638,"column":6},"end":{"line":638,"column":51}},"306":{"start":{"line":639,"column":6},"end":{"line":639,"column":12}},"307":{"start":{"line":642,"column":6},"end":{"line":642,"column":72}},"308":{"start":{"line":643,"column":6},"end":{"line":643,"column":52}},"309":{"start":{"line":644,"column":6},"end":{"line":644,"column":12}},"310":{"start":{"line":647,"column":6},"end":{"line":647,"column":72}},"311":{"start":{"line":648,"column":6},"end":{"line":648,"column":78}},"312":{"start":{"line":649,"column":6},"end":{"line":649,"column":12}},"313":{"start":{"line":652,"column":6},"end":{"line":652,"column":72}},"314":{"start":{"line":653,"column":6},"end":{"line":653,"column":80}},"315":{"start":{"line":654,"column":6},"end":{"line":654,"column":12}},"316":{"start":{"line":657,"column":6},"end":{"line":657,"column":76}},"317":{"start":{"line":658,"column":6},"end":{"line":658,"column":78}},"318":{"start":{"line":659,"column":6},"end":{"line":659,"column":74}},"319":{"start":{"line":660,"column":6},"end":{"line":660,"column":12}},"320":{"start":{"line":663,"column":6},"end":{"line":663,"column":76}},"321":{"start":{"line":664,"column":6},"end":{"line":664,"column":78}},"322":{"start":{"line":665,"column":6},"end":{"line":665,"column":74}},"323":{"start":{"line":666,"column":6},"end":{"line":666,"column":12}},"324":{"start":{"line":669,"column":6},"end":{"line":669,"column":72}},"325":{"start":{"line":670,"column":6},"end":{"line":670,"column":56}},"326":{"start":{"line":671,"column":6},"end":{"line":671,"column":12}},"327":{"start":{"line":674,"column":6},"end":{"line":674,"column":72}},"328":{"start":{"line":675,"column":6},"end":{"line":675,"column":57}},"329":{"start":{"line":676,"column":6},"end":{"line":676,"column":12}},"330":{"start":{"line":679,"column":2},"end":{"line":679,"column":22}}},"fnMap":{"0":{"name":"_createForOfIteratorHelper","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":35}},"loc":{"start":{"line":36,"column":55},"end":{"line":36,"column":997}},"line":36},"1":{"name":"F","decl":{"start":{"line":36,"column":296},"end":{"line":36,"column":297}},"loc":{"start":{"line":36,"column":300},"end":{"line":36,"column":302}},"line":36},"2":{"name":"n","decl":{"start":{"line":36,"column":331},"end":{"line":36,"column":332}},"loc":{"start":{"line":36,"column":335},"end":{"line":36,"column":419}},"line":36},"3":{"name":"e","decl":{"start":{"line":36,"column":433},"end":{"line":36,"column":434}},"loc":{"start":{"line":36,"column":439},"end":{"line":36,"column":452}},"line":36},"4":{"name":"s","decl":{"start":{"line":36,"column":695},"end":{"line":36,"column":696}},"loc":{"start":{"line":36,"column":699},"end":{"line":36,"column":729}},"line":36},"5":{"name":"n","decl":{"start":{"line":36,"column":743},"end":{"line":36,"column":744}},"loc":{"start":{"line":36,"column":747},"end":{"line":36,"column":815}},"line":36},"6":{"name":"e","decl":{"start":{"line":36,"column":829},"end":{"line":36,"column":830}},"loc":{"start":{"line":36,"column":836},"end":{"line":36,"column":865}},"line":36},"7":{"name":"f","decl":{"start":{"line":36,"column":879},"end":{"line":36,"column":880}},"loc":{"start":{"line":36,"column":883},"end":{"line":36,"column":992}},"line":36},"8":{"name":"_unsupportedIterableToArray","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":36}},"loc":{"start":{"line":38,"column":48},"end":{"line":38,"column":416}},"line":38},"9":{"name":"_arrayLikeToArray","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":26}},"loc":{"start":{"line":40,"column":37},"end":{"line":40,"column":183}},"line":40},"10":{"name":"escapeAbeValuesFromStringRequest","decl":{"start":{"line":54,"column":9},"end":{"line":54,"column":41}},"loc":{"start":{"line":54,"column":57},"end":{"line":101,"column":1}},"line":54},"11":{"name":"handleSqlRequest","decl":{"start":{"line":113,"column":9},"end":{"line":113,"column":25}},"loc":{"start":{"line":113,"column":41},"end":{"line":186,"column":1}},"line":113},"12":{"name":"(anonymous_12)","decl":{"start":{"line":132,"column":52},"end":{"line":132,"column":53}},"loc":{"start":{"line":132,"column":68},"end":{"line":138,"column":7}},"line":132},"13":{"name":"(anonymous_13)","decl":{"start":{"line":147,"column":47},"end":{"line":147,"column":48}},"loc":{"start":{"line":147,"column":63},"end":{"line":149,"column":5}},"line":147},"14":{"name":"getDataSource","decl":{"start":{"line":200,"column":9},"end":{"line":200,"column":22}},"loc":{"start":{"line":200,"column":28},"end":{"line":209,"column":1}},"line":200},"15":{"name":"sanitizeFromStatement","decl":{"start":{"line":217,"column":9},"end":{"line":217,"column":30}},"loc":{"start":{"line":217,"column":42},"end":{"line":227,"column":1}},"line":217},"16":{"name":"getFromDirectory","decl":{"start":{"line":236,"column":9},"end":{"line":236,"column":25}},"loc":{"start":{"line":236,"column":37},"end":{"line":251,"column":1}},"line":236},"17":{"name":"executeOrderByClause","decl":{"start":{"line":261,"column":9},"end":{"line":261,"column":29}},"loc":{"start":{"line":261,"column":46},"end":{"line":277,"column":1}},"line":261},"18":{"name":"keepOnlyPublishedPost","decl":{"start":{"line":288,"column":9},"end":{"line":288,"column":30}},"loc":{"start":{"line":288,"column":38},"end":{"line":296,"column":1}},"line":288},"19":{"name":"(anonymous_19)","decl":{"start":{"line":290,"column":38},"end":{"line":290,"column":39}},"loc":{"start":{"line":290,"column":54},"end":{"line":294,"column":3}},"line":290},"20":{"name":"executeFromClause","decl":{"start":{"line":308,"column":9},"end":{"line":308,"column":26}},"loc":{"start":{"line":308,"column":61},"end":{"line":324,"column":1}},"line":308},"21":{"name":"(anonymous_21)","decl":{"start":{"line":316,"column":33},"end":{"line":316,"column":34}},"loc":{"start":{"line":316,"column":52},"end":{"line":322,"column":3}},"line":316},"22":{"name":"execQuery","decl":{"start":{"line":335,"column":9},"end":{"line":335,"column":18}},"loc":{"start":{"line":335,"column":36},"end":{"line":344,"column":1}},"line":335},"23":{"name":"executeQuerySync","decl":{"start":{"line":346,"column":9},"end":{"line":346,"column":25}},"loc":{"start":{"line":346,"column":43},"end":{"line":348,"column":1}},"line":346},"24":{"name":"executeQuery","decl":{"start":{"line":350,"column":9},"end":{"line":350,"column":21}},"loc":{"start":{"line":350,"column":39},"end":{"line":358,"column":1}},"line":350},"25":{"name":"(anonymous_25)","decl":{"start":{"line":351,"column":32},"end":{"line":351,"column":33}},"loc":{"start":{"line":351,"column":51},"end":{"line":354,"column":3}},"line":351},"26":{"name":"(anonymous_26)","decl":{"start":{"line":354,"column":14},"end":{"line":354,"column":15}},"loc":{"start":{"line":354,"column":27},"end":{"line":356,"column":3}},"line":354},"27":{"name":"getSourceType","decl":{"start":{"line":372,"column":9},"end":{"line":372,"column":22}},"loc":{"start":{"line":372,"column":28},"end":{"line":391,"column":1}},"line":372},"28":{"name":"executeWhereClause","decl":{"start":{"line":406,"column":9},"end":{"line":406,"column":27}},"loc":{"start":{"line":406,"column":62},"end":{"line":446,"column":1}},"line":406},"29":{"name":"(anonymous_29)","decl":{"start":{"line":425,"column":50},"end":{"line":425,"column":51}},"loc":{"start":{"line":425,"column":68},"end":{"line":429,"column":13}},"line":425},"30":{"name":"executeLimitClause","decl":{"start":{"line":458,"column":9},"end":{"line":458,"column":27}},"loc":{"start":{"line":458,"column":45},"end":{"line":464,"column":1}},"line":458},"31":{"name":"getWhereValuesToCompare","decl":{"start":{"line":475,"column":9},"end":{"line":475,"column":32}},"loc":{"start":{"line":475,"column":66},"end":{"line":572,"column":1}},"line":475},"32":{"name":"(anonymous_32)","decl":{"start":{"line":511,"column":46},"end":{"line":511,"column":47}},"loc":{"start":{"line":511,"column":64},"end":{"line":518,"column":9}},"line":511},"33":{"name":"(anonymous_33)","decl":{"start":{"line":523,"column":52},"end":{"line":523,"column":53}},"loc":{"start":{"line":523,"column":69},"end":{"line":541,"column":5}},"line":523},"34":{"name":"(anonymous_34)","decl":{"start":{"line":531,"column":61},"end":{"line":531,"column":62}},"loc":{"start":{"line":531,"column":90},"end":{"line":533,"column":13}},"line":531},"35":{"name":"isInStatementCorrect","decl":{"start":{"line":574,"column":9},"end":{"line":574,"column":29}},"loc":{"start":{"line":574,"column":49},"end":{"line":595,"column":1}},"line":574},"36":{"name":"(anonymous_36)","decl":{"start":{"line":578,"column":46},"end":{"line":578,"column":47}},"loc":{"start":{"line":578,"column":62},"end":{"line":584,"column":5}},"line":578},"37":{"name":"(anonymous_37)","decl":{"start":{"line":579,"column":49},"end":{"line":579,"column":50}},"loc":{"start":{"line":579,"column":66},"end":{"line":583,"column":7}},"line":579},"38":{"name":"(anonymous_38)","decl":{"start":{"line":586,"column":47},"end":{"line":586,"column":48}},"loc":{"start":{"line":586,"column":64},"end":{"line":590,"column":5}},"line":586},"39":{"name":"recurseWhere","decl":{"start":{"line":609,"column":9},"end":{"line":609,"column":21}},"loc":{"start":{"line":609,"column":55},"end":{"line":680,"column":1}},"line":609}},"branchMap":{"0":{"loc":{"start":{"line":36,"column":65},"end":{"line":36,"column":623}},"type":"if","locations":[{"start":{"line":36,"column":65},"end":{"line":36,"column":623}},{"start":{"line":36,"column":65},"end":{"line":36,"column":623}}],"line":36},"1":{"loc":{"start":{"line":36,"column":69},"end":{"line":36,"column":128}},"type":"binary-expr","locations":[{"start":{"line":36,"column":69},"end":{"line":36,"column":98}},{"start":{"line":36,"column":102},"end":{"line":36,"column":128}}],"line":36},"2":{"loc":{"start":{"line":36,"column":132},"end":{"line":36,"column":463}},"type":"if","locations":[{"start":{"line":36,"column":132},"end":{"line":36,"column":463}},{"start":{"line":36,"column":132},"end":{"line":36,"column":463}}],"line":36},"3":{"loc":{"start":{"line":36,"column":136},"end":{"line":36,"column":248}},"type":"binary-expr","locations":[{"start":{"line":36,"column":136},"end":{"line":36,"column":152}},{"start":{"line":36,"column":157},"end":{"line":36,"column":192}},{"start":{"line":36,"column":197},"end":{"line":36,"column":211}},{"start":{"line":36,"column":215},"end":{"line":36,"column":216}},{"start":{"line":36,"column":220},"end":{"line":36,"column":248}}],"line":36},"4":{"loc":{"start":{"line":36,"column":252},"end":{"line":36,"column":267}},"type":"if","locations":[{"start":{"line":36,"column":252},"end":{"line":36,"column":267}},{"start":{"line":36,"column":252},"end":{"line":36,"column":267}}],"line":36},"5":{"loc":{"start":{"line":36,"column":337},"end":{"line":36,"column":378}},"type":"if","locations":[{"start":{"line":36,"column":337},"end":{"line":36,"column":378}},{"start":{"line":36,"column":337},"end":{"line":36,"column":378}}],"line":36},"6":{"loc":{"start":{"line":36,"column":891},"end":{"line":36,"column":953}},"type":"if","locations":[{"start":{"line":36,"column":891},"end":{"line":36,"column":953}},{"start":{"line":36,"column":891},"end":{"line":36,"column":953}}],"line":36},"7":{"loc":{"start":{"line":36,"column":895},"end":{"line":36,"column":936}},"type":"binary-expr","locations":[{"start":{"line":36,"column":895},"end":{"line":36,"column":912}},{"start":{"line":36,"column":916},"end":{"line":36,"column":936}}],"line":36},"8":{"loc":{"start":{"line":36,"column":966},"end":{"line":36,"column":988}},"type":"if","locations":[{"start":{"line":36,"column":966},"end":{"line":36,"column":988}},{"start":{"line":36,"column":966},"end":{"line":36,"column":988}}],"line":36},"9":{"loc":{"start":{"line":38,"column":50},"end":{"line":38,"column":65}},"type":"if","locations":[{"start":{"line":38,"column":50},"end":{"line":38,"column":65}},{"start":{"line":38,"column":50},"end":{"line":38,"column":65}}],"line":38},"10":{"loc":{"start":{"line":38,"column":66},"end":{"line":38,"column":129}},"type":"if","locations":[{"start":{"line":38,"column":66},"end":{"line":38,"column":129}},{"start":{"line":38,"column":66},"end":{"line":38,"column":129}}],"line":38},"11":{"loc":{"start":{"line":38,"column":186},"end":{"line":38,"column":246}},"type":"if","locations":[{"start":{"line":38,"column":186},"end":{"line":38,"column":246}},{"start":{"line":38,"column":186},"end":{"line":38,"column":246}}],"line":38},"12":{"loc":{"start":{"line":38,"column":190},"end":{"line":38,"column":221}},"type":"binary-expr","locations":[{"start":{"line":38,"column":190},"end":{"line":38,"column":204}},{"start":{"line":38,"column":208},"end":{"line":38,"column":221}}],"line":38},"13":{"loc":{"start":{"line":38,"column":247},"end":{"line":38,"column":300}},"type":"if","locations":[{"start":{"line":38,"column":247},"end":{"line":38,"column":300}},{"start":{"line":38,"column":247},"end":{"line":38,"column":300}}],"line":38},"14":{"loc":{"start":{"line":38,"column":251},"end":{"line":38,"column":277}},"type":"binary-expr","locations":[{"start":{"line":38,"column":251},"end":{"line":38,"column":262}},{"start":{"line":38,"column":266},"end":{"line":38,"column":277}}],"line":38},"15":{"loc":{"start":{"line":38,"column":301},"end":{"line":38,"column":414}},"type":"if","locations":[{"start":{"line":38,"column":301},"end":{"line":38,"column":414}},{"start":{"line":38,"column":301},"end":{"line":38,"column":414}}],"line":38},"16":{"loc":{"start":{"line":38,"column":305},"end":{"line":38,"column":376}},"type":"binary-expr","locations":[{"start":{"line":38,"column":305},"end":{"line":38,"column":322}},{"start":{"line":38,"column":326},"end":{"line":38,"column":376}}],"line":38},"17":{"loc":{"start":{"line":40,"column":39},"end":{"line":40,"column":93}},"type":"if","locations":[{"start":{"line":40,"column":39},"end":{"line":40,"column":93}},{"start":{"line":40,"column":39},"end":{"line":40,"column":93}}],"line":40},"18":{"loc":{"start":{"line":40,"column":43},"end":{"line":40,"column":74}},"type":"binary-expr","locations":[{"start":{"line":40,"column":43},"end":{"line":40,"column":54}},{"start":{"line":40,"column":58},"end":{"line":40,"column":74}}],"line":40},"19":{"loc":{"start":{"line":59,"column":2},"end":{"line":78,"column":3}},"type":"if","locations":[{"start":{"line":59,"column":2},"end":{"line":78,"column":3}},{"start":{"line":59,"column":2},"end":{"line":78,"column":3}}],"line":59},"20":{"loc":{"start":{"line":59,"column":6},"end":{"line":59,"column":55}},"type":"binary-expr","locations":[{"start":{"line":59,"column":6},"end":{"line":59,"column":27}},{"start":{"line":59,"column":31},"end":{"line":59,"column":55}}],"line":59},"21":{"loc":{"start":{"line":69,"column":8},"end":{"line":73,"column":9}},"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":73,"column":9}},{"start":{"line":69,"column":8},"end":{"line":73,"column":9}}],"line":69},"22":{"loc":{"start":{"line":83,"column":2},"end":{"line":97,"column":3}},"type":"if","locations":[{"start":{"line":83,"column":2},"end":{"line":97,"column":3}},{"start":{"line":83,"column":2},"end":{"line":97,"column":3}}],"line":83},"23":{"loc":{"start":{"line":88,"column":6},"end":{"line":90,"column":7}},"type":"if","locations":[{"start":{"line":88,"column":6},"end":{"line":90,"column":7}},{"start":{"line":88,"column":6},"end":{"line":90,"column":7}}],"line":88},"24":{"loc":{"start":{"line":120,"column":2},"end":{"line":122,"column":3}},"type":"if","locations":[{"start":{"line":120,"column":2},"end":{"line":122,"column":3}},{"start":{"line":120,"column":2},"end":{"line":122,"column":3}}],"line":120},"25":{"loc":{"start":{"line":128,"column":2},"end":{"line":140,"column":3}},"type":"if","locations":[{"start":{"line":128,"column":2},"end":{"line":140,"column":3}},{"start":{"line":128,"column":2},"end":{"line":140,"column":3}}],"line":128},"26":{"loc":{"start":{"line":129,"column":4},"end":{"line":139,"column":5}},"type":"if","locations":[{"start":{"line":129,"column":4},"end":{"line":139,"column":5}},{"start":{"line":129,"column":4},"end":{"line":139,"column":5}}],"line":129},"27":{"loc":{"start":{"line":133,"column":8},"end":{"line":137,"column":9}},"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":137,"column":9}},{"start":{"line":133,"column":8},"end":{"line":137,"column":9}}],"line":133},"28":{"loc":{"start":{"line":146,"column":2},"end":{"line":152,"column":3}},"type":"if","locations":[{"start":{"line":146,"column":2},"end":{"line":152,"column":3}},{"start":{"line":146,"column":2},"end":{"line":152,"column":3}}],"line":146},"29":{"loc":{"start":{"line":157,"column":2},"end":{"line":159,"column":3}},"type":"if","locations":[{"start":{"line":157,"column":2},"end":{"line":159,"column":3}},{"start":{"line":157,"column":2},"end":{"line":159,"column":3}}],"line":157},"30":{"loc":{"start":{"line":163,"column":2},"end":{"line":165,"column":3}},"type":"if","locations":[{"start":{"line":163,"column":2},"end":{"line":165,"column":3}},{"start":{"line":163,"column":2},"end":{"line":165,"column":3}}],"line":163},"31":{"loc":{"start":{"line":169,"column":2},"end":{"line":175,"column":3}},"type":"if","locations":[{"start":{"line":169,"column":2},"end":{"line":175,"column":3}},{"start":{"line":169,"column":2},"end":{"line":175,"column":3}}],"line":169},"32":{"loc":{"start":{"line":169,"column":6},"end":{"line":169,"column":59}},"type":"binary-expr","locations":[{"start":{"line":169,"column":6},"end":{"line":169,"column":29}},{"start":{"line":169,"column":33},"end":{"line":169,"column":59}}],"line":169},"33":{"loc":{"start":{"line":204,"column":2},"end":{"line":206,"column":3}},"type":"if","locations":[{"start":{"line":204,"column":2},"end":{"line":206,"column":3}},{"start":{"line":204,"column":2},"end":{"line":206,"column":3}}],"line":204},"34":{"loc":{"start":{"line":220,"column":2},"end":{"line":224,"column":3}},"type":"if","locations":[{"start":{"line":220,"column":2},"end":{"line":224,"column":3}},{"start":{"line":220,"column":2},"end":{"line":224,"column":3}}],"line":220},"35":{"loc":{"start":{"line":237,"column":16},"end":{"line":237,"column":87}},"type":"cond-expr","locations":[{"start":{"line":237,"column":69},"end":{"line":237,"column":81}},{"start":{"line":237,"column":84},"end":{"line":237,"column":87}}],"line":237},"36":{"loc":{"start":{"line":237,"column":16},"end":{"line":237,"column":66}},"type":"binary-expr","locations":[{"start":{"line":237,"column":16},"end":{"line":237,"column":36}},{"start":{"line":237,"column":40},"end":{"line":237,"column":66}}],"line":237},"37":{"loc":{"start":{"line":240,"column":2},"end":{"line":248,"column":3}},"type":"if","locations":[{"start":{"line":240,"column":2},"end":{"line":248,"column":3}},{"start":{"line":240,"column":2},"end":{"line":248,"column":3}}],"line":240},"38":{"loc":{"start":{"line":240,"column":6},"end":{"line":240,"column":64}},"type":"binary-expr","locations":[{"start":{"line":240,"column":6},"end":{"line":240,"column":22}},{"start":{"line":240,"column":26},"end":{"line":240,"column":43}},{"start":{"line":240,"column":47},"end":{"line":240,"column":64}}],"line":240},"39":{"loc":{"start":{"line":242,"column":9},"end":{"line":248,"column":3}},"type":"if","locations":[{"start":{"line":242,"column":9},"end":{"line":248,"column":3}},{"start":{"line":242,"column":9},"end":{"line":248,"column":3}}],"line":242},"40":{"loc":{"start":{"line":244,"column":9},"end":{"line":248,"column":3}},"type":"if","locations":[{"start":{"line":244,"column":9},"end":{"line":248,"column":3}},{"start":{"line":244,"column":9},"end":{"line":248,"column":3}}],"line":244},"41":{"loc":{"start":{"line":246,"column":9},"end":{"line":248,"column":3}},"type":"if","locations":[{"start":{"line":246,"column":9},"end":{"line":248,"column":3}},{"start":{"line":246,"column":9},"end":{"line":248,"column":3}}],"line":246},"42":{"loc":{"start":{"line":262,"column":2},"end":{"line":274,"column":3}},"type":"if","locations":[{"start":{"line":262,"column":2},"end":{"line":274,"column":3}},{"start":{"line":262,"column":2},"end":{"line":274,"column":3}}],"line":262},"43":{"loc":{"start":{"line":263,"column":4},"end":{"line":273,"column":5}},"type":"if","locations":[{"start":{"line":263,"column":4},"end":{"line":273,"column":5}},{"start":{"line":263,"column":4},"end":{"line":273,"column":5}}],"line":263},"44":{"loc":{"start":{"line":265,"column":11},"end":{"line":273,"column":5}},"type":"if","locations":[{"start":{"line":265,"column":11},"end":{"line":273,"column":5}},{"start":{"line":265,"column":11},"end":{"line":273,"column":5}}],"line":265},"45":{"loc":{"start":{"line":266,"column":6},"end":{"line":270,"column":7}},"type":"if","locations":[{"start":{"line":266,"column":6},"end":{"line":270,"column":7}},{"start":{"line":266,"column":6},"end":{"line":270,"column":7}}],"line":266},"46":{"loc":{"start":{"line":268,"column":13},"end":{"line":270,"column":7}},"type":"if","locations":[{"start":{"line":268,"column":13},"end":{"line":270,"column":7}},{"start":{"line":268,"column":13},"end":{"line":270,"column":7}}],"line":268},"47":{"loc":{"start":{"line":272,"column":76},"end":{"line":272,"column":122}},"type":"cond-expr","locations":[{"start":{"line":272,"column":116},"end":{"line":272,"column":118}},{"start":{"line":272,"column":121},"end":{"line":272,"column":122}}],"line":272},"48":{"loc":{"start":{"line":291,"column":4},"end":{"line":293,"column":5}},"type":"if","locations":[{"start":{"line":291,"column":4},"end":{"line":293,"column":5}},{"start":{"line":291,"column":4},"end":{"line":293,"column":5}}],"line":291},"49":{"loc":{"start":{"line":311,"column":2},"end":{"line":313,"column":3}},"type":"if","locations":[{"start":{"line":311,"column":2},"end":{"line":313,"column":3}},{"start":{"line":311,"column":2},"end":{"line":313,"column":3}}],"line":311},"50":{"loc":{"start":{"line":317,"column":4},"end":{"line":319,"column":5}},"type":"if","locations":[{"start":{"line":317,"column":4},"end":{"line":319,"column":5}},{"start":{"line":317,"column":4},"end":{"line":319,"column":5}}],"line":317},"51":{"loc":{"start":{"line":338,"column":18},"end":{"line":338,"column":146}},"type":"cond-expr","locations":[{"start":{"line":338,"column":92},"end":{"line":338,"column":140}},{"start":{"line":338,"column":143},"end":{"line":338,"column":146}}],"line":338},"52":{"loc":{"start":{"line":338,"column":18},"end":{"line":338,"column":89}},"type":"binary-expr","locations":[{"start":{"line":338,"column":18},"end":{"line":338,"column":26}},{"start":{"line":338,"column":30},"end":{"line":338,"column":55}},{"start":{"line":338,"column":59},"end":{"line":338,"column":89}}],"line":338},"53":{"loc":{"start":{"line":373,"column":2},"end":{"line":375,"column":3}},"type":"if","locations":[{"start":{"line":373,"column":2},"end":{"line":375,"column":3}},{"start":{"line":373,"column":2},"end":{"line":375,"column":3}}],"line":373},"54":{"loc":{"start":{"line":377,"column":2},"end":{"line":379,"column":3}},"type":"if","locations":[{"start":{"line":377,"column":2},"end":{"line":379,"column":3}},{"start":{"line":377,"column":2},"end":{"line":379,"column":3}}],"line":377},"55":{"loc":{"start":{"line":386,"column":2},"end":{"line":388,"column":3}},"type":"if","locations":[{"start":{"line":386,"column":2},"end":{"line":388,"column":3}},{"start":{"line":386,"column":2},"end":{"line":388,"column":3}}],"line":386},"56":{"loc":{"start":{"line":407,"column":2},"end":{"line":407,"column":69}},"type":"if","locations":[{"start":{"line":407,"column":2},"end":{"line":407,"column":69}},{"start":{"line":407,"column":2},"end":{"line":407,"column":69}}],"line":407},"57":{"loc":{"start":{"line":407,"column":6},"end":{"line":407,"column":54}},"type":"binary-expr","locations":[{"start":{"line":407,"column":6},"end":{"line":407,"column":35}},{"start":{"line":407,"column":39},"end":{"line":407,"column":54}}],"line":407},"58":{"loc":{"start":{"line":419,"column":6},"end":{"line":437,"column":7}},"type":"if","locations":[{"start":{"line":419,"column":6},"end":{"line":437,"column":7}},{"start":{"line":419,"column":6},"end":{"line":437,"column":7}}],"line":419},"59":{"loc":{"start":{"line":420,"column":8},"end":{"line":436,"column":9}},"type":"if","locations":[{"start":{"line":420,"column":8},"end":{"line":436,"column":9}},{"start":{"line":420,"column":8},"end":{"line":436,"column":9}}],"line":420},"60":{"loc":{"start":{"line":424,"column":10},"end":{"line":433,"column":11}},"type":"if","locations":[{"start":{"line":424,"column":10},"end":{"line":433,"column":11}},{"start":{"line":424,"column":10},"end":{"line":433,"column":11}}],"line":424},"61":{"loc":{"start":{"line":424,"column":14},"end":{"line":424,"column":73}},"type":"binary-expr","locations":[{"start":{"line":424,"column":14},"end":{"line":424,"column":29}},{"start":{"line":424,"column":33},"end":{"line":424,"column":51}},{"start":{"line":424,"column":55},"end":{"line":424,"column":73}}],"line":424},"62":{"loc":{"start":{"line":426,"column":14},"end":{"line":428,"column":15}},"type":"if","locations":[{"start":{"line":426,"column":14},"end":{"line":428,"column":15}},{"start":{"line":426,"column":14},"end":{"line":428,"column":15}}],"line":426},"63":{"loc":{"start":{"line":459,"column":2},"end":{"line":461,"column":3}},"type":"if","locations":[{"start":{"line":459,"column":2},"end":{"line":461,"column":3}},{"start":{"line":459,"column":2},"end":{"line":461,"column":3}}],"line":459},"64":{"loc":{"start":{"line":459,"column":6},"end":{"line":459,"column":45}},"type":"binary-expr","locations":[{"start":{"line":459,"column":6},"end":{"line":459,"column":29}},{"start":{"line":459,"column":33},"end":{"line":459,"column":45}}],"line":459},"65":{"loc":{"start":{"line":485,"column":4},"end":{"line":487,"column":5}},"type":"if","locations":[{"start":{"line":485,"column":4},"end":{"line":487,"column":5}},{"start":{"line":485,"column":4},"end":{"line":487,"column":5}}],"line":485},"66":{"loc":{"start":{"line":485,"column":8},"end":{"line":485,"column":75}},"type":"binary-expr","locations":[{"start":{"line":485,"column":8},"end":{"line":485,"column":38}},{"start":{"line":485,"column":42},"end":{"line":485,"column":75}}],"line":485},"67":{"loc":{"start":{"line":494,"column":2},"end":{"line":566,"column":3}},"type":"if","locations":[{"start":{"line":494,"column":2},"end":{"line":566,"column":3}},{"start":{"line":494,"column":2},"end":{"line":566,"column":3}}],"line":494},"68":{"loc":{"start":{"line":494,"column":6},"end":{"line":494,"column":60}},"type":"binary-expr","locations":[{"start":{"line":494,"column":6},"end":{"line":494,"column":29}},{"start":{"line":494,"column":33},"end":{"line":494,"column":60}}],"line":494},"69":{"loc":{"start":{"line":495,"column":4},"end":{"line":520,"column":5}},"type":"if","locations":[{"start":{"line":495,"column":4},"end":{"line":520,"column":5}},{"start":{"line":495,"column":4},"end":{"line":520,"column":5}}],"line":495},"70":{"loc":{"start":{"line":501,"column":6},"end":{"line":503,"column":7}},"type":"if","locations":[{"start":{"line":501,"column":6},"end":{"line":503,"column":7}},{"start":{"line":501,"column":6},"end":{"line":503,"column":7}}],"line":501},"71":{"loc":{"start":{"line":510,"column":6},"end":{"line":519,"column":7}},"type":"if","locations":[{"start":{"line":510,"column":6},"end":{"line":519,"column":7}},{"start":{"line":510,"column":6},"end":{"line":519,"column":7}}],"line":510},"72":{"loc":{"start":{"line":526,"column":6},"end":{"line":540,"column":7}},"type":"if","locations":[{"start":{"line":526,"column":6},"end":{"line":540,"column":7}},{"start":{"line":526,"column":6},"end":{"line":540,"column":7}}],"line":526},"73":{"loc":{"start":{"line":526,"column":10},"end":{"line":526,"column":69}},"type":"binary-expr","locations":[{"start":{"line":526,"column":10},"end":{"line":526,"column":36}},{"start":{"line":526,"column":40},"end":{"line":526,"column":69}}],"line":526},"74":{"loc":{"start":{"line":530,"column":10},"end":{"line":536,"column":11}},"type":"if","locations":[{"start":{"line":530,"column":10},"end":{"line":536,"column":11}},{"start":{"line":530,"column":10},"end":{"line":536,"column":11}}],"line":530},"75":{"loc":{"start":{"line":543,"column":4},"end":{"line":547,"column":5}},"type":"if","locations":[{"start":{"line":543,"column":4},"end":{"line":547,"column":5}},{"start":{"line":543,"column":4},"end":{"line":547,"column":5}}],"line":543},"76":{"loc":{"start":{"line":545,"column":11},"end":{"line":547,"column":5}},"type":"if","locations":[{"start":{"line":545,"column":11},"end":{"line":547,"column":5}},{"start":{"line":545,"column":11},"end":{"line":547,"column":5}}],"line":545},"77":{"loc":{"start":{"line":551,"column":4},"end":{"line":565,"column":5}},"type":"if","locations":[{"start":{"line":551,"column":4},"end":{"line":565,"column":5}},{"start":{"line":551,"column":4},"end":{"line":565,"column":5}}],"line":551},"78":{"loc":{"start":{"line":551,"column":8},"end":{"line":551,"column":67}},"type":"binary-expr","locations":[{"start":{"line":551,"column":8},"end":{"line":551,"column":34}},{"start":{"line":551,"column":38},"end":{"line":551,"column":67}}],"line":551},"79":{"loc":{"start":{"line":557,"column":8},"end":{"line":561,"column":9}},"type":"if","locations":[{"start":{"line":557,"column":8},"end":{"line":561,"column":9}},{"start":{"line":557,"column":8},"end":{"line":561,"column":9}}],"line":557},"80":{"loc":{"start":{"line":577,"column":2},"end":{"line":591,"column":3}},"type":"if","locations":[{"start":{"line":577,"column":2},"end":{"line":591,"column":3}},{"start":{"line":577,"column":2},"end":{"line":591,"column":3}}],"line":577},"81":{"loc":{"start":{"line":580,"column":8},"end":{"line":582,"column":9}},"type":"if","locations":[{"start":{"line":580,"column":8},"end":{"line":582,"column":9}},{"start":{"line":580,"column":8},"end":{"line":582,"column":9}}],"line":580},"82":{"loc":{"start":{"line":580,"column":12},"end":{"line":580,"column":42}},"type":"binary-expr","locations":[{"start":{"line":580,"column":12},"end":{"line":580,"column":24}},{"start":{"line":580,"column":28},"end":{"line":580,"column":42}}],"line":580},"83":{"loc":{"start":{"line":587,"column":6},"end":{"line":589,"column":7}},"type":"if","locations":[{"start":{"line":587,"column":6},"end":{"line":589,"column":7}},{"start":{"line":587,"column":6},"end":{"line":589,"column":7}}],"line":587},"84":{"loc":{"start":{"line":593,"column":2},"end":{"line":593,"column":44}},"type":"if","locations":[{"start":{"line":593,"column":2},"end":{"line":593,"column":44}},{"start":{"line":593,"column":2},"end":{"line":593,"column":44}}],"line":593},"85":{"loc":{"start":{"line":615,"column":2},"end":{"line":677,"column":3}},"type":"switch","locations":[{"start":{"line":616,"column":4},"end":{"line":619,"column":12}},{"start":{"line":621,"column":4},"end":{"line":624,"column":12}},{"start":{"line":626,"column":4},"end":{"line":629,"column":12}},{"start":{"line":631,"column":4},"end":{"line":634,"column":12}},{"start":{"line":636,"column":4},"end":{"line":639,"column":12}},{"start":{"line":641,"column":4},"end":{"line":644,"column":12}},{"start":{"line":646,"column":4},"end":{"line":649,"column":12}},{"start":{"line":651,"column":4},"end":{"line":654,"column":12}},{"start":{"line":656,"column":4},"end":{"line":660,"column":12}},{"start":{"line":662,"column":4},"end":{"line":666,"column":12}},{"start":{"line":668,"column":4},"end":{"line":671,"column":12}},{"start":{"line":673,"column":4},"end":{"line":676,"column":12}}],"line":615},"86":{"loc":{"start":{"line":648,"column":23},"end":{"line":648,"column":76}},"type":"binary-expr","locations":[{"start":{"line":648,"column":23},"end":{"line":648,"column":34}},{"start":{"line":648,"column":38},"end":{"line":648,"column":76}}],"line":648},"87":{"loc":{"start":{"line":653,"column":23},"end":{"line":653,"column":78}},"type":"binary-expr","locations":[{"start":{"line":653,"column":23},"end":{"line":653,"column":34}},{"start":{"line":653,"column":38},"end":{"line":653,"column":78}}],"line":653},"88":{"loc":{"start":{"line":659,"column":21},"end":{"line":659,"column":73}},"type":"cond-expr","locations":[{"start":{"line":659,"column":61},"end":{"line":659,"column":65}},{"start":{"line":659,"column":68},"end":{"line":659,"column":73}}],"line":659},"89":{"loc":{"start":{"line":659,"column":21},"end":{"line":659,"column":58}},"type":"binary-expr","locations":[{"start":{"line":659,"column":21},"end":{"line":659,"column":37}},{"start":{"line":659,"column":41},"end":{"line":659,"column":58}}],"line":659},"90":{"loc":{"start":{"line":665,"column":21},"end":{"line":665,"column":73}},"type":"cond-expr","locations":[{"start":{"line":665,"column":61},"end":{"line":665,"column":65}},{"start":{"line":665,"column":68},"end":{"line":665,"column":73}}],"line":665},"91":{"loc":{"start":{"line":665,"column":21},"end":{"line":665,"column":58}},"type":"binary-expr","locations":[{"start":{"line":665,"column":21},"end":{"line":665,"column":37}},{"start":{"line":665,"column":41},"end":{"line":665,"column":58}}],"line":665}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":21,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":21,"37":21,"38":21,"39":21,"40":63,"41":63,"42":63,"43":0,"44":0,"45":21,"46":21,"47":0,"48":21,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":155,"69":155,"70":155,"71":155,"72":65,"73":65,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":65,"81":155,"82":155,"83":155,"84":155,"85":155,"86":155,"87":155,"88":930,"89":65,"90":155,"91":155,"92":155,"93":155,"94":155,"95":155,"96":155,"97":155,"98":155,"99":155,"100":155,"101":155,"102":155,"103":155,"104":155,"105":155,"106":1,"107":154,"108":265,"109":0,"110":265,"111":155,"112":155,"113":155,"114":155,"115":155,"116":0,"117":155,"118":155,"119":155,"120":65,"121":155,"122":155,"123":0,"124":155,"125":155,"126":0,"127":0,"128":155,"129":5,"130":5,"131":5,"132":5,"133":0,"134":2,"135":2,"136":2,"137":2,"138":2,"139":2,"140":2,"141":2,"142":2,"143":1,"144":1,"145":1,"146":0,"147":0,"148":0,"149":0,"150":2,"151":7,"152":6,"153":0,"154":6,"155":2,"156":1,"157":1,"158":1,"159":4,"160":7,"161":24,"162":24,"163":72,"164":48,"165":24,"166":2,"167":2,"168":0,"169":2,"170":2,"171":4,"172":4,"173":0,"174":2,"175":1,"176":1,"177":1,"178":1,"179":1,"180":1,"181":1,"182":1,"183":0,"184":1,"185":1,"186":1,"187":0,"188":1,"189":207,"190":23,"191":184,"192":133,"193":51,"194":51,"195":49,"196":2,"197":1,"198":1,"199":22,"200":1,"201":21,"202":21,"203":21,"204":21,"205":21,"206":21,"207":42,"208":42,"209":42,"210":20,"211":20,"212":20,"213":19,"214":19,"215":19,"216":19,"217":1,"218":20,"219":0,"220":21,"221":21,"222":1,"223":0,"224":1,"225":46,"226":46,"227":46,"228":46,"229":46,"230":46,"231":46,"232":46,"233":2,"234":46,"235":46,"236":46,"237":18,"238":10,"239":10,"240":10,"241":4,"242":10,"243":10,"244":10,"245":10,"246":4,"247":8,"248":8,"249":8,"250":0,"251":18,"252":18,"253":22,"254":22,"255":14,"256":14,"257":14,"258":12,"259":24,"260":2,"261":8,"262":28,"263":28,"264":0,"265":0,"266":28,"267":28,"268":4,"269":4,"270":4,"271":4,"272":4,"273":0,"274":0,"275":46,"276":26,"277":26,"278":14,"279":16,"280":30,"281":7,"282":12,"283":24,"284":6,"285":26,"286":11,"287":26,"288":50,"289":50,"290":50,"291":50,"292":14,"293":14,"294":14,"295":2,"296":2,"297":2,"298":2,"299":2,"300":2,"301":2,"302":2,"303":2,"304":2,"305":2,"306":2,"307":2,"308":2,"309":2,"310":2,"311":2,"312":2,"313":2,"314":2,"315":2,"316":2,"317":2,"318":2,"319":2,"320":2,"321":2,"322":2,"323":2,"324":14,"325":14,"326":14,"327":4,"328":4,"329":4,"330":50},"f":{"0":21,"1":0,"2":0,"3":0,"4":21,"5":63,"6":0,"7":21,"8":0,"9":0,"10":155,"11":155,"12":265,"13":155,"14":5,"15":2,"16":2,"17":7,"18":24,"19":72,"20":2,"21":4,"22":1,"23":0,"24":1,"25":1,"26":0,"27":207,"28":22,"29":19,"30":1,"31":46,"32":8,"33":22,"34":24,"35":26,"36":16,"37":30,"38":24,"39":50},"b":{"0":[0,21],"1":[21,21],"2":[0,0],"3":[0,0,0,0,0],"4":[0,0],"5":[0,0],"6":[0,21],"7":[21,0],"8":[0,21],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[65,90],"20":[155,65],"21":[0,0],"22":[155,0],"23":[65,865],"24":[155,0],"25":[155,0],"26":[1,154],"27":[0,265],"28":[155,0],"29":[65,90],"30":[0,155],"31":[0,155],"32":[155,0],"33":[5,0],"34":[2,0],"35":[2,0],"36":[2,2],"37":[1,1],"38":[2,2,2],"39":[1,0],"40":[0,0],"41":[0,0],"42":[6,1],"43":[0,6],"44":[2,4],"45":[1,1],"46":[1,0],"47":[2,2],"48":[48,24],"49":[0,2],"50":[4,0],"51":[0,1],"52":[1,1,0],"53":[23,184],"54":[133,51],"55":[1,1],"56":[1,21],"57":[22,22],"58":[42,0],"59":[20,22],"60":[19,1],"61":[20,20,19],"62":[19,0],"63":[0,1],"64":[1,1],"65":[2,44],"66":[46,2],"67":[18,28],"68":[46,32],"69":[10,8],"70":[4,6],"71":[4,6],"72":[14,8],"73":[22,14],"74":[12,2],"75":[28,0],"76":[0,0],"77":[4,24],"78":[28,4],"79":[4,0],"80":[14,12],"81":[7,23],"82":[30,26],"83":[6,18],"84":[11,15],"85":[14,2,2,2,2,2,2,2,2,2,14,4],"86":[2,2],"87":[2,2],"88":[1,1],"89":[2,1],"90":[0,2],"91":[2,1]},"inputSourceMap":{"version":3,"sources":["sql.js"],"names":["escapeAbeValuesFromStringRequest","str","jsonPage","matchFrom","matchVariable","matchFromExec","exec","fromMatch","toReplace","arFrom","split","value","_","get","replace","e","from","matches","res","splitAttr","i","length","indexOf","substring","escapedFrom","handleSqlRequest","req","request","reconstructSql","type","columns","push","Array","prototype","forEach","call","item","expr","left","column","operator","right","JSON","stringify","table","where","limit","orderby","string","getDataSource","reg","match","sanitizeFromStatement","statement","getFromDirectory","tplPath","pathFromDir","Manager","instance","pathData","path","join","executeOrderByClause","files","toLowerCase","coreUtils","sort","shuffle","cmsData","byDateAsc","byDateDesc","predicatBy","keepOnlyPublishedPost","publishedValue","file","publish","executeFromClause","pathFromClause","slice","fromDirectory","files_array","filter","element","execQuery","getList","regex","getAttr","pathQuery","abe_meta","link","dirname","executeWhereClause","executeLimitClause","executeQuerySync","executeQuery","p","Promise","resolve","console","error","getSourceType","test","parse","wheres","json","jsonValues","recurseWhere","maxLimit","splice","getWhereValuesToCompare","jsonDoc","jsonOriginalDoc","regexIsVariable","compare","variableLeft","whereLeftColumn","checkIfLeftIsAVariable","arVariableLeft","arValues","key","records","record","val","log","stack","matchRightVariable","jsonOriginalValues","Object","toString","jsonOriginalValue","arVariableRight","shouldCompare","isInStatementCorrect","values","isCorrect","hasPassedTest","isNotLeftCorrect","isNotRightCorrect","isNotCorrect"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import {parse} from 'node-sqlparser'\nimport {Promise} from 'bluebird'\nimport path from 'path'\nimport _ from 'lodash'\nimport {coreUtils, config, Manager, cmsData} from '../../'\n\n/**\n * take a string and json to escape sql character and convert to sql like syntax\n *\n * Example: escapeAbeValuesFromStringRequest('select title from ./ where `abe_meta.template`=`{{article}}`', {article: \"test\"})\n *\n * Return string: select title from ___abe_dot______abe_dot______abe___ where  `abe_meta.template`=`test`\n *\n *\n * @param  {String} str      raw abe request sql string\n * @param  {Object} jsonPage json object of post\n * @return {String}          escaped string\n */\nexport function escapeAbeValuesFromStringRequest(str, jsonPage) {\n  var matchFrom = /from .(.*?) /\n  var matchVariable = /{{(.*?)}}/\n\n  var matchFromExec = matchFrom.exec(str)\n  if (matchFromExec != null && matchFromExec[1] != null) {\n    var fromMatch\n    var toReplace = matchFromExec[1]\n    while ((fromMatch = matchVariable.exec(toReplace))) {\n      try {\n        var arFrom = fromMatch[1].split('.')\n        var value = _.get(jsonPage, arFrom)\n        if (value != null) {\n          toReplace = toReplace.replace('{{' + fromMatch[1] + '}}', value)\n        } else {\n          toReplace = toReplace.replace('{{' + fromMatch[1] + '}}', '')\n        }\n      } catch (e) {}\n    }\n\n    str = str.replace(matchFromExec[1], toReplace)\n  }\n\n  var from = /from ([\\S\\s]+)/.exec(str)\n\n  var matches = from\n  if (matches[1]) {\n    var res = matches[1]\n    var splitAttr = [\n      ' where ',\n      ' order by ',\n      ' limit ',\n      ' WHERE ',\n      ' ORDER BY ',\n      ' LIMIT '\n    ]\n    for (var i = 0; i < splitAttr.length; i++) {\n      if (res.indexOf(splitAttr[i]) > -1) {\n        res = res.substring(0, res.indexOf(splitAttr[i]))\n      }\n    }\n    var escapedFrom = res.replace(/\\//g, '___abe___')\n    escapedFrom = escapedFrom.replace(/\\./g, '___abe_dot___')\n    escapedFrom = escapedFrom.replace(/-/g, '___abe_dash___')\n    str = str.replace(res, escapedFrom)\n  }\n\n  str = str.replace(/``/g, \"''\")\n\n  return str\n}\n\n/**\n * analyse and create an object from request sql string\n *\n * Example: handleSqlRequest('select title from ./ where `abe_meta.template`=`{{article}}`', {article: \"test\"})\n *\n * @param  {String} str      Sql string request\n * @param  {Object} jsonPage json of post\n * @return {Object}          {type, columns, from, where, string, limit, orderby}\n */\nexport function handleSqlRequest(str, jsonPage) {\n  var req = escapeAbeValuesFromStringRequest(str, jsonPage)\n  var request = parse(req)\n  var reconstructSql = ''\n  // SQL TYPE\n  var type = ''\n  if (request.type != null) {\n    type = request.type\n  }\n  reconstructSql += `${type} `\n  // SQL COLUMNS\n  var columns = []\n  if (request.columns != null) {\n    if (request.columns === '*') {\n      columns.push('*')\n    } else {\n      Array.prototype.forEach.call(request.columns, item => {\n        if (_.get(item, 'expr.type') === 'binary_expr') {\n          columns.push(`${item.expr.left.column}${item.expr.operator}${item.expr.right.column}`)\n        } else {\n          columns.push(item.expr.column)\n        }\n      })\n    }\n  }\n  reconstructSql += `${JSON.stringify(columns)} `\n  // SQL FROM\n  var from = []\n  if (request.from != null) {\n    Array.prototype.forEach.call(request.from, item => {\n      from.push(item.table)\n    })\n  } else {\n    from.push('*')\n  }\n  reconstructSql += `from ${JSON.stringify(from)} `\n\n  var where = null\n  if (request.where != null) {\n    where = request.where\n  }\n\n  var limit = -1\n  if (request.limit != null) {\n    limit = request.limit[request.limit.length - 1].value\n  }\n\n  var orderby = null\n  if (request.orderby != null && request.orderby.length > 0) {\n    orderby = {\n      column: request.orderby[0].expr.column,\n      type: request.orderby[0].type\n    }\n    reconstructSql += `ORDER BY ${orderby.column} ${orderby.type} `\n  }\n\n  return {\n    type: type,\n    columns: columns,\n    from: from,\n    where: where,\n    string: reconstructSql,\n    limit: limit,\n    orderby: orderby\n  }\n}\n\n/**\n * get JSON from abe tag attribute source\n *\n * {{abe type='data' key='titles' desc='select titles' source='[{\"title\": \"rouge\", \"id\": 1},{\"title\": \"vert\", \"id\": 2},{\"title\": \"blue\", \"id\": 3}]' display=\"{{title}}\"}}\n *\n * return\n * [{\"title\": \"rouge\", \"id\": 1},{\"title\": \"vert\", \"id\": 2},{\"title\": \"blue\", \"id\": 3}]\n *\n * @param  {String} str abe tag\n * @return {String}     json string\n */\nexport function getDataSource(str) {\n  var reg = /source=(['|\"])(.*?)\\1[ |\\}]/g\n  var match = reg.exec(str)\n  if (match != null) {\n    return match[2]\n  }\n\n  return ''\n}\n\n/**\n * replaces escaped characters with the right ones\n * @param  {String} statement the from clause\n * @return {String}           the from sanitized\n */\nexport function sanitizeFromStatement(statement) {\n  var from = ''\n\n  if (statement != null) {\n    from = statement[0].replace(/___abe_dot___/g, '.')\n    from = from.replace(/___abe___/g, '/')\n    from = from.replace(/___abe_dash___/g, '-')\n  }\n\n  return from\n}\n\n/**\n * calculate the directory to analyze from the from clause\n * @param  {String} statement the from clause\n * @param  {String} tplPath   the path from the template originator\n * @return {string}           the directory to analyze\n */\nexport function getFromDirectory(statement, tplPath = '/') {\n  var pathFromDir = ''\n\n  if (statement === '' || statement === '*' || statement === '/') {\n    pathFromDir = Manager.instance.pathData\n  } else if (statement === './') {\n    pathFromDir = path.join(Manager.instance.pathData, tplPath)\n  } else if (statement.indexOf('/') === 0) {\n    pathFromDir = path.join(Manager.instance.pathData, statement)\n  } else if (statement.indexOf('/') !== 0) {\n    pathFromDir = path.join(Manager.instance.pathData, tplPath, statement)\n  }\n\n  return pathFromDir\n}\n\n/**\n * sort array of files from where clause\n *\n * @param  {Array} files\n * @param  {Object} orderby {orderby: {column: 'date'}} | {orderby: {column: 'random', type: 'ASC'}}\n * @return {Array}         sorted array\n */\nexport function executeOrderByClause(files, orderby) {\n  if (orderby != null) {\n    if (orderby.column.toLowerCase() === 'random') {\n      files = coreUtils.sort.shuffle(files)\n    } else if (orderby.column.toLowerCase() === 'date') {\n      if (orderby.type.toLowerCase() === 'asc') {\n        files.sort(cmsData.sort.byDateAsc)\n      } else if (orderby.type.toLowerCase() === 'desc') {\n        files.sort(cmsData.sort.byDateDesc)\n      }\n    } else {\n      files.sort(\n        coreUtils.sort.predicatBy(\n          orderby.column.toLowerCase(),\n          orderby.type.toLowerCase() === 'desc' ? -1 : 1\n        )\n      )\n    }\n  }\n\n  return files\n}\n\n/**\n * Keep only published post\n *\n * keepOnlyPublishedPost([files])\n *\n * @param  {Array} files      paths\n * @return {Array}                files\n */\nexport function keepOnlyPublishedPost(files) {\n  var publishedValue = []\n  Array.prototype.forEach.call(files, file => {\n    if (file.publish != null) {\n      publishedValue.push(file.publish)\n    }\n  })\n\n  return publishedValue\n}\n\n/**\n * Check array of files have path that match path statement\n *\n * executeFromClause([array], ['/'], ['/'])\n *\n * @param  {Array} statement      paths\n * @param  {Array} pathFromClause paths\n * @return {Array}                files\n */\nexport function executeFromClause(files, statement, pathFromClause) {\n  var from = sanitizeFromStatement(statement)\n\n  // if the from clause ends with a dot, we won't recurse the directory analyze\n  if (from.slice(-1) === '.') {\n    from = from.slice(0, -1)\n  }\n\n  var fromDirectory = getFromDirectory(from, pathFromClause)\n\n  var files_array = files.filter(element => {\n    if (element.path.indexOf(fromDirectory) > -1) {\n      return true\n    }\n    return false\n  })\n\n  return files_array\n}\n\n/**\n * Execute sql query like to find abe json post that match the query\n *\n * @param  {Array} pathQuery of paths\n * @param  {String} match     request sql\n * @param  {Object} jsonPage  json of post\n * @return {Array}           found object that match\n */\nexport function execQuery(match, jsonPage) {\n  var files = keepOnlyPublishedPost(Manager.instance.getList())\n  var request = handleSqlRequest(\n    cmsData.regex.getAttr(match, 'source'),\n    jsonPage\n  )\n  var pathQuery =\n    jsonPage && jsonPage.abe_meta != null && jsonPage.abe_meta.link != null\n      ? path.dirname(jsonPage.abe_meta.link)\n      : '/'\n\n  files = executeFromClause(files, request.from, pathQuery)\n  files = executeWhereClause(files, request.where, request.columns, jsonPage)\n  files = executeOrderByClause(files, request.orderby)\n  files = executeLimitClause(files, request.limit)\n  return files\n}\n\nexport function executeQuerySync(match, jsonPage) {\n  return execQuery(match, jsonPage)\n}\n\nexport function executeQuery(match, jsonPage) {\n  var p = new Promise(resolve => {\n    var res = execQuery(match, jsonPage)\n    resolve(res)\n  }).catch(function(e) {\n    console.error(e)\n  })\n\n  return p\n}\n\n/**\n * check if a given string an url, string json, file url, abe sql request\n *\n * get('http://google.com')\n * get('{\"test\":\"test\"}')\n * get('select * from ../')\n * get('test')\n *\n * @param  {String} str\n * @return {String} url | request | value | file | other\n */\nexport function getSourceType(str) {\n  if (/^(http:\\/\\/|https:\\/\\/|:\\/\\/|\\/(.*)\\?(.*)[^ ]=)/.test(str)) {\n    return 'url'\n  }\n\n  if (/select[\\S\\s]*?from/.test(str)) {\n    return 'request'\n  }\n\n  try {\n    JSON.parse(str)\n    return 'value'\n  } catch (e) {}\n\n  if (/\\.json/.test(str)) {\n    return 'file'\n  }\n\n  return 'other'\n}\n\n/**\n * return array of post that match sql where statement\n *\n * Example: handleSqlRequest('select title from ./ where `abe_meta.template`=`article`', {})\n *\n * @param  {Array} files\n * @param  {Object} wheres   clause\n * @param  {Int} maxLimit\n * @param  {Array} columns  sql\n * @param  {Object} jsonPage json post\n * @return {Array}          of files\n */\nexport function executeWhereClause(files, wheres, columns, jsonPage) {\n  if (typeof wheres === 'undefined' || wheres === null) return files\n  var res = []\n  var json = {}\n  var jsonValues = {}\n\n  for (let file of files) {\n    if (wheres != null) {\n      if (!recurseWhere(wheres, file, jsonPage)) {\n        json = JSON.parse(JSON.stringify(file))\n        jsonValues = {}\n\n        if (columns != null && columns.length > 0 && columns[0] !== '*') {\n          Array.prototype.forEach.call(columns, column => {\n            if (json[column] != null) {\n              jsonValues[column] = json[column]\n            }\n          })\n          jsonValues['abe_meta'] = json['abe_meta']\n        } else {\n          jsonValues = json\n        }\n\n        res.push(jsonValues)\n      }\n    }\n  }\n\n  return res\n}\n\n/**\n * return array of post in the limit\n *\n * Example: executeLimitClause({}, 2)\n *\n * @param  {Array} files\n * @param  {Int} maxLimit\n * @return {Array} of files\n */\nexport function executeLimitClause(files, maxLimit) {\n  if (files.length > maxLimit && maxLimit > 0) {\n    files.splice(maxLimit, files.length - maxLimit)\n  }\n\n  return files\n}\n\n/**\n * Compare where left and where right clause\n *\n * @param  {Object} where           clause\n * @param  {Object} jsonDoc         json of current post\n * @param  {Object} jsonOriginalDoc json of post to compare\n * @return {Object}                 {left: value, right: value}\n */\nexport function getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc) {\n  var regexIsVariable = /^{{(.*)}}$/\n  var value = null\n  var compare = null\n\n  try {\n    var variableLeft = where.left.column\n    var whereLeftColumn = where.left.column\n    var checkIfLeftIsAVariable = regexIsVariable.exec(variableLeft)\n    if (checkIfLeftIsAVariable != null && checkIfLeftIsAVariable.length > 0) {\n      variableLeft = checkIfLeftIsAVariable[1]\n    }\n    var arVariableLeft = variableLeft.split('.')\n    value = _.get(jsonDoc, arVariableLeft)\n  } catch (e) {\n    // console.log('e', e)\n  }\n\n  if (where.operator === 'IN' || where.operator === 'NOT IN') {\n    if (value == null) {\n      // is the form of variableLeft something like elt.attribute or elt[].attribute?\n      // so maybe is elt an array ?\n      let arValues = variableLeft.split('.')\n      let key = arValues[0]\n      if (key.slice(-2) == '[]') {\n        key = key.slice(0, -2)\n      }\n      let records = _.get(jsonDoc, key)\n      whereLeftColumn = arValues[1]\n      value = []\n      // if yes, value is then an array of values\n      if (records != null) {\n        Array.prototype.forEach.call(records, record => {\n          try {\n            let val = record[arValues[1]]\n            value.push(val)\n          } catch (e) {\n            console.log(e.stack)\n          }\n        })\n      }\n    }\n    compare = []\n    Array.prototype.forEach.call(where.right.value, right => {\n      var matchRightVariable = regexIsVariable.exec(right.column)\n      if (matchRightVariable != null && matchRightVariable.length > 0) {\n        try {\n          var jsonOriginalValues = _.get(jsonOriginalDoc, matchRightVariable[1])\n          if (\n            Object.prototype.toString.call(jsonOriginalValues) ===\n            '[object Array]'\n          ) {\n            Array.prototype.forEach.call(\n              jsonOriginalValues,\n              jsonOriginalValue => {\n                compare.push(_.get(jsonOriginalValue, whereLeftColumn))\n              }\n            )\n          } else {\n            compare.push(jsonOriginalValues)\n          }\n        } catch (e) {}\n      } else {\n        compare.push(right.column)\n      }\n    })\n  } else {\n    if (where.right.column != null) {\n      compare = where.right.column\n    } else if (where.right.value != null) {\n      compare = where.right.value\n    }\n\n    var matchRightVariable = regexIsVariable.exec(compare)\n\n    if (matchRightVariable != null && matchRightVariable.length > 0) {\n      try {\n        var arVariableRight = matchRightVariable[1].split('.')\n        var shouldCompare = _.get(jsonOriginalDoc, arVariableRight)\n        if (shouldCompare != null) {\n          compare = shouldCompare\n        } else {\n          compare = null\n        }\n      } catch (e) {\n        compare = null\n      }\n    }\n  }\n\n  return {\n    left: value,\n    right: compare\n  }\n}\n\nexport function isInStatementCorrect(values, isCorrect) {\n  let hasPassedTest = false\n  if (Object.prototype.toString.call(values.left) === '[object Array]') {\n    Array.prototype.forEach.call(values.left, left => {\n      Array.prototype.forEach.call(values.right, right => {\n        if (left != null && left === right) {\n          hasPassedTest = true\n        }\n      })\n    })\n  } else {\n    Array.prototype.forEach.call(values.right, right => {\n      if (values.left === right) {\n        hasPassedTest = true\n      }\n    })\n  }\n\n  if (hasPassedTest) isCorrect = !isCorrect\n\n  return isCorrect\n}\n\n/**\n * Check where.left value that match where operator (=, !=, >, >=, <, <=, LIKE, NOT LIKE, AND, OR, IN, NOT IN)\n * if operator AND or OR\n * Recurse on where.left and where.right sql clause\n *\n *\n * @param  {Object} where           clause\n * @param  {Object} jsonDoc         json of current post\n * @param  {Object} jsonOriginalDoc json of post to compare\n * @return {Boolean}                 true if not matching | false if matching\n */\nexport function recurseWhere(where, jsonDoc, jsonOriginalDoc) {\n  var isNotLeftCorrect = false\n  var isNotRightCorrect = false\n  var isNotCorrect = false\n  var values\n\n  switch (where.operator) {\n    case '=':\n      values = getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = !(values.left === values.right)\n      break\n    case '!=':\n      values = getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = !(values.left !== values.right)\n      break\n    case '>':\n      values = getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = !(values.left > values.right)\n      break\n    case '>=':\n      values = getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = !(values.left >= values.right)\n      break\n    case '<':\n      values = getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = !(values.left < values.right)\n      break\n    case '<=':\n      values = getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = !(values.left <= values.right)\n      break\n    case 'LIKE':\n      values = getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = !(values.left && values.left.indexOf(values.right) > -1)\n      break\n    case 'NOT LIKE':\n      values = getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = !(values.left && values.left.indexOf(values.right) === -1)\n      break\n    case 'AND':\n      isNotLeftCorrect = recurseWhere(where.left, jsonDoc, jsonOriginalDoc)\n      isNotRightCorrect = recurseWhere(where.right, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = isNotLeftCorrect || isNotRightCorrect ? true : false\n      break\n    case 'OR':\n      isNotLeftCorrect = recurseWhere(where.left, jsonDoc, jsonOriginalDoc)\n      isNotRightCorrect = recurseWhere(where.right, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = isNotLeftCorrect && isNotRightCorrect ? true : false\n      break\n    case 'IN':\n      values = getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = isInStatementCorrect(values, true)\n      break\n    case 'NOT IN':\n      values = getWhereValuesToCompare(where, jsonDoc, jsonOriginalDoc)\n      isNotCorrect = isInStatementCorrect(values, false)\n      break\n  }\n\n  return isNotCorrect\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"af5c91ab857a6a4ce9f24c5f63e5513824ff38cd","contentHash":"70060f4650ab027f144f98bc2aba86dfa8d73fa4c71864448893559dad13db66"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/source.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/source.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":34}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":30}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":26}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":28}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":40}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":36}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":38}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":34}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":40}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":62}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":54}},"13":{"start":{"line":20,"column":19},"end":{"line":20,"column":80}},"14":{"start":{"line":22,"column":25},"end":{"line":22,"column":99}},"15":{"start":{"line":24,"column":15},"end":{"line":24,"column":79}},"16":{"start":{"line":26,"column":16},"end":{"line":26,"column":35}},"17":{"start":{"line":28,"column":12},"end":{"line":28,"column":51}},"18":{"start":{"line":30,"column":13},"end":{"line":30,"column":53}},"19":{"start":{"line":32,"column":12},"end":{"line":32,"column":51}},"20":{"start":{"line":34,"column":15},"end":{"line":34,"column":58}},"21":{"start":{"line":36,"column":14},"end":{"line":36,"column":55}},"22":{"start":{"line":38,"column":9},"end":{"line":38,"column":26}},"23":{"start":{"line":41,"column":10},"end":{"line":70,"column":4}},"24":{"start":{"line":42,"column":4},"end":{"line":69,"column":7}},"25":{"start":{"line":43,"column":6},"end":{"line":45,"column":7}},"26":{"start":{"line":44,"column":8},"end":{"line":44,"column":36}},"27":{"start":{"line":47,"column":6},"end":{"line":47,"column":45}},"28":{"start":{"line":49,"column":6},"end":{"line":66,"column":7}},"29":{"start":{"line":50,"column":8},"end":{"line":54,"column":9}},"30":{"start":{"line":51,"column":10},"end":{"line":51,"column":63}},"31":{"start":{"line":53,"column":10},"end":{"line":53,"column":35}},"32":{"start":{"line":56,"column":13},"end":{"line":66,"column":7}},"33":{"start":{"line":57,"column":8},"end":{"line":65,"column":9}},"34":{"start":{"line":58,"column":10},"end":{"line":58,"column":135}},"35":{"start":{"line":59,"column":15},"end":{"line":65,"column":9}},"36":{"start":{"line":60,"column":10},"end":{"line":60,"column":69}},"37":{"start":{"line":61,"column":15},"end":{"line":65,"column":9}},"38":{"start":{"line":62,"column":10},"end":{"line":62,"column":63}},"39":{"start":{"line":64,"column":10},"end":{"line":64,"column":35}},"40":{"start":{"line":68,"column":6},"end":{"line":68,"column":24}},"41":{"start":{"line":71,"column":2},"end":{"line":71,"column":11}},"42":{"start":{"line":75,"column":10},"end":{"line":89,"column":4}},"43":{"start":{"line":76,"column":16},"end":{"line":76,"column":51}},"44":{"start":{"line":78,"column":4},"end":{"line":86,"column":5}},"45":{"start":{"line":79,"column":6},"end":{"line":85,"column":7}},"46":{"start":{"line":80,"column":8},"end":{"line":80,"column":34}},"47":{"start":{"line":81,"column":8},"end":{"line":81,"column":48}},"48":{"start":{"line":83,"column":8},"end":{"line":83,"column":47}},"49":{"start":{"line":84,"column":8},"end":{"line":84,"column":84}},"50":{"start":{"line":88,"column":4},"end":{"line":88,"column":14}},"51":{"start":{"line":90,"column":2},"end":{"line":90,"column":11}},"52":{"start":{"line":94,"column":10},"end":{"line":165,"column":4}},"53":{"start":{"line":95,"column":4},"end":{"line":164,"column":5}},"54":{"start":{"line":96,"column":17},"end":{"line":96,"column":33}},"55":{"start":{"line":97,"column":6},"end":{"line":97,"column":29}},"56":{"start":{"line":98,"column":20},"end":{"line":98,"column":36}},"57":{"start":{"line":99,"column":24},"end":{"line":99,"column":26}},"58":{"start":{"line":101,"column":6},"end":{"line":104,"column":7}},"59":{"start":{"line":102,"column":8},"end":{"line":102,"column":36}},"60":{"start":{"line":103,"column":8},"end":{"line":103,"column":26}},"61":{"start":{"line":106,"column":6},"end":{"line":106,"column":32}},"62":{"start":{"line":107,"column":23},"end":{"line":107,"column":51}},"63":{"start":{"line":109,"column":6},"end":{"line":115,"column":7}},"64":{"start":{"line":110,"column":8},"end":{"line":110,"column":46}},"65":{"start":{"line":111,"column":8},"end":{"line":111,"column":27}},"66":{"start":{"line":112,"column":8},"end":{"line":112,"column":48}},"67":{"start":{"line":114,"column":8},"end":{"line":114,"column":25}},"68":{"start":{"line":117,"column":20},"end":{"line":126,"column":7}},"69":{"start":{"line":127,"column":17},"end":{"line":127,"column":19}},"70":{"start":{"line":128,"column":21},"end":{"line":154,"column":8}},"71":{"start":{"line":129,"column":8},"end":{"line":129,"column":37}},"72":{"start":{"line":130,"column":8},"end":{"line":132,"column":11}},"73":{"start":{"line":131,"column":10},"end":{"line":131,"column":24}},"74":{"start":{"line":133,"column":8},"end":{"line":153,"column":11}},"75":{"start":{"line":134,"column":10},"end":{"line":150,"column":11}},"76":{"start":{"line":135,"column":12},"end":{"line":147,"column":13}},"77":{"start":{"line":136,"column":31},"end":{"line":136,"column":47}},"78":{"start":{"line":138,"column":14},"end":{"line":142,"column":15}},"79":{"start":{"line":139,"column":16},"end":{"line":139,"column":61}},"80":{"start":{"line":140,"column":21},"end":{"line":142,"column":15}},"81":{"start":{"line":141,"column":16},"end":{"line":141,"column":63}},"82":{"start":{"line":143,"column":19},"end":{"line":147,"column":13}},"83":{"start":{"line":144,"column":14},"end":{"line":144,"column":53}},"84":{"start":{"line":145,"column":19},"end":{"line":147,"column":13}},"85":{"start":{"line":146,"column":14},"end":{"line":146,"column":53}},"86":{"start":{"line":149,"column":12},"end":{"line":149,"column":99}},"87":{"start":{"line":152,"column":10},"end":{"line":152,"column":20}},"88":{"start":{"line":155,"column":6},"end":{"line":157,"column":9}},"89":{"start":{"line":156,"column":8},"end":{"line":156,"column":23}},"90":{"start":{"line":159,"column":6},"end":{"line":159,"column":25}},"91":{"start":{"line":160,"column":6},"end":{"line":160,"column":21}},"92":{"start":{"line":162,"column":6},"end":{"line":162,"column":57}},"93":{"start":{"line":163,"column":6},"end":{"line":163,"column":16}},"94":{"start":{"line":166,"column":2},"end":{"line":166,"column":11}},"95":{"start":{"line":170,"column":10},"end":{"line":173,"column":4}},"96":{"start":{"line":171,"column":4},"end":{"line":171,"column":121}},"97":{"start":{"line":172,"column":4},"end":{"line":172,"column":14}},"98":{"start":{"line":174,"column":2},"end":{"line":174,"column":11}},"99":{"start":{"line":178,"column":2},"end":{"line":178,"column":48}},"100":{"start":{"line":182,"column":2},"end":{"line":281,"column":6}},"101":{"start":{"line":185,"column":4},"end":{"line":280,"column":16}},"102":{"start":{"line":186,"column":6},"end":{"line":279,"column":7}},"103":{"start":{"line":187,"column":8},"end":{"line":278,"column":9}},"104":{"start":{"line":189,"column":12},"end":{"line":189,"column":64}},"105":{"start":{"line":190,"column":12},"end":{"line":190,"column":72}},"106":{"start":{"line":192,"column":12},"end":{"line":195,"column":13}},"107":{"start":{"line":193,"column":14},"end":{"line":193,"column":33}},"108":{"start":{"line":194,"column":14},"end":{"line":194,"column":20}},"109":{"start":{"line":197,"column":12},"end":{"line":197,"column":79}},"110":{"start":{"line":198,"column":12},"end":{"line":198,"column":36}},"111":{"start":{"line":200,"column":12},"end":{"line":204,"column":13}},"112":{"start":{"line":201,"column":14},"end":{"line":201,"column":65}},"113":{"start":{"line":203,"column":14},"end":{"line":203,"column":90}},"114":{"start":{"line":207,"column":12},"end":{"line":210,"column":13}},"115":{"start":{"line":208,"column":14},"end":{"line":208,"column":33}},"116":{"start":{"line":209,"column":14},"end":{"line":209,"column":20}},"117":{"start":{"line":212,"column":12},"end":{"line":212,"column":25}},"118":{"start":{"line":214,"column":12},"end":{"line":217,"column":13}},"119":{"start":{"line":215,"column":14},"end":{"line":215,"column":33}},"120":{"start":{"line":216,"column":14},"end":{"line":216,"column":20}},"121":{"start":{"line":219,"column":12},"end":{"line":219,"column":31}},"122":{"start":{"line":220,"column":12},"end":{"line":220,"column":45}},"123":{"start":{"line":223,"column":12},"end":{"line":223,"column":36}},"124":{"start":{"line":225,"column":12},"end":{"line":228,"column":13}},"125":{"start":{"line":226,"column":14},"end":{"line":226,"column":33}},"126":{"start":{"line":227,"column":14},"end":{"line":227,"column":20}},"127":{"start":{"line":230,"column":12},"end":{"line":230,"column":96}},"128":{"start":{"line":232,"column":12},"end":{"line":232,"column":31}},"129":{"start":{"line":233,"column":12},"end":{"line":233,"column":64}},"130":{"start":{"line":236,"column":12},"end":{"line":236,"column":31}},"131":{"start":{"line":237,"column":12},"end":{"line":237,"column":18}},"132":{"start":{"line":240,"column":12},"end":{"line":240,"column":96}},"133":{"start":{"line":242,"column":12},"end":{"line":242,"column":31}},"134":{"start":{"line":243,"column":12},"end":{"line":243,"column":85}},"135":{"start":{"line":246,"column":12},"end":{"line":246,"column":31}},"136":{"start":{"line":247,"column":12},"end":{"line":250,"column":15}},"137":{"start":{"line":253,"column":12},"end":{"line":253,"column":56}},"138":{"start":{"line":256,"column":12},"end":{"line":256,"column":31}},"139":{"start":{"line":257,"column":12},"end":{"line":257,"column":18}},"140":{"start":{"line":260,"column":12},"end":{"line":263,"column":13}},"141":{"start":{"line":261,"column":14},"end":{"line":261,"column":33}},"142":{"start":{"line":262,"column":14},"end":{"line":262,"column":20}},"143":{"start":{"line":265,"column":12},"end":{"line":265,"column":31}},"144":{"start":{"line":266,"column":12},"end":{"line":266,"column":45}},"145":{"start":{"line":269,"column":12},"end":{"line":269,"column":37}},"146":{"start":{"line":271,"column":12},"end":{"line":273,"column":13}},"147":{"start":{"line":272,"column":14},"end":{"line":272,"column":99}},"148":{"start":{"line":277,"column":12},"end":{"line":277,"column":35}},"149":{"start":{"line":282,"column":2},"end":{"line":282,"column":48}},"150":{"start":{"line":286,"column":10},"end":{"line":335,"column":4}},"151":{"start":{"line":287,"column":4},"end":{"line":289,"column":5}},"152":{"start":{"line":288,"column":6},"end":{"line":288,"column":34}},"153":{"start":{"line":291,"column":14},"end":{"line":291,"column":59}},"154":{"start":{"line":293,"column":15},"end":{"line":293,"column":61}},"155":{"start":{"line":295,"column":4},"end":{"line":334,"column":5}},"156":{"start":{"line":297,"column":8},"end":{"line":297,"column":75}},"157":{"start":{"line":298,"column":8},"end":{"line":302,"column":11}},"158":{"start":{"line":299,"column":10},"end":{"line":299,"column":28}},"159":{"start":{"line":301,"column":10},"end":{"line":301,"column":58}},"160":{"start":{"line":303,"column":8},"end":{"line":303,"column":14}},"161":{"start":{"line":306,"column":8},"end":{"line":306,"column":75}},"162":{"start":{"line":307,"column":8},"end":{"line":311,"column":11}},"163":{"start":{"line":308,"column":10},"end":{"line":308,"column":20}},"164":{"start":{"line":310,"column":10},"end":{"line":310,"column":56}},"165":{"start":{"line":312,"column":8},"end":{"line":312,"column":14}},"166":{"start":{"line":315,"column":8},"end":{"line":319,"column":11}},"167":{"start":{"line":316,"column":10},"end":{"line":316,"column":20}},"168":{"start":{"line":318,"column":10},"end":{"line":318,"column":54}},"169":{"start":{"line":320,"column":8},"end":{"line":320,"column":14}},"170":{"start":{"line":323,"column":8},"end":{"line":323,"column":75}},"171":{"start":{"line":324,"column":8},"end":{"line":328,"column":11}},"172":{"start":{"line":325,"column":10},"end":{"line":325,"column":20}},"173":{"start":{"line":327,"column":10},"end":{"line":327,"column":55}},"174":{"start":{"line":329,"column":8},"end":{"line":329,"column":14}},"175":{"start":{"line":332,"column":8},"end":{"line":332,"column":18}},"176":{"start":{"line":333,"column":8},"end":{"line":333,"column":14}},"177":{"start":{"line":336,"column":2},"end":{"line":336,"column":11}},"178":{"start":{"line":340,"column":2},"end":{"line":340,"column":47}},"179":{"start":{"line":344,"column":2},"end":{"line":384,"column":6}},"180":{"start":{"line":346,"column":4},"end":{"line":383,"column":17}},"181":{"start":{"line":347,"column":6},"end":{"line":382,"column":7}},"182":{"start":{"line":348,"column":8},"end":{"line":381,"column":9}},"183":{"start":{"line":350,"column":12},"end":{"line":350,"column":65}},"184":{"start":{"line":351,"column":12},"end":{"line":351,"column":31}},"185":{"start":{"line":352,"column":12},"end":{"line":372,"column":18}},"186":{"start":{"line":353,"column":25},"end":{"line":367,"column":17}},"187":{"start":{"line":354,"column":16},"end":{"line":366,"column":29}},"188":{"start":{"line":355,"column":18},"end":{"line":365,"column":19}},"189":{"start":{"line":356,"column":20},"end":{"line":364,"column":21}},"190":{"start":{"line":358,"column":24},"end":{"line":358,"column":43}},"191":{"start":{"line":359,"column":24},"end":{"line":359,"column":63}},"192":{"start":{"line":363,"column":24},"end":{"line":363,"column":48}},"193":{"start":{"line":369,"column":14},"end":{"line":371,"column":16}},"194":{"start":{"line":370,"column":16},"end":{"line":370,"column":51}},"195":{"start":{"line":375,"column":12},"end":{"line":375,"column":36}},"196":{"start":{"line":376,"column":12},"end":{"line":376,"column":54}},"197":{"start":{"line":380,"column":12},"end":{"line":380,"column":36}},"198":{"start":{"line":385,"column":2},"end":{"line":385,"column":47}},"199":{"start":{"line":389,"column":2},"end":{"line":389,"column":45}},"200":{"start":{"line":393,"column":2},"end":{"line":433,"column":6}},"201":{"start":{"line":395,"column":4},"end":{"line":432,"column":17}},"202":{"start":{"line":396,"column":6},"end":{"line":431,"column":7}},"203":{"start":{"line":397,"column":8},"end":{"line":430,"column":9}},"204":{"start":{"line":399,"column":12},"end":{"line":399,"column":66}},"205":{"start":{"line":400,"column":12},"end":{"line":400,"column":31}},"206":{"start":{"line":401,"column":12},"end":{"line":421,"column":18}},"207":{"start":{"line":402,"column":26},"end":{"line":416,"column":17}},"208":{"start":{"line":403,"column":16},"end":{"line":415,"column":29}},"209":{"start":{"line":404,"column":18},"end":{"line":414,"column":19}},"210":{"start":{"line":405,"column":20},"end":{"line":413,"column":21}},"211":{"start":{"line":407,"column":24},"end":{"line":407,"column":43}},"212":{"start":{"line":408,"column":24},"end":{"line":408,"column":64}},"213":{"start":{"line":412,"column":24},"end":{"line":412,"column":48}},"214":{"start":{"line":418,"column":14},"end":{"line":420,"column":16}},"215":{"start":{"line":419,"column":16},"end":{"line":419,"column":52}},"216":{"start":{"line":424,"column":12},"end":{"line":424,"column":36}},"217":{"start":{"line":425,"column":12},"end":{"line":425,"column":95}},"218":{"start":{"line":429,"column":12},"end":{"line":429,"column":36}},"219":{"start":{"line":434,"column":2},"end":{"line":434,"column":45}},"220":{"start":{"line":438,"column":2},"end":{"line":438,"column":56}},"221":{"start":{"line":442,"column":2},"end":{"line":442,"column":63}},"222":{"start":{"line":453,"column":17},"end":{"line":453,"column":56}},"223":{"start":{"line":454,"column":23},"end":{"line":454,"column":49}},"224":{"start":{"line":457,"column":2},"end":{"line":459,"column":3}},"225":{"start":{"line":458,"column":4},"end":{"line":458,"column":38}},"226":{"start":{"line":461,"column":2},"end":{"line":461,"column":14}}},"fnMap":{"0":{"name":"requestList","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":20}},"loc":{"start":{"line":40,"column":43},"end":{"line":72,"column":1}},"line":40},"1":{"name":"(anonymous_1)","decl":{"start":{"line":41,"column":32},"end":{"line":41,"column":33}},"loc":{"start":{"line":41,"column":51},"end":{"line":70,"column":3}},"line":41},"2":{"name":"(anonymous_2)","decl":{"start":{"line":42,"column":54},"end":{"line":42,"column":55}},"loc":{"start":{"line":42,"column":70},"end":{"line":69,"column":5}},"line":42},"3":{"name":"valueList","decl":{"start":{"line":74,"column":9},"end":{"line":74,"column":18}},"loc":{"start":{"line":74,"column":41},"end":{"line":91,"column":1}},"line":74},"4":{"name":"(anonymous_4)","decl":{"start":{"line":75,"column":32},"end":{"line":75,"column":33}},"loc":{"start":{"line":75,"column":51},"end":{"line":89,"column":3}},"line":75},"5":{"name":"urlList","decl":{"start":{"line":93,"column":9},"end":{"line":93,"column":16}},"loc":{"start":{"line":93,"column":39},"end":{"line":167,"column":1}},"line":93},"6":{"name":"(anonymous_6)","decl":{"start":{"line":94,"column":32},"end":{"line":94,"column":33}},"loc":{"start":{"line":94,"column":51},"end":{"line":165,"column":3}},"line":94},"7":{"name":"(anonymous_7)","decl":{"start":{"line":128,"column":46},"end":{"line":128,"column":47}},"loc":{"start":{"line":128,"column":66},"end":{"line":154,"column":7}},"line":128},"8":{"name":"(anonymous_8)","decl":{"start":{"line":130,"column":28},"end":{"line":130,"column":29}},"loc":{"start":{"line":130,"column":45},"end":{"line":132,"column":9}},"line":130},"9":{"name":"(anonymous_9)","decl":{"start":{"line":133,"column":27},"end":{"line":133,"column":28}},"loc":{"start":{"line":133,"column":39},"end":{"line":153,"column":9}},"line":133},"10":{"name":"(anonymous_10)","decl":{"start":{"line":155,"column":27},"end":{"line":155,"column":28}},"loc":{"start":{"line":155,"column":40},"end":{"line":157,"column":7}},"line":155},"11":{"name":"fileList","decl":{"start":{"line":169,"column":9},"end":{"line":169,"column":17}},"loc":{"start":{"line":169,"column":40},"end":{"line":175,"column":1}},"line":169},"12":{"name":"(anonymous_12)","decl":{"start":{"line":170,"column":32},"end":{"line":170,"column":33}},"loc":{"start":{"line":170,"column":51},"end":{"line":173,"column":3}},"line":170},"13":{"name":"nextSourceData","decl":{"start":{"line":177,"column":9},"end":{"line":177,"column":23}},"loc":{"start":{"line":177,"column":33},"end":{"line":179,"column":1}},"line":177},"14":{"name":"_nextSourceData","decl":{"start":{"line":181,"column":9},"end":{"line":181,"column":24}},"loc":{"start":{"line":181,"column":27},"end":{"line":283,"column":1}},"line":181},"15":{"name":"_callee","decl":{"start":{"line":182,"column":107},"end":{"line":182,"column":114}},"loc":{"start":{"line":182,"column":132},"end":{"line":281,"column":3}},"line":182},"16":{"name":"_callee$","decl":{"start":{"line":185,"column":49},"end":{"line":185,"column":57}},"loc":{"start":{"line":185,"column":68},"end":{"line":280,"column":5}},"line":185},"17":{"name":"nextDataList","decl":{"start":{"line":285,"column":9},"end":{"line":285,"column":21}},"loc":{"start":{"line":285,"column":39},"end":{"line":337,"column":1}},"line":285},"18":{"name":"(anonymous_18)","decl":{"start":{"line":286,"column":32},"end":{"line":286,"column":33}},"loc":{"start":{"line":286,"column":51},"end":{"line":335,"column":3}},"line":286},"19":{"name":"(anonymous_19)","decl":{"start":{"line":298,"column":47},"end":{"line":298,"column":48}},"loc":{"start":{"line":298,"column":67},"end":{"line":300,"column":9}},"line":298},"20":{"name":"(anonymous_20)","decl":{"start":{"line":300,"column":20},"end":{"line":300,"column":21}},"loc":{"start":{"line":300,"column":33},"end":{"line":302,"column":9}},"line":300},"21":{"name":"(anonymous_21)","decl":{"start":{"line":307,"column":45},"end":{"line":307,"column":46}},"loc":{"start":{"line":307,"column":57},"end":{"line":309,"column":9}},"line":307},"22":{"name":"(anonymous_22)","decl":{"start":{"line":309,"column":20},"end":{"line":309,"column":21}},"loc":{"start":{"line":309,"column":33},"end":{"line":311,"column":9}},"line":309},"23":{"name":"(anonymous_23)","decl":{"start":{"line":315,"column":43},"end":{"line":315,"column":44}},"loc":{"start":{"line":315,"column":55},"end":{"line":317,"column":9}},"line":315},"24":{"name":"(anonymous_24)","decl":{"start":{"line":317,"column":20},"end":{"line":317,"column":21}},"loc":{"start":{"line":317,"column":33},"end":{"line":319,"column":9}},"line":317},"25":{"name":"(anonymous_25)","decl":{"start":{"line":324,"column":44},"end":{"line":324,"column":45}},"loc":{"start":{"line":324,"column":56},"end":{"line":326,"column":9}},"line":324},"26":{"name":"(anonymous_26)","decl":{"start":{"line":326,"column":20},"end":{"line":326,"column":21}},"loc":{"start":{"line":326,"column":33},"end":{"line":328,"column":9}},"line":326},"27":{"name":"getSourceData","decl":{"start":{"line":339,"column":9},"end":{"line":339,"column":22}},"loc":{"start":{"line":339,"column":33},"end":{"line":341,"column":1}},"line":339},"28":{"name":"_getSourceData","decl":{"start":{"line":343,"column":9},"end":{"line":343,"column":23}},"loc":{"start":{"line":343,"column":26},"end":{"line":386,"column":1}},"line":343},"29":{"name":"_callee3","decl":{"start":{"line":344,"column":106},"end":{"line":344,"column":114}},"loc":{"start":{"line":344,"column":131},"end":{"line":384,"column":3}},"line":344},"30":{"name":"_callee3$","decl":{"start":{"line":346,"column":49},"end":{"line":346,"column":58}},"loc":{"start":{"line":346,"column":70},"end":{"line":383,"column":5}},"line":346},"31":{"name":"(anonymous_31)","decl":{"start":{"line":352,"column":67},"end":{"line":352,"column":68}},"loc":{"start":{"line":352,"column":79},"end":{"line":372,"column":13}},"line":352},"32":{"name":"_callee2","decl":{"start":{"line":353,"column":112},"end":{"line":353,"column":120}},"loc":{"start":{"line":353,"column":128},"end":{"line":367,"column":15}},"line":353},"33":{"name":"_callee2$","decl":{"start":{"line":354,"column":61},"end":{"line":354,"column":70}},"loc":{"start":{"line":354,"column":82},"end":{"line":366,"column":17}},"line":354},"34":{"name":"(anonymous_34)","decl":{"start":{"line":369,"column":21},"end":{"line":369,"column":22}},"loc":{"start":{"line":369,"column":36},"end":{"line":371,"column":15}},"line":369},"35":{"name":"getDataList","decl":{"start":{"line":388,"column":9},"end":{"line":388,"column":20}},"loc":{"start":{"line":388,"column":31},"end":{"line":390,"column":1}},"line":388},"36":{"name":"_getDataList","decl":{"start":{"line":392,"column":9},"end":{"line":392,"column":21}},"loc":{"start":{"line":392,"column":24},"end":{"line":435,"column":1}},"line":392},"37":{"name":"_callee5","decl":{"start":{"line":393,"column":104},"end":{"line":393,"column":112}},"loc":{"start":{"line":393,"column":129},"end":{"line":433,"column":3}},"line":393},"38":{"name":"_callee5$","decl":{"start":{"line":395,"column":49},"end":{"line":395,"column":58}},"loc":{"start":{"line":395,"column":70},"end":{"line":432,"column":5}},"line":395},"39":{"name":"(anonymous_39)","decl":{"start":{"line":401,"column":67},"end":{"line":401,"column":68}},"loc":{"start":{"line":401,"column":79},"end":{"line":421,"column":13}},"line":401},"40":{"name":"_callee4","decl":{"start":{"line":402,"column":113},"end":{"line":402,"column":121}},"loc":{"start":{"line":402,"column":129},"end":{"line":416,"column":15}},"line":402},"41":{"name":"_callee4$","decl":{"start":{"line":403,"column":61},"end":{"line":403,"column":70}},"loc":{"start":{"line":403,"column":82},"end":{"line":415,"column":17}},"line":403},"42":{"name":"(anonymous_42)","decl":{"start":{"line":418,"column":21},"end":{"line":418,"column":22}},"loc":{"start":{"line":418,"column":36},"end":{"line":420,"column":15}},"line":418},"43":{"name":"removeDataList","decl":{"start":{"line":437,"column":9},"end":{"line":437,"column":23}},"loc":{"start":{"line":437,"column":30},"end":{"line":439,"column":1}},"line":437},"44":{"name":"removeNonEditableDataList","decl":{"start":{"line":441,"column":9},"end":{"line":441,"column":34}},"loc":{"start":{"line":441,"column":41},"end":{"line":443,"column":1}},"line":441},"45":{"name":"removeNonEachDataList","decl":{"start":{"line":451,"column":9},"end":{"line":451,"column":30}},"loc":{"start":{"line":451,"column":37},"end":{"line":462,"column":1}},"line":451}},"branchMap":{"0":{"loc":{"start":{"line":43,"column":6},"end":{"line":45,"column":7}},"type":"if","locations":[{"start":{"line":43,"column":6},"end":{"line":45,"column":7}},{"start":{"line":43,"column":6},"end":{"line":45,"column":7}}],"line":43},"1":{"loc":{"start":{"line":49,"column":6},"end":{"line":66,"column":7}},"type":"if","locations":[{"start":{"line":49,"column":6},"end":{"line":66,"column":7}},{"start":{"line":49,"column":6},"end":{"line":66,"column":7}}],"line":49},"2":{"loc":{"start":{"line":50,"column":8},"end":{"line":54,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":54,"column":9}},{"start":{"line":50,"column":8},"end":{"line":54,"column":9}}],"line":50},"3":{"loc":{"start":{"line":56,"column":13},"end":{"line":66,"column":7}},"type":"if","locations":[{"start":{"line":56,"column":13},"end":{"line":66,"column":7}},{"start":{"line":56,"column":13},"end":{"line":66,"column":7}}],"line":56},"4":{"loc":{"start":{"line":56,"column":17},"end":{"line":56,"column":57}},"type":"binary-expr","locations":[{"start":{"line":56,"column":17},"end":{"line":56,"column":42}},{"start":{"line":56,"column":46},"end":{"line":56,"column":57}}],"line":56},"5":{"loc":{"start":{"line":57,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":57,"column":8},"end":{"line":65,"column":9}},{"start":{"line":57,"column":8},"end":{"line":65,"column":9}}],"line":57},"6":{"loc":{"start":{"line":57,"column":12},"end":{"line":57,"column":56}},"type":"binary-expr","locations":[{"start":{"line":57,"column":12},"end":{"line":57,"column":35}},{"start":{"line":57,"column":39},"end":{"line":57,"column":56}}],"line":57},"7":{"loc":{"start":{"line":58,"column":44},"end":{"line":58,"column":133}},"type":"cond-expr","locations":[{"start":{"line":58,"column":90},"end":{"line":58,"column":107}},{"start":{"line":58,"column":110},"end":{"line":58,"column":133}}],"line":58},"8":{"loc":{"start":{"line":59,"column":15},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":15},"end":{"line":65,"column":9}},{"start":{"line":59,"column":15},"end":{"line":65,"column":9}}],"line":59},"9":{"loc":{"start":{"line":61,"column":15},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":61,"column":15},"end":{"line":65,"column":9}},{"start":{"line":61,"column":15},"end":{"line":65,"column":9}}],"line":61},"10":{"loc":{"start":{"line":78,"column":4},"end":{"line":86,"column":5}},"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":86,"column":5}},{"start":{"line":78,"column":4},"end":{"line":86,"column":5}}],"line":78},"11":{"loc":{"start":{"line":78,"column":8},"end":{"line":78,"column":58}},"type":"binary-expr","locations":[{"start":{"line":78,"column":8},"end":{"line":78,"column":31}},{"start":{"line":78,"column":35},"end":{"line":78,"column":58}}],"line":78},"12":{"loc":{"start":{"line":95,"column":4},"end":{"line":164,"column":5}},"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":164,"column":5}},{"start":{"line":95,"column":4},"end":{"line":164,"column":5}}],"line":95},"13":{"loc":{"start":{"line":95,"column":8},"end":{"line":95,"column":64}},"type":"binary-expr","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":33}},{"start":{"line":95,"column":37},"end":{"line":95,"column":64}}],"line":95},"14":{"loc":{"start":{"line":101,"column":6},"end":{"line":104,"column":7}},"type":"if","locations":[{"start":{"line":101,"column":6},"end":{"line":104,"column":7}},{"start":{"line":101,"column":6},"end":{"line":104,"column":7}}],"line":101},"15":{"loc":{"start":{"line":109,"column":6},"end":{"line":115,"column":7}},"type":"if","locations":[{"start":{"line":109,"column":6},"end":{"line":115,"column":7}},{"start":{"line":109,"column":6},"end":{"line":115,"column":7}}],"line":109},"16":{"loc":{"start":{"line":119,"column":14},"end":{"line":119,"column":53}},"type":"cond-expr","locations":[{"start":{"line":119,"column":32},"end":{"line":119,"column":39}},{"start":{"line":119,"column":42},"end":{"line":119,"column":53}}],"line":119},"17":{"loc":{"start":{"line":135,"column":12},"end":{"line":147,"column":13}},"type":"if","locations":[{"start":{"line":135,"column":12},"end":{"line":147,"column":13}},{"start":{"line":135,"column":12},"end":{"line":147,"column":13}}],"line":135},"18":{"loc":{"start":{"line":138,"column":14},"end":{"line":142,"column":15}},"type":"if","locations":[{"start":{"line":138,"column":14},"end":{"line":142,"column":15}},{"start":{"line":138,"column":14},"end":{"line":142,"column":15}}],"line":138},"19":{"loc":{"start":{"line":138,"column":18},"end":{"line":138,"column":134}},"type":"binary-expr","locations":[{"start":{"line":138,"column":18},"end":{"line":138,"column":67}},{"start":{"line":138,"column":71},"end":{"line":138,"column":134}}],"line":138},"20":{"loc":{"start":{"line":140,"column":21},"end":{"line":142,"column":15}},"type":"if","locations":[{"start":{"line":140,"column":21},"end":{"line":142,"column":15}},{"start":{"line":140,"column":21},"end":{"line":142,"column":15}}],"line":140},"21":{"loc":{"start":{"line":140,"column":25},"end":{"line":140,"column":142}},"type":"binary-expr","locations":[{"start":{"line":140,"column":25},"end":{"line":140,"column":74}},{"start":{"line":140,"column":78},"end":{"line":140,"column":142}}],"line":140},"22":{"loc":{"start":{"line":143,"column":19},"end":{"line":147,"column":13}},"type":"if","locations":[{"start":{"line":143,"column":19},"end":{"line":147,"column":13}},{"start":{"line":143,"column":19},"end":{"line":147,"column":13}}],"line":143},"23":{"loc":{"start":{"line":143,"column":23},"end":{"line":143,"column":127}},"type":"binary-expr","locations":[{"start":{"line":143,"column":23},"end":{"line":143,"column":66}},{"start":{"line":143,"column":70},"end":{"line":143,"column":127}}],"line":143},"24":{"loc":{"start":{"line":145,"column":19},"end":{"line":147,"column":13}},"type":"if","locations":[{"start":{"line":145,"column":19},"end":{"line":147,"column":13}},{"start":{"line":145,"column":19},"end":{"line":147,"column":13}}],"line":145},"25":{"loc":{"start":{"line":145,"column":23},"end":{"line":145,"column":128}},"type":"binary-expr","locations":[{"start":{"line":145,"column":23},"end":{"line":145,"column":66}},{"start":{"line":145,"column":70},"end":{"line":145,"column":128}}],"line":145},"26":{"loc":{"start":{"line":187,"column":8},"end":{"line":278,"column":9}},"type":"switch","locations":[{"start":{"line":188,"column":10},"end":{"line":220,"column":45}},{"start":{"line":222,"column":10},"end":{"line":233,"column":64}},{"start":{"line":235,"column":10},"end":{"line":237,"column":18}},{"start":{"line":239,"column":10},"end":{"line":243,"column":85}},{"start":{"line":245,"column":10},"end":{"line":250,"column":15}},{"start":{"line":252,"column":10},"end":{"line":257,"column":18}},{"start":{"line":259,"column":10},"end":{"line":266,"column":45}},{"start":{"line":268,"column":10},"end":{"line":273,"column":13}},{"start":{"line":275,"column":10},"end":{"line":275,"column":18}},{"start":{"line":276,"column":10},"end":{"line":277,"column":35}}],"line":187},"27":{"loc":{"start":{"line":192,"column":12},"end":{"line":195,"column":13}},"type":"if","locations":[{"start":{"line":192,"column":12},"end":{"line":195,"column":13}},{"start":{"line":192,"column":12},"end":{"line":195,"column":13}}],"line":192},"28":{"loc":{"start":{"line":192,"column":18},"end":{"line":192,"column":87}},"type":"binary-expr","locations":[{"start":{"line":192,"column":18},"end":{"line":192,"column":39}},{"start":{"line":192,"column":43},"end":{"line":192,"column":62}},{"start":{"line":192,"column":66},"end":{"line":192,"column":87}}],"line":192},"29":{"loc":{"start":{"line":200,"column":12},"end":{"line":204,"column":13}},"type":"if","locations":[{"start":{"line":200,"column":12},"end":{"line":204,"column":13}},{"start":{"line":200,"column":12},"end":{"line":204,"column":13}}],"line":200},"30":{"loc":{"start":{"line":207,"column":12},"end":{"line":210,"column":13}},"type":"if","locations":[{"start":{"line":207,"column":12},"end":{"line":210,"column":13}},{"start":{"line":207,"column":12},"end":{"line":210,"column":13}}],"line":207},"31":{"loc":{"start":{"line":214,"column":12},"end":{"line":217,"column":13}},"type":"if","locations":[{"start":{"line":214,"column":12},"end":{"line":217,"column":13}},{"start":{"line":214,"column":12},"end":{"line":217,"column":13}}],"line":214},"32":{"loc":{"start":{"line":225,"column":12},"end":{"line":228,"column":13}},"type":"if","locations":[{"start":{"line":225,"column":12},"end":{"line":228,"column":13}},{"start":{"line":225,"column":12},"end":{"line":228,"column":13}}],"line":225},"33":{"loc":{"start":{"line":260,"column":12},"end":{"line":263,"column":13}},"type":"if","locations":[{"start":{"line":260,"column":12},"end":{"line":263,"column":13}},{"start":{"line":260,"column":12},"end":{"line":263,"column":13}}],"line":260},"34":{"loc":{"start":{"line":271,"column":12},"end":{"line":273,"column":13}},"type":"if","locations":[{"start":{"line":271,"column":12},"end":{"line":273,"column":13}},{"start":{"line":271,"column":12},"end":{"line":273,"column":13}}],"line":271},"35":{"loc":{"start":{"line":287,"column":4},"end":{"line":289,"column":5}},"type":"if","locations":[{"start":{"line":287,"column":4},"end":{"line":289,"column":5}},{"start":{"line":287,"column":4},"end":{"line":289,"column":5}}],"line":287},"36":{"loc":{"start":{"line":295,"column":4},"end":{"line":334,"column":5}},"type":"switch","locations":[{"start":{"line":296,"column":6},"end":{"line":303,"column":14}},{"start":{"line":305,"column":6},"end":{"line":312,"column":14}},{"start":{"line":314,"column":6},"end":{"line":320,"column":14}},{"start":{"line":322,"column":6},"end":{"line":329,"column":14}},{"start":{"line":331,"column":6},"end":{"line":333,"column":14}}],"line":295},"37":{"loc":{"start":{"line":348,"column":8},"end":{"line":381,"column":9}},"type":"switch","locations":[{"start":{"line":349,"column":10},"end":{"line":372,"column":18}},{"start":{"line":374,"column":10},"end":{"line":376,"column":54}},{"start":{"line":378,"column":10},"end":{"line":378,"column":17}},{"start":{"line":379,"column":10},"end":{"line":380,"column":36}}],"line":348},"38":{"loc":{"start":{"line":356,"column":20},"end":{"line":364,"column":21}},"type":"switch","locations":[{"start":{"line":357,"column":22},"end":{"line":359,"column":63}},{"start":{"line":361,"column":22},"end":{"line":361,"column":29}},{"start":{"line":362,"column":22},"end":{"line":363,"column":48}}],"line":356},"39":{"loc":{"start":{"line":397,"column":8},"end":{"line":430,"column":9}},"type":"switch","locations":[{"start":{"line":398,"column":10},"end":{"line":421,"column":18}},{"start":{"line":423,"column":10},"end":{"line":425,"column":95}},{"start":{"line":427,"column":10},"end":{"line":427,"column":17}},{"start":{"line":428,"column":10},"end":{"line":429,"column":36}}],"line":397},"40":{"loc":{"start":{"line":405,"column":20},"end":{"line":413,"column":21}},"type":"switch","locations":[{"start":{"line":406,"column":22},"end":{"line":408,"column":64}},{"start":{"line":410,"column":22},"end":{"line":410,"column":29}},{"start":{"line":411,"column":22},"end":{"line":412,"column":48}}],"line":405}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":7,"24":7,"25":7,"26":5,"27":7,"28":7,"29":3,"30":1,"31":2,"32":4,"33":3,"34":1,"35":2,"36":1,"37":1,"38":1,"39":0,"40":7,"41":7,"42":3,"43":3,"44":3,"45":3,"46":3,"47":3,"48":0,"49":0,"50":3,"51":3,"52":3,"53":3,"54":2,"55":2,"56":2,"57":2,"58":2,"59":0,"60":0,"61":2,"62":2,"63":2,"64":2,"65":2,"66":2,"67":0,"68":2,"69":2,"70":2,"71":2,"72":2,"73":2,"74":2,"75":2,"76":2,"77":2,"78":2,"79":1,"80":1,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":2,"88":2,"89":0,"90":2,"91":2,"92":1,"93":1,"94":3,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":1,"102":1,"103":2,"104":1,"105":1,"106":1,"107":1,"108":1,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":1,"149":1,"150":1,"151":1,"152":0,"153":1,"154":1,"155":1,"156":0,"157":0,"158":0,"159":0,"160":0,"161":1,"162":1,"163":1,"164":0,"165":1,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":1,"178":1,"179":1,"180":1,"181":3,"182":3,"183":1,"184":1,"185":1,"186":1,"187":1,"188":2,"189":2,"190":1,"191":1,"192":1,"193":1,"194":1,"195":1,"196":1,"197":1,"198":1,"199":1,"200":1,"201":1,"202":3,"203":3,"204":1,"205":1,"206":1,"207":1,"208":1,"209":2,"210":2,"211":1,"212":1,"213":1,"214":1,"215":1,"216":1,"217":1,"218":1,"219":1,"220":3,"221":1,"222":1,"223":1,"224":1,"225":1,"226":1},"f":{"0":7,"1":7,"2":7,"3":3,"4":3,"5":3,"6":3,"7":2,"8":2,"9":2,"10":0,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":1,"29":1,"30":3,"31":1,"32":1,"33":2,"34":1,"35":1,"36":1,"37":1,"38":3,"39":1,"40":1,"41":2,"42":1,"43":3,"44":1,"45":1},"b":{"0":[5,2],"1":[3,4],"2":[1,2],"3":[3,1],"4":[4,4],"5":[1,2],"6":[3,2],"7":[1,0],"8":[1,1],"9":[1,0],"10":[3,0],"11":[3,1],"12":[2,1],"13":[3,2],"14":[0,2],"15":[2,0],"16":[0,2],"17":[2,0],"18":[1,1],"19":[2,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[1,0,0,0,0,0,0,0,1,1],"27":[1,0],"28":[1,0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,1],"36":[0,1,0,0,0],"37":[1,1,0,1],"38":[1,1,1],"39":[1,1,0,1],"40":[1,1,1]},"inputSourceMap":{"version":3,"sources":["source.js"],"names":["requestList","obj","match","jsonPage","p","Promise","resolve","cmsData","sql","executeQuery","then","data","key","editable","slice","prefill","valueList","value","getDataSource","indexOf","JSON","parse","e","console","log","urlList","autocomplete","host","sourceString","split","httpUse","http","defaultPort","https","pathSource","shift","join","options","hostname","port","path","method","headers","body","localReq","request","localRes","setEncoding","on","chunk","parsedBody","Object","prototype","toString","call","write","end","fileList","coreUtils","file","getJson","config","root","nextSourceData","attributes","getAll","sourceType","getSourceType","type","sanitizeSourceAttribute","charAt","reference","url","_","get","newJson","exist","set","fse","writeJson","mkdir","space","encoding","unset","nextDataList","getSourceData","text","matches","regex","getTagAbeWithSource","all","map","result","getDataList","getTagAbeTypeRequest","source","removeDataList","replace","dataTypeReg","removeNonEditableDataList","nonEditableDataReg","removeNonEachDataList","pattEach","textWithNoEach","exec"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AAEO,SAASA,WAAT,CAAqBC,GAArB,EAA0BC,KAA1B,EAAiCC,QAAjC,EAA2C;AAChD,MAAIC,CAAC,GAAG,IAAIC,iBAAJ,CAAY,UAAAC,OAAO,EAAI;AAC7BC,eAAQC,GAAR,CAAYC,YAAZ,CAAyBP,KAAzB,EAAgCC,QAAhC,EAA0CO,IAA1C,CAA+C,UAAAC,IAAI,EAAI;AACrD,UAAI,CAACR,QAAQ,CAAC,YAAD,CAAb,EAA6B;AAC3BA,QAAAA,QAAQ,CAAC,YAAD,CAAR,GAAyB,EAAzB;AACD;;AACDA,MAAAA,QAAQ,CAAC,YAAD,CAAR,CAAuBF,GAAG,CAACW,GAA3B,IAAkCD,IAAlC,CAJqD,CAMrD;;AACA,UAAI,CAACV,GAAG,CAACY,QAAT,EAAmB;AACjB,YAAIZ,GAAG,CAAC,YAAD,CAAP,EAAuB;AACrBE,UAAAA,QAAQ,CAACF,GAAG,CAACW,GAAL,CAAR,GAAoBD,IAAI,CAACG,KAAL,CAAW,CAAX,EAAcb,GAAG,CAAC,YAAD,CAAjB,CAApB;AACD,SAFD,MAEO;AACLE,UAAAA,QAAQ,CAACF,GAAG,CAACW,GAAL,CAAR,GAAoBD,IAApB;AACD,SALgB,CAMnB;;AACC,OAPD,MAOO,IAAIR,QAAQ,CAACF,GAAG,CAACW,GAAL,CAAR,IAAqB,IAArB,IAA6BX,GAAG,CAACc,OAArC,EAA8C;AACnD,YAAId,GAAG,CAAC,kBAAD,CAAH,IAA2BA,GAAG,CAAC,YAAD,CAAlC,EAAkD;AAChDE,UAAAA,QAAQ,CAACF,GAAG,CAACW,GAAL,CAAR,GAAoBD,IAAI,CAACG,KAAL,CAClB,CADkB,EAElBb,GAAG,CAAC,kBAAD,CAAH,GAA0BA,GAAG,CAAC,YAAD,CAA7B,GACIA,GAAG,CAAC,YAAD,CADP,GAEIA,GAAG,CAAC,kBAAD,CAJW,CAApB;AAMD,SAPD,MAOO,IAAIA,GAAG,CAAC,kBAAD,CAAP,EAA6B;AAClCE,UAAAA,QAAQ,CAACF,GAAG,CAACW,GAAL,CAAR,GAAoBD,IAAI,CAACG,KAAL,CAAW,CAAX,EAAcb,GAAG,CAAC,kBAAD,CAAjB,CAApB;AACD,SAFM,MAEA,IAAIA,GAAG,CAAC,YAAD,CAAP,EAAuB;AAC5BE,UAAAA,QAAQ,CAACF,GAAG,CAACW,GAAL,CAAR,GAAoBD,IAAI,CAACG,KAAL,CAAW,CAAX,EAAcb,GAAG,CAAC,YAAD,CAAjB,CAApB;AACD,SAFM,MAEA;AACLE,UAAAA,QAAQ,CAACF,GAAG,CAACW,GAAL,CAAR,GAAoBD,IAApB;AACD;AACF;;AAEDL,MAAAA,OAAO,CAACH,QAAD,CAAP;AACD,KAhCD;AAiCD,GAlCO,CAAR;AAoCA,SAAOC,CAAP;AACD;;AAEM,SAASY,SAAT,CAAmBf,GAAnB,EAAwBC,KAAxB,EAA+BC,QAA/B,EAAyC;AAC9C,MAAIC,CAAC,GAAG,IAAIC,iBAAJ,CAAY,UAAAC,OAAO,EAAI;AAC7B,QAAIW,KAAK,GAAGV,WAAQC,GAAR,CAAYU,aAAZ,CAA0BhB,KAA1B,CAAZ;;AAEA,QAAIe,KAAK,CAACE,OAAN,CAAc,GAAd,IAAqB,CAAC,CAAtB,IAA2BF,KAAK,CAACE,OAAN,CAAc,GAAd,IAAqB,CAAC,CAArD,EAAwD;AACtD,UAAI;AACFF,QAAAA,KAAK,GAAGG,IAAI,CAACC,KAAL,CAAWJ,KAAX,CAAR;AAEAd,QAAAA,QAAQ,CAAC,YAAD,CAAR,CAAuBF,GAAG,CAACW,GAA3B,IAAkCK,KAAlC;AACD,OAJD,CAIE,OAAOK,CAAP,EAAU;AACVnB,QAAAA,QAAQ,CAAC,YAAD,CAAR,CAAuBF,GAAG,CAACW,GAA3B,IAAkC,IAAlC;AACAW,QAAAA,OAAO,CAACC,GAAR,iBAAqBP,KAArB,uCAAuDK,CAAvD;AACD;AACF;;AACDhB,IAAAA,OAAO;AACR,GAdO,CAAR;AAgBA,SAAOF,CAAP;AACD;;AAEM,SAASqB,OAAT,CAAiBxB,GAAjB,EAAsBC,KAAtB,EAA6BC,QAA7B,EAAuC;AAC5C,MAAIC,CAAC,GAAG,IAAIC,iBAAJ,CAAY,UAAAC,OAAO,EAAI;AAC7B,QAAIL,GAAG,CAACyB,YAAJ,KAAqB,IAArB,IAA6BzB,GAAG,CAACyB,YAAJ,KAAqB,MAAtD,EAA8D;AAC5D,UAAIC,IAAI,GAAG1B,GAAG,CAAC2B,YAAf;AACAD,MAAAA,IAAI,GAAGA,IAAI,CAACE,KAAL,CAAW,GAAX,CAAP;AACA,UAAIC,OAAO,GAAGC,gBAAd;AACA,UAAIC,WAAW,GAAG,EAAlB;;AACA,UAAIL,IAAI,CAAC,CAAD,CAAJ,KAAY,QAAhB,EAA0B;AACxBG,QAAAA,OAAO,GAAGG,iBAAV;AACAD,QAAAA,WAAW,GAAG,GAAd;AACD;;AACDL,MAAAA,IAAI,GAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQE,KAAR,CAAc,GAAd,CAAP;AAEA,UAAIK,UAAU,GAAGjC,GAAG,CAAC2B,YAAJ,CAAiBC,KAAjB,CAAuB,IAAvB,CAAjB;;AACA,UAAIK,UAAU,CAAC,CAAD,CAAV,IAAiB,IAArB,EAA2B;AACzBA,QAAAA,UAAU,GAAGA,UAAU,CAAC,CAAD,CAAV,CAAcL,KAAd,CAAoB,GAApB,CAAb;AACAK,QAAAA,UAAU,CAACC,KAAX;AACAD,QAAAA,UAAU,GAAG,MAAMA,UAAU,CAACE,IAAX,CAAgB,GAAhB,CAAnB;AACD,OAJD,MAIO;AACLF,QAAAA,UAAU,GAAG,GAAb;AACD;;AACD,UAAIG,OAAO,GAAG;AACZC,QAAAA,QAAQ,EAAEX,IAAI,CAAC,CAAD,CADF;AAEZY,QAAAA,IAAI,EAAEZ,IAAI,CAAC,CAAD,CAAJ,IAAW,IAAX,GAAkBA,IAAI,CAAC,CAAD,CAAtB,GAA4BK,WAFtB;AAGZQ,QAAAA,IAAI,EAAEN,UAHM;AAIZO,QAAAA,MAAM,EAAE,KAJI;AAKZC,QAAAA,OAAO,EAAE;AACP,0BAAgB,mCADT;AAEP,4BAAkB;AAFX;AALG,OAAd;AAWA,UAAIC,IAAI,GAAG,EAAX;AAEA,UAAIC,QAAQ,GAAGd,OAAO,CAACe,OAAR,CAAgBR,OAAhB,EAAyB,UAAAS,QAAQ,EAAI;AAClDA,QAAAA,QAAQ,CAACC,WAAT,CAAqB,MAArB;AACAD,QAAAA,QAAQ,CAACE,EAAT,CAAY,MAAZ,EAAoB,UAAAC,KAAK,EAAI;AAC3BN,UAAAA,IAAI,IAAIM,KAAR;AACD,SAFD;AAGAH,QAAAA,QAAQ,CAACE,EAAT,CAAY,KAAZ,EAAmB,YAAM;AACvB,cAAI;AACF,gBAAI,OAAOL,IAAP,KAAgB,QAApB,EAA8B;AAC5B,kBAAIO,UAAU,GAAG9B,IAAI,CAACC,KAAL,CAAWsB,IAAX,CAAjB;;AACA,kBACE,yBAAOO,UAAP,MAAsB,QAAtB,IACAC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,UAA/B,MAA+C,gBAFjD,EAGE;AACA/C,gBAAAA,QAAQ,CAAC,YAAD,CAAR,CAAuBF,GAAG,CAACW,GAA3B,IAAkCsC,UAAlC;AACD,eALD,MAKO,IACL,yBAAOA,UAAP,MAAsB,QAAtB,IACAC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,UAA/B,MAA+C,iBAF1C,EAGL;AACA/C,gBAAAA,QAAQ,CAAC,YAAD,CAAR,CAAuBF,GAAG,CAACW,GAA3B,IAAkC,CAACsC,UAAD,CAAlC;AACD;AACF,aAbD,MAaO,IACL,yBAAOP,IAAP,MAAgB,QAAhB,IACAQ,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BX,IAA/B,MAAyC,gBAFpC,EAGL;AACAxC,cAAAA,QAAQ,CAAC,YAAD,CAAR,CAAuBF,GAAG,CAACW,GAA3B,IAAkC+B,IAAlC;AACD,aALM,MAKA,IACL,yBAAOA,IAAP,MAAgB,QAAhB,IACAQ,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BX,IAA/B,MAAyC,iBAFpC,EAGL;AACAxC,cAAAA,QAAQ,CAAC,YAAD,CAAR,CAAuBF,GAAG,CAACW,GAA3B,IAAkC+B,IAAlC;AACD;AACF,WAzBD,CAyBE,OAAOrB,CAAP,EAAU;AACVC,YAAAA,OAAO,CAACC,GAAR,iBACWvB,GAAG,CAAC2B,YADf,uCAEON,CAFP;AAID;;AACDhB,UAAAA,OAAO;AACR,SAjCD;AAkCD,OAvCc,CAAf;AAyCAsC,MAAAA,QAAQ,CAACI,EAAT,CAAY,OAAZ,EAAqB,UAAA1B,CAAC,EAAI;AACxBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD,OAFD,EAzE4D,CA6E5D;;AACAsB,MAAAA,QAAQ,CAACW,KAAT,CAAe,EAAf;AACAX,MAAAA,QAAQ,CAACY,GAAT;AACD,KAhFD,MAgFO;AACLrD,MAAAA,QAAQ,CAAC,YAAD,CAAR,CAAuBF,GAAG,CAACW,GAA3B,IAAkCX,GAAG,CAAC2B,YAAtC;AACAtB,MAAAA,OAAO;AACR;AACF,GArFO,CAAR;AAuFA,SAAOF,CAAP;AACD;;AAEM,SAASqD,QAAT,CAAkBxD,GAAlB,EAAuBC,KAAvB,EAA8BC,QAA9B,EAAwC;AAC7C,MAAIC,CAAC,GAAG,IAAIC,iBAAJ,CAAY,UAAAC,OAAO,EAAI;AAC7BH,IAAAA,QAAQ,CAAC,YAAD,CAAR,CAAuBF,GAAG,CAACW,GAA3B,IAAkC8C,aAAUC,IAAV,CAAeC,OAAf,CAChCpB,iBAAKJ,IAAL,CAAUyB,UAAOC,IAAjB,EAAuB7D,GAAG,CAAC2B,YAA3B,CADgC,CAAlC;AAGAtB,IAAAA,OAAO;AACR,GALO,CAAR;AAOA,SAAOF,CAAP;AACD;;SAEqB2D,c;;;;;kGAAf,iBAA8B5D,QAA9B,EAAwCD,KAAxC;AAAA;;AAAA;AAAA;AAAA;AAAA;AACCD,YAAAA,GADD,GACOM,WAAQyD,UAAR,CAAmBC,MAAnB,CAA0B/D,KAA1B,EAAiCC,QAAjC,CADP;AAEG+D,YAAAA,UAFH,GAEgB3D,WAAQC,GAAR,CAAY2D,aAAZ,CAA0BlE,GAAG,CAAC2B,YAA9B,CAFhB;;AAAA,kBAICsC,UAAU,KAAK,MAAf,IAAyBjE,GAAG,CAACmE,IAAJ,KAAa,MAAtC,IAAgDnE,GAAG,CAACmE,IAAJ,KAAa,QAJ9D;AAAA;AAAA;AAAA;;AAKDnE,YAAAA,GAAG,GAAGM,WAAQyD,UAAR,CAAmBK,uBAAnB,CAA2CpE,GAA3C,EAAgDE,QAAhD,CAAN;AACIwD,YAAAA,IANH,GAMU1D,GAAG,CAAC2B,YANd;;AAQD,gBAAI+B,IAAI,CAACW,MAAL,CAAY,CAAZ,KAAkB,GAAtB,EAA2B;AACzBX,cAAAA,IAAI,GAAGnB,iBAAKJ,IAAL,CAAUyB,UAAOC,IAAjB,EAAuBH,IAAvB,CAAP;AACD,aAFD,MAEO;AACLA,cAAAA,IAAI,GAAGnB,iBAAKJ,IAAL,CAAUyB,UAAOC,IAAjB,EAAuBD,UAAOU,SAAP,CAAiBC,GAAxC,EAA6Cb,IAA7C,CAAP;AACD,aAZA,CAcD;;;AAdC,kBAeGc,mBAAEC,GAAF,CAAMvE,QAAN,EAAgBF,GAAG,CAACW,GAApB,KAA4B,IAf/B;AAAA;AAAA;AAAA;;AAgBK+D,YAAAA,OAhBL,GAgBe,EAhBf;;AAAA,iBAiBKjB,aAAUC,IAAV,CAAeiB,KAAf,CAAqBjB,IAArB,CAjBL;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAkBmBpD,WAAQoD,IAAR,CAAae,GAAb,CAAiBf,IAAjB,CAlBnB;;AAAA;AAkBGgB,YAAAA,OAlBH;;AAAA,kBAmBMF,mBAAEC,GAAF,CAAMC,OAAN,EAAe1E,GAAG,CAACW,GAAnB,MAA4B6D,mBAAEC,GAAF,CAAMvE,QAAN,EAAgBF,GAAG,CAACW,GAApB,CAnBlC;AAAA;AAAA;AAAA;;AAoBK6D,+BAAEI,GAAF,CAAMF,OAAN,EAAe1E,GAAG,CAACW,GAAnB,EAAwB6D,mBAAEC,GAAF,CAAMvE,QAAN,EAAgBF,GAAG,CAACW,GAApB,CAAxB;;AApBL;AAAA,mBAqBWkE,oBAAIC,SAAJ,CAAcpB,IAAd,EAAoBgB,OAApB,CArBX;;AAAA;AAAA;AAAA;;AAAA;AAwBGF,+BAAEI,GAAF,CAAMF,OAAN,EAAe1E,GAAG,CAACW,GAAnB,EAAwB6D,mBAAEC,GAAF,CAAMvE,QAAN,EAAgBF,GAAG,CAACW,GAApB,CAAxB;;AAxBH;AAAA,mBAyBSkE,oBAAIE,KAAJ,CAAUrB,IAAI,CAAC9B,KAAL,CAAW,GAAX,EAAgBf,KAAhB,CAAsB,CAAtB,EAAyB,CAAC,CAA1B,EAA6BsB,IAA7B,CAAkC,GAAlC,CAAV,CAzBT;;AAAA;AAAA;AAAA,mBA0BS0C,oBAAIC,SAAJ,CAAcpB,IAAd,EAAoBgB,OAApB,EAA6B;AAACM,cAAAA,KAAK,EAAE,CAAR;AAAWC,cAAAA,QAAQ,EAAE;AAArB,aAA7B,CA1BT;;AAAA;AA4BCT,+BAAEU,KAAF,CAAQhF,QAAR,EAAkBF,GAAG,CAACW,GAAtB,EA5BD,CA6BD;;;AA7BC;AAAA;;AAAA;AAAA,iBA+BK8C,aAAUC,IAAV,CAAeiB,KAAf,CAAqBjB,IAArB,CA/BL;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAgCyBpD,WAAQoD,IAAR,CAAae,GAAb,CAAiBf,IAAjB,CAhCzB;;AAAA;AAgCSgB,YAAAA,QAhCT;;AAkCG,gBAAIF,mBAAEC,GAAF,CAAMC,QAAN,EAAe1E,GAAG,CAACW,GAAnB,KAA2B,IAA/B,EAAqC;AACnC6D,iCAAEI,GAAF,CAAM1E,QAAN,EAAgBF,GAAG,CAACW,GAApB,EAAyB6D,mBAAEC,GAAF,CAAMC,QAAN,EAAe1E,GAAG,CAACW,GAAnB,CAAzB;AACD;;AApCJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AA2CA,SAASwE,YAAT,CAAsBjF,QAAtB,EAAgCD,KAAhC,EAAuC;AAC5C,MAAIE,CAAC,GAAG,IAAIC,iBAAJ,CAAY,UAAAC,OAAO,EAAI;AAC7B,QAAIH,QAAQ,CAAC,YAAD,CAAR,IAA0B,IAA9B,EAAoC;AAClCA,MAAAA,QAAQ,CAAC,YAAD,CAAR,GAAyB,EAAzB;AACD;;AAED,QAAIF,GAAG,GAAGM,WAAQyD,UAAR,CAAmBC,MAAnB,CAA0B/D,KAA1B,EAAiCC,QAAjC,CAAV;;AAEA,QAAIiE,IAAI,GAAG7D,WAAQC,GAAR,CAAY2D,aAAZ,CAA0BlE,GAAG,CAAC2B,YAA9B,CAAX;;AAEA,YAAQwC,IAAR;AACE,WAAK,SAAL;AACEnE,QAAAA,GAAG,GAAGM,WAAQyD,UAAR,CAAmBK,uBAAnB,CAA2CpE,GAA3C,EAAgDE,QAAhD,CAAN;AACAH,QAAAA,WAAW,CAACC,GAAD,EAAMC,KAAN,EAAaC,QAAb,CAAX,CACGO,IADH,CACQ,UAAAP,QAAQ,EAAI;AAChBG,UAAAA,OAAO,CAACH,QAAD,CAAP;AACD,SAHH,WAIS,UAAAmB,CAAC,EAAI;AACVC,UAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CF,CAA7C;AACD,SANH;AAOA;;AACF,WAAK,OAAL;AACErB,QAAAA,GAAG,GAAGM,WAAQyD,UAAR,CAAmBK,uBAAnB,CAA2CpE,GAA3C,EAAgDE,QAAhD,CAAN;AACAa,QAAAA,SAAS,CAACf,GAAD,EAAMC,KAAN,EAAaC,QAAb,CAAT,CACGO,IADH,CACQ,YAAM;AACVJ,UAAAA,OAAO;AACR,SAHH,WAIS,UAAAgB,CAAC,EAAI;AACVC,UAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CF,CAA3C;AACD,SANH;AAOA;;AACF,WAAK,KAAL;AACEG,QAAAA,OAAO,CAACxB,GAAD,EAAMC,KAAN,EAAaC,QAAb,CAAP,CACGO,IADH,CACQ,YAAM;AACVJ,UAAAA,OAAO;AACR,SAHH,WAIS,UAAAgB,CAAC,EAAI;AACVC,UAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,CAAzC;AACD,SANH;AAOA;;AACF,WAAK,MAAL;AACErB,QAAAA,GAAG,GAAGM,WAAQyD,UAAR,CAAmBK,uBAAnB,CAA2CpE,GAA3C,EAAgDE,QAAhD,CAAN;AACAsD,QAAAA,QAAQ,CAACxD,GAAD,EAAMC,KAAN,EAAaC,QAAb,CAAR,CACGO,IADH,CACQ,YAAM;AACVJ,UAAAA,OAAO;AACR,SAHH,WAIS,UAAAgB,CAAC,EAAI;AACVC,UAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CF,CAA1C;AACD,SANH;AAOA;;AACF;AACEhB,QAAAA,OAAO;AACP;AA1CJ;AA4CD,GArDO,CAAR;AAuDA,SAAOF,CAAP;AACD;;SAEqBiF,a;;;;;iGAAf,kBAA6BC,IAA7B,EAAmCnF,QAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AACDoF,YAAAA,OADC,GACShF,WAAQiF,KAAR,CAAcC,mBAAd,CAAkCH,IAAlC,CADT;AAAA;AAAA,mBAGgBjF,kBAAQqF,GAAR,CACnBH,OAAO,CAACI,GAAR;AAAA,uGAAY,kBAAMzF,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACJ6D,cAAc,CAAC5D,QAAD,EAAWD,KAAX,CADV;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAZ;;AAAA;AAAA;AAAA;AAAA,gBADmB,CAHhB;;AAAA;AAGC0F,YAAAA,MAHD;AAAA,8CASEA,MATF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAYeC,W;;;;;+FAAf,kBAA2BP,IAA3B,EAAiCnF,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AACDoF,YAAAA,OADC,GACShF,WAAQiF,KAAR,CAAcM,oBAAd,CAAmCR,IAAnC,CADT;AAAA;AAAA,mBAEgBjF,kBAAQqF,GAAR,CACnBH,OAAO,CAACI,GAAR;AAAA,wGAAY,kBAAMzF,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACJkF,YAAY,CAACjF,QAAD,EAAWD,KAAK,CAAC,CAAD,CAAhB,CADR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAZ;;AAAA;AAAA;AAAA;AAAA,gBADmB,CAFhB;;AAAA;AAEC0F,YAAAA,MAFD;AAAA,8CAQErF,WAAQwF,MAAR,CAAeV,aAAf,CAA6BC,IAA7B,EAAmCnF,QAAnC,CARF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAWA,SAAS6F,cAAT,CAAwBV,IAAxB,EAA8B;AACnC,SAAOA,IAAI,CAACW,OAAL,CAAa1F,WAAQiF,KAAR,CAAcU,WAA3B,EAAwC,EAAxC,CAAP;AACD;;AAEM,SAASC,yBAAT,CAAmCb,IAAnC,EAAyC;AAC9C,SAAOA,IAAI,CAACW,OAAL,CAAa1F,WAAQiF,KAAR,CAAcY,kBAA3B,EAA+C,EAA/C,CAAP;AACD;AAED;;;;;;;AAKO,SAASC,qBAAT,CAA+Bf,IAA/B,EAAqC;AAC1C;AACA,MAAIgB,QAAQ,GAAG,uCAAf;AACA,MAAIC,cAAc,GAAGjB,IAAI,CAACW,OAAL,CAAaK,QAAb,EAAuB,EAAvB,CAArB;AAEA,MAAIpG,KAAJ;;AACA,SAAQA,KAAK,GAAGK,WAAQiF,KAAR,CAAcU,WAAd,CAA0BM,IAA1B,CAA+BD,cAA/B,CAAhB,EAAiE;AAC/DjB,IAAAA,IAAI,GAAGA,IAAI,CAACW,OAAL,CAAa/F,KAAK,CAAC,CAAD,CAAlB,EAAuB,EAAvB,CAAP;AACD;;AAED,SAAOoF,IAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import {Promise} from 'bluebird'\nimport http from 'http'\nimport https from 'https'\nimport path from 'path'\nimport fse from 'fs-extra'\nimport _ from 'lodash'\n\nimport {config, coreUtils, cmsData} from '../../'\n\nexport function requestList(obj, match, jsonPage) {\n  var p = new Promise(resolve => {\n    cmsData.sql.executeQuery(match, jsonPage).then(data => {\n      if (!jsonPage['abe_source']) {\n        jsonPage['abe_source'] = {}\n      }\n      jsonPage['abe_source'][obj.key] = data\n\n      // I update the jsonPage[obj.key] when the tag is not editable\n      if (!obj.editable) {\n        if (obj['max-length']) {\n          jsonPage[obj.key] = data.slice(0, obj['max-length'])\n        } else {\n          jsonPage[obj.key] = data\n        }\n      // I update the jsonPage[obj.key] only if empty or obj.prefill\n      } else if (jsonPage[obj.key] == null && obj.prefill) {\n        if (obj['prefill-quantity'] && obj['max-length']) {\n          jsonPage[obj.key] = data.slice(\n            0,\n            obj['prefill-quantity'] > obj['max-length']\n              ? obj['max-length']\n              : obj['prefill-quantity']\n          )\n        } else if (obj['prefill-quantity']) {\n          jsonPage[obj.key] = data.slice(0, obj['prefill-quantity'])\n        } else if (obj['max-length']) {\n          jsonPage[obj.key] = data.slice(0, obj['max-length'])\n        } else {\n          jsonPage[obj.key] = data\n        }\n      }\n\n      resolve(jsonPage)\n    })\n  })\n\n  return p\n}\n\nexport function valueList(obj, match, jsonPage) {\n  var p = new Promise(resolve => {\n    var value = cmsData.sql.getDataSource(match)\n\n    if (value.indexOf('{') > -1 || value.indexOf('[') > -1) {\n      try {\n        value = JSON.parse(value)\n\n        jsonPage['abe_source'][obj.key] = value\n      } catch (e) {\n        jsonPage['abe_source'][obj.key] = null\n        console.log(`Error ${value}/is not a valid JSON`, `\\n${e}`)\n      }\n    }\n    resolve()\n  })\n\n  return p\n}\n\nexport function urlList(obj, match, jsonPage) {\n  var p = new Promise(resolve => {\n    if (obj.autocomplete !== true && obj.autocomplete !== 'true') {\n      var host = obj.sourceString\n      host = host.split('/')\n      var httpUse = http\n      var defaultPort = 80\n      if (host[0] === 'https:') {\n        httpUse = https\n        defaultPort = 443\n      }\n      host = host[2].split(':')\n\n      var pathSource = obj.sourceString.split('//')\n      if (pathSource[1] != null) {\n        pathSource = pathSource[1].split('/')\n        pathSource.shift()\n        pathSource = '/' + pathSource.join('/')\n      } else {\n        pathSource = '/'\n      }\n      var options = {\n        hostname: host[0],\n        port: host[1] != null ? host[1] : defaultPort,\n        path: pathSource,\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Content-Length': 0\n        }\n      }\n\n      var body = ''\n\n      var localReq = httpUse.request(options, localRes => {\n        localRes.setEncoding('utf8')\n        localRes.on('data', chunk => {\n          body += chunk\n        })\n        localRes.on('end', () => {\n          try {\n            if (typeof body === 'string') {\n              var parsedBody = JSON.parse(body)\n              if (\n                typeof parsedBody === 'object' &&\n                Object.prototype.toString.call(parsedBody) === '[object Array]'\n              ) {\n                jsonPage['abe_source'][obj.key] = parsedBody\n              } else if (\n                typeof parsedBody === 'object' &&\n                Object.prototype.toString.call(parsedBody) === '[object Object]'\n              ) {\n                jsonPage['abe_source'][obj.key] = [parsedBody]\n              }\n            } else if (\n              typeof body === 'object' &&\n              Object.prototype.toString.call(body) === '[object Array]'\n            ) {\n              jsonPage['abe_source'][obj.key] = body\n            } else if (\n              typeof body === 'object' &&\n              Object.prototype.toString.call(body) === '[object Object]'\n            ) {\n              jsonPage['abe_source'][obj.key] = body\n            }\n          } catch (e) {\n            console.log(\n              `Error ${obj.sourceString} is not a valid JSON`,\n              `\\n${e}`\n            )\n          }\n          resolve()\n        })\n      })\n\n      localReq.on('error', e => {\n        console.log(e)\n      })\n\n      // write data to request body\n      localReq.write('')\n      localReq.end()\n    } else {\n      jsonPage['abe_source'][obj.key] = obj.sourceString\n      resolve()\n    }\n  })\n\n  return p\n}\n\nexport function fileList(obj, match, jsonPage) {\n  var p = new Promise(resolve => {\n    jsonPage['abe_source'][obj.key] = coreUtils.file.getJson(\n      path.join(config.root, obj.sourceString)\n    )\n    resolve()\n  })\n\n  return p\n}\n\nexport async function nextSourceData(jsonPage, match) {\n    let obj = cmsData.attributes.getAll(match, jsonPage)\n    const sourceType = cmsData.sql.getSourceType(obj.sourceString)\n\n    if (sourceType === 'file' && obj.type !== 'data' && obj.type !== 'import') {\n      obj = cmsData.attributes.sanitizeSourceAttribute(obj, jsonPage)\n      let file = obj.sourceString\n\n      if (file.charAt(0) == '/') {\n        file = path.join(config.root, file)\n      } else {\n        file = path.join(config.root, config.reference.url, file)\n      }\n\n      // Do I have to save data\n      if (_.get(jsonPage, obj.key) != null) {\n        let newJson = {}\n        if (coreUtils.file.exist(file)) {\n          newJson = await cmsData.file.get(file)\n          if(_.get(newJson, obj.key) !== _.get(jsonPage, obj.key)) {\n            _.set(newJson, obj.key, _.get(jsonPage, obj.key));\n            await fse.writeJson(file, newJson)\n          }\n        } else {\n          _.set(newJson, obj.key, _.get(jsonPage, obj.key));\n          await fse.mkdir(file.split('/').slice(0, -1).join('/'))\n          await fse.writeJson(file, newJson, {space: 2, encoding: 'utf-8'})\n        }\n        _.unset(jsonPage, obj.key);\n      // Or do I have to only read data\n      } else {\n        if (coreUtils.file.exist(file)) {\n          const newJson = await cmsData.file.get(file)\n\n          if (_.get(newJson, obj.key) != null) {\n            _.set(jsonPage, obj.key, _.get(newJson, obj.key))\n          }\n        }\n      }\n    }\n\n}\n\nexport function nextDataList(jsonPage, match) {\n  var p = new Promise(resolve => {\n    if (jsonPage['abe_source'] == null) {\n      jsonPage['abe_source'] = {}\n    }\n\n    var obj = cmsData.attributes.getAll(match, jsonPage)\n\n    var type = cmsData.sql.getSourceType(obj.sourceString)\n\n    switch (type) {\n      case 'request':\n        obj = cmsData.attributes.sanitizeSourceAttribute(obj, jsonPage)\n        requestList(obj, match, jsonPage)\n          .then(jsonPage => {\n            resolve(jsonPage)\n          })\n          .catch(e => {\n            console.log('[ERROR] source.js requestList', e)\n          })\n        break\n      case 'value':\n        obj = cmsData.attributes.sanitizeSourceAttribute(obj, jsonPage)\n        valueList(obj, match, jsonPage)\n          .then(() => {\n            resolve()\n          })\n          .catch(e => {\n            console.log('[ERROR] source.js valueList', e)\n          })\n        break\n      case 'url':\n        urlList(obj, match, jsonPage)\n          .then(() => {\n            resolve()\n          })\n          .catch(e => {\n            console.log('[ERROR] source.js urlList', e)\n          })\n        break\n      case 'file':\n        obj = cmsData.attributes.sanitizeSourceAttribute(obj, jsonPage)\n        fileList(obj, match, jsonPage)\n          .then(() => {\n            resolve()\n          })\n          .catch(e => {\n            console.log('[ERROR] source.js fileList', e)\n          })\n        break\n      default:\n        resolve()\n        break\n    }\n  })\n\n  return p\n}\n\nexport async function getSourceData(text, jsonPage) {\n  var matches = cmsData.regex.getTagAbeWithSource(text)\n\n  const result = await Promise.all(\n    matches.map(async match => {\n      await nextSourceData(jsonPage, match)\n    })\n  )\n\n  return result\n}\n\nexport async function getDataList(text, jsonPage) {\n  var matches = cmsData.regex.getTagAbeTypeRequest(text)\n  const result = await Promise.all(\n    matches.map(async match => {\n      await nextDataList(jsonPage, match[0])\n    })\n  )\n\n  return cmsData.source.getSourceData(text, jsonPage)\n}\n\nexport function removeDataList(text) {\n  return text.replace(cmsData.regex.dataTypeReg, '')\n}\n\nexport function removeNonEditableDataList(text) {\n  return text.replace(cmsData.regex.nonEditableDataReg, '')\n}\n\n/**\n * Remove all type='data' outside {{#each}} statements\n * @param  {[type]} text [description]\n * @return {[type]}      [description]\n */\nexport function removeNonEachDataList(text) {\n  // removing each blocks potentially containing abe data type\n  let pattEach = /(\\{\\{#each (\\r|\\t|\\n|.)*?\\/each\\}\\})/g\n  let textWithNoEach = text.replace(pattEach, '')\n\n  var match\n  while ((match = cmsData.regex.dataTypeReg.exec(textWithNoEach))) {\n    text = text.replace(match[0], '')\n  }\n\n  return text\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"55a0f60324ff3008f32c6bfdec03770313108d4f","contentHash":"e5709426a5735779c4686525c513f56eade10f2376a05e321b20368b0eeaf997"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/revision.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/revision.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":34}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":50}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":64}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":74}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":38}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":40}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":38}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":40}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":24}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":40}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":22}},"13":{"start":{"line":19,"column":0},"end":{"line":19,"column":38}},"14":{"start":{"line":21,"column":19},"end":{"line":21,"column":80}},"15":{"start":{"line":23,"column":25},"end":{"line":23,"column":99}},"16":{"start":{"line":25,"column":12},"end":{"line":25,"column":51}},"17":{"start":{"line":27,"column":14},"end":{"line":27,"column":55}},"18":{"start":{"line":29,"column":9},"end":{"line":29,"column":26}},"19":{"start":{"line":37,"column":15},"end":{"line":37,"column":17}},"20":{"start":{"line":39,"column":14},"end":{"line":39,"column":43}},"21":{"start":{"line":41,"column":17},"end":{"line":41,"column":84}},"22":{"start":{"line":43,"column":2},"end":{"line":49,"column":3}},"23":{"start":{"line":44,"column":4},"end":{"line":48,"column":7}},"24":{"start":{"line":45,"column":6},"end":{"line":47,"column":7}},"25":{"start":{"line":46,"column":8},"end":{"line":46,"column":32}},"26":{"start":{"line":51,"column":2},"end":{"line":51,"column":16}},"27":{"start":{"line":65,"column":15},"end":{"line":65,"column":19}},"28":{"start":{"line":66,"column":21},"end":{"line":66,"column":28}},"29":{"start":{"line":67,"column":15},"end":{"line":67,"column":19}},"30":{"start":{"line":69,"column":2},"end":{"line":72,"column":3}},"31":{"start":{"line":70,"column":4},"end":{"line":70,"column":19}},"32":{"start":{"line":71,"column":4},"end":{"line":71,"column":63}},"33":{"start":{"line":74,"column":18},"end":{"line":74,"column":43}},"34":{"start":{"line":76,"column":2},"end":{"line":78,"column":3}},"35":{"start":{"line":77,"column":4},"end":{"line":77,"column":26}},"36":{"start":{"line":80,"column":2},"end":{"line":80,"column":16}},"37":{"start":{"line":84,"column":12},"end":{"line":84,"column":184}},"38":{"start":{"line":85,"column":2},"end":{"line":85,"column":13}},"39":{"start":{"line":89,"column":2},"end":{"line":89,"column":37}},"40":{"start":{"line":93,"column":16},"end":{"line":93,"column":37}},"41":{"start":{"line":94,"column":13},"end":{"line":94,"column":40}},"42":{"start":{"line":96,"column":16},"end":{"line":96,"column":41}},"43":{"start":{"line":98,"column":16},"end":{"line":98,"column":43}},"44":{"start":{"line":99,"column":2},"end":{"line":104,"column":4}},"45":{"start":{"line":108,"column":15},"end":{"line":108,"column":17}},"46":{"start":{"line":109,"column":2},"end":{"line":120,"column":5}},"47":{"start":{"line":110,"column":26},"end":{"line":110,"column":72}},"48":{"start":{"line":112,"column":4},"end":{"line":117,"column":5}},"49":{"start":{"line":113,"column":6},"end":{"line":116,"column":8}},"50":{"start":{"line":119,"column":4},"end":{"line":119,"column":77}},"51":{"start":{"line":121,"column":2},"end":{"line":121,"column":16}},"52":{"start":{"line":125,"column":20},"end":{"line":125,"column":22}},"53":{"start":{"line":126,"column":2},"end":{"line":157,"column":5}},"54":{"start":{"line":127,"column":20},"end":{"line":127,"column":41}},"55":{"start":{"line":128,"column":4},"end":{"line":128,"column":61}},"56":{"start":{"line":129,"column":4},"end":{"line":129,"column":38}},"57":{"start":{"line":131,"column":4},"end":{"line":135,"column":5}},"58":{"start":{"line":132,"column":6},"end":{"line":132,"column":43}},"59":{"start":{"line":133,"column":6},"end":{"line":133,"column":43}},"60":{"start":{"line":134,"column":6},"end":{"line":134,"column":51}},"61":{"start":{"line":137,"column":22},"end":{"line":137,"column":24}},"62":{"start":{"line":138,"column":4},"end":{"line":155,"column":7}},"63":{"start":{"line":139,"column":27},"end":{"line":139,"column":78}},"64":{"start":{"line":141,"column":6},"end":{"line":154,"column":7}},"65":{"start":{"line":142,"column":8},"end":{"line":153,"column":9}},"66":{"start":{"line":143,"column":10},"end":{"line":147,"column":11}},"67":{"start":{"line":144,"column":12},"end":{"line":144,"column":51}},"68":{"start":{"line":146,"column":12},"end":{"line":146,"column":45}},"69":{"start":{"line":149,"column":10},"end":{"line":149,"column":59}},"70":{"start":{"line":150,"column":10},"end":{"line":150,"column":59}},"71":{"start":{"line":151,"column":10},"end":{"line":151,"column":68}},"72":{"start":{"line":152,"column":10},"end":{"line":152,"column":45}},"73":{"start":{"line":156,"column":4},"end":{"line":156,"column":34}},"74":{"start":{"line":158,"column":2},"end":{"line":158,"column":21}},"75":{"start":{"line":162,"column":18},"end":{"line":162,"column":59}},"76":{"start":{"line":164,"column":2},"end":{"line":164,"column":54}},"77":{"start":{"line":168,"column":2},"end":{"line":168,"column":40}},"78":{"start":{"line":172,"column":2},"end":{"line":216,"column":6}},"79":{"start":{"line":174,"column":4},"end":{"line":215,"column":16}},"80":{"start":{"line":175,"column":6},"end":{"line":214,"column":7}},"81":{"start":{"line":176,"column":8},"end":{"line":213,"column":9}},"82":{"start":{"line":178,"column":12},"end":{"line":178,"column":22}},"83":{"start":{"line":180,"column":12},"end":{"line":183,"column":13}},"84":{"start":{"line":181,"column":14},"end":{"line":181,"column":32}},"85":{"start":{"line":182,"column":14},"end":{"line":182,"column":20}},"86":{"start":{"line":185,"column":12},"end":{"line":185,"column":30}},"87":{"start":{"line":186,"column":12},"end":{"line":186,"column":53}},"88":{"start":{"line":189,"column":12},"end":{"line":189,"column":33}},"89":{"start":{"line":190,"column":12},"end":{"line":190,"column":31}},"90":{"start":{"line":191,"column":12},"end":{"line":191,"column":18}},"91":{"start":{"line":194,"column":12},"end":{"line":197,"column":13}},"92":{"start":{"line":195,"column":14},"end":{"line":195,"column":33}},"93":{"start":{"line":196,"column":14},"end":{"line":196,"column":20}},"94":{"start":{"line":199,"column":12},"end":{"line":199,"column":31}},"95":{"start":{"line":200,"column":12},"end":{"line":202,"column":15}},"96":{"start":{"line":201,"column":14},"end":{"line":201,"column":31}},"97":{"start":{"line":205,"column":12},"end":{"line":205,"column":33}},"98":{"start":{"line":208,"column":12},"end":{"line":208,"column":51}},"99":{"start":{"line":212,"column":12},"end":{"line":212,"column":35}},"100":{"start":{"line":217,"column":2},"end":{"line":217,"column":40}},"101":{"start":{"line":221,"column":2},"end":{"line":221,"column":48}},"102":{"start":{"line":225,"column":2},"end":{"line":269,"column":6}},"103":{"start":{"line":227,"column":4},"end":{"line":268,"column":17}},"104":{"start":{"line":228,"column":6},"end":{"line":267,"column":7}},"105":{"start":{"line":229,"column":8},"end":{"line":266,"column":9}},"106":{"start":{"line":231,"column":12},"end":{"line":234,"column":13}},"107":{"start":{"line":232,"column":14},"end":{"line":232,"column":33}},"108":{"start":{"line":233,"column":14},"end":{"line":233,"column":20}},"109":{"start":{"line":236,"column":12},"end":{"line":236,"column":31}},"110":{"start":{"line":237,"column":12},"end":{"line":237,"column":60}},"111":{"start":{"line":240,"column":12},"end":{"line":240,"column":38}},"112":{"start":{"line":241,"column":12},"end":{"line":241,"column":32}},"113":{"start":{"line":242,"column":12},"end":{"line":242,"column":18}},"114":{"start":{"line":245,"column":12},"end":{"line":248,"column":13}},"115":{"start":{"line":246,"column":14},"end":{"line":246,"column":34}},"116":{"start":{"line":247,"column":14},"end":{"line":247,"column":20}},"117":{"start":{"line":250,"column":12},"end":{"line":250,"column":31}},"118":{"start":{"line":251,"column":12},"end":{"line":251,"column":53}},"119":{"start":{"line":254,"column":12},"end":{"line":254,"column":38}},"120":{"start":{"line":257,"column":12},"end":{"line":257,"column":66}},"121":{"start":{"line":259,"column":12},"end":{"line":259,"column":76}},"122":{"start":{"line":261,"column":12},"end":{"line":261,"column":54}},"123":{"start":{"line":265,"column":12},"end":{"line":265,"column":36}},"124":{"start":{"line":270,"column":2},"end":{"line":270,"column":48}},"125":{"start":{"line":274,"column":2},"end":{"line":274,"column":39}},"126":{"start":{"line":278,"column":2},"end":{"line":314,"column":6}},"127":{"start":{"line":280,"column":4},"end":{"line":313,"column":17}},"128":{"start":{"line":281,"column":6},"end":{"line":312,"column":7}},"129":{"start":{"line":282,"column":8},"end":{"line":311,"column":9}},"130":{"start":{"line":284,"column":12},"end":{"line":284,"column":74}},"131":{"start":{"line":285,"column":12},"end":{"line":285,"column":27}},"132":{"start":{"line":287,"column":12},"end":{"line":290,"column":13}},"133":{"start":{"line":288,"column":14},"end":{"line":288,"column":33}},"134":{"start":{"line":289,"column":14},"end":{"line":289,"column":20}},"135":{"start":{"line":292,"column":12},"end":{"line":292,"column":108}},"136":{"start":{"line":293,"column":12},"end":{"line":293,"column":32}},"137":{"start":{"line":294,"column":12},"end":{"line":294,"column":18}},"138":{"start":{"line":297,"column":12},"end":{"line":300,"column":13}},"139":{"start":{"line":298,"column":14},"end":{"line":298,"column":34}},"140":{"start":{"line":299,"column":14},"end":{"line":299,"column":20}},"141":{"start":{"line":302,"column":12},"end":{"line":302,"column":31}},"142":{"start":{"line":303,"column":12},"end":{"line":303,"column":44}},"143":{"start":{"line":306,"column":12},"end":{"line":306,"column":36}},"144":{"start":{"line":310,"column":12},"end":{"line":310,"column":36}},"145":{"start":{"line":315,"column":2},"end":{"line":315,"column":39}},"146":{"start":{"line":319,"column":19},"end":{"line":319,"column":21}},"147":{"start":{"line":321,"column":2},"end":{"line":325,"column":3}},"148":{"start":{"line":322,"column":4},"end":{"line":322,"column":67}},"149":{"start":{"line":323,"column":9},"end":{"line":325,"column":3}},"150":{"start":{"line":324,"column":4},"end":{"line":324,"column":46}},"151":{"start":{"line":327,"column":2},"end":{"line":327,"column":20}}},"fnMap":{"0":{"name":"getVersions","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":20}},"loc":{"start":{"line":36,"column":30},"end":{"line":52,"column":1}},"line":36},"1":{"name":"(anonymous_1)","decl":{"start":{"line":44,"column":40},"end":{"line":44,"column":41}},"loc":{"start":{"line":44,"column":56},"end":{"line":48,"column":5}},"line":44},"2":{"name":"getDocumentRevision","decl":{"start":{"line":64,"column":9},"end":{"line":64,"column":28}},"loc":{"start":{"line":64,"column":38},"end":{"line":81,"column":1}},"line":64},"3":{"name":"getStatusAndDateToFileName","decl":{"start":{"line":83,"column":9},"end":{"line":83,"column":35}},"loc":{"start":{"line":83,"column":42},"end":{"line":86,"column":1}},"line":83},"4":{"name":"removeStatusAndDateFromFileName","decl":{"start":{"line":88,"column":9},"end":{"line":88,"column":40}},"loc":{"start":{"line":88,"column":47},"end":{"line":90,"column":1}},"line":88},"5":{"name":"filePathInfos","decl":{"start":{"line":92,"column":9},"end":{"line":92,"column":22}},"loc":{"start":{"line":92,"column":35},"end":{"line":105,"column":1}},"line":92},"6":{"name":"mergeRevisions","decl":{"start":{"line":107,"column":9},"end":{"line":107,"column":23}},"loc":{"start":{"line":107,"column":31},"end":{"line":122,"column":1}},"line":107},"7":{"name":"(anonymous_7)","decl":{"start":{"line":109,"column":38},"end":{"line":109,"column":39}},"loc":{"start":{"line":109,"column":54},"end":{"line":120,"column":3}},"line":109},"8":{"name":"sortRevisions","decl":{"start":{"line":124,"column":9},"end":{"line":124,"column":22}},"loc":{"start":{"line":124,"column":31},"end":{"line":159,"column":1}},"line":124},"9":{"name":"(anonymous_9)","decl":{"start":{"line":126,"column":52},"end":{"line":126,"column":53}},"loc":{"start":{"line":126,"column":67},"end":{"line":157,"column":3}},"line":126},"10":{"name":"(anonymous_10)","decl":{"start":{"line":138,"column":44},"end":{"line":138,"column":45}},"loc":{"start":{"line":138,"column":64},"end":{"line":155,"column":5}},"line":138},"11":{"name":"getFilesMerged","decl":{"start":{"line":161,"column":9},"end":{"line":161,"column":23}},"loc":{"start":{"line":161,"column":31},"end":{"line":165,"column":1}},"line":161},"12":{"name":"getDoc","decl":{"start":{"line":167,"column":9},"end":{"line":167,"column":15}},"loc":{"start":{"line":167,"column":20},"end":{"line":169,"column":1}},"line":167},"13":{"name":"_getDoc","decl":{"start":{"line":171,"column":9},"end":{"line":171,"column":16}},"loc":{"start":{"line":171,"column":19},"end":{"line":218,"column":1}},"line":171},"14":{"name":"_callee","decl":{"start":{"line":172,"column":99},"end":{"line":172,"column":106}},"loc":{"start":{"line":172,"column":121},"end":{"line":216,"column":3}},"line":172},"15":{"name":"_callee$","decl":{"start":{"line":174,"column":49},"end":{"line":174,"column":57}},"loc":{"start":{"line":174,"column":68},"end":{"line":215,"column":5}},"line":174},"16":{"name":"(anonymous_16)","decl":{"start":{"line":200,"column":58},"end":{"line":200,"column":59}},"loc":{"start":{"line":200,"column":73},"end":{"line":202,"column":13}},"line":200},"17":{"name":"getAllWithKeys","decl":{"start":{"line":220,"column":9},"end":{"line":220,"column":23}},"loc":{"start":{"line":220,"column":29},"end":{"line":222,"column":1}},"line":220},"18":{"name":"_getAllWithKeys","decl":{"start":{"line":224,"column":9},"end":{"line":224,"column":24}},"loc":{"start":{"line":224,"column":27},"end":{"line":271,"column":1}},"line":224},"19":{"name":"_callee2","decl":{"start":{"line":225,"column":107},"end":{"line":225,"column":115}},"loc":{"start":{"line":225,"column":126},"end":{"line":269,"column":3}},"line":225},"20":{"name":"_callee2$","decl":{"start":{"line":227,"column":49},"end":{"line":227,"column":58}},"loc":{"start":{"line":227,"column":70},"end":{"line":268,"column":5}},"line":227},"21":{"name":"exist","decl":{"start":{"line":273,"column":9},"end":{"line":273,"column":14}},"loc":{"start":{"line":273,"column":20},"end":{"line":275,"column":1}},"line":273},"22":{"name":"_exist","decl":{"start":{"line":277,"column":9},"end":{"line":277,"column":15}},"loc":{"start":{"line":277,"column":18},"end":{"line":316,"column":1}},"line":277},"23":{"name":"_callee3","decl":{"start":{"line":278,"column":98},"end":{"line":278,"column":106}},"loc":{"start":{"line":278,"column":117},"end":{"line":314,"column":3}},"line":278},"24":{"name":"_callee3$","decl":{"start":{"line":280,"column":49},"end":{"line":280,"column":58}},"loc":{"start":{"line":280,"column":70},"end":{"line":313,"column":5}},"line":280},"25":{"name":"getFileObject","decl":{"start":{"line":318,"column":9},"end":{"line":318,"column":22}},"loc":{"start":{"line":318,"column":43},"end":{"line":328,"column":1}},"line":318}},"branchMap":{"0":{"loc":{"start":{"line":43,"column":2},"end":{"line":49,"column":3}},"type":"if","locations":[{"start":{"line":43,"column":2},"end":{"line":49,"column":3}},{"start":{"line":43,"column":2},"end":{"line":49,"column":3}}],"line":43},"1":{"loc":{"start":{"line":45,"column":6},"end":{"line":47,"column":7}},"type":"if","locations":[{"start":{"line":45,"column":6},"end":{"line":47,"column":7}},{"start":{"line":45,"column":6},"end":{"line":47,"column":7}}],"line":45},"2":{"loc":{"start":{"line":69,"column":2},"end":{"line":72,"column":3}},"type":"if","locations":[{"start":{"line":69,"column":2},"end":{"line":72,"column":3}},{"start":{"line":69,"column":2},"end":{"line":72,"column":3}}],"line":69},"3":{"loc":{"start":{"line":76,"column":2},"end":{"line":78,"column":3}},"type":"if","locations":[{"start":{"line":76,"column":2},"end":{"line":78,"column":3}},{"start":{"line":76,"column":2},"end":{"line":78,"column":3}}],"line":76},"4":{"loc":{"start":{"line":76,"column":6},"end":{"line":76,"column":37}},"type":"binary-expr","locations":[{"start":{"line":76,"column":6},"end":{"line":76,"column":12}},{"start":{"line":76,"column":16},"end":{"line":76,"column":37}}],"line":76},"5":{"loc":{"start":{"line":112,"column":4},"end":{"line":117,"column":5}},"type":"if","locations":[{"start":{"line":112,"column":4},"end":{"line":117,"column":5}},{"start":{"line":112,"column":4},"end":{"line":117,"column":5}}],"line":112},"6":{"loc":{"start":{"line":131,"column":4},"end":{"line":135,"column":5}},"type":"if","locations":[{"start":{"line":131,"column":4},"end":{"line":135,"column":5}},{"start":{"line":131,"column":4},"end":{"line":135,"column":5}}],"line":131},"7":{"loc":{"start":{"line":141,"column":6},"end":{"line":154,"column":7}},"type":"if","locations":[{"start":{"line":141,"column":6},"end":{"line":154,"column":7}},{"start":{"line":141,"column":6},"end":{"line":154,"column":7}}],"line":141},"8":{"loc":{"start":{"line":141,"column":10},"end":{"line":141,"column":48}},"type":"binary-expr","locations":[{"start":{"line":141,"column":10},"end":{"line":141,"column":24}},{"start":{"line":141,"column":28},"end":{"line":141,"column":48}}],"line":141},"9":{"loc":{"start":{"line":142,"column":8},"end":{"line":153,"column":9}},"type":"if","locations":[{"start":{"line":142,"column":8},"end":{"line":153,"column":9}},{"start":{"line":142,"column":8},"end":{"line":153,"column":9}}],"line":142},"10":{"loc":{"start":{"line":143,"column":10},"end":{"line":147,"column":11}},"type":"if","locations":[{"start":{"line":143,"column":10},"end":{"line":147,"column":11}},{"start":{"line":143,"column":10},"end":{"line":147,"column":11}}],"line":143},"11":{"loc":{"start":{"line":176,"column":8},"end":{"line":213,"column":9}},"type":"switch","locations":[{"start":{"line":177,"column":10},"end":{"line":186,"column":53}},{"start":{"line":188,"column":10},"end":{"line":191,"column":18}},{"start":{"line":193,"column":10},"end":{"line":202,"column":15}},{"start":{"line":204,"column":10},"end":{"line":205,"column":33}},{"start":{"line":207,"column":10},"end":{"line":208,"column":51}},{"start":{"line":210,"column":10},"end":{"line":210,"column":18}},{"start":{"line":211,"column":10},"end":{"line":212,"column":35}}],"line":176},"12":{"loc":{"start":{"line":180,"column":12},"end":{"line":183,"column":13}},"type":"if","locations":[{"start":{"line":180,"column":12},"end":{"line":183,"column":13}},{"start":{"line":180,"column":12},"end":{"line":183,"column":13}}],"line":180},"13":{"loc":{"start":{"line":194,"column":12},"end":{"line":197,"column":13}},"type":"if","locations":[{"start":{"line":194,"column":12},"end":{"line":197,"column":13}},{"start":{"line":194,"column":12},"end":{"line":197,"column":13}}],"line":194},"14":{"loc":{"start":{"line":229,"column":8},"end":{"line":266,"column":9}},"type":"switch","locations":[{"start":{"line":230,"column":10},"end":{"line":237,"column":60}},{"start":{"line":239,"column":10},"end":{"line":242,"column":18}},{"start":{"line":244,"column":10},"end":{"line":251,"column":53}},{"start":{"line":253,"column":10},"end":{"line":254,"column":38}},{"start":{"line":256,"column":10},"end":{"line":261,"column":54}},{"start":{"line":263,"column":10},"end":{"line":263,"column":18}},{"start":{"line":264,"column":10},"end":{"line":265,"column":36}}],"line":229},"15":{"loc":{"start":{"line":231,"column":12},"end":{"line":234,"column":13}},"type":"if","locations":[{"start":{"line":231,"column":12},"end":{"line":234,"column":13}},{"start":{"line":231,"column":12},"end":{"line":234,"column":13}}],"line":231},"16":{"loc":{"start":{"line":245,"column":12},"end":{"line":248,"column":13}},"type":"if","locations":[{"start":{"line":245,"column":12},"end":{"line":248,"column":13}},{"start":{"line":245,"column":12},"end":{"line":248,"column":13}}],"line":245},"17":{"loc":{"start":{"line":282,"column":8},"end":{"line":311,"column":9}},"type":"switch","locations":[{"start":{"line":283,"column":10},"end":{"line":294,"column":18}},{"start":{"line":296,"column":10},"end":{"line":303,"column":44}},{"start":{"line":305,"column":10},"end":{"line":306,"column":36}},{"start":{"line":308,"column":10},"end":{"line":308,"column":18}},{"start":{"line":309,"column":10},"end":{"line":310,"column":36}}],"line":282},"18":{"loc":{"start":{"line":287,"column":12},"end":{"line":290,"column":13}},"type":"if","locations":[{"start":{"line":287,"column":12},"end":{"line":290,"column":13}},{"start":{"line":287,"column":12},"end":{"line":290,"column":13}}],"line":287},"19":{"loc":{"start":{"line":297,"column":12},"end":{"line":300,"column":13}},"type":"if","locations":[{"start":{"line":297,"column":12},"end":{"line":300,"column":13}},{"start":{"line":297,"column":12},"end":{"line":300,"column":13}}],"line":297},"20":{"loc":{"start":{"line":321,"column":2},"end":{"line":325,"column":3}},"type":"if","locations":[{"start":{"line":321,"column":2},"end":{"line":325,"column":3}},{"start":{"line":321,"column":2},"end":{"line":325,"column":3}}],"line":321},"21":{"loc":{"start":{"line":323,"column":9},"end":{"line":325,"column":3}},"type":"if","locations":[{"start":{"line":323,"column":9},"end":{"line":325,"column":3}},{"start":{"line":323,"column":9},"end":{"line":325,"column":3}}],"line":323}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":2,"20":2,"21":2,"22":2,"23":2,"24":6,"25":2,"26":2,"27":1,"28":1,"29":1,"30":1,"31":0,"32":0,"33":1,"34":1,"35":1,"36":1,"37":327,"38":327,"39":2,"40":0,"41":0,"42":0,"43":0,"44":0,"45":31,"46":31,"47":124,"48":124,"49":93,"50":124,"51":31,"52":34,"53":34,"54":96,"55":96,"56":96,"57":96,"58":96,"59":96,"60":96,"61":96,"62":96,"63":134,"64":134,"65":134,"66":130,"67":65,"68":65,"69":130,"70":130,"71":130,"72":130,"73":96,"74":34,"75":31,"76":31,"77":128,"78":1,"79":128,"80":384,"81":512,"82":128,"83":128,"84":0,"85":0,"86":128,"87":128,"88":128,"89":128,"90":128,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":128,"99":128,"100":1,"101":31,"102":1,"103":31,"104":93,"105":124,"106":31,"107":0,"108":0,"109":31,"110":31,"111":31,"112":31,"113":31,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":31,"121":31,"122":31,"123":31,"124":1,"125":3,"126":1,"127":3,"128":3,"129":6,"130":3,"131":3,"132":3,"133":0,"134":0,"135":3,"136":3,"137":3,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":3,"145":1,"146":3,"147":3,"148":3,"149":0,"150":0,"151":3},"f":{"0":2,"1":6,"2":1,"3":327,"4":2,"5":0,"6":31,"7":124,"8":34,"9":96,"10":134,"11":31,"12":128,"13":1,"14":128,"15":384,"16":0,"17":31,"18":1,"19":31,"20":93,"21":3,"22":1,"23":3,"24":3,"25":3},"b":{"0":[2,0],"1":[2,4],"2":[0,1],"3":[1,0],"4":[1,1],"5":[93,31],"6":[96,0],"7":[134,0],"8":[134,134],"9":[130,4],"10":[65,65],"11":[128,128,0,0,128,0,128],"12":[0,128],"13":[0,0],"14":[31,31,0,0,31,0,31],"15":[0,31],"16":[0,0],"17":[3,0,0,3,3],"18":[0,3],"19":[0,0],"20":[3,0],"21":[0,0]},"inputSourceMap":{"version":3,"sources":["revision.js"],"names":["getVersions","docPath","result","files","Manager","instance","getList","jsonPath","replace","config","templates","extension","Array","prototype","forEach","call","file","path","startsWith","revisions","getDocumentRevision","documentPath","latest","cmsData","fileAttr","test","length","getStatusAndDateToFileName","date","res","substring","removeStatusAndDateFromFileName","filePathInfos","pathFolder","pathArr","split","name","rootArr","root","website","type","mergeRevisions","merged","docRelativePath","utils","getDocRelativePath","push","JSON","parse","stringify","sortRevisions","sortedArray","Object","keys","key","sort","coreUtils","predicatBy","abe_meta","newStatuses","revision","revisionStatus","_","get","link","getFilesMerged","getDoc","relativePath","json","database","mongo","err","console","log","getAllWithKeys","withKeys","filesArr","abeExtend","hooks","trigger","exist","getRevisionRelativePath","exists","join","pathData","getFileObject","fileObject"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import path from \"path\";\nimport _ from \"lodash\";\n\nimport { config, mongo, cmsData, abeExtend, coreUtils, Manager } from \"../../\";\n\n/**\n * Create and array of doc file path containing the versions of this doc\n * @param  {String} path of a doc\n * @return {Array} the versions of the doc\n */\nexport function getVersions(docPath) {\n  let result = [];\n  const files = Manager.instance.getList();\n  var jsonPath = docPath.replace(\n    \".\" + config.files.templates.extension,\n    \".json\"\n  );\n  if (files != null) {\n    Array.prototype.forEach.call(files, (file) => {\n      if (file.path.startsWith(jsonPath)) {\n        result = file.revisions;\n      }\n    });\n  }\n  return result;\n}\n\n/**\n * Return the revision from document html file path\n * if the docPath contains abe revision [status]-[date] will try to return this revision\n * else it will return the latest revision\n * or null\n *\n * @param  {String} html path\n * @return {Object} file revision | null\n */\nexport function getDocumentRevision(docPath) {\n  var result = null;\n  var documentPath = docPath;\n  var latest = true;\n\n  if (cmsData.fileAttr.test(documentPath)) {\n    latest = false;\n    documentPath = cmsData.fileAttr.delete(documentPath);\n  }\n  var revisions = getVersions(documentPath);\n  if (latest && revisions.length >= 0) {\n    result = revisions[0];\n  }\n\n  return result;\n}\n\nexport function getStatusAndDateToFileName(date) {\n  var res =\n    date.substring(0, 4) +\n    \"-\" +\n    date.substring(4, 6) +\n    \"-\" +\n    date.substring(6, 11) +\n    \":\" +\n    date.substring(11, 13) +\n    \":\" +\n    date.substring(13, 15) +\n    \".\" +\n    date.substring(15, 19);\n  return res;\n}\n\nexport function removeStatusAndDateFromFileName(date) {\n  return date.replace(/[-:\\.]/g, \"\");\n}\n\nexport function filePathInfos(pathFolder) {\n  var pathArr = pathFolder.split(\"/\");\n  var name = pathArr[pathArr.length - 1];\n\n  var rootArr = config.root.split(\"/\");\n  var website = rootArr[pathArr.length - 1];\n  return {\n    name: name,\n    path: pathFolder,\n    website: website,\n    type: \"folder\",\n  };\n}\n\nexport function mergeRevisions(files) {\n  let merged = {};\n\n  Array.prototype.forEach.call(files, (file) => {\n    const docRelativePath = cmsData.utils.getDocRelativePath(file.path);\n\n    if (merged[docRelativePath] == null) {\n      merged[docRelativePath] = {\n        path: cmsData.utils.getDocRelativePath(file.path),\n        revisions: [],\n      };\n    }\n    merged[docRelativePath].revisions.push(JSON.parse(JSON.stringify(file)));\n  });\n\n  return merged;\n}\n\nexport function sortRevisions(merged) {\n  let sortedArray = [];\n\n  Array.prototype.forEach.call(Object.keys(merged), (key) => {\n    let revisions = merged[key].revisions;\n    revisions.sort(coreUtils.sort.predicatBy(\"date\", -1));\n    merged[key].revisions = revisions;\n\n    if (revisions[0] != null) {\n      merged[key].name = revisions[0].name;\n      merged[key].date = revisions[0].date;\n      merged[key].abe_meta = revisions[0].abe_meta;\n    }\n\n    let newStatuses = [];\n    Array.prototype.forEach.call(revisions, (revision) => {\n      const revisionStatus = _.get(revision, \"abe_meta.status\");\n\n      if (revisionStatus && revisionStatus != \"\") {\n        if (!(revisionStatus in newStatuses)) {\n          if (revisionStatus === \"publish\") {\n            merged[key][revisionStatus] = revision;\n          } else {\n            merged[key][revisionStatus] = {};\n          }\n          merged[key][revisionStatus].path = revision.path;\n          merged[key][revisionStatus].date = revision.date;\n          merged[key][revisionStatus].link = revision.abe_meta.link;\n\n          newStatuses[revisionStatus] = true;\n        }\n      }\n    });\n\n    sortedArray.push(merged[key]);\n  });\n\n  return sortedArray;\n}\n\nexport function getFilesMerged(files) {\n  const revisions = cmsData.revision.mergeRevisions(files);\n\n  return cmsData.revision.sortRevisions(revisions);\n}\n\nexport async function getDoc(relativePath) {\n  let json = {};\n  if (config.database.type == \"file\") {\n    json = await cmsData.file.get(relativePath);\n  } else if (config.database.type == \"mongo\") {\n    json = await mongo.getDoc(relativePath).catch((err) => {\n      console.log(err);\n    });\n  }\n\n  return json;\n}\n\nexport async function getAllWithKeys(withKeys) {\n  let filesArr;\n\n  if (config.database.type == \"file\") {\n    filesArr = await cmsData.file.getAllWithKeys(withKeys);\n  } else if (config.database.type == \"mongo\") {\n    filesArr = await mongo.getAllWithKeys(withKeys);\n  }\n\n  var merged = cmsData.revision.getFilesMerged(filesArr);\n\n  abeExtend.hooks.instance.trigger(\"afterGetAllFiles\", merged);\n\n  return merged;\n}\n\nexport async function exist(jsonPath) {\n  jsonPath = cmsData.utils.getRevisionRelativePath(jsonPath);\n  let exists = false;\n\n  if (config.database.type == \"file\") {\n    exists = coreUtils.file.exist(\n      path.join(Manager.instance.pathData, jsonPath)\n    );\n  } else if (config.database.type == \"mongo\") {\n    exists = await mongo.exist(jsonPath);\n  }\n}\n\nexport function getFileObject(relativePath, json) {\n  let fileObject = {};\n  if (config.database.type == \"file\") {\n    fileObject = cmsData.file.getFileObject(relativePath, json);\n  } else if (config.database.type == \"mongo\") {\n    fileObject = mongo.getFileObject(json);\n  }\n\n  return fileObject;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"25e4e1b3524f1dbb6ed0fe9ed68e8cdb0f25b866","contentHash":"925ba0c4d01481aba8f150c2fb60e38f8895bfb33e78c8f8efd0906300287771"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/metas.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/metas.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":18}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":24}},"3":{"start":{"line":9,"column":8},"end":{"line":9,"column":25}},"4":{"start":{"line":12,"column":13},"end":{"line":12,"column":85}},"5":{"start":{"line":13,"column":13},"end":{"line":13,"column":85}},"6":{"start":{"line":14,"column":13},"end":{"line":14,"column":31}},"7":{"start":{"line":15,"column":20},"end":{"line":15,"column":67}},"8":{"start":{"line":17,"column":2},"end":{"line":17,"column":50}},"9":{"start":{"line":17,"column":25},"end":{"line":17,"column":50}},"10":{"start":{"line":18,"column":2},"end":{"line":18,"column":54}},"11":{"start":{"line":18,"column":27},"end":{"line":18,"column":54}},"12":{"start":{"line":19,"column":2},"end":{"line":19,"column":39}},"13":{"start":{"line":20,"column":2},"end":{"line":20,"column":65}},"14":{"start":{"line":21,"column":2},"end":{"line":21,"column":27}},"15":{"start":{"line":25,"column":13},"end":{"line":25,"column":85}},"16":{"start":{"line":26,"column":13},"end":{"line":26,"column":31}},"17":{"start":{"line":28,"column":2},"end":{"line":30,"column":3}},"18":{"start":{"line":29,"column":4},"end":{"line":29,"column":20}},"19":{"start":{"line":32,"column":2},"end":{"line":32,"column":33}},"20":{"start":{"line":33,"column":2},"end":{"line":33,"column":24}},"21":{"start":{"line":34,"column":2},"end":{"line":34,"column":38}},"22":{"start":{"line":35,"column":2},"end":{"line":35,"column":65}},"23":{"start":{"line":36,"column":2},"end":{"line":36,"column":14}}},"fnMap":{"0":{"name":"add","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":12}},"loc":{"start":{"line":11,"column":25},"end":{"line":22,"column":1}},"line":11},"1":{"name":"create","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":15}},"loc":{"start":{"line":24,"column":37},"end":{"line":37,"column":1}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":13},"end":{"line":12,"column":85}},"type":"cond-expr","locations":[{"start":{"line":12,"column":66},"end":{"line":12,"column":78}},{"start":{"line":12,"column":81},"end":{"line":12,"column":85}}],"line":12},"1":{"loc":{"start":{"line":12,"column":13},"end":{"line":12,"column":63}},"type":"binary-expr","locations":[{"start":{"line":12,"column":13},"end":{"line":12,"column":33}},{"start":{"line":12,"column":37},"end":{"line":12,"column":63}}],"line":12},"2":{"loc":{"start":{"line":13,"column":13},"end":{"line":13,"column":85}},"type":"cond-expr","locations":[{"start":{"line":13,"column":66},"end":{"line":13,"column":78}},{"start":{"line":13,"column":81},"end":{"line":13,"column":85}}],"line":13},"3":{"loc":{"start":{"line":13,"column":13},"end":{"line":13,"column":63}},"type":"binary-expr","locations":[{"start":{"line":13,"column":13},"end":{"line":13,"column":33}},{"start":{"line":13,"column":37},"end":{"line":13,"column":63}}],"line":13},"4":{"loc":{"start":{"line":15,"column":20},"end":{"line":15,"column":67}},"type":"cond-expr","locations":[{"start":{"line":15,"column":50},"end":{"line":15,"column":54}},{"start":{"line":15,"column":57},"end":{"line":15,"column":67}}],"line":15},"5":{"loc":{"start":{"line":15,"column":20},"end":{"line":15,"column":47}},"type":"binary-expr","locations":[{"start":{"line":15,"column":20},"end":{"line":15,"column":32}},{"start":{"line":15,"column":36},"end":{"line":15,"column":47}}],"line":15},"6":{"loc":{"start":{"line":17,"column":2},"end":{"line":17,"column":50}},"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":17,"column":50}},{"start":{"line":17,"column":2},"end":{"line":17,"column":50}}],"line":17},"7":{"loc":{"start":{"line":18,"column":2},"end":{"line":18,"column":54}},"type":"if","locations":[{"start":{"line":18,"column":2},"end":{"line":18,"column":54}},{"start":{"line":18,"column":2},"end":{"line":18,"column":54}}],"line":18},"8":{"loc":{"start":{"line":20,"column":25},"end":{"line":20,"column":64}},"type":"cond-expr","locations":[{"start":{"line":20,"column":41},"end":{"line":20,"column":48}},{"start":{"line":20,"column":51},"end":{"line":20,"column":64}}],"line":20},"9":{"loc":{"start":{"line":25,"column":13},"end":{"line":25,"column":85}},"type":"cond-expr","locations":[{"start":{"line":25,"column":66},"end":{"line":25,"column":78}},{"start":{"line":25,"column":81},"end":{"line":25,"column":85}}],"line":25},"10":{"loc":{"start":{"line":25,"column":13},"end":{"line":25,"column":63}},"type":"binary-expr","locations":[{"start":{"line":25,"column":13},"end":{"line":25,"column":33}},{"start":{"line":25,"column":37},"end":{"line":25,"column":63}}],"line":25},"11":{"loc":{"start":{"line":28,"column":2},"end":{"line":30,"column":3}},"type":"if","locations":[{"start":{"line":28,"column":2},"end":{"line":30,"column":3}},{"start":{"line":28,"column":2},"end":{"line":30,"column":3}}],"line":28},"12":{"loc":{"start":{"line":35,"column":25},"end":{"line":35,"column":64}},"type":"cond-expr","locations":[{"start":{"line":35,"column":41},"end":{"line":35,"column":48}},{"start":{"line":35,"column":51},"end":{"line":35,"column":64}}],"line":35}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":2,"6":2,"7":2,"8":2,"9":0,"10":2,"11":0,"12":2,"13":2,"14":2,"15":3,"16":3,"17":3,"18":3,"19":3,"20":3,"21":3,"22":3,"23":3},"f":{"0":2,"1":3},"b":{"0":[1,1],"1":[2,1],"2":[0,2],"3":[2,1],"4":[0,2],"5":[2,0],"6":[0,2],"7":[0,2],"8":[2,0],"9":[0,3],"10":[3,2],"11":[3,0],"12":[3,0]},"inputSourceMap":{"version":3,"sources":["metas.js"],"names":["add","json","type","date","user","meta","config","name","currentDate","Date","updatedDate","updatedBy","username","status","create","template","url","link","createdDate","createdBy"],"mappings":";;;;;;;;AAAA;;AAEO,SAASA,GAAT,CAAaC,IAAb,EAAmBC,IAAnB,EAAmD;AAAA,MAA1BC,IAA0B,uEAAnB,IAAmB;AAAA,MAAbC,IAAa,uEAAN,IAAM;AACxD,MAAMC,IAAI,GAAGC,SAAOD,IAAP,CAAYE,IAAzB;AACA,MAAMC,WAAW,GAAGL,IAAI,IAAI,IAAR,IAAgBA,IAAI,KAAK,EAAzB,GAA8BA,IAA9B,GAAqC,IAAIM,IAAJ,EAAzD,CAFwD,CAGxD;;AAEA,MAAIR,IAAI,CAAC,WAAD,CAAR,EAAuB,OAAOA,IAAI,CAAC,WAAD,CAAX;AACvB,MAAIA,IAAI,CAAC,aAAD,CAAR,EAAyB,OAAOA,IAAI,CAAC,aAAD,CAAX;AAEzBA,EAAAA,IAAI,CAACI,IAAD,CAAJ,CAAWK,WAAX,GAAyBF,WAAzB;AACAP,EAAAA,IAAI,CAACI,IAAD,CAAJ,CAAWM,SAAX,GAAuBP,IAAI,KAAK,IAAT,GAAgB,OAAhB,GAA0BA,IAAI,CAACQ,QAAtD;AACAX,EAAAA,IAAI,CAACI,IAAD,CAAJ,CAAWQ,MAAX,GAAoBX,IAApB;AACD;;AAEM,SAASY,MAAT,CAAgBb,IAAhB,EAAsBc,QAAtB,EAAgCC,GAAhC,EAAkD;AAAA,MAAbZ,IAAa,uEAAN,IAAM;AACvD,MAAMC,IAAI,GAAGC,SAAOD,IAAP,CAAYE,IAAzB;;AACA,MAAIN,IAAI,CAACI,IAAD,CAAJ,IAAc,IAAlB,EAAwB;AACtBJ,IAAAA,IAAI,CAACI,IAAD,CAAJ,GAAa,EAAb;AACD;;AAEDJ,EAAAA,IAAI,CAACI,IAAD,CAAJ,CAAWU,QAAX,GAAsBA,QAAtB;AACAd,EAAAA,IAAI,CAACI,IAAD,CAAJ,CAAWY,IAAX,GAAkBD,GAAlB;AACAf,EAAAA,IAAI,CAACI,IAAD,CAAJ,CAAWa,WAAX,GAAyB,IAAIT,IAAJ,EAAzB;AACAR,EAAAA,IAAI,CAACI,IAAD,CAAJ,CAAWc,SAAX,GAAuBf,IAAI,KAAK,IAAT,GAAgB,OAAhB,GAA0BA,IAAI,CAACQ,QAAtD;AAEA,SAAOX,IAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import {cmsData, config} from '../../'\n\nexport function add(json, type, date = null, user = null) {\n  const meta = config.meta.name\n  const currentDate = date != null && date !== '' ? date : new Date()\n  //const abeUrl = (type === 'publish') ? json[meta].link : cmsData.fileAttr.add(json[meta].link, type[0] + cmsData.revision.removeStatusAndDateFromFileName(currentDate.toISOString())) + ''\n\n  if (json['abeEditor']) delete json['abeEditor']\n  if (json['oldFilePath']) delete json['oldFilePath']\n\n  json[meta].updatedDate = currentDate\n  json[meta].updatedBy = user === null ? 'admin' : user.username\n  json[meta].status = type\n}\n\nexport function create(json, template, url, user = null) {\n  const meta = config.meta.name\n  if (json[meta] == null) {\n    json[meta] = {}\n  }\n\n  json[meta].template = template\n  json[meta].link = url\n  json[meta].createdDate = new Date()\n  json[meta].createdBy = user === null ? 'admin' : user.username\n\n  return json\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2a44fee88c261621c326f0c88b95176dc564d138","contentHash":"e93dfe8889800df7822b418a6e116fbb1f6dabec43ab0ae34c19ab4813e84817"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/file.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/file.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":32}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":40}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":18}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":40}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":38}},"7":{"start":{"line":14,"column":19},"end":{"line":14,"column":80}},"8":{"start":{"line":16,"column":25},"end":{"line":16,"column":99}},"9":{"start":{"line":18,"column":12},"end":{"line":18,"column":51}},"10":{"start":{"line":20,"column":14},"end":{"line":20,"column":55}},"11":{"start":{"line":22,"column":15},"end":{"line":22,"column":58}},"12":{"start":{"line":24,"column":8},"end":{"line":24,"column":25}},"13":{"start":{"line":27,"column":2},"end":{"line":29,"column":3}},"14":{"start":{"line":28,"column":4},"end":{"line":28,"column":32}},"15":{"start":{"line":31,"column":2},"end":{"line":50,"column":3}},"16":{"start":{"line":32,"column":15},"end":{"line":32,"column":19}},"17":{"start":{"line":34,"column":4},"end":{"line":42,"column":5}},"18":{"start":{"line":35,"column":6},"end":{"line":35,"column":50}},"19":{"start":{"line":36,"column":6},"end":{"line":36,"column":39}},"20":{"start":{"line":37,"column":11},"end":{"line":42,"column":5}},"21":{"start":{"line":38,"column":6},"end":{"line":38,"column":50}},"22":{"start":{"line":39,"column":6},"end":{"line":39,"column":39}},"23":{"start":{"line":40,"column":11},"end":{"line":42,"column":5}},"24":{"start":{"line":41,"column":6},"end":{"line":41,"column":32}},"25":{"start":{"line":44,"column":4},"end":{"line":49,"column":6}},"26":{"start":{"line":52,"column":2},"end":{"line":52,"column":20}},"27":{"start":{"line":56,"column":2},"end":{"line":56,"column":48}},"28":{"start":{"line":60,"column":2},"end":{"line":115,"column":6}},"29":{"start":{"line":62,"column":4},"end":{"line":114,"column":17}},"30":{"start":{"line":63,"column":6},"end":{"line":113,"column":7}},"31":{"start":{"line":64,"column":8},"end":{"line":112,"column":9}},"32":{"start":{"line":66,"column":12},"end":{"line":66,"column":32}},"33":{"start":{"line":67,"column":12},"end":{"line":67,"column":31}},"34":{"start":{"line":68,"column":12},"end":{"line":68,"column":91}},"35":{"start":{"line":71,"column":12},"end":{"line":71,"column":35}},"36":{"start":{"line":72,"column":12},"end":{"line":72,"column":26}},"37":{"start":{"line":73,"column":12},"end":{"line":73,"column":31}},"38":{"start":{"line":74,"column":12},"end":{"line":104,"column":18}},"39":{"start":{"line":75,"column":25},"end":{"line":99,"column":17}},"40":{"start":{"line":77,"column":16},"end":{"line":98,"column":28}},"41":{"start":{"line":78,"column":18},"end":{"line":97,"column":19}},"42":{"start":{"line":79,"column":20},"end":{"line":96,"column":21}},"43":{"start":{"line":81,"column":24},"end":{"line":81,"column":42}},"44":{"start":{"line":82,"column":24},"end":{"line":82,"column":67}},"45":{"start":{"line":85,"column":24},"end":{"line":85,"column":45}},"46":{"start":{"line":86,"column":24},"end":{"line":86,"column":82}},"47":{"start":{"line":87,"column":24},"end":{"line":87,"column":81}},"48":{"start":{"line":88,"column":24},"end":{"line":90,"column":27}},"49":{"start":{"line":89,"column":26},"end":{"line":89,"column":54}},"50":{"start":{"line":91,"column":24},"end":{"line":91,"column":50}},"51":{"start":{"line":95,"column":24},"end":{"line":95,"column":47}},"52":{"start":{"line":101,"column":14},"end":{"line":103,"column":16}},"53":{"start":{"line":102,"column":16},"end":{"line":102,"column":51}},"54":{"start":{"line":107,"column":12},"end":{"line":107,"column":56}},"55":{"start":{"line":111,"column":12},"end":{"line":111,"column":36}},"56":{"start":{"line":116,"column":2},"end":{"line":116,"column":48}},"57":{"start":{"line":120,"column":2},"end":{"line":120,"column":37}},"58":{"start":{"line":124,"column":2},"end":{"line":164,"column":6}},"59":{"start":{"line":126,"column":4},"end":{"line":163,"column":34}},"60":{"start":{"line":127,"column":6},"end":{"line":162,"column":7}},"61":{"start":{"line":128,"column":8},"end":{"line":161,"column":9}},"62":{"start":{"line":130,"column":12},"end":{"line":130,"column":65}},"63":{"start":{"line":131,"column":12},"end":{"line":131,"column":22}},"64":{"start":{"line":132,"column":12},"end":{"line":132,"column":85}},"65":{"start":{"line":133,"column":12},"end":{"line":133,"column":31}},"66":{"start":{"line":134,"column":12},"end":{"line":134,"column":31}},"67":{"start":{"line":135,"column":12},"end":{"line":135,"column":58}},"68":{"start":{"line":138,"column":12},"end":{"line":138,"column":34}},"69":{"start":{"line":140,"column":12},"end":{"line":143,"column":13}},"70":{"start":{"line":141,"column":14},"end":{"line":141,"column":64}},"71":{"start":{"line":142,"column":14},"end":{"line":142,"column":38}},"72":{"start":{"line":145,"column":12},"end":{"line":145,"column":32}},"73":{"start":{"line":146,"column":12},"end":{"line":146,"column":18}},"74":{"start":{"line":149,"column":12},"end":{"line":149,"column":32}},"75":{"start":{"line":150,"column":12},"end":{"line":150,"column":49}},"76":{"start":{"line":152,"column":12},"end":{"line":152,"column":22}},"77":{"start":{"line":155,"column":12},"end":{"line":155,"column":76}},"78":{"start":{"line":156,"column":12},"end":{"line":156,"column":52}},"79":{"start":{"line":160,"column":12},"end":{"line":160,"column":36}},"80":{"start":{"line":165,"column":2},"end":{"line":165,"column":37}},"81":{"start":{"line":169,"column":13},"end":{"line":169,"column":85}},"82":{"start":{"line":170,"column":18},"end":{"line":170,"column":58}},"83":{"start":{"line":171,"column":15},"end":{"line":171,"column":17}},"84":{"start":{"line":173,"column":2},"end":{"line":181,"column":3}},"85":{"start":{"line":174,"column":20},"end":{"line":174,"column":59}},"86":{"start":{"line":176,"column":4},"end":{"line":178,"column":5}},"87":{"start":{"line":177,"column":6},"end":{"line":177,"column":40}},"88":{"start":{"line":180,"column":4},"end":{"line":180,"column":38}},"89":{"start":{"line":183,"column":14},"end":{"line":183,"column":70}},"90":{"start":{"line":185,"column":2},"end":{"line":189,"column":5}},"91":{"start":{"line":186,"column":14},"end":{"line":186,"column":44}},"92":{"start":{"line":188,"column":4},"end":{"line":188,"column":57}},"93":{"start":{"line":188,"column":39},"end":{"line":188,"column":57}},"94":{"start":{"line":190,"column":2},"end":{"line":190,"column":16}},"95":{"start":{"line":194,"column":17},"end":{"line":194,"column":62}},"96":{"start":{"line":196,"column":13},"end":{"line":196,"column":48}},"97":{"start":{"line":198,"column":2},"end":{"line":198,"column":44}},"98":{"start":{"line":199,"column":19},"end":{"line":203,"column":3}},"99":{"start":{"line":204,"column":2},"end":{"line":204,"column":20}}},"fnMap":{"0":{"name":"getAbeMeta","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":19}},"loc":{"start":{"line":26,"column":38},"end":{"line":53,"column":1}},"line":26},"1":{"name":"getAllWithKeys","decl":{"start":{"line":55,"column":9},"end":{"line":55,"column":23}},"loc":{"start":{"line":55,"column":28},"end":{"line":57,"column":1}},"line":55},"2":{"name":"_getAllWithKeys","decl":{"start":{"line":59,"column":9},"end":{"line":59,"column":24}},"loc":{"start":{"line":59,"column":27},"end":{"line":117,"column":1}},"line":59},"3":{"name":"_callee2","decl":{"start":{"line":60,"column":107},"end":{"line":60,"column":115}},"loc":{"start":{"line":60,"column":126},"end":{"line":115,"column":3}},"line":60},"4":{"name":"_callee2$","decl":{"start":{"line":62,"column":49},"end":{"line":62,"column":58}},"loc":{"start":{"line":62,"column":70},"end":{"line":114,"column":5}},"line":62},"5":{"name":"(anonymous_5)","decl":{"start":{"line":74,"column":55},"end":{"line":74,"column":56}},"loc":{"start":{"line":74,"column":67},"end":{"line":104,"column":13}},"line":74},"6":{"name":"_callee","decl":{"start":{"line":75,"column":112},"end":{"line":75,"column":119}},"loc":{"start":{"line":75,"column":130},"end":{"line":99,"column":15}},"line":75},"7":{"name":"_callee$","decl":{"start":{"line":77,"column":61},"end":{"line":77,"column":69}},"loc":{"start":{"line":77,"column":80},"end":{"line":98,"column":17}},"line":77},"8":{"name":"(anonymous_8)","decl":{"start":{"line":88,"column":63},"end":{"line":88,"column":64}},"loc":{"start":{"line":88,"column":78},"end":{"line":90,"column":25}},"line":88},"9":{"name":"(anonymous_9)","decl":{"start":{"line":101,"column":21},"end":{"line":101,"column":22}},"loc":{"start":{"line":101,"column":36},"end":{"line":103,"column":15}},"line":101},"10":{"name":"get","decl":{"start":{"line":119,"column":9},"end":{"line":119,"column":12}},"loc":{"start":{"line":119,"column":18},"end":{"line":121,"column":1}},"line":119},"11":{"name":"_get","decl":{"start":{"line":123,"column":9},"end":{"line":123,"column":13}},"loc":{"start":{"line":123,"column":16},"end":{"line":166,"column":1}},"line":123},"12":{"name":"_callee3","decl":{"start":{"line":124,"column":96},"end":{"line":124,"column":104}},"loc":{"start":{"line":124,"column":115},"end":{"line":164,"column":3}},"line":124},"13":{"name":"_callee3$","decl":{"start":{"line":126,"column":49},"end":{"line":126,"column":58}},"loc":{"start":{"line":126,"column":70},"end":{"line":163,"column":5}},"line":126},"14":{"name":"getFilesByType","decl":{"start":{"line":168,"column":9},"end":{"line":168,"column":23}},"loc":{"start":{"line":168,"column":34},"end":{"line":191,"column":1}},"line":168},"15":{"name":"(anonymous_15)","decl":{"start":{"line":185,"column":38},"end":{"line":185,"column":39}},"loc":{"start":{"line":185,"column":54},"end":{"line":189,"column":3}},"line":185},"16":{"name":"getFileObject","decl":{"start":{"line":193,"column":9},"end":{"line":193,"column":22}},"loc":{"start":{"line":193,"column":43},"end":{"line":205,"column":1}},"line":193}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":2},"end":{"line":29,"column":3}},"type":"if","locations":[{"start":{"line":27,"column":2},"end":{"line":29,"column":3}},{"start":{"line":27,"column":2},"end":{"line":29,"column":3}}],"line":27},"1":{"loc":{"start":{"line":31,"column":2},"end":{"line":50,"column":3}},"type":"if","locations":[{"start":{"line":31,"column":2},"end":{"line":50,"column":3}},{"start":{"line":31,"column":2},"end":{"line":50,"column":3}}],"line":31},"2":{"loc":{"start":{"line":34,"column":4},"end":{"line":42,"column":5}},"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":42,"column":5}},{"start":{"line":34,"column":4},"end":{"line":42,"column":5}}],"line":34},"3":{"loc":{"start":{"line":37,"column":11},"end":{"line":42,"column":5}},"type":"if","locations":[{"start":{"line":37,"column":11},"end":{"line":42,"column":5}},{"start":{"line":37,"column":11},"end":{"line":42,"column":5}}],"line":37},"4":{"loc":{"start":{"line":37,"column":15},"end":{"line":37,"column":80}},"type":"binary-expr","locations":[{"start":{"line":37,"column":15},"end":{"line":37,"column":43}},{"start":{"line":37,"column":47},"end":{"line":37,"column":80}}],"line":37},"5":{"loc":{"start":{"line":40,"column":11},"end":{"line":42,"column":5}},"type":"if","locations":[{"start":{"line":40,"column":11},"end":{"line":42,"column":5}},{"start":{"line":40,"column":11},"end":{"line":42,"column":5}}],"line":40},"6":{"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":66}},"type":"cond-expr","locations":[{"start":{"line":46,"column":41},"end":{"line":46,"column":59}},{"start":{"line":46,"column":62},"end":{"line":46,"column":66}}],"line":46},"7":{"loc":{"start":{"line":47,"column":16},"end":{"line":47,"column":78}},"type":"cond-expr","locations":[{"start":{"line":47,"column":49},"end":{"line":47,"column":71}},{"start":{"line":47,"column":74},"end":{"line":47,"column":78}}],"line":47},"8":{"loc":{"start":{"line":48,"column":14},"end":{"line":48,"column":72}},"type":"cond-expr","locations":[{"start":{"line":48,"column":45},"end":{"line":48,"column":65}},{"start":{"line":48,"column":68},"end":{"line":48,"column":72}}],"line":48},"9":{"loc":{"start":{"line":64,"column":8},"end":{"line":112,"column":9}},"type":"switch","locations":[{"start":{"line":65,"column":10},"end":{"line":68,"column":91}},{"start":{"line":70,"column":10},"end":{"line":104,"column":18}},{"start":{"line":106,"column":10},"end":{"line":107,"column":56}},{"start":{"line":109,"column":10},"end":{"line":109,"column":17}},{"start":{"line":110,"column":10},"end":{"line":111,"column":36}}],"line":64},"10":{"loc":{"start":{"line":79,"column":20},"end":{"line":96,"column":21}},"type":"switch","locations":[{"start":{"line":80,"column":22},"end":{"line":82,"column":67}},{"start":{"line":84,"column":22},"end":{"line":91,"column":50}},{"start":{"line":93,"column":22},"end":{"line":93,"column":29}},{"start":{"line":94,"column":22},"end":{"line":95,"column":47}}],"line":79},"11":{"loc":{"start":{"line":128,"column":8},"end":{"line":161,"column":9}},"type":"switch","locations":[{"start":{"line":129,"column":10},"end":{"line":135,"column":58}},{"start":{"line":137,"column":10},"end":{"line":146,"column":18}},{"start":{"line":148,"column":10},"end":{"line":152,"column":22}},{"start":{"line":154,"column":10},"end":{"line":156,"column":52}},{"start":{"line":158,"column":10},"end":{"line":158,"column":18}},{"start":{"line":159,"column":10},"end":{"line":160,"column":36}}],"line":128},"12":{"loc":{"start":{"line":140,"column":12},"end":{"line":143,"column":13}},"type":"if","locations":[{"start":{"line":140,"column":12},"end":{"line":143,"column":13}},{"start":{"line":140,"column":12},"end":{"line":143,"column":13}}],"line":140},"13":{"loc":{"start":{"line":169,"column":13},"end":{"line":169,"column":85}},"type":"cond-expr","locations":[{"start":{"line":169,"column":66},"end":{"line":169,"column":78}},{"start":{"line":169,"column":81},"end":{"line":169,"column":85}}],"line":169},"14":{"loc":{"start":{"line":169,"column":13},"end":{"line":169,"column":63}},"type":"binary-expr","locations":[{"start":{"line":169,"column":13},"end":{"line":169,"column":33}},{"start":{"line":169,"column":37},"end":{"line":169,"column":63}}],"line":169},"15":{"loc":{"start":{"line":176,"column":4},"end":{"line":178,"column":5}},"type":"if","locations":[{"start":{"line":176,"column":4},"end":{"line":178,"column":5}},{"start":{"line":176,"column":4},"end":{"line":178,"column":5}}],"line":176},"16":{"loc":{"start":{"line":188,"column":4},"end":{"line":188,"column":57}},"type":"if","locations":[{"start":{"line":188,"column":4},"end":{"line":188,"column":57}},{"start":{"line":188,"column":4},"end":{"line":188,"column":57}}],"line":188},"17":{"loc":{"start":{"line":188,"column":8},"end":{"line":188,"column":37}},"type":"binary-expr","locations":[{"start":{"line":188,"column":8},"end":{"line":188,"column":21}},{"start":{"line":188,"column":25},"end":{"line":188,"column":37}}],"line":188}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":131,"14":0,"15":131,"16":131,"17":131,"18":1,"19":1,"20":130,"21":129,"22":129,"23":1,"24":1,"25":131,"26":131,"27":31,"28":1,"29":31,"30":124,"31":124,"32":31,"33":31,"34":31,"35":31,"36":31,"37":31,"38":31,"39":31,"40":124,"41":248,"42":248,"43":124,"44":124,"45":124,"46":124,"47":124,"48":124,"49":324,"50":124,"51":124,"52":31,"53":124,"54":31,"55":31,"56":1,"57":127,"58":1,"59":127,"60":381,"61":508,"62":127,"63":127,"64":127,"65":127,"66":127,"67":127,"68":127,"69":127,"70":127,"71":127,"72":127,"73":127,"74":0,"75":0,"76":0,"77":127,"78":127,"79":127,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":127,"96":127,"97":127,"98":127,"99":127},"f":{"0":131,"1":31,"2":1,"3":31,"4":124,"5":31,"6":124,"7":248,"8":324,"9":124,"10":127,"11":1,"12":127,"13":381,"14":0,"15":0,"16":127},"b":{"0":[0,131],"1":[131,0],"2":[1,130],"3":[129,1],"4":[130,129],"5":[1,0],"6":[131,0],"7":[128,3],"8":[128,3],"9":[31,31,31,0,31],"10":[124,124,124,124],"11":[127,127,0,127,0,127],"12":[127,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"inputSourceMap":{"version":3,"sources":["file.js"],"names":["getAbeMeta","fileObject","json","name","abe_meta","date","updatedDate","latest","link","template","status","getAllWithKeys","withKeys","extension","coreUtils","file","getFiles","Manager","instance","pathData","files","filesArr","Promise","all","map","pathFile","cmsData","revision","getDoc","getFileObject","Array","prototype","forEach","call","key","push","get","pathJson","utils","getRevisionPath","abeExtend","hooks","trigger","fse","statSync","stat","readFileSync","JSON","parse","getFilesByType","type","config","templates","result","directory","lstatSync","isDirectory","mkdirp","sync","e","getFilesSync","val","fileAttr","s","relativePath","path","basename","getDate"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import path from 'path'\nimport mkdirp from 'mkdirp'\nimport fse from 'fs-extra'\n\nimport {abeExtend, coreUtils, cmsData, config, Manager} from '../../'\n\nexport function getAbeMeta(fileObject, json) {\n  if (json.name != null) {\n    fileObject.name = json.name\n  }\n\n  if (json.abe_meta != null) {\n    var date = null\n\n    if (json.abe_meta.updatedDate != null) {\n      fileObject.date = json.abe_meta.updatedDate\n      date = json.abe_meta.updatedDate\n    } else if (\n      json.abe_meta.latest != null &&\n      json.abe_meta.latest.date != null\n    ) {\n      fileObject.date = json.abe_meta.latest.date\n      date = json.abe_meta.latest.date\n    } else if (json.abe_meta.date !== null) {\n      date = json.abe_meta.date\n    }\n\n    fileObject.abe_meta = {\n      date: date,\n      link: json.abe_meta.link != null ? json.abe_meta.link : null,\n      template: json.abe_meta.template != null ? json.abe_meta.template : null,\n      status: json.abe_meta.status != null ? json.abe_meta.status : null\n    }\n  }\n\n  return fileObject\n}\n\nexport async function getAllWithKeys(withKeys) {\n  const extension = '.json'\n  const files = await coreUtils.file.getFiles(\n    Manager.instance.pathData,\n    true,\n    extension\n  )\n\n  let filesArr = []\n\n  await Promise.all(files.map(async pathFile => {\n    const json = await cmsData.revision.getDoc(pathFile)\n    let fileObject = cmsData.file.getFileObject(pathFile, json)\n    fileObject = cmsData.file.getAbeMeta(fileObject, json)\n    Array.prototype.forEach.call(withKeys, key => {\n      fileObject[key] = json[key]\n    })\n\n    filesArr.push(fileObject)\n  }));\n\n  return filesArr\n}\n\nexport async function get(pathJson) {\n  pathJson = cmsData.utils.getRevisionPath(pathJson)\n  let json = {}\n  pathJson = abeExtend.hooks.instance.trigger('beforeGetJson', pathJson)\n\n  try {\n    var stat = await fse.statSync(pathJson)\n    if (stat) {\n      json = fse.readFileSync(pathJson)\n      json = JSON.parse(json)\n    }\n  } catch (e) {\n    //console.log('error get', e)\n    json = {}\n  }\n\n  json = abeExtend.hooks.instance.trigger('afterGetJson', json)\n  return json\n}\n\nexport function getFilesByType(pathFile, type = null) {\n  const extension = '.' + config.files.templates.extension\n  let result = []\n\n  try {\n    var directory = fse.lstatSync(pathFile)\n    if (!directory.isDirectory()) {\n      mkdirp.sync(pathFile)\n    }\n  } catch (e) {\n    mkdirp.sync(pathFile)\n  }\n  const files = coreUtils.file.getFilesSync(pathFile, true, extension)\n\n  Array.prototype.forEach.call(files, file => {\n    var val = cmsData.fileAttr.get(file).s\n    if (type === null || val === type) result.push(file)\n  })\n\n  return result\n}\n\nexport function getFileObject(relativePath, json) {\n  const pathFile = cmsData.utils.getRevisionPath(relativePath)\n\n  let name = path.basename(pathFile)\n  name = cmsData.fileAttr.delete(name)\n\n  let fileObject = {\n    name: name,\n    date: cmsData.fileAttr.getDate(pathFile),\n    path: pathFile\n  }\n\n  return fileObject\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"037af9039944ab52ce5546a5077cd3786b2bc5e1","contentHash":"8756fee9bd3464419d836dac54f6b00f818e3043d2cd3fa5a8e326a35f9ad005"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/utils.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/utils.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":72}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":42}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":58}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":54}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":70}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":68}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":32}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":48}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":34}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":50}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":32}},"13":{"start":{"line":20,"column":15},"end":{"line":20,"column":79}},"14":{"start":{"line":22,"column":12},"end":{"line":22,"column":51}},"15":{"start":{"line":24,"column":8},"end":{"line":24,"column":25}},"16":{"start":{"line":27,"column":15},"end":{"line":27,"column":61}},"17":{"start":{"line":28,"column":16},"end":{"line":28,"column":34}},"18":{"start":{"line":29,"column":22},"end":{"line":29,"column":23}},"19":{"start":{"line":30,"column":17},"end":{"line":30,"column":18}},"20":{"start":{"line":32,"column":2},"end":{"line":58,"column":3}},"21":{"start":{"line":33,"column":4},"end":{"line":57,"column":7}},"22":{"start":{"line":34,"column":6},"end":{"line":56,"column":7}},"23":{"start":{"line":35,"column":22},"end":{"line":35,"column":59}},"24":{"start":{"line":37,"column":27},"end":{"line":37,"column":69}},"25":{"start":{"line":39,"column":8},"end":{"line":55,"column":9}},"26":{"start":{"line":40,"column":10},"end":{"line":40,"column":26}},"27":{"start":{"line":42,"column":24},"end":{"line":42,"column":68}},"28":{"start":{"line":44,"column":10},"end":{"line":44,"column":49}},"29":{"start":{"line":46,"column":10},"end":{"line":54,"column":11}},"30":{"start":{"line":47,"column":12},"end":{"line":53,"column":13}},"31":{"start":{"line":48,"column":14},"end":{"line":50,"column":15}},"32":{"start":{"line":49,"column":16},"end":{"line":49,"column":27}},"33":{"start":{"line":52,"column":14},"end":{"line":52,"column":25}},"34":{"start":{"line":60,"column":2},"end":{"line":60,"column":78}},"35":{"start":{"line":73,"column":2},"end":{"line":73,"column":95}},"36":{"start":{"line":86,"column":2},"end":{"line":86,"column":82}},"37":{"start":{"line":96,"column":18},"end":{"line":96,"column":25}},"38":{"start":{"line":97,"column":26},"end":{"line":97,"column":66}},"39":{"start":{"line":98,"column":19},"end":{"line":98,"column":99}},"40":{"start":{"line":99,"column":2},"end":{"line":99,"column":72}},"41":{"start":{"line":109,"column":16},"end":{"line":109,"column":46}},"42":{"start":{"line":110,"column":2},"end":{"line":110,"column":37}},"43":{"start":{"line":120,"column":19},"end":{"line":120,"column":58}},"44":{"start":{"line":122,"column":16},"end":{"line":122,"column":40}},"45":{"start":{"line":124,"column":2},"end":{"line":126,"column":3}},"46":{"start":{"line":125,"column":4},"end":{"line":125,"column":36}},"47":{"start":{"line":128,"column":19},"end":{"line":128,"column":110}},"48":{"start":{"line":130,"column":2},"end":{"line":130,"column":93}},"49":{"start":{"line":142,"column":2},"end":{"line":142,"column":48}},"50":{"start":{"line":154,"column":2},"end":{"line":154,"column":73}},"51":{"start":{"line":175,"column":2},"end":{"line":175,"column":94}},"52":{"start":{"line":187,"column":18},"end":{"line":187,"column":25}},"53":{"start":{"line":188,"column":26},"end":{"line":188,"column":66}},"54":{"start":{"line":189,"column":2},"end":{"line":189,"column":76}},"55":{"start":{"line":201,"column":18},"end":{"line":201,"column":25}},"56":{"start":{"line":202,"column":26},"end":{"line":202,"column":66}},"57":{"start":{"line":203,"column":2},"end":{"line":203,"column":105}}},"fnMap":{"0":{"name":"getPercentOfRequiredTagsFilled","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":39}},"loc":{"start":{"line":26,"column":52},"end":{"line":61,"column":1}},"line":26},"1":{"name":"(anonymous_1)","decl":{"start":{"line":33,"column":42},"end":{"line":33,"column":43}},"loc":{"start":{"line":33,"column":59},"end":{"line":57,"column":5}},"line":33},"2":{"name":"getRevisionPath","decl":{"start":{"line":72,"column":9},"end":{"line":72,"column":24}},"loc":{"start":{"line":72,"column":35},"end":{"line":74,"column":1}},"line":72},"3":{"name":"getRevisionRelativePath","decl":{"start":{"line":85,"column":9},"end":{"line":85,"column":32}},"loc":{"start":{"line":85,"column":43},"end":{"line":87,"column":1}},"line":85},"4":{"name":"getDocPathFromPostUrl","decl":{"start":{"line":95,"column":9},"end":{"line":95,"column":30}},"loc":{"start":{"line":95,"column":40},"end":{"line":100,"column":1}},"line":95},"5":{"name":"getDocRelativePathFromPostUrl","decl":{"start":{"line":108,"column":9},"end":{"line":108,"column":38}},"loc":{"start":{"line":108,"column":48},"end":{"line":111,"column":1}},"line":108},"6":{"name":"getDocPathFromLinkStatusDate","decl":{"start":{"line":119,"column":9},"end":{"line":119,"column":37}},"loc":{"start":{"line":119,"column":48},"end":{"line":131,"column":1}},"line":119},"7":{"name":"getDocPath","decl":{"start":{"line":141,"column":9},"end":{"line":141,"column":19}},"loc":{"start":{"line":141,"column":30},"end":{"line":143,"column":1}},"line":141},"8":{"name":"getDocRelativePath","decl":{"start":{"line":153,"column":9},"end":{"line":153,"column":27}},"loc":{"start":{"line":153,"column":38},"end":{"line":155,"column":1}},"line":153},"9":{"name":"getPostPath","decl":{"start":{"line":174,"column":9},"end":{"line":174,"column":20}},"loc":{"start":{"line":174,"column":31},"end":{"line":176,"column":1}},"line":174},"10":{"name":"getPostRelativePath","decl":{"start":{"line":186,"column":9},"end":{"line":186,"column":28}},"loc":{"start":{"line":186,"column":39},"end":{"line":190,"column":1}},"line":186},"11":{"name":"getPostUrl","decl":{"start":{"line":200,"column":9},"end":{"line":200,"column":19}},"loc":{"start":{"line":200,"column":30},"end":{"line":204,"column":1}},"line":200}},"branchMap":{"0":{"loc":{"start":{"line":32,"column":2},"end":{"line":58,"column":3}},"type":"if","locations":[{"start":{"line":32,"column":2},"end":{"line":58,"column":3}},{"start":{"line":32,"column":2},"end":{"line":58,"column":3}}],"line":32},"1":{"loc":{"start":{"line":32,"column":6},"end":{"line":32,"column":56}},"type":"binary-expr","locations":[{"start":{"line":32,"column":6},"end":{"line":32,"column":36}},{"start":{"line":32,"column":40},"end":{"line":32,"column":56}}],"line":32},"2":{"loc":{"start":{"line":34,"column":6},"end":{"line":56,"column":7}},"type":"if","locations":[{"start":{"line":34,"column":6},"end":{"line":56,"column":7}},{"start":{"line":34,"column":6},"end":{"line":56,"column":7}}],"line":34},"3":{"loc":{"start":{"line":34,"column":10},"end":{"line":34,"column":56}},"type":"binary-expr","locations":[{"start":{"line":34,"column":10},"end":{"line":34,"column":38}},{"start":{"line":34,"column":42},"end":{"line":34,"column":56}}],"line":34},"4":{"loc":{"start":{"line":39,"column":8},"end":{"line":55,"column":9}},"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":55,"column":9}},{"start":{"line":39,"column":8},"end":{"line":55,"column":9}}],"line":39},"5":{"loc":{"start":{"line":44,"column":20},"end":{"line":44,"column":48}},"type":"cond-expr","locations":[{"start":{"line":44,"column":37},"end":{"line":44,"column":44}},{"start":{"line":44,"column":47},"end":{"line":44,"column":48}}],"line":44},"6":{"loc":{"start":{"line":46,"column":10},"end":{"line":54,"column":11}},"type":"if","locations":[{"start":{"line":46,"column":10},"end":{"line":54,"column":11}},{"start":{"line":46,"column":10},"end":{"line":54,"column":11}}],"line":46},"7":{"loc":{"start":{"line":46,"column":14},"end":{"line":46,"column":100}},"type":"binary-expr","locations":[{"start":{"line":46,"column":14},"end":{"line":46,"column":50}},{"start":{"line":46,"column":54},"end":{"line":46,"column":76}},{"start":{"line":46,"column":80},"end":{"line":46,"column":100}}],"line":46},"8":{"loc":{"start":{"line":47,"column":12},"end":{"line":53,"column":13}},"type":"if","locations":[{"start":{"line":47,"column":12},"end":{"line":53,"column":13}},{"start":{"line":47,"column":12},"end":{"line":53,"column":13}}],"line":47},"9":{"loc":{"start":{"line":48,"column":14},"end":{"line":50,"column":15}},"type":"if","locations":[{"start":{"line":48,"column":14},"end":{"line":50,"column":15}},{"start":{"line":48,"column":14},"end":{"line":50,"column":15}}],"line":48},"10":{"loc":{"start":{"line":60,"column":20},"end":{"line":60,"column":76}},"type":"cond-expr","locations":[{"start":{"line":60,"column":40},"end":{"line":60,"column":70}},{"start":{"line":60,"column":73},"end":{"line":60,"column":76}}],"line":60},"11":{"loc":{"start":{"line":124,"column":2},"end":{"line":126,"column":3}},"type":"if","locations":[{"start":{"line":124,"column":2},"end":{"line":126,"column":3}},{"start":{"line":124,"column":2},"end":{"line":126,"column":3}}],"line":124}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":2,"23":2,"24":2,"25":2,"26":1,"27":1,"28":1,"29":1,"30":1,"31":0,"32":0,"33":1,"34":1,"35":317,"36":545,"37":7,"38":7,"39":7,"40":7,"41":5,"42":5,"43":1,"44":1,"45":1,"46":0,"47":1,"48":1,"49":0,"50":225,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0},"f":{"0":1,"1":2,"2":317,"3":545,"4":7,"5":5,"6":1,"7":0,"8":225,"9":0,"10":0,"11":0},"b":{"0":[1,0],"1":[1,1],"2":[2,0],"3":[2,2],"4":[1,1],"5":[0,1],"6":[1,0],"7":[1,1,1],"8":[0,1],"9":[0,0],"10":[1,0],"11":[0,1]},"inputSourceMap":{"version":3,"sources":["utils.js"],"names":["getPercentOfRequiredTagsFilled","text","json","regAbe","matches","match","requiredValue","complete","Array","prototype","forEach","call","keyAttr","cmsData","regex","getAttr","requiredAttr","minAttr","length","Math","round","getRevisionPath","jsonPath","path","join","Manager","instance","pathData","getRevisionRelativePath","replace","sep","getDocPathFromPostUrl","postUrl","extension","templateExtension","config","files","templates","osJsonPath","getDocRelativePathFromPostUrl","docPath","getDocRelativePath","getDocPathFromLinkStatusDate","jsonData","jsonObject","file","getAbeMeta","dateIso","abe_meta","date","toISOString","statusDate","status","revision","removeStatusAndDateFromFileName","fileAttr","add","link","getDocPath","getPostPath","pathPublish","getPostRelativePath","getPostUrl"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["import path from 'path'\n\nimport {config, cmsData, Manager} from '../../'\n\nexport function getPercentOfRequiredTagsFilled(text, json) {\n  var regAbe = /{{abe[\\S\\s].*?key=['|\"]([\\S\\s].*?['|\"| ]}})/g\n  var matches = text.match(regAbe)\n  var requiredValue = 0\n  var complete = 0\n  if (typeof matches !== 'undefined' && matches !== null) {\n    Array.prototype.forEach.call(matches, match => {\n      if (typeof match !== 'undefined' && match !== null) {\n        var keyAttr = cmsData.regex.getAttr(match, 'key')\n        var requiredAttr = cmsData.regex.getAttr(match, 'required')\n        if (requiredAttr === 'true') {\n          requiredValue++\n\n          var minAttr = cmsData.regex.getAttr(match, 'min-length')\n          minAttr = minAttr !== '' ? minAttr : 0\n\n          if (\n            typeof json[keyAttr] !== 'undefined' &&\n            json[keyAttr] !== null &&\n            json[keyAttr] !== ''\n          ) {\n            if (minAttr > 0) {\n              if (json[keyAttr].length >= minAttr) {\n                complete++\n              }\n            } else {\n              complete++\n            }\n          }\n        }\n      }\n    })\n  }\n\n  return Math.round(requiredValue > 0 ? complete * 100 / requiredValue : 100)\n}\n\n/**\n * Adds the data absolute path to the jsonPath\n * ex. jsonPath = fr/test-abe-d20170418T130602280Z.json\n * return /Users/grg/programmation/git/abetesttheme/data/fr/test-abe-d20170418T130602280Z.json\n * and returns this relative path to the json revision\n * @param  {[type]} jsonPath [description]\n * @return {[type]}          [description]\n */\nexport function getRevisionPath(jsonPath) {\n  return path.join(Manager.instance.pathData, getRevisionRelativePath(jsonPath))\n}\n\n/**\n * Remove the data absolute path from the jsonPath\n * ex. jsonPath = /Users/grg/programmation/git/abetesttheme/data/fr/test-abe-d20170418T130602280Z.json\n * return fr/test-abe-d20170418T130602280Z.json\n * and returns this relative path to the json revision\n * @param  {[type]} jsonPath [description]\n * @return {[type]}          [description]\n */\nexport function getRevisionRelativePath(jsonPath) {\n  return jsonPath.replace(Manager.instance.pathData + path.sep, '')\n}\n\n/**\n * Return the absolute path of the doc from the post URL\n * @param  {[type]} postUrl [description]\n * @return {[type]}         [description]\n */\nexport function getDocPathFromPostUrl(postUrl) {\n  const extension = '.json'\n  const templateExtension = '.' + config.files.templates.extension\n  const osJsonPath = postUrl\n    .replace(templateExtension, extension)\n    .replace('/', path.sep)\n  return path.join(Manager.instance.pathData, osJsonPath)\n}\n\n/**\n * Return the relative path of the doc from the post URL\n * @param  {[type]} postUrl [description]\n * @return {[type]}         [description]\n */\nexport function getDocRelativePathFromPostUrl(postUrl) {\n  let docPath = getDocPathFromPostUrl(postUrl)\n\n  return getDocRelativePath(docPath)\n}\n\n/**\n * Return the absolute path of the doc from a post URL, a status and a date\n * @param  {[type]} postUrl [description]\n * @return {[type]}         [description]\n */\nexport function getDocPathFromLinkStatusDate(jsonData) {\n  let jsonObject = cmsData.file.getAbeMeta({}, jsonData)\n  let dateIso = jsonObject.abe_meta.date\n  if (typeof dateIso === 'object') {\n    dateIso = dateIso.toISOString()\n  }\n  const statusDate =\n    jsonObject.abe_meta.status[0] +\n    cmsData.revision.removeStatusAndDateFromFileName(dateIso)\n  return getDocPathFromPostUrl(\n    cmsData.fileAttr.add(jsonObject.abe_meta.link, statusDate)\n  )\n}\n\n/**\n * Remove the date revision from the jsonPath and returns the doc full path (which is the published json)\n * ex. jsonPath = /Users/grg/programmation/git/abetesttheme/data/fr/test-abe-d20170418T130602280Z.json\n * return /Users/grg/programmation/git/abetesttheme/data/fr/test.json\n * @param  {[type]} jsonPath [description]\n * @return {[type]}          [description]\n */\nexport function getDocPath(jsonPath) {\n  return cmsData.fileAttr.delete(jsonPath)\n}\n\n/**\n * Remove the date revision from the jsonPath and returns the doc relative path (which is the published json)\n * ex. jsonPath = /Users/grg/programmation/git/abetesttheme/data/fr/test-abe-d20170418T130602280Z.json\n * return fr/test.json\n * @param  {[type]} jsonPath [description]\n * @return {[type]}          [description]\n */\nexport function getDocRelativePath(jsonPath) {\n  return cmsData.fileAttr.delete(getRevisionRelativePath(jsonPath))\n}\n\n/**\n * Remove the date revision from the jsonPath and returns the html full path (which is the published post)\n * ex. jsonPath = /Users/grg/programmation/git/abetesttheme/data/fr/test-abe-d20170418T130602280Z.json\n * return /Users/grg/programmation/git/abetesttheme/site/fr/test.html\n * can be:\n * - the full path to the revision : /Users/myname/myAbeBlog/data/fr/abe/is/awesome-d-20170808020202TZ.json\n * - the relative path to the revision : fr/abe/is/awesome-d-20170808020202TZ.json\n * - the full path to the doc : /Users/myname/myAbeBlog/data/fr/abe/is/awesome.json\n * - the relative path to the doc : fr/abe/is/awesome.json\n * - the relative path to the post : fr/abe/is/awesome.html\n *\n * will return : /Users/myname/myAbeBlog/site/fr/abe/is/awesome.html\n * \n * @param  {[type]} jsonPath [description]\n * @return {[type]}          [description]\n */\nexport function getPostPath(jsonPath) {\n  return path.join(Manager.instance.pathPublish, getPostRelativePath(jsonPath))\n}\n\n/**\n * Remove the date revision from the jsonPath and returns the html relative path (which is the published post)\n * ex. jsonPath = /Users/grg/programmation/git/abetesttheme/data/fr/test-abe-d20170418T130602280Z.json\n * return fr/test.html (under window it could be fr\\test.html)\n * @param  {[type]} jsonPath [description]\n * @return {[type]}          [description]\n */\nexport function getPostRelativePath(jsonPath) {\n  const extension = '.json'\n  const templateExtension = '.' + config.files.templates.extension\n\n  return getDocRelativePath(jsonPath).replace(extension, templateExtension)\n}\n\n/**\n * Remove the date revision from the jsonPath and returns the URL absolute path of the published post)\n * ex. jsonPath = /Users/grg/programmation/git/abetesttheme/data/fr/test-abe-d20170418T130602280Z.json\n * return fr/test.html\n * @param  {[type]} jsonPath [description]\n * @return {[type]}          [description]\n */\nexport function getPostUrl(jsonPath) {\n  const extension = '.json'\n  const templateExtension = '.' + config.files.templates.extension\n\n  return path.join(\n    '/',\n    getPostRelativePath(jsonPath).replace(extension, templateExtension)\n  )\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fee45764228a6e483f6493bc9ed42164e937c28e","contentHash":"567ea7b876e97a332a927e1b437732556b497a2b23831ff0830c7dab98d21e12"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/sort.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/sort.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":32}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":30}},"3":{"start":{"line":17,"column":14},"end":{"line":17,"column":69}},"4":{"start":{"line":18,"column":14},"end":{"line":18,"column":69}},"5":{"start":{"line":20,"column":2},"end":{"line":24,"column":3}},"6":{"start":{"line":21,"column":4},"end":{"line":21,"column":13}},"7":{"start":{"line":22,"column":9},"end":{"line":24,"column":3}},"8":{"start":{"line":23,"column":4},"end":{"line":23,"column":14}},"9":{"start":{"line":26,"column":2},"end":{"line":26,"column":11}},"10":{"start":{"line":38,"column":14},"end":{"line":38,"column":69}},"11":{"start":{"line":39,"column":14},"end":{"line":39,"column":69}},"12":{"start":{"line":41,"column":2},"end":{"line":45,"column":3}},"13":{"start":{"line":42,"column":4},"end":{"line":42,"column":13}},"14":{"start":{"line":43,"column":9},"end":{"line":45,"column":3}},"15":{"start":{"line":44,"column":4},"end":{"line":44,"column":14}},"16":{"start":{"line":47,"column":2},"end":{"line":47,"column":11}}},"fnMap":{"0":{"name":"byDateDesc","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":19}},"loc":{"start":{"line":16,"column":26},"end":{"line":27,"column":1}},"line":16},"1":{"name":"byDateAsc","decl":{"start":{"line":37,"column":9},"end":{"line":37,"column":18}},"loc":{"start":{"line":37,"column":25},"end":{"line":48,"column":1}},"line":37}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":14},"end":{"line":17,"column":69}},"type":"cond-expr","locations":[{"start":{"line":17,"column":40},"end":{"line":17,"column":65}},{"start":{"line":17,"column":68},"end":{"line":17,"column":69}}],"line":17},"1":{"loc":{"start":{"line":18,"column":14},"end":{"line":18,"column":69}},"type":"cond-expr","locations":[{"start":{"line":18,"column":40},"end":{"line":18,"column":65}},{"start":{"line":18,"column":68},"end":{"line":18,"column":69}}],"line":18},"2":{"loc":{"start":{"line":20,"column":2},"end":{"line":24,"column":3}},"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":24,"column":3}},{"start":{"line":20,"column":2},"end":{"line":24,"column":3}}],"line":20},"3":{"loc":{"start":{"line":22,"column":9},"end":{"line":24,"column":3}},"type":"if","locations":[{"start":{"line":22,"column":9},"end":{"line":24,"column":3}},{"start":{"line":22,"column":9},"end":{"line":24,"column":3}}],"line":22},"4":{"loc":{"start":{"line":38,"column":14},"end":{"line":38,"column":69}},"type":"cond-expr","locations":[{"start":{"line":38,"column":40},"end":{"line":38,"column":65}},{"start":{"line":38,"column":68},"end":{"line":38,"column":69}}],"line":38},"5":{"loc":{"start":{"line":39,"column":14},"end":{"line":39,"column":69}},"type":"cond-expr","locations":[{"start":{"line":39,"column":40},"end":{"line":39,"column":65}},{"start":{"line":39,"column":68},"end":{"line":39,"column":69}}],"line":39},"6":{"loc":{"start":{"line":41,"column":2},"end":{"line":45,"column":3}},"type":"if","locations":[{"start":{"line":41,"column":2},"end":{"line":45,"column":3}},{"start":{"line":41,"column":2},"end":{"line":45,"column":3}}],"line":41},"7":{"loc":{"start":{"line":43,"column":9},"end":{"line":45,"column":3}},"type":"if","locations":[{"start":{"line":43,"column":9},"end":{"line":45,"column":3}},{"start":{"line":43,"column":9},"end":{"line":45,"column":3}}],"line":43}},"s":{"0":1,"1":1,"2":1,"3":6,"4":6,"5":6,"6":6,"7":0,"8":0,"9":0,"10":5,"11":5,"12":5,"13":4,"14":1,"15":1,"16":0},"f":{"0":6,"1":5},"b":{"0":[6,0],"1":[6,0],"2":[6,0],"3":[0,0],"4":[5,0],"5":[5,0],"6":[4,1],"7":[1,0]},"inputSourceMap":{"version":3,"sources":["sort.js"],"names":["byDateDesc","a","b","dateA","abe_meta","date","Date","dateB","byDateAsc"],"mappings":";;;;;;;;AAAA;;;;;;;AAOO,SAASA,UAAT,CAAoBC,CAApB,EAAuBC,CAAvB,EAA0B;AAC/B,MAAIC,KAAK,GAAGF,CAAC,CAACG,QAAF,CAAWC,IAAX,IAAmB,IAAnB,GAA0B,IAAIC,IAAJ,CAASL,CAAC,CAACG,QAAF,CAAWC,IAApB,CAA1B,GAAsD,CAAlE;AACA,MAAIE,KAAK,GAAGL,CAAC,CAACE,QAAF,CAAWC,IAAX,IAAmB,IAAnB,GAA0B,IAAIC,IAAJ,CAASJ,CAAC,CAACE,QAAF,CAAWC,IAApB,CAA1B,GAAsD,CAAlE;;AACA,MAAIF,KAAK,GAAGI,KAAZ,EAAmB;AACjB,WAAO,CAAP;AACD,GAFD,MAEO,IAAIJ,KAAK,GAAGI,KAAZ,EAAmB;AACxB,WAAO,CAAC,CAAR;AACD;;AACD,SAAO,CAAP;AACD;AAED;;;;;;;;;AAOO,SAASC,SAAT,CAAmBP,CAAnB,EAAsBC,CAAtB,EAAyB;AAC9B,MAAIC,KAAK,GAAGF,CAAC,CAACG,QAAF,CAAWC,IAAX,IAAmB,IAAnB,GAA0B,IAAIC,IAAJ,CAASL,CAAC,CAACG,QAAF,CAAWC,IAApB,CAA1B,GAAsD,CAAlE;AACA,MAAIE,KAAK,GAAGL,CAAC,CAACE,QAAF,CAAWC,IAAX,IAAmB,IAAnB,GAA0B,IAAIC,IAAJ,CAASJ,CAAC,CAACE,QAAF,CAAWC,IAApB,CAA1B,GAAsD,CAAlE;;AACA,MAAIF,KAAK,GAAGI,KAAZ,EAAmB;AACjB,WAAO,CAAP;AACD,GAFD,MAEO,IAAIJ,KAAK,GAAGI,KAAZ,EAAmB;AACxB,WAAO,CAAC,CAAR;AACD;;AACD,SAAO,CAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/data/","sourcesContent":["/**\n * sort an array of objects by date attribute\n * \n * @param  {Object} a object with date attribute\n * @param  {Object} b object with date attribute\n * @return {Int}   1 | 0 | -1\n */\nexport function byDateDesc(a, b) {\n  var dateA = a.abe_meta.date != null ? new Date(a.abe_meta.date) : 0\n  var dateB = b.abe_meta.date != null ? new Date(b.abe_meta.date) : 0\n  if (dateA < dateB) {\n    return 1\n  } else if (dateA > dateB) {\n    return -1\n  }\n  return 0\n}\n\n/**\n * sort an array of objects by date attribute\n *\n * @param  {Object} a object with date attribute\n * @param  {Object} b object with date attribute\n * @return {Int}   1 | 0 | -1\n */\nexport function byDateAsc(a, b) {\n  var dateA = a.abe_meta.date != null ? new Date(a.abe_meta.date) : 0\n  var dateB = b.abe_meta.date != null ? new Date(b.abe_meta.date) : 0\n  if (dateA > dateB) {\n    return 1\n  } else if (dateA < dateB) {\n    return -1\n  }\n  return 0\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d493825fde235b4aad75f7cbc97079ad24a1dfb4","contentHash":"40de48e221617f29a01bb8c9a3685bd48da2a8f0f3f3aa7ef6a5152ff8f32e8f"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/index.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":29},"end":{"line":5,"column":84}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":3}},"3":{"start":{"line":10,"column":0},"end":{"line":15,"column":3}},"4":{"start":{"line":13,"column":4},"end":{"line":13,"column":30}},"5":{"start":{"line":16,"column":0},"end":{"line":21,"column":3}},"6":{"start":{"line":19,"column":4},"end":{"line":19,"column":33}},"7":{"start":{"line":22,"column":0},"end":{"line":27,"column":3}},"8":{"start":{"line":25,"column":4},"end":{"line":25,"column":29}},"9":{"start":{"line":28,"column":0},"end":{"line":33,"column":3}},"10":{"start":{"line":31,"column":4},"end":{"line":31,"column":32}},"11":{"start":{"line":34,"column":0},"end":{"line":34,"column":54}},"12":{"start":{"line":36,"column":14},"end":{"line":36,"column":57}},"13":{"start":{"line":38,"column":17},"end":{"line":38,"column":63}},"14":{"start":{"line":40,"column":11},"end":{"line":40,"column":53}},"15":{"start":{"line":42,"column":0},"end":{"line":42,"column":20}},"16":{"start":{"line":44,"column":11},"end":{"line":44,"column":53}},"17":{"start":{"line":46,"column":0},"end":{"line":46,"column":20}},"18":{"start":{"line":48,"column":13},"end":{"line":48,"column":57}},"19":{"start":{"line":50,"column":0},"end":{"line":50,"column":24}},"20":{"start":{"line":52,"column":13},"end":{"line":52,"column":55}},"21":{"start":{"line":54,"column":16},"end":{"line":54,"column":61}}},"fnMap":{"0":{"name":"get","decl":{"start":{"line":12,"column":16},"end":{"line":12,"column":19}},"loc":{"start":{"line":12,"column":22},"end":{"line":14,"column":3}},"line":12},"1":{"name":"get","decl":{"start":{"line":18,"column":16},"end":{"line":18,"column":19}},"loc":{"start":{"line":18,"column":22},"end":{"line":20,"column":3}},"line":18},"2":{"name":"get","decl":{"start":{"line":24,"column":16},"end":{"line":24,"column":19}},"loc":{"start":{"line":24,"column":22},"end":{"line":26,"column":3}},"line":24},"3":{"name":"get","decl":{"start":{"line":30,"column":16},"end":{"line":30,"column":19}},"loc":{"start":{"line":30,"column":22},"end":{"line":32,"column":3}},"line":30}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":3,"5":1,"6":2,"7":1,"8":0,"9":1,"10":2,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1},"f":{"0":3,"1":2,"2":0,"3":2},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/","sourcesContent":["import create from './create'\nimport duplicate from './duplicate'\nimport * as save from './save'\nimport * as post from './post'\nimport * as remove from './remove'\nimport abify from './abify'\nimport initSite from './initSite'\n\nexport {create, duplicate, save, post, remove, abify, initSite}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2c9626792af5eccf51a01bcf5cc5fd1b24d91e77","contentHash":"39ad2026e56b6fe2564f1cd4778f747cd47bfcdee78da09f6585381069ac38c0"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/create.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/create.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":51}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":25}},"7":{"start":{"line":18,"column":26},"end":{"line":60,"column":3}},"8":{"start":{"line":19,"column":16},"end":{"line":53,"column":5}},"9":{"start":{"line":24,"column":16},"end":{"line":24,"column":25}},"10":{"start":{"line":25,"column":4},"end":{"line":52,"column":16}},"11":{"start":{"line":26,"column":6},"end":{"line":51,"column":7}},"12":{"start":{"line":27,"column":8},"end":{"line":50,"column":9}},"13":{"start":{"line":29,"column":12},"end":{"line":29,"column":83}},"14":{"start":{"line":30,"column":12},"end":{"line":30,"column":59}},"15":{"start":{"line":32,"column":12},"end":{"line":32,"column":93}},"16":{"start":{"line":34,"column":12},"end":{"line":34,"column":54}},"17":{"start":{"line":35,"column":12},"end":{"line":35,"column":78}},"18":{"start":{"line":36,"column":12},"end":{"line":36,"column":90}},"19":{"start":{"line":37,"column":12},"end":{"line":37,"column":30}},"20":{"start":{"line":38,"column":12},"end":{"line":38,"column":87}},"21":{"start":{"line":41,"column":12},"end":{"line":41,"column":35}},"22":{"start":{"line":43,"column":12},"end":{"line":43,"column":70}},"23":{"start":{"line":45,"column":12},"end":{"line":45,"column":58}},"24":{"start":{"line":49,"column":12},"end":{"line":49,"column":35}},"25":{"start":{"line":56,"column":4},"end":{"line":56,"column":42}},"26":{"start":{"line":59,"column":2},"end":{"line":59,"column":16}},"27":{"start":{"line":62,"column":15},"end":{"line":62,"column":21}},"28":{"start":{"line":63,"column":0},"end":{"line":63,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":18,"column":26},"end":{"line":18,"column":27}},"loc":{"start":{"line":18,"column":38},"end":{"line":60,"column":1}},"line":18},"1":{"name":"_callee","decl":{"start":{"line":19,"column":103},"end":{"line":19,"column":110}},"loc":{"start":{"line":19,"column":130},"end":{"line":53,"column":3}},"line":19},"2":{"name":"_callee$","decl":{"start":{"line":25,"column":49},"end":{"line":25,"column":57}},"loc":{"start":{"line":25,"column":68},"end":{"line":52,"column":5}},"line":25},"3":{"name":"create","decl":{"start":{"line":55,"column":11},"end":{"line":55,"column":17}},"loc":{"start":{"line":55,"column":27},"end":{"line":57,"column":3}},"line":55}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":8},"end":{"line":50,"column":9}},"type":"switch","locations":[{"start":{"line":28,"column":10},"end":{"line":38,"column":87}},{"start":{"line":40,"column":10},"end":{"line":45,"column":58}},{"start":{"line":47,"column":10},"end":{"line":47,"column":18}},{"start":{"line":48,"column":10},"end":{"line":49,"column":35}}],"line":27},"1":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":82}},"type":"cond-expr","locations":[{"start":{"line":29,"column":69},"end":{"line":29,"column":77}},{"start":{"line":29,"column":80},"end":{"line":29,"column":82}}],"line":29},"2":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":66}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":40}},{"start":{"line":29,"column":44},"end":{"line":29,"column":66}}],"line":29},"3":{"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":58}},"type":"cond-expr","locations":[{"start":{"line":30,"column":38},"end":{"line":30,"column":46}},{"start":{"line":30,"column":49},"end":{"line":30,"column":58}}],"line":30}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":3,"10":3,"11":9,"12":9,"13":3,"14":3,"15":3,"16":3,"17":3,"18":3,"19":3,"20":3,"21":3,"22":3,"23":3,"24":3,"25":3,"26":1,"27":1,"28":1},"f":{"0":1,"1":3,"2":9,"3":3},"b":{"0":[3,3,0,3],"1":[3,0],"2":[3,3],"3":[2,1]},"inputSourceMap":{"version":3,"sources":["create.js"],"names":["create","template","postUrl","forceJson","user","abeExtend","hooks","instance","trigger","coreUtils","slug","clean","json","cmsData","metas","cmsOperations","post","draft","abe_meta","link","result"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAQA,IAAIA,MAAM;AAAA,8FAAG,iBAAsBC,QAAtB,EAAgCC,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyCC,YAAAA,SAAzC,2DAAqD,EAArD;AAAyDC,YAAAA,IAAzD;;AAEXC,wBAAUC,KAAV,CAAgBC,QAAhB,CAAyBC,OAAzB,CACE,cADF,EAEEL,SAFF,EAGED,OAHF,EAIED,QAJF;;AAMAC,YAAAA,OAAO,GAAGO,YAAUC,IAAV,CAAeC,KAAf,CAAqBT,OAArB,CAAV;AACIU,YAAAA,IATO,GASAC,UAAQC,KAAR,CAAcd,MAAd,CAAqBG,SAArB,EAAgCF,QAAhC,EAA0CC,OAA1C,EAAmDE,IAAnD,CATA;AAWXQ,YAAAA,IAAI,GAAGP,YAAUC,KAAV,CAAgBC,QAAhB,CAAyBC,OAAzB,CAAiC,iBAAjC,EAAoDI,IAApD,EAA0DT,SAA1D,CAAP;AAXW;AAAA,mBAYQY,gBAAcC,IAAd,CAAmBC,KAAnB,CAAyBL,IAAI,CAACM,QAAL,CAAcC,IAAvC,EAA6CP,IAA7C,EAAmD,OAAnD,EAA4DR,IAA5D,CAZR;;AAAA;AAYPgB,YAAAA,MAZO;;AAaXf,wBAAUC,KAAV,CAAgBC,QAAhB,CAAyBC,OAAzB,CAAiC,aAAjC,EAAgDY,MAAhD;;AAbW,6CAeJA,MAAM,CAACR,IAfH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,WAAkBZ,MAAlB;AAAA;AAAA;;AAAA,SAAkBA,MAAlB;AAAA,GAAV;;eAkBeA,M","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/","sourcesContent":["import path from 'path'\nimport {\n  coreUtils,\n  cmsTemplates,\n  cmsOperations,\n  abeExtend,\n  cmsData\n} from '../../'\n\nvar create = async function create(template, postUrl, forceJson = {}, user) {\n\n  abeExtend.hooks.instance.trigger(\n    'beforeCreate',\n    forceJson,\n    postUrl,\n    template\n  )\n  postUrl = coreUtils.slug.clean(postUrl)\n  var json = cmsData.metas.create(forceJson, template, postUrl, user)\n\n  json = abeExtend.hooks.instance.trigger('beforeFirstSave', json, forceJson)\n  var result = await cmsOperations.post.draft(json.abe_meta.link, json, 'draft', user)\n  abeExtend.hooks.instance.trigger('afterCreate', result)\n\n  return result.json\n}\n\nexport default create"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b5c897abe5dbbf2215cada37f8ccc15a61d7668f","contentHash":"cd20ff665f43b11fada0f14c13606a16c9686af3e34b3f048b54fc81d05bb257"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/duplicate.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/duplicate.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":51}},"6":{"start":{"line":16,"column":14},"end":{"line":16,"column":55}},"7":{"start":{"line":18,"column":8},"end":{"line":18,"column":25}},"8":{"start":{"line":21,"column":2},"end":{"line":21,"column":43}},"9":{"start":{"line":25,"column":2},"end":{"line":109,"column":6}},"10":{"start":{"line":36,"column":16},"end":{"line":36,"column":25}},"11":{"start":{"line":37,"column":4},"end":{"line":108,"column":16}},"12":{"start":{"line":38,"column":6},"end":{"line":107,"column":7}},"13":{"start":{"line":39,"column":8},"end":{"line":106,"column":9}},"14":{"start":{"line":41,"column":12},"end":{"line":41,"column":85}},"15":{"start":{"line":42,"column":12},"end":{"line":42,"column":59}},"16":{"start":{"line":44,"column":12},"end":{"line":44,"column":118}},"17":{"start":{"line":46,"column":12},"end":{"line":46,"column":22}},"18":{"start":{"line":47,"column":12},"end":{"line":47,"column":27}},"19":{"start":{"line":48,"column":12},"end":{"line":48,"column":97}},"20":{"start":{"line":50,"column":12},"end":{"line":53,"column":13}},"21":{"start":{"line":51,"column":14},"end":{"line":51,"column":33}},"22":{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},"23":{"start":{"line":55,"column":12},"end":{"line":55,"column":49}},"24":{"start":{"line":56,"column":12},"end":{"line":56,"column":83}},"25":{"start":{"line":57,"column":12},"end":{"line":57,"column":23}},"26":{"start":{"line":58,"column":12},"end":{"line":58,"column":72}},"27":{"start":{"line":60,"column":12},"end":{"line":63,"column":13}},"28":{"start":{"line":61,"column":14},"end":{"line":61,"column":33}},"29":{"start":{"line":62,"column":14},"end":{"line":62,"column":20}},"30":{"start":{"line":65,"column":12},"end":{"line":65,"column":43}},"31":{"start":{"line":67,"column":12},"end":{"line":70,"column":13}},"32":{"start":{"line":68,"column":14},"end":{"line":68,"column":33}},"33":{"start":{"line":69,"column":14},"end":{"line":69,"column":20}},"34":{"start":{"line":72,"column":12},"end":{"line":72,"column":31}},"35":{"start":{"line":73,"column":12},"end":{"line":73,"column":64}},"36":{"start":{"line":76,"column":12},"end":{"line":76,"column":33}},"37":{"start":{"line":77,"column":12},"end":{"line":77,"column":65}},"38":{"start":{"line":78,"column":12},"end":{"line":78,"column":33}},"39":{"start":{"line":81,"column":12},"end":{"line":81,"column":123}},"40":{"start":{"line":84,"column":12},"end":{"line":87,"column":13}},"41":{"start":{"line":85,"column":14},"end":{"line":85,"column":75}},"42":{"start":{"line":86,"column":14},"end":{"line":86,"column":74}},"43":{"start":{"line":89,"column":12},"end":{"line":89,"column":31}},"44":{"start":{"line":90,"column":12},"end":{"line":90,"column":76}},"45":{"start":{"line":93,"column":12},"end":{"line":93,"column":36}},"46":{"start":{"line":95,"column":12},"end":{"line":99,"column":13}},"47":{"start":{"line":96,"column":14},"end":{"line":96,"column":123}},"48":{"start":{"line":98,"column":14},"end":{"line":98,"column":56}},"49":{"start":{"line":101,"column":12},"end":{"line":101,"column":54}},"50":{"start":{"line":105,"column":12},"end":{"line":105,"column":35}},"51":{"start":{"line":110,"column":2},"end":{"line":110,"column":43}},"52":{"start":{"line":113,"column":15},"end":{"line":113,"column":24}},"53":{"start":{"line":114,"column":0},"end":{"line":114,"column":30}}},"fnMap":{"0":{"name":"duplicate","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":18}},"loc":{"start":{"line":20,"column":43},"end":{"line":22,"column":1}},"line":20},"1":{"name":"_duplicate","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":19}},"loc":{"start":{"line":24,"column":22},"end":{"line":111,"column":1}},"line":24},"2":{"name":"_callee","decl":{"start":{"line":25,"column":102},"end":{"line":25,"column":109}},"loc":{"start":{"line":25,"column":152},"end":{"line":109,"column":3}},"line":25},"3":{"name":"_callee$","decl":{"start":{"line":37,"column":49},"end":{"line":37,"column":57}},"loc":{"start":{"line":37,"column":68},"end":{"line":108,"column":5}},"line":37}},"branchMap":{"0":{"loc":{"start":{"line":39,"column":8},"end":{"line":106,"column":9}},"type":"switch","locations":[{"start":{"line":40,"column":10},"end":{"line":73,"column":64}},{"start":{"line":75,"column":10},"end":{"line":78,"column":33}},{"start":{"line":80,"column":10},"end":{"line":90,"column":76}},{"start":{"line":92,"column":10},"end":{"line":101,"column":54}},{"start":{"line":103,"column":10},"end":{"line":103,"column":18}},{"start":{"line":104,"column":10},"end":{"line":105,"column":35}}],"line":39},"1":{"loc":{"start":{"line":41,"column":23},"end":{"line":41,"column":84}},"type":"cond-expr","locations":[{"start":{"line":41,"column":68},"end":{"line":41,"column":76}},{"start":{"line":41,"column":79},"end":{"line":41,"column":84}}],"line":41},"2":{"loc":{"start":{"line":41,"column":23},"end":{"line":41,"column":65}},"type":"binary-expr","locations":[{"start":{"line":41,"column":23},"end":{"line":41,"column":39}},{"start":{"line":41,"column":43},"end":{"line":41,"column":65}}],"line":41},"3":{"loc":{"start":{"line":42,"column":19},"end":{"line":42,"column":58}},"type":"cond-expr","locations":[{"start":{"line":42,"column":38},"end":{"line":42,"column":46}},{"start":{"line":42,"column":49},"end":{"line":42,"column":58}}],"line":42},"4":{"loc":{"start":{"line":50,"column":12},"end":{"line":53,"column":13}},"type":"if","locations":[{"start":{"line":50,"column":12},"end":{"line":53,"column":13}},{"start":{"line":50,"column":12},"end":{"line":53,"column":13}}],"line":50},"5":{"loc":{"start":{"line":60,"column":12},"end":{"line":63,"column":13}},"type":"if","locations":[{"start":{"line":60,"column":12},"end":{"line":63,"column":13}},{"start":{"line":60,"column":12},"end":{"line":63,"column":13}}],"line":60},"6":{"loc":{"start":{"line":60,"column":18},"end":{"line":60,"column":64}},"type":"binary-expr","locations":[{"start":{"line":60,"column":18},"end":{"line":60,"column":34}},{"start":{"line":60,"column":38},"end":{"line":60,"column":64}}],"line":60},"7":{"loc":{"start":{"line":67,"column":12},"end":{"line":70,"column":13}},"type":"if","locations":[{"start":{"line":67,"column":12},"end":{"line":70,"column":13}},{"start":{"line":67,"column":12},"end":{"line":70,"column":13}}],"line":67},"8":{"loc":{"start":{"line":67,"column":18},"end":{"line":67,"column":59}},"type":"binary-expr","locations":[{"start":{"line":67,"column":18},"end":{"line":67,"column":35}},{"start":{"line":67,"column":39},"end":{"line":67,"column":59}}],"line":67},"9":{"loc":{"start":{"line":84,"column":12},"end":{"line":87,"column":13}},"type":"if","locations":[{"start":{"line":84,"column":12},"end":{"line":87,"column":13}},{"start":{"line":84,"column":12},"end":{"line":87,"column":13}}],"line":84},"10":{"loc":{"start":{"line":95,"column":12},"end":{"line":99,"column":13}},"type":"if","locations":[{"start":{"line":95,"column":12},"end":{"line":99,"column":13}},{"start":{"line":95,"column":12},"end":{"line":99,"column":13}}],"line":95},"11":{"loc":{"start":{"line":95,"column":16},"end":{"line":95,"column":53}},"type":"binary-expr","locations":[{"start":{"line":95,"column":16},"end":{"line":95,"column":24}},{"start":{"line":95,"column":28},"end":{"line":95,"column":53}}],"line":95}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":2,"9":1,"10":2,"11":2,"12":6,"13":8,"14":2,"15":2,"16":2,"17":2,"18":2,"19":2,"20":2,"21":0,"22":0,"23":2,"24":2,"25":2,"26":2,"27":2,"28":2,"29":2,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":2,"40":2,"41":1,"42":1,"43":2,"44":2,"45":2,"46":2,"47":1,"48":1,"49":2,"50":2,"51":1,"52":1,"53":1},"f":{"0":2,"1":1,"2":2,"3":6},"b":{"0":[2,0,2,2,0,2],"1":[2,0],"2":[2,2],"3":[0,2],"4":[0,2],"5":[2,0],"6":[2,2],"7":[0,0],"8":[0,0],"9":[1,1],"10":[1,1],"11":[2,1]},"inputSourceMap":{"version":3,"sources":["duplicate.js"],"names":["duplicate","oldPostUrl","template","newPath","name","req","isUpdate","user","abeExtend","hooks","instance","trigger","json","revisions","newPostUrl","path","posix","join","coreUtils","slug","clean","files","Manager","getList","oldDocPath","cmsData","utils","getDocRelativePathFromPostUrl","posts","array","filter","length","revision","getDoc","body","abe_meta","templateText","cmsTemplates","getTemplate","values","removeDuplicate","cmsOperations","create","resSave","remove"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/","sourcesContent":["import path from 'path'\nimport extend from 'extend'\n\nimport {\n  abeExtend,\n  Manager,\n  config,\n  coreUtils,\n  cmsData,\n  cmsTemplates,\n  cmsOperations\n} from '../../'\n\nasync function duplicate(\n  oldPostUrl,\n  template,\n  newPath,\n  name,\n  req,\n  isUpdate = false,\n  user\n) {\n    abeExtend.hooks.instance.trigger(\n      'beforeDuplicate',\n      oldPostUrl,\n      template,\n      newPath,\n      name,\n      req,\n      isUpdate\n    )\n\n    let json = {}\n    let revisions = []\n    const newPostUrl = path.posix.join('/', newPath, coreUtils.slug.clean(name))\n    if (oldPostUrl != null) {\n      const files = Manager.instance.getList()\n      const oldDocPath = cmsData.utils.getDocRelativePathFromPostUrl(oldPostUrl)\n      let posts = []\n      posts = coreUtils.array.filter(files, 'path', oldDocPath)\n\n      if (posts.length > 0 && posts[0].revisions != null) {\n        revisions = posts[0].revisions\n        if (revisions != null && revisions[0] != null) {\n          json = await cmsData.revision.getDoc(revisions[0].path)\n          json = extend(true, json, req.body)\n\n          delete json.abe_meta\n        }\n      }\n    }\n\n    abeExtend.hooks.instance.trigger(\n      'afterDuplicate',\n      json,\n      oldPostUrl,\n      template,\n      newPath,\n      name,\n      req,\n      isUpdate\n    )\n\n    // If duplicate, I remove the unwanted values during duplication (attribute \"duplicate='false'\" in Abe tags)\n    if (!isUpdate) {\n      var templateText = cmsTemplates.template.getTemplate(template)\n      json = cmsData.values.removeDuplicate(templateText, json)\n    }\n\n    var resSave = await cmsOperations.create(template, newPostUrl, json, user)\n    if (isUpdate && oldPostUrl !== newPostUrl) {\n      abeExtend.hooks.instance.trigger(\n        'beforeUpdate',\n        json,\n        oldPostUrl,\n        template,\n        newPath,\n        name,\n        req,\n        isUpdate\n      )\n      cmsOperations.remove.remove(oldPostUrl)\n    }\n    return (resSave)\n\n}\n\nexport default duplicate"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"75f0ab6521edf2d472e8fe7051732f3c7a6efdc2","contentHash":"152a21134c7e845f132c0ce48ef926cf5623523e4037a17e13383c9624a778af"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/save.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/save.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":36}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":28}},"5":{"start":{"line":12,"column":15},"end":{"line":12,"column":79}},"6":{"start":{"line":14,"column":19},"end":{"line":14,"column":80}},"7":{"start":{"line":16,"column":25},"end":{"line":16,"column":99}},"8":{"start":{"line":18,"column":15},"end":{"line":18,"column":58}},"9":{"start":{"line":20,"column":14},"end":{"line":20,"column":55}},"10":{"start":{"line":22,"column":11},"end":{"line":22,"column":49}},"11":{"start":{"line":24,"column":12},"end":{"line":24,"column":51}},"12":{"start":{"line":26,"column":8},"end":{"line":26,"column":25}},"13":{"start":{"line":29,"column":2},"end":{"line":29,"column":42}},"14":{"start":{"line":33,"column":2},"end":{"line":75,"column":6}},"15":{"start":{"line":35,"column":4},"end":{"line":74,"column":16}},"16":{"start":{"line":36,"column":6},"end":{"line":73,"column":7}},"17":{"start":{"line":37,"column":8},"end":{"line":72,"column":9}},"18":{"start":{"line":39,"column":12},"end":{"line":39,"column":27}},"19":{"start":{"line":41,"column":12},"end":{"line":44,"column":13}},"20":{"start":{"line":42,"column":14},"end":{"line":42,"column":32}},"21":{"start":{"line":43,"column":14},"end":{"line":43,"column":20}},"22":{"start":{"line":46,"column":12},"end":{"line":46,"column":30}},"23":{"start":{"line":47,"column":12},"end":{"line":47,"column":48}},"24":{"start":{"line":50,"column":12},"end":{"line":50,"column":35}},"25":{"start":{"line":51,"column":12},"end":{"line":51,"column":31}},"26":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"27":{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},"28":{"start":{"line":56,"column":14},"end":{"line":56,"column":33}},"29":{"start":{"line":57,"column":14},"end":{"line":57,"column":20}},"30":{"start":{"line":60,"column":12},"end":{"line":60,"column":31}},"31":{"start":{"line":61,"column":12},"end":{"line":61,"column":52}},"32":{"start":{"line":64,"column":12},"end":{"line":64,"column":35}},"33":{"start":{"line":67,"column":12},"end":{"line":67,"column":53}},"34":{"start":{"line":71,"column":12},"end":{"line":71,"column":35}},"35":{"start":{"line":76,"column":2},"end":{"line":76,"column":42}},"36":{"start":{"line":80,"column":2},"end":{"line":80,"column":46}},"37":{"start":{"line":84,"column":2},"end":{"line":128,"column":6}},"38":{"start":{"line":86,"column":4},"end":{"line":127,"column":17}},"39":{"start":{"line":87,"column":6},"end":{"line":126,"column":7}},"40":{"start":{"line":88,"column":8},"end":{"line":125,"column":9}},"41":{"start":{"line":90,"column":12},"end":{"line":90,"column":65}},"42":{"start":{"line":92,"column":12},"end":{"line":92,"column":72}},"43":{"start":{"line":94,"column":12},"end":{"line":94,"column":64}},"44":{"start":{"line":94,"column":41},"end":{"line":94,"column":64}},"45":{"start":{"line":95,"column":12},"end":{"line":95,"column":62}},"46":{"start":{"line":95,"column":40},"end":{"line":95,"column":62}},"47":{"start":{"line":97,"column":12},"end":{"line":111,"column":14}},"48":{"start":{"line":98,"column":14},"end":{"line":110,"column":15}},"49":{"start":{"line":99,"column":16},"end":{"line":109,"column":17}},"50":{"start":{"line":100,"column":18},"end":{"line":100,"column":40}},"51":{"start":{"line":101,"column":23},"end":{"line":109,"column":17}},"52":{"start":{"line":102,"column":18},"end":{"line":108,"column":19}},"53":{"start":{"line":103,"column":20},"end":{"line":105,"column":23}},"54":{"start":{"line":107,"column":20},"end":{"line":107,"column":71}},"55":{"start":{"line":113,"column":12},"end":{"line":113,"column":32}},"56":{"start":{"line":115,"column":12},"end":{"line":118,"column":15}},"57":{"start":{"line":120,"column":12},"end":{"line":120,"column":52}},"58":{"start":{"line":124,"column":12},"end":{"line":124,"column":36}},"59":{"start":{"line":129,"column":2},"end":{"line":129,"column":46}},"60":{"start":{"line":133,"column":2},"end":{"line":133,"column":42}},"61":{"start":{"line":137,"column":2},"end":{"line":158,"column":6}},"62":{"start":{"line":138,"column":4},"end":{"line":157,"column":17}},"63":{"start":{"line":139,"column":6},"end":{"line":156,"column":7}},"64":{"start":{"line":140,"column":8},"end":{"line":155,"column":9}},"65":{"start":{"line":142,"column":12},"end":{"line":142,"column":31}},"66":{"start":{"line":143,"column":12},"end":{"line":143,"column":79}},"67":{"start":{"line":146,"column":12},"end":{"line":146,"column":31}},"68":{"start":{"line":147,"column":12},"end":{"line":147,"column":65}},"69":{"start":{"line":150,"column":12},"end":{"line":150,"column":52}},"70":{"start":{"line":154,"column":12},"end":{"line":154,"column":36}},"71":{"start":{"line":159,"column":2},"end":{"line":159,"column":42}}},"fnMap":{"0":{"name":"saveJson","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":17}},"loc":{"start":{"line":28,"column":27},"end":{"line":30,"column":1}},"line":28},"1":{"name":"_saveJson","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":18}},"loc":{"start":{"line":32,"column":21},"end":{"line":77,"column":1}},"line":32},"2":{"name":"_callee","decl":{"start":{"line":33,"column":101},"end":{"line":33,"column":108}},"loc":{"start":{"line":33,"column":125},"end":{"line":75,"column":3}},"line":33},"3":{"name":"_callee$","decl":{"start":{"line":35,"column":49},"end":{"line":35,"column":57}},"loc":{"start":{"line":35,"column":68},"end":{"line":74,"column":5}},"line":35},"4":{"name":"saveJsonFile","decl":{"start":{"line":79,"column":9},"end":{"line":79,"column":21}},"loc":{"start":{"line":79,"column":32},"end":{"line":81,"column":1}},"line":79},"5":{"name":"_saveJsonFile","decl":{"start":{"line":83,"column":9},"end":{"line":83,"column":22}},"loc":{"start":{"line":83,"column":25},"end":{"line":130,"column":1}},"line":83},"6":{"name":"_callee2","decl":{"start":{"line":84,"column":105},"end":{"line":84,"column":113}},"loc":{"start":{"line":84,"column":130},"end":{"line":128,"column":3}},"line":84},"7":{"name":"_callee2$","decl":{"start":{"line":86,"column":49},"end":{"line":86,"column":58}},"loc":{"start":{"line":86,"column":70},"end":{"line":127,"column":5}},"line":86},"8":{"name":"eachRecursive","decl":{"start":{"line":97,"column":37},"end":{"line":97,"column":50}},"loc":{"start":{"line":97,"column":56},"end":{"line":111,"column":13}},"line":97},"9":{"name":"saveHtml","decl":{"start":{"line":132,"column":9},"end":{"line":132,"column":17}},"loc":{"start":{"line":132,"column":28},"end":{"line":134,"column":1}},"line":132},"10":{"name":"_saveHtml","decl":{"start":{"line":136,"column":9},"end":{"line":136,"column":18}},"loc":{"start":{"line":136,"column":21},"end":{"line":160,"column":1}},"line":136},"11":{"name":"_callee3","decl":{"start":{"line":137,"column":101},"end":{"line":137,"column":109}},"loc":{"start":{"line":137,"column":126},"end":{"line":158,"column":3}},"line":137},"12":{"name":"_callee3$","decl":{"start":{"line":138,"column":49},"end":{"line":138,"column":58}},"loc":{"start":{"line":138,"column":70},"end":{"line":157,"column":5}},"line":138}},"branchMap":{"0":{"loc":{"start":{"line":37,"column":8},"end":{"line":72,"column":9}},"type":"switch","locations":[{"start":{"line":38,"column":10},"end":{"line":47,"column":48}},{"start":{"line":49,"column":10},"end":{"line":52,"column":18}},{"start":{"line":54,"column":10},"end":{"line":61,"column":52}},{"start":{"line":63,"column":10},"end":{"line":64,"column":35}},{"start":{"line":66,"column":10},"end":{"line":67,"column":53}},{"start":{"line":69,"column":10},"end":{"line":69,"column":18}},{"start":{"line":70,"column":10},"end":{"line":71,"column":35}}],"line":37},"1":{"loc":{"start":{"line":41,"column":12},"end":{"line":44,"column":13}},"type":"if","locations":[{"start":{"line":41,"column":12},"end":{"line":44,"column":13}},{"start":{"line":41,"column":12},"end":{"line":44,"column":13}}],"line":41},"2":{"loc":{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},{"start":{"line":55,"column":12},"end":{"line":58,"column":13}}],"line":55},"3":{"loc":{"start":{"line":88,"column":8},"end":{"line":125,"column":9}},"type":"switch","locations":[{"start":{"line":89,"column":10},"end":{"line":120,"column":52}},{"start":{"line":122,"column":10},"end":{"line":122,"column":17}},{"start":{"line":123,"column":10},"end":{"line":124,"column":36}}],"line":88},"4":{"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":64}},"type":"if","locations":[{"start":{"line":94,"column":12},"end":{"line":94,"column":64}},{"start":{"line":94,"column":12},"end":{"line":94,"column":64}}],"line":94},"5":{"loc":{"start":{"line":95,"column":12},"end":{"line":95,"column":62}},"type":"if","locations":[{"start":{"line":95,"column":12},"end":{"line":95,"column":62}},{"start":{"line":95,"column":12},"end":{"line":95,"column":62}}],"line":95},"6":{"loc":{"start":{"line":99,"column":16},"end":{"line":109,"column":17}},"type":"if","locations":[{"start":{"line":99,"column":16},"end":{"line":109,"column":17}},{"start":{"line":99,"column":16},"end":{"line":109,"column":17}}],"line":99},"7":{"loc":{"start":{"line":99,"column":20},"end":{"line":99,"column":84}},"type":"binary-expr","locations":[{"start":{"line":99,"column":20},"end":{"line":99,"column":65}},{"start":{"line":99,"column":69},"end":{"line":99,"column":84}}],"line":99},"8":{"loc":{"start":{"line":101,"column":23},"end":{"line":109,"column":17}},"type":"if","locations":[{"start":{"line":101,"column":23},"end":{"line":109,"column":17}},{"start":{"line":101,"column":23},"end":{"line":109,"column":17}}],"line":101},"9":{"loc":{"start":{"line":101,"column":27},"end":{"line":101,"column":75}},"type":"binary-expr","locations":[{"start":{"line":101,"column":27},"end":{"line":101,"column":56}},{"start":{"line":101,"column":60},"end":{"line":101,"column":75}}],"line":101},"10":{"loc":{"start":{"line":102,"column":18},"end":{"line":108,"column":19}},"type":"if","locations":[{"start":{"line":102,"column":18},"end":{"line":108,"column":19}},{"start":{"line":102,"column":18},"end":{"line":108,"column":19}}],"line":102},"11":{"loc":{"start":{"line":140,"column":8},"end":{"line":155,"column":9}},"type":"switch","locations":[{"start":{"line":141,"column":10},"end":{"line":143,"column":79}},{"start":{"line":145,"column":10},"end":{"line":147,"column":65}},{"start":{"line":149,"column":10},"end":{"line":150,"column":52}},{"start":{"line":152,"column":10},"end":{"line":152,"column":17}},{"start":{"line":153,"column":10},"end":{"line":154,"column":36}}],"line":140}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":3,"17":4,"18":1,"19":1,"20":0,"21":0,"22":1,"23":1,"24":1,"25":1,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":1,"43":1,"44":0,"45":1,"46":0,"47":1,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":4,"64":4,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1},"f":{"0":1,"1":1,"2":1,"3":3,"4":1,"5":1,"6":1,"7":2,"8":1,"9":1,"10":1,"11":1,"12":4},"b":{"0":[1,1,0,0,1,0,1],"1":[0,1],"2":[0,0],"3":[1,0,1],"4":[0,1],"5":[0,1],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[1,1,1,0,1]},"inputSourceMap":{"version":3,"sources":["save.js"],"names":["saveJson","jsonPath","json","result","config","database","type","saveJsonFile","mongo","cmsData","utils","getRevisionPath","mkdirp","sync","path","dirname","abe_source","abeEditor","eachRecursive","obj","k","xss","toString","replace","whiteList","htmlWhiteList","fse","writeJsonSync","space","encoding","saveHtml","pathFile","html","writeFile"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/","sourcesContent":["import fse from 'fs-extra'\nimport mkdirp from 'mkdirp'\nimport xss from 'xss'\nimport path from 'path'\n\nimport {\n  config,\n  mongo,\n  cmsData\n} from '../../'\n\nexport async function saveJson(jsonPath, json) {\n\n  let result = false;\n  if (config.database.type == \"file\") {\n    result = await saveJsonFile(jsonPath, json);\n  }\n  else if (config.database.type == \"mongo\") {\n    result = await mongo.saveJson(jsonPath, json);\n  }\n\n  return result\n}\n\nexport async function saveJsonFile(jsonPath, json) {\n  jsonPath = cmsData.utils.getRevisionPath(jsonPath)\n  mkdirp.sync(path.dirname(jsonPath))\n\n  if (json.abe_source != null) delete json.abe_source\n  if (json.abeEditor != null) delete json.abeEditor\n\n  var eachRecursive = function(obj) {\n    for (var k in obj) {\n      if (typeof obj[k] === 'object' && obj[k] !== null) {\n        eachRecursive(obj[k])\n      } else if (typeof obj[k] !== 'undefined' && obj[k] !== null) {\n        if (config.xss) {\n          obj[k] = xss(obj[k].toString().replace(/&quot;/g, '\"'), {\n            whiteList: config.htmlWhiteList\n          })\n        } else {\n          obj[k] = obj[k].toString().replace(/&quot;/g, '\"')\n        }\n      }\n    }\n  }\n\n  eachRecursive(json)\n\n  fse.writeJsonSync(jsonPath, json, {\n    space: 2,\n    encoding: 'utf-8'\n  })\n\n  return true\n}\n\nexport async function saveHtml(pathFile, html) {\n  await mkdirp(path.dirname(pathFile))\n  await fse.writeFile(pathFile, html)\n\n  return true\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"43e9570e3a71453828f7a9566b9eb6d2f2478cea","contentHash":"139437c96fa667763cab7170978389db2ae87662fe15771d49268aa41006d6b4"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/post.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/post.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":22}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":26}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":30}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":24}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":24}},"7":{"start":{"line":14,"column":19},"end":{"line":14,"column":80}},"8":{"start":{"line":16,"column":25},"end":{"line":16,"column":99}},"9":{"start":{"line":18,"column":12},"end":{"line":18,"column":51}},"10":{"start":{"line":20,"column":8},"end":{"line":20,"column":25}},"11":{"start":{"line":23,"column":2},"end":{"line":23,"column":39}},"12":{"start":{"line":27,"column":2},"end":{"line":91,"column":6}},"13":{"start":{"line":36,"column":16},"end":{"line":36,"column":25}},"14":{"start":{"line":37,"column":4},"end":{"line":90,"column":16}},"15":{"start":{"line":38,"column":6},"end":{"line":89,"column":7}},"16":{"start":{"line":39,"column":8},"end":{"line":88,"column":9}},"17":{"start":{"line":41,"column":12},"end":{"line":41,"column":87}},"18":{"start":{"line":42,"column":12},"end":{"line":42,"column":59}},"19":{"start":{"line":44,"column":12},"end":{"line":44,"column":77}},"20":{"start":{"line":46,"column":12},"end":{"line":46,"column":77}},"21":{"start":{"line":47,"column":12},"end":{"line":47,"column":88}},"22":{"start":{"line":48,"column":12},"end":{"line":48,"column":58}},"23":{"start":{"line":49,"column":12},"end":{"line":52,"column":14}},"24":{"start":{"line":54,"column":12},"end":{"line":54,"column":60}},"25":{"start":{"line":56,"column":12},"end":{"line":56,"column":89}},"26":{"start":{"line":57,"column":12},"end":{"line":57,"column":31}},"27":{"start":{"line":58,"column":12},"end":{"line":58,"column":64}},"28":{"start":{"line":61,"column":12},"end":{"line":61,"column":103}},"29":{"start":{"line":62,"column":12},"end":{"line":62,"column":31}},"30":{"start":{"line":63,"column":12},"end":{"line":63,"column":69}},"31":{"start":{"line":66,"column":12},"end":{"line":66,"column":36}},"32":{"start":{"line":68,"column":12},"end":{"line":71,"column":13}},"33":{"start":{"line":69,"column":14},"end":{"line":69,"column":33}},"34":{"start":{"line":70,"column":14},"end":{"line":70,"column":20}},"35":{"start":{"line":73,"column":12},"end":{"line":73,"column":31}},"36":{"start":{"line":74,"column":12},"end":{"line":74,"column":69}},"37":{"start":{"line":77,"column":12},"end":{"line":80,"column":14}},"38":{"start":{"line":83,"column":12},"end":{"line":83,"column":53}},"39":{"start":{"line":87,"column":12},"end":{"line":87,"column":35}},"40":{"start":{"line":92,"column":2},"end":{"line":92,"column":39}},"41":{"start":{"line":96,"column":2},"end":{"line":96,"column":41}},"42":{"start":{"line":100,"column":2},"end":{"line":218,"column":6}},"43":{"start":{"line":102,"column":4},"end":{"line":217,"column":17}},"44":{"start":{"line":103,"column":6},"end":{"line":216,"column":7}},"45":{"start":{"line":104,"column":8},"end":{"line":215,"column":9}},"46":{"start":{"line":106,"column":12},"end":{"line":106,"column":79}},"47":{"start":{"line":108,"column":12},"end":{"line":108,"column":85}},"48":{"start":{"line":109,"column":12},"end":{"line":109,"column":86}},"49":{"start":{"line":111,"column":12},"end":{"line":111,"column":61}},"50":{"start":{"line":113,"column":12},"end":{"line":113,"column":89}},"51":{"start":{"line":114,"column":12},"end":{"line":114,"column":31}},"52":{"start":{"line":115,"column":12},"end":{"line":115,"column":64}},"53":{"start":{"line":118,"column":12},"end":{"line":118,"column":103}},"54":{"start":{"line":119,"column":12},"end":{"line":119,"column":52}},"55":{"start":{"line":121,"column":12},"end":{"line":124,"column":13}},"56":{"start":{"line":122,"column":14},"end":{"line":122,"column":34}},"57":{"start":{"line":123,"column":14},"end":{"line":123,"column":20}},"58":{"start":{"line":126,"column":12},"end":{"line":129,"column":14}},"59":{"start":{"line":130,"column":12},"end":{"line":130,"column":32}},"60":{"start":{"line":131,"column":12},"end":{"line":131,"column":18}},"61":{"start":{"line":134,"column":12},"end":{"line":134,"column":32}},"62":{"start":{"line":135,"column":12},"end":{"line":135,"column":72}},"63":{"start":{"line":138,"column":12},"end":{"line":141,"column":13}},"64":{"start":{"line":139,"column":14},"end":{"line":139,"column":34}},"65":{"start":{"line":140,"column":14},"end":{"line":140,"column":20}},"66":{"start":{"line":143,"column":12},"end":{"line":146,"column":14}},"67":{"start":{"line":147,"column":12},"end":{"line":147,"column":32}},"68":{"start":{"line":148,"column":12},"end":{"line":148,"column":18}},"69":{"start":{"line":151,"column":12},"end":{"line":151,"column":65}},"70":{"start":{"line":153,"column":12},"end":{"line":153,"column":78}},"71":{"start":{"line":155,"column":12},"end":{"line":158,"column":14}},"72":{"start":{"line":161,"column":12},"end":{"line":164,"column":13}},"73":{"start":{"line":162,"column":14},"end":{"line":162,"column":34}},"74":{"start":{"line":163,"column":14},"end":{"line":163,"column":20}},"75":{"start":{"line":166,"column":12},"end":{"line":166,"column":75}},"76":{"start":{"line":167,"column":12},"end":{"line":167,"column":32}},"77":{"start":{"line":168,"column":12},"end":{"line":207,"column":18}},"78":{"start":{"line":169,"column":25},"end":{"line":202,"column":17}},"79":{"start":{"line":172,"column":16},"end":{"line":201,"column":29}},"80":{"start":{"line":173,"column":18},"end":{"line":200,"column":19}},"81":{"start":{"line":174,"column":20},"end":{"line":199,"column":21}},"82":{"start":{"line":176,"column":24},"end":{"line":176,"column":78}},"83":{"start":{"line":178,"column":24},"end":{"line":181,"column":25}},"84":{"start":{"line":179,"column":26},"end":{"line":179,"column":46}},"85":{"start":{"line":180,"column":26},"end":{"line":180,"column":32}},"86":{"start":{"line":183,"column":24},"end":{"line":183,"column":106}},"87":{"start":{"line":184,"column":24},"end":{"line":184,"column":71}},"88":{"start":{"line":185,"column":24},"end":{"line":185,"column":93}},"89":{"start":{"line":185,"column":55},"end":{"line":185,"column":93}},"90":{"start":{"line":186,"column":24},"end":{"line":186,"column":130}},"91":{"start":{"line":187,"column":24},"end":{"line":187,"column":120}},"92":{"start":{"line":188,"column":24},"end":{"line":188,"column":43}},"93":{"start":{"line":189,"column":24},"end":{"line":189,"column":79}},"94":{"start":{"line":192,"column":24},"end":{"line":192,"column":68}},"95":{"start":{"line":194,"column":24},"end":{"line":194,"column":75}},"96":{"start":{"line":198,"column":24},"end":{"line":198,"column":48}},"97":{"start":{"line":204,"column":14},"end":{"line":206,"column":16}},"98":{"start":{"line":205,"column":16},"end":{"line":205,"column":51}},"99":{"start":{"line":210,"column":12},"end":{"line":210,"column":54}},"100":{"start":{"line":214,"column":12},"end":{"line":214,"column":36}},"101":{"start":{"line":219,"column":2},"end":{"line":219,"column":41}},"102":{"start":{"line":223,"column":2},"end":{"line":223,"column":43}},"103":{"start":{"line":227,"column":2},"end":{"line":290,"column":6}},"104":{"start":{"line":229,"column":4},"end":{"line":289,"column":17}},"105":{"start":{"line":230,"column":6},"end":{"line":288,"column":7}},"106":{"start":{"line":231,"column":8},"end":{"line":287,"column":9}},"107":{"start":{"line":233,"column":12},"end":{"line":233,"column":75}},"108":{"start":{"line":235,"column":12},"end":{"line":235,"column":69}},"109":{"start":{"line":236,"column":12},"end":{"line":236,"column":86}},"110":{"start":{"line":237,"column":12},"end":{"line":237,"column":31}},"111":{"start":{"line":238,"column":12},"end":{"line":238,"column":54}},"112":{"start":{"line":241,"column":12},"end":{"line":241,"column":34}},"113":{"start":{"line":243,"column":12},"end":{"line":245,"column":13}},"114":{"start":{"line":244,"column":14},"end":{"line":244,"column":43}},"115":{"start":{"line":247,"column":12},"end":{"line":247,"column":31}},"116":{"start":{"line":248,"column":12},"end":{"line":248,"column":76}},"117":{"start":{"line":251,"column":12},"end":{"line":251,"column":36}},"118":{"start":{"line":253,"column":12},"end":{"line":253,"column":59}},"119":{"start":{"line":255,"column":12},"end":{"line":255,"column":56}},"120":{"start":{"line":258,"column":12},"end":{"line":274,"column":13}},"121":{"start":{"line":259,"column":14},"end":{"line":273,"column":17}},"122":{"start":{"line":260,"column":38},"end":{"line":260,"column":80}},"123":{"start":{"line":262,"column":16},"end":{"line":272,"column":17}},"124":{"start":{"line":263,"column":36},"end":{"line":263,"column":103}},"125":{"start":{"line":265,"column":34},"end":{"line":265,"column":68}},"126":{"start":{"line":266,"column":18},"end":{"line":266,"column":87}},"127":{"start":{"line":266,"column":49},"end":{"line":266,"column":87}},"128":{"start":{"line":267,"column":33},"end":{"line":267,"column":127}},"129":{"start":{"line":269,"column":40},"end":{"line":269,"column":125}},"130":{"start":{"line":271,"column":18},"end":{"line":271,"column":69}},"131":{"start":{"line":276,"column":12},"end":{"line":276,"column":83}},"132":{"start":{"line":278,"column":12},"end":{"line":278,"column":60}},"133":{"start":{"line":280,"column":12},"end":{"line":280,"column":97}},"134":{"start":{"line":282,"column":12},"end":{"line":282,"column":59}},"135":{"start":{"line":286,"column":12},"end":{"line":286,"column":36}},"136":{"start":{"line":291,"column":2},"end":{"line":291,"column":43}},"137":{"start":{"line":295,"column":2},"end":{"line":295,"column":40}},"138":{"start":{"line":299,"column":2},"end":{"line":334,"column":6}},"139":{"start":{"line":301,"column":4},"end":{"line":333,"column":17}},"140":{"start":{"line":302,"column":6},"end":{"line":332,"column":7}},"141":{"start":{"line":303,"column":8},"end":{"line":331,"column":9}},"142":{"start":{"line":305,"column":12},"end":{"line":308,"column":13}},"143":{"start":{"line":306,"column":14},"end":{"line":306,"column":33}},"144":{"start":{"line":307,"column":14},"end":{"line":307,"column":20}},"145":{"start":{"line":310,"column":12},"end":{"line":310,"column":31}},"146":{"start":{"line":311,"column":12},"end":{"line":311,"column":69}},"147":{"start":{"line":314,"column":12},"end":{"line":314,"column":36}},"148":{"start":{"line":315,"column":12},"end":{"line":315,"column":31}},"149":{"start":{"line":316,"column":12},"end":{"line":316,"column":18}},"150":{"start":{"line":319,"column":12},"end":{"line":319,"column":31}},"151":{"start":{"line":320,"column":12},"end":{"line":320,"column":77}},"152":{"start":{"line":323,"column":12},"end":{"line":323,"column":36}},"153":{"start":{"line":326,"column":12},"end":{"line":326,"column":54}},"154":{"start":{"line":330,"column":12},"end":{"line":330,"column":36}},"155":{"start":{"line":335,"column":2},"end":{"line":335,"column":40}},"156":{"start":{"line":339,"column":2},"end":{"line":339,"column":40}},"157":{"start":{"line":343,"column":2},"end":{"line":386,"column":6}},"158":{"start":{"line":345,"column":4},"end":{"line":385,"column":17}},"159":{"start":{"line":346,"column":6},"end":{"line":384,"column":7}},"160":{"start":{"line":347,"column":8},"end":{"line":383,"column":9}},"161":{"start":{"line":349,"column":12},"end":{"line":349,"column":73}},"162":{"start":{"line":351,"column":12},"end":{"line":351,"column":26}},"163":{"start":{"line":352,"column":12},"end":{"line":360,"column":15}},"164":{"start":{"line":353,"column":14},"end":{"line":355,"column":15}},"165":{"start":{"line":354,"column":16},"end":{"line":354,"column":29}},"166":{"start":{"line":357,"column":14},"end":{"line":359,"column":15}},"167":{"start":{"line":358,"column":16},"end":{"line":358,"column":40}},"168":{"start":{"line":362,"column":12},"end":{"line":364,"column":13}},"169":{"start":{"line":363,"column":14},"end":{"line":363,"column":41}},"170":{"start":{"line":366,"column":12},"end":{"line":368,"column":13}},"171":{"start":{"line":367,"column":14},"end":{"line":367,"column":43}},"172":{"start":{"line":370,"column":12},"end":{"line":370,"column":31}},"173":{"start":{"line":371,"column":12},"end":{"line":371,"column":86}},"174":{"start":{"line":374,"column":12},"end":{"line":374,"column":36}},"175":{"start":{"line":376,"column":12},"end":{"line":376,"column":70}},"176":{"start":{"line":378,"column":12},"end":{"line":378,"column":54}},"177":{"start":{"line":382,"column":12},"end":{"line":382,"column":36}},"178":{"start":{"line":387,"column":2},"end":{"line":387,"column":40}}},"fnMap":{"0":{"name":"draft","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":14}},"loc":{"start":{"line":22,"column":24},"end":{"line":24,"column":1}},"line":22},"1":{"name":"_draft","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":15}},"loc":{"start":{"line":26,"column":18},"end":{"line":93,"column":1}},"line":26},"2":{"name":"_callee","decl":{"start":{"line":27,"column":98},"end":{"line":27,"column":105}},"loc":{"start":{"line":27,"column":121},"end":{"line":91,"column":3}},"line":27},"3":{"name":"_callee$","decl":{"start":{"line":37,"column":49},"end":{"line":37,"column":57}},"loc":{"start":{"line":37,"column":68},"end":{"line":90,"column":5}},"line":37},"4":{"name":"publish","decl":{"start":{"line":95,"column":9},"end":{"line":95,"column":16}},"loc":{"start":{"line":95,"column":32},"end":{"line":97,"column":1}},"line":95},"5":{"name":"_publish","decl":{"start":{"line":99,"column":9},"end":{"line":99,"column":17}},"loc":{"start":{"line":99,"column":20},"end":{"line":220,"column":1}},"line":99},"6":{"name":"_callee3","decl":{"start":{"line":100,"column":100},"end":{"line":100,"column":108}},"loc":{"start":{"line":100,"column":130},"end":{"line":218,"column":3}},"line":100},"7":{"name":"_callee3$","decl":{"start":{"line":102,"column":49},"end":{"line":102,"column":58}},"loc":{"start":{"line":102,"column":70},"end":{"line":217,"column":5}},"line":102},"8":{"name":"(anonymous_8)","decl":{"start":{"line":168,"column":66},"end":{"line":168,"column":67}},"loc":{"start":{"line":168,"column":78},"end":{"line":207,"column":13}},"line":168},"9":{"name":"_callee2","decl":{"start":{"line":169,"column":112},"end":{"line":169,"column":120}},"loc":{"start":{"line":169,"column":133},"end":{"line":202,"column":15}},"line":169},"10":{"name":"_callee2$","decl":{"start":{"line":172,"column":61},"end":{"line":172,"column":70}},"loc":{"start":{"line":172,"column":82},"end":{"line":201,"column":17}},"line":172},"11":{"name":"(anonymous_11)","decl":{"start":{"line":204,"column":21},"end":{"line":204,"column":22}},"loc":{"start":{"line":204,"column":43},"end":{"line":206,"column":15}},"line":204},"12":{"name":"unpublish","decl":{"start":{"line":222,"column":9},"end":{"line":222,"column":18}},"loc":{"start":{"line":222,"column":29},"end":{"line":224,"column":1}},"line":222},"13":{"name":"_unpublish","decl":{"start":{"line":226,"column":9},"end":{"line":226,"column":19}},"loc":{"start":{"line":226,"column":22},"end":{"line":292,"column":1}},"line":226},"14":{"name":"_callee4","decl":{"start":{"line":227,"column":102},"end":{"line":227,"column":110}},"loc":{"start":{"line":227,"column":126},"end":{"line":290,"column":3}},"line":227},"15":{"name":"_callee4$","decl":{"start":{"line":229,"column":49},"end":{"line":229,"column":58}},"loc":{"start":{"line":229,"column":70},"end":{"line":289,"column":5}},"line":229},"16":{"name":"(anonymous_16)","decl":{"start":{"line":259,"column":69},"end":{"line":259,"column":70}},"loc":{"start":{"line":259,"column":91},"end":{"line":273,"column":15}},"line":259},"17":{"name":"submit","decl":{"start":{"line":294,"column":9},"end":{"line":294,"column":15}},"loc":{"start":{"line":294,"column":38},"end":{"line":296,"column":1}},"line":294},"18":{"name":"_submit","decl":{"start":{"line":298,"column":9},"end":{"line":298,"column":16}},"loc":{"start":{"line":298,"column":19},"end":{"line":336,"column":1}},"line":298},"19":{"name":"_callee5","decl":{"start":{"line":299,"column":99},"end":{"line":299,"column":107}},"loc":{"start":{"line":299,"column":139},"end":{"line":334,"column":3}},"line":299},"20":{"name":"_callee5$","decl":{"start":{"line":301,"column":49},"end":{"line":301,"column":58}},"loc":{"start":{"line":301,"column":70},"end":{"line":333,"column":5}},"line":301},"21":{"name":"reject","decl":{"start":{"line":338,"column":9},"end":{"line":338,"column":15}},"loc":{"start":{"line":338,"column":40},"end":{"line":340,"column":1}},"line":338},"22":{"name":"_reject","decl":{"start":{"line":342,"column":9},"end":{"line":342,"column":16}},"loc":{"start":{"line":342,"column":19},"end":{"line":388,"column":1}},"line":342},"23":{"name":"_callee6","decl":{"start":{"line":343,"column":99},"end":{"line":343,"column":107}},"loc":{"start":{"line":343,"column":140},"end":{"line":386,"column":3}},"line":343},"24":{"name":"_callee6$","decl":{"start":{"line":345,"column":49},"end":{"line":345,"column":58}},"loc":{"start":{"line":345,"column":70},"end":{"line":385,"column":5}},"line":345},"25":{"name":"(anonymous_25)","decl":{"start":{"line":352,"column":66},"end":{"line":352,"column":67}},"loc":{"start":{"line":352,"column":82},"end":{"line":360,"column":13}},"line":352}},"branchMap":{"0":{"loc":{"start":{"line":39,"column":8},"end":{"line":88,"column":9}},"type":"switch","locations":[{"start":{"line":40,"column":10},"end":{"line":58,"column":64}},{"start":{"line":60,"column":10},"end":{"line":63,"column":69}},{"start":{"line":65,"column":10},"end":{"line":74,"column":69}},{"start":{"line":76,"column":10},"end":{"line":80,"column":14}},{"start":{"line":82,"column":10},"end":{"line":83,"column":53}},{"start":{"line":85,"column":10},"end":{"line":85,"column":18}},{"start":{"line":86,"column":10},"end":{"line":87,"column":35}}],"line":39},"1":{"loc":{"start":{"line":41,"column":23},"end":{"line":41,"column":86}},"type":"cond-expr","locations":[{"start":{"line":41,"column":68},"end":{"line":41,"column":76}},{"start":{"line":41,"column":79},"end":{"line":41,"column":86}}],"line":41},"2":{"loc":{"start":{"line":41,"column":23},"end":{"line":41,"column":65}},"type":"binary-expr","locations":[{"start":{"line":41,"column":23},"end":{"line":41,"column":39}},{"start":{"line":41,"column":43},"end":{"line":41,"column":65}}],"line":41},"3":{"loc":{"start":{"line":42,"column":19},"end":{"line":42,"column":58}},"type":"cond-expr","locations":[{"start":{"line":42,"column":38},"end":{"line":42,"column":46}},{"start":{"line":42,"column":49},"end":{"line":42,"column":58}}],"line":42},"4":{"loc":{"start":{"line":68,"column":12},"end":{"line":71,"column":13}},"type":"if","locations":[{"start":{"line":68,"column":12},"end":{"line":71,"column":13}},{"start":{"line":68,"column":12},"end":{"line":71,"column":13}}],"line":68},"5":{"loc":{"start":{"line":104,"column":8},"end":{"line":215,"column":9}},"type":"switch","locations":[{"start":{"line":105,"column":10},"end":{"line":115,"column":64}},{"start":{"line":117,"column":10},"end":{"line":131,"column":18}},{"start":{"line":133,"column":10},"end":{"line":135,"column":72}},{"start":{"line":137,"column":10},"end":{"line":148,"column":18}},{"start":{"line":150,"column":10},"end":{"line":158,"column":14}},{"start":{"line":160,"column":10},"end":{"line":207,"column":18}},{"start":{"line":209,"column":10},"end":{"line":210,"column":54}},{"start":{"line":212,"column":10},"end":{"line":212,"column":18}},{"start":{"line":213,"column":10},"end":{"line":214,"column":36}}],"line":104},"6":{"loc":{"start":{"line":121,"column":12},"end":{"line":124,"column":13}},"type":"if","locations":[{"start":{"line":121,"column":12},"end":{"line":124,"column":13}},{"start":{"line":121,"column":12},"end":{"line":124,"column":13}}],"line":121},"7":{"loc":{"start":{"line":138,"column":12},"end":{"line":141,"column":13}},"type":"if","locations":[{"start":{"line":138,"column":12},"end":{"line":141,"column":13}},{"start":{"line":138,"column":12},"end":{"line":141,"column":13}}],"line":138},"8":{"loc":{"start":{"line":161,"column":12},"end":{"line":164,"column":13}},"type":"if","locations":[{"start":{"line":161,"column":12},"end":{"line":164,"column":13}},{"start":{"line":161,"column":12},"end":{"line":164,"column":13}}],"line":161},"9":{"loc":{"start":{"line":174,"column":20},"end":{"line":199,"column":21}},"type":"switch","locations":[{"start":{"line":175,"column":22},"end":{"line":189,"column":79}},{"start":{"line":191,"column":22},"end":{"line":194,"column":75}},{"start":{"line":196,"column":22},"end":{"line":196,"column":30}},{"start":{"line":197,"column":22},"end":{"line":198,"column":48}}],"line":174},"10":{"loc":{"start":{"line":178,"column":24},"end":{"line":181,"column":25}},"type":"if","locations":[{"start":{"line":178,"column":24},"end":{"line":181,"column":25}},{"start":{"line":178,"column":24},"end":{"line":181,"column":25}}],"line":178},"11":{"loc":{"start":{"line":178,"column":30},"end":{"line":178,"column":78}},"type":"binary-expr","locations":[{"start":{"line":178,"column":30},"end":{"line":178,"column":54}},{"start":{"line":178,"column":58},"end":{"line":178,"column":78}}],"line":178},"12":{"loc":{"start":{"line":185,"column":24},"end":{"line":185,"column":93}},"type":"if","locations":[{"start":{"line":185,"column":24},"end":{"line":185,"column":93}},{"start":{"line":185,"column":24},"end":{"line":185,"column":93}}],"line":185},"13":{"loc":{"start":{"line":231,"column":8},"end":{"line":287,"column":9}},"type":"switch","locations":[{"start":{"line":232,"column":10},"end":{"line":238,"column":54}},{"start":{"line":240,"column":10},"end":{"line":248,"column":76}},{"start":{"line":250,"column":10},"end":{"line":282,"column":59}},{"start":{"line":284,"column":10},"end":{"line":284,"column":18}},{"start":{"line":285,"column":10},"end":{"line":286,"column":36}}],"line":231},"14":{"loc":{"start":{"line":243,"column":12},"end":{"line":245,"column":13}},"type":"if","locations":[{"start":{"line":243,"column":12},"end":{"line":245,"column":13}},{"start":{"line":243,"column":12},"end":{"line":245,"column":13}}],"line":243},"15":{"loc":{"start":{"line":258,"column":12},"end":{"line":274,"column":13}},"type":"if","locations":[{"start":{"line":258,"column":12},"end":{"line":274,"column":13}},{"start":{"line":258,"column":12},"end":{"line":274,"column":13}}],"line":258},"16":{"loc":{"start":{"line":262,"column":16},"end":{"line":272,"column":17}},"type":"if","locations":[{"start":{"line":262,"column":16},"end":{"line":272,"column":17}},{"start":{"line":262,"column":16},"end":{"line":272,"column":17}}],"line":262},"17":{"loc":{"start":{"line":262,"column":20},"end":{"line":262,"column":68}},"type":"binary-expr","locations":[{"start":{"line":262,"column":20},"end":{"line":262,"column":44}},{"start":{"line":262,"column":48},"end":{"line":262,"column":68}}],"line":262},"18":{"loc":{"start":{"line":266,"column":18},"end":{"line":266,"column":87}},"type":"if","locations":[{"start":{"line":266,"column":18},"end":{"line":266,"column":87}},{"start":{"line":266,"column":18},"end":{"line":266,"column":87}}],"line":266},"19":{"loc":{"start":{"line":303,"column":8},"end":{"line":331,"column":9}},"type":"switch","locations":[{"start":{"line":304,"column":10},"end":{"line":311,"column":69}},{"start":{"line":313,"column":10},"end":{"line":316,"column":18}},{"start":{"line":318,"column":10},"end":{"line":320,"column":77}},{"start":{"line":322,"column":10},"end":{"line":323,"column":36}},{"start":{"line":325,"column":10},"end":{"line":326,"column":54}},{"start":{"line":328,"column":10},"end":{"line":328,"column":18}},{"start":{"line":329,"column":10},"end":{"line":330,"column":36}}],"line":303},"20":{"loc":{"start":{"line":305,"column":12},"end":{"line":308,"column":13}},"type":"if","locations":[{"start":{"line":305,"column":12},"end":{"line":308,"column":13}},{"start":{"line":305,"column":12},"end":{"line":308,"column":13}}],"line":305},"21":{"loc":{"start":{"line":347,"column":8},"end":{"line":383,"column":9}},"type":"switch","locations":[{"start":{"line":348,"column":10},"end":{"line":371,"column":86}},{"start":{"line":373,"column":10},"end":{"line":378,"column":54}},{"start":{"line":380,"column":10},"end":{"line":380,"column":18}},{"start":{"line":381,"column":10},"end":{"line":382,"column":36}}],"line":347},"22":{"loc":{"start":{"line":353,"column":14},"end":{"line":355,"column":15}},"type":"if","locations":[{"start":{"line":353,"column":14},"end":{"line":355,"column":15}},{"start":{"line":353,"column":14},"end":{"line":355,"column":15}}],"line":353},"23":{"loc":{"start":{"line":357,"column":14},"end":{"line":359,"column":15}},"type":"if","locations":[{"start":{"line":357,"column":14},"end":{"line":359,"column":15}},{"start":{"line":357,"column":14},"end":{"line":359,"column":15}}],"line":357},"24":{"loc":{"start":{"line":362,"column":12},"end":{"line":364,"column":13}},"type":"if","locations":[{"start":{"line":362,"column":12},"end":{"line":364,"column":13}},{"start":{"line":362,"column":12},"end":{"line":364,"column":13}}],"line":362},"25":{"loc":{"start":{"line":366,"column":12},"end":{"line":368,"column":13}},"type":"if","locations":[{"start":{"line":366,"column":12},"end":{"line":368,"column":13}},{"start":{"line":366,"column":12},"end":{"line":368,"column":13}}],"line":366}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":5,"16":5,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":0,"34":0,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":4,"45":7,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":0,"59":0,"60":0,"61":1,"62":1,"63":1,"64":1,"65":1,"66":0,"67":0,"68":0,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":4,"106":4,"107":1,"108":1,"109":1,"110":1,"111":1,"112":1,"113":1,"114":0,"115":1,"116":1,"117":1,"118":1,"119":1,"120":1,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":1,"132":1,"133":1,"134":1,"135":1,"136":1,"137":1,"138":1,"139":1,"140":3,"141":4,"142":1,"143":1,"144":1,"145":0,"146":0,"147":0,"148":0,"149":0,"150":1,"151":1,"152":1,"153":1,"154":1,"155":1,"156":1,"157":1,"158":1,"159":3,"160":3,"161":1,"162":1,"163":1,"164":2,"165":0,"166":2,"167":2,"168":1,"169":1,"170":1,"171":0,"172":1,"173":1,"174":1,"175":1,"176":1,"177":1,"178":1},"f":{"0":1,"1":1,"2":1,"3":5,"4":1,"5":1,"6":1,"7":4,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":4,"16":0,"17":1,"18":1,"19":1,"20":3,"21":1,"22":1,"23":1,"24":3,"25":2},"b":{"0":[1,1,1,1,1,0,1],"1":[0,1],"2":[1,0],"3":[0,1],"4":[0,1],"5":[1,1,1,1,1,1,1,0,1],"6":[1,0],"7":[1,0],"8":[1,0],"9":[0,0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[1,1,1,0,1],"14":[0,1],"15":[0,1],"16":[0,0],"17":[0,0],"18":[0,0],"19":[1,0,1,1,1,0,1],"20":[1,0],"21":[1,1,0,1],"22":[0,2],"23":[2,0],"24":[1,0],"25":[0,1]},"inputSourceMap":{"version":3,"sources":["post.js"],"names":["draft","postUrl","json","workflow","user","abeExtend","hooks","instance","trigger","docPath","cmsData","utils","getDocRelativePathFromPostUrl","revisionPath","coreUtils","file","addDateIsoToRevisionPath","date","getDate","result","success","error","metas","add","template","cmsTemplates","getTemplate","abe_meta","source","getDataList","complete","getPercentOfRequiredTagsFilled","cmsOperations","save","saveJson","Manager","updatePostInList","publish","docRelativePath","postPath","path","join","pathPublish","page","Page","saveHtml","html","relatedTemplates","Object","keys","Promise","all","map","key","index","relatedTemplate","relTemplate","extension","config","files","templates","fileName","basename","relPath","unpublish","getDocPathFromPostUrl","revision","getDoc","post","remove","removeRevision","removePost","relatedPostPath","newDocPath","getDocPathFromLinkStatusDate","submit","reject","filePath","found","Array","prototype","forEach","call","users","flow","rejectToWorkflow"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/","sourcesContent":["import path from 'path'\n\nimport {\n  cmsData,\n  Page,\n  cmsOperations,\n  cmsTemplates,\n  coreUtils,\n  config,\n  abeExtend,\n  Manager\n} from '../../'\n\nexport async function draft(postUrl, json, workflow = 'draft', user) {\n  abeExtend.hooks.instance.trigger('beforeDraft', json, postUrl)\n\n  const docPath = cmsData.utils.getDocRelativePathFromPostUrl(postUrl)\n  const revisionPath = coreUtils.file.addDateIsoToRevisionPath(docPath, workflow)\n  const date = coreUtils.file.getDate(revisionPath)\n  let result = {\n    success: 0,\n    error: 'cannot json save file'\n  }\n  cmsData.metas.add(json, workflow, date, user)\n\n  const template = cmsTemplates.template.getTemplate(\n    json.abe_meta.template,\n    json\n  )\n\n  await cmsData.source.getDataList(template, json)\n  json['abe_meta'].complete = cmsData.utils.getPercentOfRequiredTagsFilled(\n    template,\n    json\n  )\n\n  var success = await cmsOperations.save.saveJson(revisionPath, json)\n\n  if (success) {\n    await Manager.instance.updatePostInList(revisionPath)\n    result = {\n      success: 1,\n      json: json\n    }\n  }\n\n  return result\n}\n\nexport async function publish(postUrl, json, user) {\n  abeExtend.hooks.instance.trigger('beforePublish', json, postUrl)\n\n  const docRelativePath = cmsData.utils.getDocRelativePathFromPostUrl(postUrl)\n  const postPath = path.join(Manager.instance.pathPublish, postUrl)\n  cmsData.metas.add(json, 'publish', null, user)\n\n  var template = cmsTemplates.template.getTemplate(\n    json.abe_meta.template,\n    json\n  )\n\n  await cmsData.source.getDataList(template, json)\n  json['abe_meta'].complete = cmsData.utils.getPercentOfRequiredTagsFilled(\n    template,\n    json\n  )\n\n  var page = new Page(template, json, true)\n\n  var result\n  if (!cmsOperations.save.saveHtml(postPath, page.html)) {\n    result = {\n      success: 0,\n      error: 'cannot save html file'\n    }\n  } else {\n    if (!await cmsOperations.save.saveJson(docRelativePath, json)) {\n      result = {\n        success: 0,\n        error: 'cannot save json file'\n      }\n    } else {\n      Manager.instance.updatePostInList(docRelativePath)\n      abeExtend.hooks.instance.trigger('afterPublish', json, postUrl)\n      result = {\n        success: 1,\n        json: json\n      }\n    }\n  }\n  // are there additional templates to export?\n  if (json.abe_meta.relatedTemplates) {\n    const relatedTemplates = Object.keys(json.abe_meta.relatedTemplates)\n    await Promise.all(relatedTemplates.map(async (key, index) => {\n      const relatedTemplate = json.abe_meta.relatedTemplates[key]\n\n      if (relatedTemplate.template && relatedTemplate.path) {\n        const relTemplate = cmsTemplates.template.getTemplate(\n          relatedTemplate.template,\n          json\n        )\n        let extension = config.files.templates.extension\n        if (relatedTemplate.extension) extension = relatedTemplate.extension\n        const fileName =\n          path.basename(postUrl, '.' + config.files.templates.extension) +\n          '.' +\n          extension\n        const relPath = path.join(\n          Manager.instance.pathPublish,\n          relatedTemplate.path,\n          fileName\n        )\n\n        await cmsData.source.getDataList(relTemplate, json)\n        const page = new Page(relTemplate, json, true)\n        cmsOperations.save.saveHtml(relPath, page.html)\n      }\n    }))\n  }\n\n  return result\n}\n\nexport async function unpublish(postUrl, user) {\n  abeExtend.hooks.instance.trigger('beforeUnpublish', postUrl)\n  const docPath = cmsData.utils.getDocPathFromPostUrl(postUrl)\n  const postPath = path.join(Manager.instance.pathPublish, postUrl)\n  var json = await cmsData.revision.getDoc(docPath)\n  if (json.abe_meta.publish != null) {\n    delete json.abe_meta.publish\n  }\n\n  var result = await cmsOperations.post.draft(postUrl, json, 'draft', user)\n  cmsOperations.remove.removeRevision(docPath)\n  cmsOperations.remove.removePost(postPath)\n  // are there additional templates to export?\n  if (result.json.abe_meta.relatedTemplates) {\n    Object.keys(result.json.abe_meta.relatedTemplates).map(function(\n      key,\n      index\n    ) {\n      const relatedTemplate = result.json.abe_meta.relatedTemplates[key]\n\n      if (relatedTemplate.template && relatedTemplate.path) {\n        const relTemplate = cmsTemplates.template.getTemplate(\n          relatedTemplate.template,\n          json\n        )\n        let extension = config.files.templates.extension\n        if (relatedTemplate.extension)\n          extension = relatedTemplate.extension\n        const fileName =\n          path.basename(\n            postUrl,\n            '.' + config.files.templates.extension\n          ) +\n          '.' +\n          extension\n        const relatedPostPath = path.join(\n          Manager.instance.pathPublish,\n          relatedTemplate.path,\n          fileName\n        )\n        cmsOperations.remove.removePost(relatedPostPath)\n      }\n    })\n  }\n\n  const newDocPath = cmsData.utils.getDocPathFromLinkStatusDate(\n    result.json\n  )\n  Manager.instance.updatePostInList(newDocPath)\n\n  abeExtend.hooks.instance.trigger(\n    'afterUnpublish',\n    docPath,\n    postPath,\n    result.json\n  )\n  \n  return result.json\n}\n\nexport async function submit(postUrl, json, workflow, user) {\n  var result\n  if (workflow === 'publish') {\n    result = await cmsOperations.post.publish(postUrl, json, user)\n  } else {\n    result = await cmsOperations.post.draft(postUrl, json, workflow, user)\n  }\n\n  return result\n}\n\nexport async function reject(filePath, json, workflow, user) {\n  abeExtend.hooks.instance.trigger('beforeReject', filePath)\n\n  var rejectToWorkflow\n  var found = false\n  Array.prototype.forEach.call(config.users.workflow, flow => {\n    if (workflow === flow) {\n      found = true\n    }\n    if (!found) {\n      rejectToWorkflow = flow\n    }\n  })\n  if (!found) {\n    rejectToWorkflow = 'draft'\n  }\n\n  if (json.abe_meta.publish != null) {\n    delete json.abe_meta.publish\n  }\n  var result = await cmsOperations.post.draft(filePath, json, rejectToWorkflow, user)\n  abeExtend.hooks.instance.trigger('afterReject', result)\n\n  return result\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f56598e4bc9a7179def68b698ed382a3bd1a56d8","contentHash":"4b312089b94fef2f558eaddaae8f2f82cc690129ad82281931c7e643c448e51f"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/remove.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/remove.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":24}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":32}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":40}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":48}},"6":{"start":{"line":13,"column":19},"end":{"line":13,"column":80}},"7":{"start":{"line":15,"column":25},"end":{"line":15,"column":99}},"8":{"start":{"line":17,"column":15},"end":{"line":17,"column":58}},"9":{"start":{"line":19,"column":12},"end":{"line":19,"column":51}},"10":{"start":{"line":21,"column":8},"end":{"line":21,"column":25}},"11":{"start":{"line":24,"column":2},"end":{"line":24,"column":40}},"12":{"start":{"line":28,"column":2},"end":{"line":77,"column":6}},"13":{"start":{"line":30,"column":4},"end":{"line":76,"column":17}},"14":{"start":{"line":31,"column":6},"end":{"line":75,"column":7}},"15":{"start":{"line":32,"column":8},"end":{"line":74,"column":9}},"16":{"start":{"line":34,"column":12},"end":{"line":34,"column":86}},"17":{"start":{"line":35,"column":12},"end":{"line":35,"column":85}},"18":{"start":{"line":36,"column":12},"end":{"line":36,"column":72}},"19":{"start":{"line":37,"column":12},"end":{"line":37,"column":31}},"20":{"start":{"line":38,"column":12},"end":{"line":64,"column":18}},"21":{"start":{"line":39,"column":25},"end":{"line":59,"column":17}},"22":{"start":{"line":41,"column":16},"end":{"line":58,"column":28}},"23":{"start":{"line":42,"column":18},"end":{"line":57,"column":19}},"24":{"start":{"line":43,"column":20},"end":{"line":56,"column":21}},"25":{"start":{"line":45,"column":24},"end":{"line":45,"column":78}},"26":{"start":{"line":46,"column":24},"end":{"line":46,"column":42}},"27":{"start":{"line":47,"column":24},"end":{"line":47,"column":84}},"28":{"start":{"line":50,"column":24},"end":{"line":50,"column":42}},"29":{"start":{"line":51,"column":24},"end":{"line":51,"column":75}},"30":{"start":{"line":55,"column":24},"end":{"line":55,"column":47}},"31":{"start":{"line":61,"column":14},"end":{"line":63,"column":16}},"32":{"start":{"line":62,"column":16},"end":{"line":62,"column":51}},"33":{"start":{"line":67,"column":12},"end":{"line":67,"column":89}},"34":{"start":{"line":69,"column":12},"end":{"line":69,"column":113}},"35":{"start":{"line":73,"column":12},"end":{"line":73,"column":36}},"36":{"start":{"line":78,"column":2},"end":{"line":78,"column":40}},"37":{"start":{"line":82,"column":2},"end":{"line":82,"column":44}},"38":{"start":{"line":86,"column":2},"end":{"line":105,"column":6}},"39":{"start":{"line":87,"column":4},"end":{"line":104,"column":17}},"40":{"start":{"line":88,"column":6},"end":{"line":103,"column":7}},"41":{"start":{"line":89,"column":8},"end":{"line":102,"column":9}},"42":{"start":{"line":91,"column":12},"end":{"line":94,"column":13}},"43":{"start":{"line":92,"column":14},"end":{"line":92,"column":33}},"44":{"start":{"line":93,"column":14},"end":{"line":93,"column":20}},"45":{"start":{"line":96,"column":12},"end":{"line":96,"column":31}},"46":{"start":{"line":97,"column":12},"end":{"line":97,"column":52}},"47":{"start":{"line":101,"column":12},"end":{"line":101,"column":36}},"48":{"start":{"line":106,"column":2},"end":{"line":106,"column":44}},"49":{"start":{"line":110,"column":2},"end":{"line":110,"column":48}},"50":{"start":{"line":114,"column":2},"end":{"line":156,"column":6}},"51":{"start":{"line":116,"column":4},"end":{"line":155,"column":17}},"52":{"start":{"line":117,"column":6},"end":{"line":154,"column":7}},"53":{"start":{"line":118,"column":8},"end":{"line":153,"column":9}},"54":{"start":{"line":120,"column":12},"end":{"line":120,"column":27}},"55":{"start":{"line":122,"column":12},"end":{"line":125,"column":13}},"56":{"start":{"line":123,"column":14},"end":{"line":123,"column":33}},"57":{"start":{"line":124,"column":14},"end":{"line":124,"column":20}},"58":{"start":{"line":127,"column":12},"end":{"line":127,"column":31}},"59":{"start":{"line":128,"column":12},"end":{"line":128,"column":48}},"60":{"start":{"line":131,"column":12},"end":{"line":131,"column":36}},"61":{"start":{"line":132,"column":12},"end":{"line":132,"column":32}},"62":{"start":{"line":133,"column":12},"end":{"line":133,"column":18}},"63":{"start":{"line":136,"column":12},"end":{"line":139,"column":13}},"64":{"start":{"line":137,"column":14},"end":{"line":137,"column":34}},"65":{"start":{"line":138,"column":14},"end":{"line":138,"column":20}},"66":{"start":{"line":141,"column":12},"end":{"line":141,"column":32}},"67":{"start":{"line":142,"column":12},"end":{"line":142,"column":52}},"68":{"start":{"line":145,"column":12},"end":{"line":145,"column":36}},"69":{"start":{"line":148,"column":12},"end":{"line":148,"column":54}},"70":{"start":{"line":152,"column":12},"end":{"line":152,"column":36}},"71":{"start":{"line":157,"column":2},"end":{"line":157,"column":48}},"72":{"start":{"line":161,"column":2},"end":{"line":161,"column":52}},"73":{"start":{"line":165,"column":2},"end":{"line":184,"column":6}},"74":{"start":{"line":166,"column":4},"end":{"line":183,"column":17}},"75":{"start":{"line":167,"column":6},"end":{"line":182,"column":7}},"76":{"start":{"line":168,"column":8},"end":{"line":181,"column":9}},"77":{"start":{"line":170,"column":12},"end":{"line":173,"column":13}},"78":{"start":{"line":171,"column":14},"end":{"line":171,"column":33}},"79":{"start":{"line":172,"column":14},"end":{"line":172,"column":20}},"80":{"start":{"line":175,"column":12},"end":{"line":175,"column":31}},"81":{"start":{"line":176,"column":12},"end":{"line":176,"column":52}},"82":{"start":{"line":180,"column":12},"end":{"line":180,"column":36}},"83":{"start":{"line":185,"column":2},"end":{"line":185,"column":52}}},"fnMap":{"0":{"name":"remove","decl":{"start":{"line":23,"column":9},"end":{"line":23,"column":15}},"loc":{"start":{"line":23,"column":20},"end":{"line":25,"column":1}},"line":23},"1":{"name":"_remove","decl":{"start":{"line":27,"column":9},"end":{"line":27,"column":16}},"loc":{"start":{"line":27,"column":19},"end":{"line":79,"column":1}},"line":27},"2":{"name":"_callee2","decl":{"start":{"line":28,"column":99},"end":{"line":28,"column":107}},"loc":{"start":{"line":28,"column":117},"end":{"line":77,"column":3}},"line":28},"3":{"name":"_callee2$","decl":{"start":{"line":30,"column":49},"end":{"line":30,"column":58}},"loc":{"start":{"line":30,"column":70},"end":{"line":76,"column":5}},"line":30},"4":{"name":"(anonymous_4)","decl":{"start":{"line":38,"column":59},"end":{"line":38,"column":60}},"loc":{"start":{"line":38,"column":71},"end":{"line":64,"column":13}},"line":38},"5":{"name":"_callee","decl":{"start":{"line":39,"column":112},"end":{"line":39,"column":119}},"loc":{"start":{"line":39,"column":130},"end":{"line":59,"column":15}},"line":39},"6":{"name":"_callee$","decl":{"start":{"line":41,"column":61},"end":{"line":41,"column":69}},"loc":{"start":{"line":41,"column":80},"end":{"line":58,"column":17}},"line":41},"7":{"name":"(anonymous_7)","decl":{"start":{"line":61,"column":21},"end":{"line":61,"column":22}},"loc":{"start":{"line":61,"column":36},"end":{"line":63,"column":15}},"line":61},"8":{"name":"removePost","decl":{"start":{"line":81,"column":9},"end":{"line":81,"column":19}},"loc":{"start":{"line":81,"column":25},"end":{"line":83,"column":1}},"line":81},"9":{"name":"_removePost","decl":{"start":{"line":85,"column":9},"end":{"line":85,"column":20}},"loc":{"start":{"line":85,"column":23},"end":{"line":107,"column":1}},"line":85},"10":{"name":"_callee3","decl":{"start":{"line":86,"column":103},"end":{"line":86,"column":111}},"loc":{"start":{"line":86,"column":118},"end":{"line":105,"column":3}},"line":86},"11":{"name":"_callee3$","decl":{"start":{"line":87,"column":49},"end":{"line":87,"column":58}},"loc":{"start":{"line":87,"column":70},"end":{"line":104,"column":5}},"line":87},"12":{"name":"removeRevision","decl":{"start":{"line":109,"column":9},"end":{"line":109,"column":23}},"loc":{"start":{"line":109,"column":29},"end":{"line":111,"column":1}},"line":109},"13":{"name":"_removeRevision","decl":{"start":{"line":113,"column":9},"end":{"line":113,"column":24}},"loc":{"start":{"line":113,"column":27},"end":{"line":158,"column":1}},"line":113},"14":{"name":"_callee4","decl":{"start":{"line":114,"column":107},"end":{"line":114,"column":115}},"loc":{"start":{"line":114,"column":126},"end":{"line":156,"column":3}},"line":114},"15":{"name":"_callee4$","decl":{"start":{"line":116,"column":49},"end":{"line":116,"column":58}},"loc":{"start":{"line":116,"column":70},"end":{"line":155,"column":5}},"line":116},"16":{"name":"removeRevisionFile","decl":{"start":{"line":160,"column":9},"end":{"line":160,"column":27}},"loc":{"start":{"line":160,"column":33},"end":{"line":162,"column":1}},"line":160},"17":{"name":"_removeRevisionFile","decl":{"start":{"line":164,"column":9},"end":{"line":164,"column":28}},"loc":{"start":{"line":164,"column":31},"end":{"line":186,"column":1}},"line":164},"18":{"name":"_callee5","decl":{"start":{"line":165,"column":111},"end":{"line":165,"column":119}},"loc":{"start":{"line":165,"column":126},"end":{"line":184,"column":3}},"line":165},"19":{"name":"_callee5$","decl":{"start":{"line":166,"column":49},"end":{"line":166,"column":58}},"loc":{"start":{"line":166,"column":70},"end":{"line":183,"column":5}},"line":166}},"branchMap":{"0":{"loc":{"start":{"line":32,"column":8},"end":{"line":74,"column":9}},"type":"switch","locations":[{"start":{"line":33,"column":10},"end":{"line":64,"column":18}},{"start":{"line":66,"column":10},"end":{"line":69,"column":113}},{"start":{"line":71,"column":10},"end":{"line":71,"column":17}},{"start":{"line":72,"column":10},"end":{"line":73,"column":36}}],"line":32},"1":{"loc":{"start":{"line":43,"column":20},"end":{"line":56,"column":21}},"type":"switch","locations":[{"start":{"line":44,"column":22},"end":{"line":47,"column":84}},{"start":{"line":49,"column":22},"end":{"line":51,"column":75}},{"start":{"line":53,"column":22},"end":{"line":53,"column":29}},{"start":{"line":54,"column":22},"end":{"line":55,"column":47}}],"line":43},"2":{"loc":{"start":{"line":89,"column":8},"end":{"line":102,"column":9}},"type":"switch","locations":[{"start":{"line":90,"column":10},"end":{"line":97,"column":52}},{"start":{"line":99,"column":10},"end":{"line":99,"column":17}},{"start":{"line":100,"column":10},"end":{"line":101,"column":36}}],"line":89},"3":{"loc":{"start":{"line":91,"column":12},"end":{"line":94,"column":13}},"type":"if","locations":[{"start":{"line":91,"column":12},"end":{"line":94,"column":13}},{"start":{"line":91,"column":12},"end":{"line":94,"column":13}}],"line":91},"4":{"loc":{"start":{"line":118,"column":8},"end":{"line":153,"column":9}},"type":"switch","locations":[{"start":{"line":119,"column":10},"end":{"line":128,"column":48}},{"start":{"line":130,"column":10},"end":{"line":133,"column":18}},{"start":{"line":135,"column":10},"end":{"line":142,"column":52}},{"start":{"line":144,"column":10},"end":{"line":145,"column":36}},{"start":{"line":147,"column":10},"end":{"line":148,"column":54}},{"start":{"line":150,"column":10},"end":{"line":150,"column":18}},{"start":{"line":151,"column":10},"end":{"line":152,"column":36}}],"line":118},"5":{"loc":{"start":{"line":122,"column":12},"end":{"line":125,"column":13}},"type":"if","locations":[{"start":{"line":122,"column":12},"end":{"line":125,"column":13}},{"start":{"line":122,"column":12},"end":{"line":125,"column":13}}],"line":122},"6":{"loc":{"start":{"line":136,"column":12},"end":{"line":139,"column":13}},"type":"if","locations":[{"start":{"line":136,"column":12},"end":{"line":139,"column":13}},{"start":{"line":136,"column":12},"end":{"line":139,"column":13}}],"line":136},"7":{"loc":{"start":{"line":168,"column":8},"end":{"line":181,"column":9}},"type":"switch","locations":[{"start":{"line":169,"column":10},"end":{"line":176,"column":52}},{"start":{"line":178,"column":10},"end":{"line":178,"column":17}},{"start":{"line":179,"column":10},"end":{"line":180,"column":36}}],"line":168},"8":{"loc":{"start":{"line":170,"column":12},"end":{"line":173,"column":13}},"type":"if","locations":[{"start":{"line":170,"column":12},"end":{"line":173,"column":13}},{"start":{"line":170,"column":12},"end":{"line":173,"column":13}}],"line":170}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":2,"15":2,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":1,"34":1,"35":1,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":1,"51":1,"52":3,"53":4,"54":1,"55":1,"56":0,"57":0,"58":1,"59":1,"60":1,"61":1,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":2,"77":1,"78":1,"79":1,"80":0,"81":0,"82":1,"83":1},"f":{"0":1,"1":1,"2":1,"3":2,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":3,"16":1,"17":1,"18":1,"19":1},"b":{"0":[1,1,1,1],"1":[0,0,0,0],"2":[0,0,0],"3":[0,0],"4":[1,1,0,0,1,0,1],"5":[0,1],"6":[0,0],"7":[1,1,1],"8":[1,0]},"inputSourceMap":{"version":3,"sources":["remove.js"],"names":["remove","postUrl","abeExtend","hooks","instance","trigger","docRelativePath","cmsData","utils","getDocRelativePathFromPostUrl","revisions","revision","getVersions","Promise","all","map","postPath","getPostPath","path","cmsOperations","removeRevision","removePost","Manager","removePostFromList","replace","RegExp","sep","file","coreUtils","exist","fse","jsonPath","result","config","database","type","removeRevisionFile","mongo"],"mappings":";;;;;;;;;;;;;;;;AAAA;;AACA;;AAEA;;SAUsBA,M;;;;;0FAAf,kBAAsBC,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AACLA,YAAAA,OAAO,GAAGC,YAAUC,KAAV,CAAgBC,QAAhB,CAAyBC,OAAzB,CAAiC,kBAAjC,EAAqDJ,OAArD,CAAV;AAEMK,YAAAA,eAHD,GAGmBC,UAAQC,KAAR,CAAcC,6BAAd,CAA4CR,OAA5C,CAHnB;AAICS,YAAAA,SAJD,GAIaH,UAAQI,QAAR,CAAiBC,WAAjB,CAA6BN,eAA7B,CAJb;AAAA;AAAA,mBAMCO,OAAO,CAACC,GAAR,CAAYJ,SAAS,CAACK,GAAV;AAAA,uGAAc,iBAAMJ,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACxBK,wBAAAA,QADwB,GACbT,UAAQC,KAAR,CAAcS,WAAd,CAA0BN,QAAQ,CAACO,IAAnC,CADa;AAAA;AAAA,+BAExBC,gBAAcnB,MAAd,CAAqBoB,cAArB,CAAoCT,QAAQ,CAACO,IAA7C,CAFwB;;AAAA;AAAA;AAAA,+BAGxBC,gBAAcnB,MAAd,CAAqBqB,UAArB,CAAgCL,QAAhC,CAHwB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAd;;AAAA;AAAA;AAAA;AAAA,gBAAZ,CAND;;AAAA;AAYLf,YAAAA,OAAO,GAAGC,YAAUC,KAAV,CAAgBC,QAAhB,CAAyBC,OAAzB,CAAiC,iBAAjC,EAAoDJ,OAApD,EAA6D,EAA7D,CAAV;;AAEAqB,sBAAQlB,QAAR,CAAiBmB,kBAAjB,CACEtB,OAAO,CAACuB,OAAR,CAAgB,IAAIC,MAAJ,CAAW,KAAX,EAAkB,GAAlB,CAAhB,EAAwCP,iBAAKQ,GAA7C,CADF;;AAdK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAmBeL,U;;;;;8FAAf,kBAA0BM,IAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,iBACDC,YAAUD,IAAV,CAAeE,KAAf,CAAqBF,IAArB,CADC;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAEGG,oBAAI9B,MAAJ,CAAW2B,IAAX,CAFH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAMeP,c;;;;;kGAAf,kBAA8BW,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAEDC,YAAAA,MAFC,GAEQ,KAFR;;AAAA,kBAGDC,SAAOC,QAAP,CAAgBC,IAAhB,IAAwB,MAHvB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAIYC,kBAAkB,CAACL,QAAD,CAJ9B;;AAAA;AAIHC,YAAAA,MAJG;AAAA;AAAA;;AAAA;AAAA,kBAMIC,SAAOC,QAAP,CAAgBC,IAAhB,IAAwB,OAN5B;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAOYE,QAAMjB,cAAN,CAAqBW,QAArB,CAPZ;;AAAA;AAOHC,YAAAA,MAPG;;AAAA;AAAA,8CAUEA,MAVF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAaeI,kB;;;;;sGAAf,kBAAkCT,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA,iBACDC,YAAUD,IAAV,CAAeE,KAAf,CAAqBF,IAArB,CADC;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAEGG,oBAAI9B,MAAJ,CAAW2B,IAAX,CAFH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/","sourcesContent":["import fse from 'fs-extra'\nimport path from 'path'\n\nimport {\n  config,\n  mongo,\n  abeExtend,\n  cmsData,\n  coreUtils,\n  cmsOperations,\n  Manager\n} from '../../'\n\nexport async function remove(postUrl) {\n  postUrl = abeExtend.hooks.instance.trigger('beforeDeleteFile', postUrl)\n\n  const docRelativePath = cmsData.utils.getDocRelativePathFromPostUrl(postUrl)\n  const revisions = cmsData.revision.getVersions(docRelativePath)\n\n  await Promise.all(revisions.map(async revision => {\n    const postPath = cmsData.utils.getPostPath(revision.path)\n    await cmsOperations.remove.removeRevision(revision.path)\n    await cmsOperations.remove.removePost(postPath)\n  }));\n\n  postUrl = abeExtend.hooks.instance.trigger('afterDeleteFile', postUrl, {})\n\n  Manager.instance.removePostFromList(\n    postUrl.replace(new RegExp('\\\\/', 'g'), path.sep)\n  )\n}\n\nexport async function removePost(file) {\n  if (coreUtils.file.exist(file)) {\n    await fse.remove(file)\n  }\n}\n\nexport async function removeRevision(jsonPath) {\n\n  let result = false;\n  if (config.database.type == \"file\") {\n    result = await removeRevisionFile(jsonPath);\n  }\n  else if (config.database.type == \"mongo\") {\n    result = await mongo.removeRevision(jsonPath);\n  }\n\n  return result\n}\n\nexport async function removeRevisionFile(file) {\n  if (coreUtils.file.exist(file)) {\n    await fse.remove(file)\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5334265d455060bf9101707e969511b951d4f046","contentHash":"6f89bbe4b0e37914a78601cd0e9d02ebfebfe8970491ff784b701d73af7591dc"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/abify.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/abify.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":22}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":51}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":25}},"7":{"start":{"line":25,"column":2},"end":{"line":25,"column":39}},"8":{"start":{"line":29,"column":2},"end":{"line":58,"column":6}},"9":{"start":{"line":32,"column":16},"end":{"line":32,"column":25}},"10":{"start":{"line":33,"column":4},"end":{"line":57,"column":16}},"11":{"start":{"line":34,"column":6},"end":{"line":56,"column":7}},"12":{"start":{"line":35,"column":8},"end":{"line":55,"column":9}},"13":{"start":{"line":37,"column":12},"end":{"line":37,"column":84}},"14":{"start":{"line":39,"column":12},"end":{"line":39,"column":68}},"15":{"start":{"line":41,"column":12},"end":{"line":43,"column":13}},"16":{"start":{"line":42,"column":14},"end":{"line":42,"column":91}},"17":{"start":{"line":45,"column":12},"end":{"line":45,"column":30}},"18":{"start":{"line":46,"column":12},"end":{"line":46,"column":64}},"19":{"start":{"line":49,"column":12},"end":{"line":49,"column":46}},"20":{"start":{"line":50,"column":12},"end":{"line":50,"column":56}},"21":{"start":{"line":54,"column":12},"end":{"line":54,"column":35}},"22":{"start":{"line":59,"column":2},"end":{"line":59,"column":39}}},"fnMap":{"0":{"name":"abify","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":14}},"loc":{"start":{"line":24,"column":19},"end":{"line":26,"column":1}},"line":24},"1":{"name":"_abify","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":15}},"loc":{"start":{"line":28,"column":18},"end":{"line":60,"column":1}},"line":28},"2":{"name":"_callee","decl":{"start":{"line":29,"column":98},"end":{"line":29,"column":105}},"loc":{"start":{"line":29,"column":112},"end":{"line":58,"column":3}},"line":29},"3":{"name":"_callee$","decl":{"start":{"line":33,"column":49},"end":{"line":33,"column":57}},"loc":{"start":{"line":33,"column":68},"end":{"line":57,"column":5}},"line":33}},"branchMap":{"0":{"loc":{"start":{"line":35,"column":8},"end":{"line":55,"column":9}},"type":"switch","locations":[{"start":{"line":36,"column":10},"end":{"line":46,"column":64}},{"start":{"line":48,"column":10},"end":{"line":50,"column":56}},{"start":{"line":52,"column":10},"end":{"line":52,"column":17}},{"start":{"line":53,"column":10},"end":{"line":54,"column":35}}],"line":35},"1":{"loc":{"start":{"line":37,"column":23},"end":{"line":37,"column":83}},"type":"cond-expr","locations":[{"start":{"line":37,"column":68},"end":{"line":37,"column":76}},{"start":{"line":37,"column":79},"end":{"line":37,"column":83}}],"line":37},"2":{"loc":{"start":{"line":37,"column":23},"end":{"line":37,"column":65}},"type":"binary-expr","locations":[{"start":{"line":37,"column":23},"end":{"line":37,"column":39}},{"start":{"line":37,"column":43},"end":{"line":37,"column":65}}],"line":37},"3":{"loc":{"start":{"line":41,"column":12},"end":{"line":43,"column":13}},"type":"if","locations":[{"start":{"line":41,"column":12},"end":{"line":43,"column":13}},{"start":{"line":41,"column":12},"end":{"line":43,"column":13}}],"line":41}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0,0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"sources":["abify.js"],"names":["abify","json","template","abeExtend","hooks","instance","trigger","cmsTemplates","getTemplate","abe_meta","cmsData","source","getDataList","page","Page","html"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA;;AAEA;;;;;;SAMsBA,K;;;;;yFAAf,iBAAqBC,IAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2BC,YAAAA,QAA3B,2DAAsC,IAAtC;;AACHC,wBAAUC,KAAV,CAAgBC,QAAhB,CAAyBC,OAAzB,CAAiC,aAAjC,EAAgDL,IAAhD;;AAEA,gBAAIC,QAAQ,KAAK,IAAjB,EAAuB;AACrBA,cAAAA,QAAQ,GAAGK,eAAaL,QAAb,CAAsBM,WAAtB,CAAkCP,IAAI,CAACQ,QAAL,CAAcP,QAAhD,EAA0DD,IAA1D,CAAX;AACD;;AALE;AAAA,mBAOGS,UAAQC,MAAR,CAAeC,WAAf,CAA2BV,QAA3B,EAAqCD,IAArC,CAPH;;AAAA;AAQGY,YAAAA,IARH,GAQU,IAAIC,MAAJ,CAASZ,QAAT,EAAmBD,IAAnB,CARV;AAAA,6CAUIY,IAAI,CAACE,IAVT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/","sourcesContent":["import path from 'path'\n\nimport {cmsData, Page, cmsTemplates, abeExtend} from '../../'\n\n/**\n * This function takes a json and optionally a template (in HTML) and returns its abified version (HTML)\n * @param  {[type]} json     [description]\n * @param  {[type]} template [description]\n * @return {[type]}          [description]\n */\nexport async function abify(json, template = null) {\n    abeExtend.hooks.instance.trigger('beforeAbify', json)\n\n    if (template === null) {\n      template = cmsTemplates.template.getTemplate(json.abe_meta.template, json)\n    }\n\n    await cmsData.source.getDataList(template, json)\n    const page = new Page(template, json)\n\n    return page.html\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8c7a8f3a1f2f406f2e98fd352d41879994845435","contentHash":"1cbe8cd465d8eb18d50d6f1328aaf057a6cf0a194a519ec7da3f5061e199686b"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/initSite.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/initSite.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":23},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":20},"end":{"line":12,"column":89}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":51}},"6":{"start":{"line":16,"column":14},"end":{"line":16,"column":55}},"7":{"start":{"line":18,"column":16},"end":{"line":18,"column":35}},"8":{"start":{"line":20,"column":15},"end":{"line":20,"column":57}},"9":{"start":{"line":22,"column":16},"end":{"line":22,"column":59}},"10":{"start":{"line":24,"column":16},"end":{"line":24,"column":60}},"11":{"start":{"line":26,"column":13},"end":{"line":26,"column":53}},"12":{"start":{"line":28,"column":8},"end":{"line":28,"column":25}},"13":{"start":{"line":30,"column":28},"end":{"line":466,"column":3}},"14":{"start":{"line":32,"column":4},"end":{"line":32,"column":53}},"15":{"start":{"line":35,"column":2},"end":{"line":464,"column":6}},"16":{"start":{"line":38,"column":18},"end":{"line":38,"column":22}},"17":{"start":{"line":40,"column":14},"end":{"line":74,"column":8}},"18":{"start":{"line":41,"column":8},"end":{"line":73,"column":11}},"19":{"start":{"line":42,"column":10},"end":{"line":42,"column":158}},"20":{"start":{"line":43,"column":10},"end":{"line":43,"column":156}},"21":{"start":{"line":44,"column":10},"end":{"line":44,"column":58}},"22":{"start":{"line":45,"column":10},"end":{"line":47,"column":13}},"23":{"start":{"line":48,"column":10},"end":{"line":48,"column":57}},"24":{"start":{"line":50,"column":10},"end":{"line":69,"column":13}},"25":{"start":{"line":51,"column":12},"end":{"line":51,"column":36}},"26":{"start":{"line":53,"column":12},"end":{"line":53,"column":50}},"27":{"start":{"line":55,"column":12},"end":{"line":55,"column":52}},"28":{"start":{"line":57,"column":12},"end":{"line":57,"column":52}},"29":{"start":{"line":59,"column":12},"end":{"line":59,"column":48}},"30":{"start":{"line":61,"column":12},"end":{"line":61,"column":112}},"31":{"start":{"line":63,"column":12},"end":{"line":63,"column":111}},"32":{"start":{"line":65,"column":12},"end":{"line":65,"column":22}},"33":{"start":{"line":67,"column":12},"end":{"line":67,"column":35}},"34":{"start":{"line":68,"column":12},"end":{"line":68,"column":22}},"35":{"start":{"line":71,"column":10},"end":{"line":71,"column":33}},"36":{"start":{"line":72,"column":10},"end":{"line":72,"column":20}},"37":{"start":{"line":75,"column":6},"end":{"line":75,"column":15}},"38":{"start":{"line":80,"column":14},"end":{"line":84,"column":8}},"39":{"start":{"line":81,"column":8},"end":{"line":81,"column":40}},"40":{"start":{"line":83,"column":8},"end":{"line":83,"column":18}},"41":{"start":{"line":85,"column":6},"end":{"line":85,"column":15}},"42":{"start":{"line":90,"column":14},"end":{"line":139,"column":8}},"43":{"start":{"line":91,"column":8},"end":{"line":136,"column":9}},"44":{"start":{"line":92,"column":10},"end":{"line":92,"column":55}},"45":{"start":{"line":93,"column":21},"end":{"line":93,"column":23}},"46":{"start":{"line":94,"column":34},"end":{"line":94,"column":38}},"47":{"start":{"line":96,"column":10},"end":{"line":99,"column":11}},"48":{"start":{"line":97,"column":12},"end":{"line":97,"column":45}},"49":{"start":{"line":98,"column":12},"end":{"line":98,"column":38}},"50":{"start":{"line":101,"column":26},"end":{"line":103,"column":11}},"51":{"start":{"line":105,"column":10},"end":{"line":116,"column":11}},"52":{"start":{"line":106,"column":12},"end":{"line":112,"column":13}},"53":{"start":{"line":107,"column":14},"end":{"line":107,"column":37}},"54":{"start":{"line":109,"column":14},"end":{"line":111,"column":15}},"55":{"start":{"line":110,"column":16},"end":{"line":110,"column":39}},"56":{"start":{"line":114,"column":12},"end":{"line":114,"column":35}},"57":{"start":{"line":115,"column":12},"end":{"line":115,"column":169}},"58":{"start":{"line":118,"column":10},"end":{"line":118,"column":30}},"59":{"start":{"line":120,"column":18},"end":{"line":129,"column":11}},"60":{"start":{"line":131,"column":10},"end":{"line":131,"column":45}},"61":{"start":{"line":133,"column":22},"end":{"line":133,"column":46}},"62":{"start":{"line":135,"column":10},"end":{"line":135,"column":52}},"63":{"start":{"line":138,"column":8},"end":{"line":138,"column":18}},"64":{"start":{"line":140,"column":6},"end":{"line":140,"column":15}},"65":{"start":{"line":145,"column":14},"end":{"line":172,"column":8}},"66":{"start":{"line":146,"column":8},"end":{"line":171,"column":9}},"67":{"start":{"line":147,"column":10},"end":{"line":168,"column":11}},"68":{"start":{"line":148,"column":12},"end":{"line":148,"column":65}},"69":{"start":{"line":150,"column":12},"end":{"line":154,"column":15}},"70":{"start":{"line":151,"column":14},"end":{"line":151,"column":24}},"71":{"start":{"line":153,"column":14},"end":{"line":153,"column":24}},"72":{"start":{"line":156,"column":12},"end":{"line":167,"column":13}},"73":{"start":{"line":157,"column":14},"end":{"line":157,"column":70}},"74":{"start":{"line":158,"column":14},"end":{"line":158,"column":24}},"75":{"start":{"line":160,"column":14},"end":{"line":160,"column":92}},"76":{"start":{"line":162,"column":14},"end":{"line":166,"column":17}},"77":{"start":{"line":163,"column":16},"end":{"line":163,"column":26}},"78":{"start":{"line":165,"column":16},"end":{"line":165,"column":26}},"79":{"start":{"line":170,"column":10},"end":{"line":170,"column":20}},"80":{"start":{"line":173,"column":6},"end":{"line":173,"column":15}},"81":{"start":{"line":178,"column":14},"end":{"line":321,"column":8}},"82":{"start":{"line":179,"column":8},"end":{"line":320,"column":11}},"83":{"start":{"line":191,"column":12},"end":{"line":191,"column":34}},"84":{"start":{"line":198,"column":12},"end":{"line":198,"column":62}},"85":{"start":{"line":205,"column":12},"end":{"line":205,"column":59}},"86":{"start":{"line":213,"column":12},"end":{"line":213,"column":59}},"87":{"start":{"line":220,"column":12},"end":{"line":220,"column":59}},"88":{"start":{"line":227,"column":12},"end":{"line":227,"column":59}},"89":{"start":{"line":235,"column":12},"end":{"line":235,"column":51}},"90":{"start":{"line":242,"column":12},"end":{"line":242,"column":51}},"91":{"start":{"line":249,"column":12},"end":{"line":249,"column":51}},"92":{"start":{"line":256,"column":12},"end":{"line":256,"column":51}},"93":{"start":{"line":263,"column":12},"end":{"line":263,"column":51}},"94":{"start":{"line":272,"column":12},"end":{"line":272,"column":50}},"95":{"start":{"line":279,"column":12},"end":{"line":279,"column":50}},"96":{"start":{"line":286,"column":12},"end":{"line":286,"column":50}},"97":{"start":{"line":295,"column":12},"end":{"line":295,"column":50}},"98":{"start":{"line":302,"column":12},"end":{"line":302,"column":50}},"99":{"start":{"line":309,"column":12},"end":{"line":309,"column":103}},"100":{"start":{"line":316,"column":12},"end":{"line":316,"column":102}},"101":{"start":{"line":319,"column":10},"end":{"line":319,"column":27}},"102":{"start":{"line":322,"column":6},"end":{"line":322,"column":15}},"103":{"start":{"line":327,"column":14},"end":{"line":376,"column":8}},"104":{"start":{"line":328,"column":8},"end":{"line":375,"column":11}},"105":{"start":{"line":374,"column":10},"end":{"line":374,"column":27}},"106":{"start":{"line":377,"column":6},"end":{"line":377,"column":15}},"107":{"start":{"line":382,"column":14},"end":{"line":461,"column":8}},"108":{"start":{"line":383,"column":8},"end":{"line":460,"column":11}},"109":{"start":{"line":399,"column":12},"end":{"line":399,"column":33}},"110":{"start":{"line":406,"column":12},"end":{"line":406,"column":71}},"111":{"start":{"line":419,"column":12},"end":{"line":419,"column":36}},"112":{"start":{"line":427,"column":12},"end":{"line":427,"column":36}},"113":{"start":{"line":430,"column":23},"end":{"line":430,"column":63}},"114":{"start":{"line":432,"column":12},"end":{"line":434,"column":13}},"115":{"start":{"line":433,"column":14},"end":{"line":433,"column":26}},"116":{"start":{"line":436,"column":12},"end":{"line":436,"column":56}},"117":{"start":{"line":444,"column":12},"end":{"line":444,"column":36}},"118":{"start":{"line":447,"column":28},"end":{"line":450,"column":14}},"119":{"start":{"line":452,"column":12},"end":{"line":454,"column":13}},"120":{"start":{"line":453,"column":14},"end":{"line":453,"column":197}},"121":{"start":{"line":456,"column":12},"end":{"line":456,"column":24}},"122":{"start":{"line":459,"column":10},"end":{"line":459,"column":27}},"123":{"start":{"line":462,"column":6},"end":{"line":462,"column":15}},"124":{"start":{"line":465,"column":2},"end":{"line":465,"column":18}},"125":{"start":{"line":468,"column":0},"end":{"line":468,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":30,"column":28},"end":{"line":30,"column":29}},"loc":{"start":{"line":30,"column":40},"end":{"line":466,"column":1}},"line":30},"1":{"name":"initSite","decl":{"start":{"line":31,"column":11},"end":{"line":31,"column":19}},"loc":{"start":{"line":31,"column":22},"end":{"line":33,"column":3}},"line":31},"2":{"name":"init","decl":{"start":{"line":37,"column":20},"end":{"line":37,"column":24}},"loc":{"start":{"line":37,"column":35},"end":{"line":76,"column":5}},"line":37},"3":{"name":"(anonymous_3)","decl":{"start":{"line":40,"column":36},"end":{"line":40,"column":37}},"loc":{"start":{"line":40,"column":55},"end":{"line":74,"column":7}},"line":40},"4":{"name":"(anonymous_4)","decl":{"start":{"line":41,"column":39},"end":{"line":41,"column":40}},"loc":{"start":{"line":41,"column":51},"end":{"line":70,"column":9}},"line":41},"5":{"name":"(anonymous_5)","decl":{"start":{"line":50,"column":41},"end":{"line":50,"column":42}},"loc":{"start":{"line":50,"column":53},"end":{"line":66,"column":11}},"line":50},"6":{"name":"(anonymous_6)","decl":{"start":{"line":66,"column":22},"end":{"line":66,"column":23}},"loc":{"start":{"line":66,"column":35},"end":{"line":69,"column":11}},"line":66},"7":{"name":"(anonymous_7)","decl":{"start":{"line":70,"column":20},"end":{"line":70,"column":21}},"loc":{"start":{"line":70,"column":33},"end":{"line":73,"column":9}},"line":70},"8":{"name":"addFolder","decl":{"start":{"line":79,"column":20},"end":{"line":79,"column":29}},"loc":{"start":{"line":79,"column":38},"end":{"line":86,"column":5}},"line":79},"9":{"name":"(anonymous_9)","decl":{"start":{"line":80,"column":36},"end":{"line":80,"column":37}},"loc":{"start":{"line":80,"column":55},"end":{"line":84,"column":7}},"line":80},"10":{"name":"updateSecurity","decl":{"start":{"line":89,"column":20},"end":{"line":89,"column":34}},"loc":{"start":{"line":89,"column":44},"end":{"line":141,"column":5}},"line":89},"11":{"name":"(anonymous_11)","decl":{"start":{"line":90,"column":36},"end":{"line":90,"column":37}},"loc":{"start":{"line":90,"column":55},"end":{"line":139,"column":7}},"line":90},"12":{"name":"updateTheme","decl":{"start":{"line":144,"column":20},"end":{"line":144,"column":31}},"loc":{"start":{"line":144,"column":41},"end":{"line":174,"column":5}},"line":144},"13":{"name":"(anonymous_13)","decl":{"start":{"line":145,"column":36},"end":{"line":145,"column":37}},"loc":{"start":{"line":145,"column":55},"end":{"line":172,"column":7}},"line":145},"14":{"name":"(anonymous_14)","decl":{"start":{"line":150,"column":141},"end":{"line":150,"column":142}},"loc":{"start":{"line":150,"column":157},"end":{"line":152,"column":13}},"line":150},"15":{"name":"(anonymous_15)","decl":{"start":{"line":152,"column":24},"end":{"line":152,"column":25}},"loc":{"start":{"line":152,"column":37},"end":{"line":154,"column":13}},"line":152},"16":{"name":"(anonymous_16)","decl":{"start":{"line":162,"column":143},"end":{"line":162,"column":144}},"loc":{"start":{"line":162,"column":159},"end":{"line":164,"column":15}},"line":162},"17":{"name":"(anonymous_17)","decl":{"start":{"line":164,"column":26},"end":{"line":164,"column":27}},"loc":{"start":{"line":164,"column":39},"end":{"line":166,"column":15}},"line":164},"18":{"name":"askDeploymentQuestions","decl":{"start":{"line":177,"column":20},"end":{"line":177,"column":42}},"loc":{"start":{"line":177,"column":45},"end":{"line":323,"column":5}},"line":177},"19":{"name":"(anonymous_19)","decl":{"start":{"line":178,"column":36},"end":{"line":178,"column":37}},"loc":{"start":{"line":178,"column":55},"end":{"line":321,"column":7}},"line":178},"20":{"name":"when","decl":{"start":{"line":190,"column":25},"end":{"line":190,"column":29}},"loc":{"start":{"line":190,"column":39},"end":{"line":192,"column":11}},"line":190},"21":{"name":"when","decl":{"start":{"line":197,"column":25},"end":{"line":197,"column":29}},"loc":{"start":{"line":197,"column":39},"end":{"line":199,"column":11}},"line":197},"22":{"name":"when","decl":{"start":{"line":204,"column":25},"end":{"line":204,"column":29}},"loc":{"start":{"line":204,"column":39},"end":{"line":206,"column":11}},"line":204},"23":{"name":"when","decl":{"start":{"line":212,"column":25},"end":{"line":212,"column":29}},"loc":{"start":{"line":212,"column":39},"end":{"line":214,"column":11}},"line":212},"24":{"name":"when","decl":{"start":{"line":219,"column":25},"end":{"line":219,"column":29}},"loc":{"start":{"line":219,"column":39},"end":{"line":221,"column":11}},"line":219},"25":{"name":"when","decl":{"start":{"line":226,"column":25},"end":{"line":226,"column":29}},"loc":{"start":{"line":226,"column":39},"end":{"line":228,"column":11}},"line":226},"26":{"name":"when","decl":{"start":{"line":234,"column":25},"end":{"line":234,"column":29}},"loc":{"start":{"line":234,"column":39},"end":{"line":236,"column":11}},"line":234},"27":{"name":"when","decl":{"start":{"line":241,"column":25},"end":{"line":241,"column":29}},"loc":{"start":{"line":241,"column":39},"end":{"line":243,"column":11}},"line":241},"28":{"name":"when","decl":{"start":{"line":248,"column":25},"end":{"line":248,"column":29}},"loc":{"start":{"line":248,"column":39},"end":{"line":250,"column":11}},"line":248},"29":{"name":"when","decl":{"start":{"line":255,"column":25},"end":{"line":255,"column":29}},"loc":{"start":{"line":255,"column":39},"end":{"line":257,"column":11}},"line":255},"30":{"name":"when","decl":{"start":{"line":262,"column":25},"end":{"line":262,"column":29}},"loc":{"start":{"line":262,"column":39},"end":{"line":264,"column":11}},"line":262},"31":{"name":"when","decl":{"start":{"line":271,"column":25},"end":{"line":271,"column":29}},"loc":{"start":{"line":271,"column":39},"end":{"line":273,"column":11}},"line":271},"32":{"name":"when","decl":{"start":{"line":278,"column":25},"end":{"line":278,"column":29}},"loc":{"start":{"line":278,"column":39},"end":{"line":280,"column":11}},"line":278},"33":{"name":"when","decl":{"start":{"line":285,"column":25},"end":{"line":285,"column":29}},"loc":{"start":{"line":285,"column":39},"end":{"line":287,"column":11}},"line":285},"34":{"name":"when","decl":{"start":{"line":294,"column":25},"end":{"line":294,"column":29}},"loc":{"start":{"line":294,"column":39},"end":{"line":296,"column":11}},"line":294},"35":{"name":"when","decl":{"start":{"line":301,"column":25},"end":{"line":301,"column":29}},"loc":{"start":{"line":301,"column":39},"end":{"line":303,"column":11}},"line":301},"36":{"name":"when","decl":{"start":{"line":308,"column":25},"end":{"line":308,"column":29}},"loc":{"start":{"line":308,"column":39},"end":{"line":310,"column":11}},"line":308},"37":{"name":"when","decl":{"start":{"line":315,"column":25},"end":{"line":315,"column":29}},"loc":{"start":{"line":315,"column":39},"end":{"line":317,"column":11}},"line":315},"38":{"name":"(anonymous_38)","decl":{"start":{"line":318,"column":17},"end":{"line":318,"column":18}},"loc":{"start":{"line":318,"column":36},"end":{"line":320,"column":9}},"line":318},"39":{"name":"askPluginsQuestions","decl":{"start":{"line":326,"column":20},"end":{"line":326,"column":39}},"loc":{"start":{"line":326,"column":42},"end":{"line":378,"column":5}},"line":326},"40":{"name":"(anonymous_40)","decl":{"start":{"line":327,"column":36},"end":{"line":327,"column":37}},"loc":{"start":{"line":327,"column":55},"end":{"line":376,"column":7}},"line":327},"41":{"name":"(anonymous_41)","decl":{"start":{"line":373,"column":17},"end":{"line":373,"column":18}},"loc":{"start":{"line":373,"column":36},"end":{"line":375,"column":9}},"line":373},"42":{"name":"askQuestions","decl":{"start":{"line":381,"column":20},"end":{"line":381,"column":32}},"loc":{"start":{"line":381,"column":35},"end":{"line":463,"column":5}},"line":381},"43":{"name":"(anonymous_43)","decl":{"start":{"line":382,"column":36},"end":{"line":382,"column":37}},"loc":{"start":{"line":382,"column":55},"end":{"line":461,"column":7}},"line":382},"44":{"name":"when","decl":{"start":{"line":398,"column":25},"end":{"line":398,"column":29}},"loc":{"start":{"line":398,"column":39},"end":{"line":400,"column":11}},"line":398},"45":{"name":"when","decl":{"start":{"line":405,"column":25},"end":{"line":405,"column":29}},"loc":{"start":{"line":405,"column":39},"end":{"line":407,"column":11}},"line":405},"46":{"name":"when","decl":{"start":{"line":418,"column":25},"end":{"line":418,"column":29}},"loc":{"start":{"line":418,"column":39},"end":{"line":420,"column":11}},"line":418},"47":{"name":"when","decl":{"start":{"line":426,"column":25},"end":{"line":426,"column":29}},"loc":{"start":{"line":426,"column":39},"end":{"line":428,"column":11}},"line":426},"48":{"name":"validate","decl":{"start":{"line":429,"column":29},"end":{"line":429,"column":37}},"loc":{"start":{"line":429,"column":45},"end":{"line":437,"column":11}},"line":429},"49":{"name":"when","decl":{"start":{"line":443,"column":25},"end":{"line":443,"column":29}},"loc":{"start":{"line":443,"column":39},"end":{"line":445,"column":11}},"line":443},"50":{"name":"validate","decl":{"start":{"line":446,"column":29},"end":{"line":446,"column":37}},"loc":{"start":{"line":446,"column":54},"end":{"line":457,"column":11}},"line":446},"51":{"name":"(anonymous_51)","decl":{"start":{"line":458,"column":17},"end":{"line":458,"column":18}},"loc":{"start":{"line":458,"column":36},"end":{"line":460,"column":9}},"line":458}},"branchMap":{"0":{"loc":{"start":{"line":91,"column":8},"end":{"line":136,"column":9}},"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":136,"column":9}},{"start":{"line":91,"column":8},"end":{"line":136,"column":9}}],"line":91},"1":{"loc":{"start":{"line":96,"column":10},"end":{"line":99,"column":11}},"type":"if","locations":[{"start":{"line":96,"column":10},"end":{"line":99,"column":11}},{"start":{"line":96,"column":10},"end":{"line":99,"column":11}}],"line":96},"2":{"loc":{"start":{"line":105,"column":10},"end":{"line":116,"column":11}},"type":"if","locations":[{"start":{"line":105,"column":10},"end":{"line":116,"column":11}},{"start":{"line":105,"column":10},"end":{"line":116,"column":11}}],"line":105},"3":{"loc":{"start":{"line":106,"column":12},"end":{"line":112,"column":13}},"type":"if","locations":[{"start":{"line":106,"column":12},"end":{"line":112,"column":13}},{"start":{"line":106,"column":12},"end":{"line":112,"column":13}}],"line":106},"4":{"loc":{"start":{"line":106,"column":16},"end":{"line":106,"column":72}},"type":"binary-expr","locations":[{"start":{"line":106,"column":16},"end":{"line":106,"column":49}},{"start":{"line":106,"column":53},"end":{"line":106,"column":72}}],"line":106},"5":{"loc":{"start":{"line":109,"column":14},"end":{"line":111,"column":15}},"type":"if","locations":[{"start":{"line":109,"column":14},"end":{"line":111,"column":15}},{"start":{"line":109,"column":14},"end":{"line":111,"column":15}}],"line":109},"6":{"loc":{"start":{"line":146,"column":8},"end":{"line":171,"column":9}},"type":"if","locations":[{"start":{"line":146,"column":8},"end":{"line":171,"column":9}},{"start":{"line":146,"column":8},"end":{"line":171,"column":9}}],"line":146},"7":{"loc":{"start":{"line":147,"column":10},"end":{"line":168,"column":11}},"type":"if","locations":[{"start":{"line":147,"column":10},"end":{"line":168,"column":11}},{"start":{"line":147,"column":10},"end":{"line":168,"column":11}}],"line":147},"8":{"loc":{"start":{"line":156,"column":12},"end":{"line":167,"column":13}},"type":"if","locations":[{"start":{"line":156,"column":12},"end":{"line":167,"column":13}},{"start":{"line":156,"column":12},"end":{"line":167,"column":13}}],"line":156},"9":{"loc":{"start":{"line":309,"column":19},"end":{"line":309,"column":102}},"type":"binary-expr","locations":[{"start":{"line":309,"column":19},"end":{"line":309,"column":49}},{"start":{"line":309,"column":53},"end":{"line":309,"column":102}}],"line":309},"10":{"loc":{"start":{"line":316,"column":19},"end":{"line":316,"column":101}},"type":"binary-expr","locations":[{"start":{"line":316,"column":19},"end":{"line":316,"column":49}},{"start":{"line":316,"column":53},"end":{"line":316,"column":101}}],"line":316},"11":{"loc":{"start":{"line":406,"column":19},"end":{"line":406,"column":70}},"type":"cond-expr","locations":[{"start":{"line":406,"column":58},"end":{"line":406,"column":62}},{"start":{"line":406,"column":65},"end":{"line":406,"column":70}}],"line":406},"12":{"loc":{"start":{"line":432,"column":12},"end":{"line":434,"column":13}},"type":"if","locations":[{"start":{"line":432,"column":12},"end":{"line":434,"column":13}},{"start":{"line":432,"column":12},"end":{"line":434,"column":13}}],"line":432},"13":{"loc":{"start":{"line":452,"column":12},"end":{"line":454,"column":13}},"type":"if","locations":[{"start":{"line":452,"column":12},"end":{"line":454,"column":13}},{"start":{"line":452,"column":12},"end":{"line":454,"column":13}}],"line":452}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":2,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":0,"54":1,"55":1,"56":0,"57":0,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":1,"125":1},"f":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},"b":{"0":[1,0],"1":[1,0],"2":[1,0],"3":[0,1],"4":[1,1],"5":[1,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"sources":["initSite.js"],"names":["initSite","pathSite","p","Promise","resolve","Manager","instance","init","then","pathTemplates","path","join","config","root","themes","name","templates","pathPartials","partials","split","sep","length","remove","addFolder","process","chdir","publish","url","structure","reference","data","replace","e","console","error","stack","folder","mkdirp","sync","answers","security","log","json","createLocalConfig","localConfigExist","getLocalConfig","confUsers","enable","users","clc","cyan","underline","save","u","username","email","password","role","workflow","User","manager","update","admin","operations","add","activate","user","id","theme","which","cmsThemes","downloadTheme","resp","indexOf","inquirer","prompt","type","message","choices","when","deploy","requiresType","key","value","Separator","validate","pass","match","coreUtils","mail","regexEmail","cPassword","utils","commonPassword","success"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/operations/","sourcesContent":["import path from 'path'\nimport mkdirp from 'mkdirp'\nimport {Promise} from 'bluebird'\nimport slug from 'slugify'\nimport inquirer from 'inquirer'\nimport clc from 'cli-color'\nimport Surge from 'surge'\n\nimport {config, Manager, coreUtils, cmsThemes, User} from '../../'\n\nexport default class initSite {\n  constructor() {}\n\n  init(pathSite) {\n    var p = new Promise(resolve => {\n      Manager.instance\n        .init()\n        .then(() => {\n          Manager.instance.pathTemplates = path.join(\n            config.root,\n            config.themes.path,\n            config.themes.name,\n            config.themes.templates.path\n          )\n          Manager.instance.pathPartials = path.join(\n            config.root,\n            config.themes.path,\n            config.themes.name,\n            config.themes.partials.path\n          )\n\n          pathSite = pathSite.split(path.sep)\n          pathSite[pathSite.length - 1] = slug(pathSite[pathSite.length - 1], {remove: /[$*+~.()'\"!\\:@^,;]/g})\n          pathSite = pathSite.join(path.sep)\n\n          this.addFolder(pathSite)\n            .then(() => {\n              process.chdir(pathSite)\n              this.addFolder(config.publish.url)\n              this.addFolder(config.structure.url)\n              this.addFolder(config.reference.url)\n              this.addFolder(config.data.path)\n              this.addFolder(\n                Manager.instance.pathTemplates.replace(\n                  config.root + path.sep,\n                  ''\n                )\n              )\n              this.addFolder(\n                Manager.instance.pathPartials.replace(\n                  config.root + path.sep,\n                  ''\n                )\n              )\n              resolve()\n            })\n            .catch(function(e) {\n              console.error(e.stack)\n              resolve()\n            })\n        })\n        .catch(function(e) {\n          console.error(e.stack)\n          resolve()\n        })\n    })\n\n    return p\n  }\n\n  addFolder(folder) {\n    var p = new Promise(resolve => {\n      mkdirp.sync(folder)\n      resolve()\n    })\n\n    return p\n  }\n\n  updateSecurity(answers) {\n    var p = new Promise(resolve => {\n      if (answers.security) {\n        console.log('Installing Abe security layer')\n        let json = {}\n        let createLocalConfig = true\n\n        if (config.localConfigExist()) {\n          json = config.getLocalConfig()\n          createLocalConfig = false\n        }\n\n        const confUsers = {enable: true}\n\n        if (!createLocalConfig) {\n          if (typeof json.users === 'undefined' || json.users === null) {\n            json.users = confUsers\n          } else {\n            if (json.users.enable == false) {\n              json.users = confUsers\n            }\n          }\n        } else {\n          json.users = confUsers\n          console.log(\n            'Creating a local config file abe.json',\n            clc.cyan.underline(\n              'https://github.com/abecms/abecms/blob/master/docs/abe-config.md'\n            )\n          )\n        }\n\n        config.save(json)\n        const u = {\n          username: answers.username,\n          name: answers.username,\n          email: answers.email,\n          password: answers.password,\n          role: {\n            workflow: 'admin',\n            name: 'Admin'\n          }\n        }\n        User.manager.instance.update([])\n        var admin = User.operations.add(u)\n        User.operations.activate(admin.user.id)\n      }\n\n      resolve()\n    })\n\n    return p\n  }\n\n  updateTheme(answers) {\n    var p = new Promise(resolve => {\n      if (answers.theme) {\n        if (answers.which !== 'Your own template') {\n          console.log('installing the theme ' + answers.which)\n          cmsThemes.themes\n            .downloadTheme(\n              'https://github.com/abecms/theme-' +\n                answers.which +\n                '/archive/master.zip',\n              answers.which\n            )\n            .then(function(resp) {\n              resolve()\n            })\n            .catch(function(e) {\n              resolve()\n            })\n        } else {\n          if (answers.url.indexOf('//') > -1) {\n            console.log('installing theme from url:' + answers.url)\n            resolve()\n          } else {\n            console.log(\n              'installing the theme ' + answers.url + ' from themes.abecms.io'\n            )\n            cmsThemes.themes\n              .downloadTheme(\n                'https://github.com/abecms/theme-' +\n                  answers.which +\n                  '/archive/master.zip',\n                answers.which\n              )\n              .then(function(resp) {\n                resolve()\n              })\n              .catch(function(e) {\n                resolve()\n              })\n          }\n        }\n      } else {\n        resolve()\n      }\n    })\n\n    return p\n  }\n\n  askDeploymentQuestions() {\n    var p = new Promise(resolve => {\n      inquirer\n        .prompt([\n          {\n            type: 'confirm',\n            name: 'deploy',\n            message:\n              'Do you want to publish your amazing contributions on Internet',\n            default: false\n          },\n          {\n            type: 'list',\n            name: 'which',\n            choices: [\n              \"on surge (it's free !)\",\n              'a github repository',\n              'a S3 bucket',\n              'via (S)FTP'\n            ],\n            message: 'Please select a deployment method',\n            default: 0,\n            when: function(answers) {\n              return answers.deploy\n            }\n          },\n          {\n            type: 'input',\n            name: 'domain',\n            message:\n              'Please enter a domain (either your own domain or a domain.surge.sh)',\n            when: function(answers) {\n              return answers.which === \"on surge (it's free !)\"\n            }\n          },\n          {\n            type: 'input',\n            name: 'repository',\n            message: 'Please enter the github repository',\n            when: function(answers) {\n              return answers.which === 'a github repository'\n            }\n          },\n          {\n            type: 'input',\n            name: 'branch',\n            message: 'Please enter the github branch',\n            default: 'master',\n            when: function(answers) {\n              return answers.which === 'a github repository'\n            }\n          },\n          {\n            type: 'input',\n            name: 'username',\n            message: 'Please enter the github username',\n            when: function(answers) {\n              return answers.which === 'a github repository'\n            }\n          },\n          {\n            type: 'input',\n            name: 'email',\n            message: 'Please enter the github email',\n            when: function(answers) {\n              return answers.which === 'a github repository'\n            }\n          },\n          {\n            type: 'input',\n            name: 'region',\n            message: 'Please enter the S3 region',\n            default: 'eu-central-1',\n            when: function(answers) {\n              return answers.which === 'a S3 bucket'\n            }\n          },\n          {\n            type: 'input',\n            name: 'accessKeyId',\n            message: 'Please enter the S3 accessKeyId',\n            when: function(answers) {\n              return answers.which === 'a S3 bucket'\n            }\n          },\n          {\n            type: 'input',\n            name: 'secretAccessKey',\n            message: 'Please enter the S3 secretAccessKey',\n            when: function(answers) {\n              return answers.which === 'a S3 bucket'\n            }\n          },\n          {\n            type: 'input',\n            name: 'bucket',\n            message: 'Please enter the S3 bucket',\n            when: function(answers) {\n              return answers.which === 'a S3 bucket'\n            }\n          },\n          {\n            type: 'input',\n            name: 'prefix',\n            message: 'Please enter the S3 prefix',\n            when: function(answers) {\n              return answers.which === 'a S3 bucket'\n            }\n          },\n          {\n            type: 'list',\n            name: 'protocol',\n            choices: ['SFTP', 'FTP'],\n            message: 'Please select the protocol',\n            default: 0,\n            when: function(answers) {\n              return answers.which === 'via (S)FTP'\n            }\n          },\n          {\n            type: 'input',\n            name: 'host',\n            message: 'Please enter the host',\n            when: function(answers) {\n              return answers.which === 'via (S)FTP'\n            }\n          },\n          {\n            type: 'input',\n            name: 'remoteDir',\n            message: 'Please enter the remote directory',\n            when: function(answers) {\n              return answers.which === 'via (S)FTP'\n            }\n          },\n          {\n            type: 'list',\n            name: 'requiresType',\n            choices: ['It requires a password', 'It requires a SSH key'],\n            message: 'Please select the authentication type',\n            default: 1,\n            when: function(answers) {\n              return answers.which === 'via (S)FTP'\n            }\n          },\n          {\n            type: 'input',\n            name: 'username',\n            message: 'Please enter the username',\n            when: function(answers) {\n              return answers.which === 'via (S)FTP'\n            }\n          },\n          {\n            type: 'input',\n            name: 'password',\n            message: 'Please enter the password',\n            when: function(answers) {\n              return (\n                answers.which === 'via (S)FTP' &&\n                answers.requiresType === 'It requires a password'\n              )\n            }\n          },\n          {\n            type: 'input',\n            name: 'sshKeyPath',\n            message:\n              'Please enter the ssh KeyPath on your computer (/path/to/id_rsa_pub)',\n            when: function(answers) {\n              return (\n                answers.which === 'via (S)FTP' &&\n                answers.requiresType === 'It requires a SSH key'\n              )\n            }\n          }\n        ])\n        .then(function(answers) {\n          resolve(answers)\n        })\n    })\n    return p\n  }\n\n  askPluginsQuestions() {\n    var p = new Promise(resolve => {\n      inquirer\n        .prompt([\n          {\n            type: 'checkbox',\n            name: 'plugins',\n            choices: [\n              {\n                key: 'a',\n                name: 'abe-deployer-git: Deploy your website on GIT',\n                value: 'abecms/abe-deployer-git'\n              },\n              {\n                key: 'b',\n                name:\n                  'abe-deployer-sftp: Deploy your website through FTP or SFTP',\n                value: 'abecms/abe-deployer-sftp'\n              },\n              {\n                key: 'c',\n                name: 'abe-deployer-s3: Deploy your website to S3',\n                value: 'abecms/abe-deployer-s3'\n              },\n              {\n                key: 'd',\n                name: 'abe-packagz: Create individual zip of a post on publish',\n                value: 'abecms/abe-packagz'\n              },\n              new inquirer.Separator(),\n              {\n                key: 'e',\n                name: 'abe-elasticsearch: Index your posts on ElasticSearch',\n                value: 'abecms/abe-elasticsearch'\n              },\n              {\n                key: 'f',\n                name: 'abe-algolia: Index your posts on Algolia',\n                value: 'abecms/abe-algolia'\n              },\n              new inquirer.Separator(),\n              {\n                key: 'g',\n                name: 'abe-sitemap: Add a XML Sitemap to your website',\n                value: 'abecms/abe-sitemap'\n              },\n              {\n                key: 'h',\n                name:\n                  'abe-mailer: Create contact Forms on your website and send emails',\n                value: 'wonknu/abe-mailer'\n              },\n              {\n                key: 'i',\n                name: 'abe-datepicker: Add a datepicker to your Abe editor',\n                value: 'wonknu/abe-datepicker'\n              },\n              {\n                key: 'i',\n                name:\n                  'abe-rangeslider: Position a abe text with absolute coordinates on images',\n                value: 'wonknu/abe-rangeslider'\n              }\n            ],\n            message: 'Select the plugins you want to install'\n          }\n        ])\n        .then(function(answers) {\n          resolve(answers)\n        })\n    })\n    return p\n  }\n\n  askQuestions() {\n    var p = new Promise(resolve => {\n      inquirer\n        .prompt([\n          {\n            type: 'input',\n            name: 'name',\n            message:\n              \"Enter the name of the project you want to create (only letters and '-' allowed)\"\n          },\n          {\n            type: 'confirm',\n            name: 'theme',\n            message: 'Do you want to install a theme ?',\n            default: true\n          },\n          {\n            type: 'list',\n            name: 'which',\n            choices: ['default', 'multiverse', 'lens', 'Your own template'],\n            message: 'Please select a theme',\n            default: 0,\n            when: function(answers) {\n              return answers.theme\n            }\n          },\n          {\n            type: 'input',\n            name: 'url',\n            message: 'Enter the url of the theme or enter a theme name from ',\n            when: function(answers) {\n              return answers.which == 'Your own template' ? true : false\n            }\n          },\n          {\n            type: 'confirm',\n            name: 'security',\n            message: 'Do you activate the user management ?',\n            default: true\n          },\n          {\n            type: 'input',\n            name: 'username',\n            message: 'Enter the username',\n            default: 'admin',\n            when: function(answers) {\n              return answers.security\n            }\n          },\n          {\n            type: 'input',\n            name: 'email',\n            message: 'Enter the email address',\n            default: 'admin@test.com',\n            when: function(answers) {\n              return answers.security\n            },\n            validate: function(value) {\n              var pass = value.match(coreUtils.mail.regexEmail)\n              if (pass) {\n                return true\n              }\n\n              return 'Please enter a valid email address'\n            }\n          },\n          {\n            type: 'password',\n            name: 'password',\n            message: 'Enter the password',\n            default: 'Adm1n@test',\n            when: function(answers) {\n              return answers.security\n            },\n            validate: function(value, answers) {\n              var cPassword = User.utils.commonPassword({\n                username: answers.username,\n                password: value\n              })\n              if (cPassword.success === 0) {\n                return 'The password must be at least 10 characters long with no sequences of three or more repeated characters, at least one uppercase letter, one number and one special character.'\n              }\n\n              return true\n            }\n          }\n        ])\n        .then(function(answers) {\n          resolve(answers)\n        })\n    })\n    return p\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8d57cc025e66bc35b47420bc55701e83d7e03504","contentHash":"83f4472b3dbd6bd7ff0885a24d05613eda7064da22390d2f0a3bc6c68eb6fe0d"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/reference/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/reference/index.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":27}},"3":{"start":{"line":10,"column":16},"end":{"line":10,"column":63}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;AAAA","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/reference/","sourcesContent":["import * as reference from './reference'\n\nexport {reference}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"86d34093f031f30da7aa1eee63a4f657804c5153","contentHash":"ae96834472ece2174a0c9c68bd57d1d7b6a9a1a96ae65dc3b7a3125aad41e5d2"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/reference/reference.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/reference/reference.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":28}},"4":{"start":{"line":11,"column":12},"end":{"line":11,"column":51}},"5":{"start":{"line":13,"column":15},"end":{"line":13,"column":58}},"6":{"start":{"line":15,"column":8},"end":{"line":15,"column":25}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":83}},"8":{"start":{"line":20,"column":25},"end":{"line":20,"column":85}},"9":{"start":{"line":22,"column":12},"end":{"line":22,"column":14}},"10":{"start":{"line":23,"column":2},"end":{"line":30,"column":3}},"11":{"start":{"line":23,"column":19},"end":{"line":23,"column":103}},"12":{"start":{"line":24,"column":16},"end":{"line":24,"column":78}},"13":{"start":{"line":26,"column":4},"end":{"line":29,"column":7}},"14":{"start":{"line":27,"column":21},"end":{"line":27,"column":57}},"15":{"start":{"line":28,"column":6},"end":{"line":28,"column":78}},"16":{"start":{"line":31,"column":2},"end":{"line":31,"column":13}},"17":{"start":{"line":35,"column":2},"end":{"line":45,"column":5}},"18":{"start":{"line":36,"column":4},"end":{"line":44,"column":5}},"19":{"start":{"line":37,"column":6},"end":{"line":39,"column":9}},"20":{"start":{"line":38,"column":8},"end":{"line":38,"column":123}},"21":{"start":{"line":41,"column":6},"end":{"line":43,"column":9}},"22":{"start":{"line":42,"column":8},"end":{"line":42,"column":64}},"23":{"start":{"line":42,"column":17},"end":{"line":42,"column":64}}},"fnMap":{"0":{"name":"getFiles","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":17}},"loc":{"start":{"line":17,"column":20},"end":{"line":32,"column":1}},"line":17},"1":{"name":"(anonymous_1)","decl":{"start":{"line":26,"column":40},"end":{"line":26,"column":41}},"loc":{"start":{"line":26,"column":60},"end":{"line":29,"column":5}},"line":26},"2":{"name":"saveFile","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":17}},"loc":{"start":{"line":34,"column":29},"end":{"line":46,"column":1}},"line":34},"3":{"name":"(anonymous_3)","decl":{"start":{"line":35,"column":91},"end":{"line":35,"column":92}},"loc":{"start":{"line":35,"column":109},"end":{"line":45,"column":3}},"line":35},"4":{"name":"(anonymous_4)","decl":{"start":{"line":37,"column":94},"end":{"line":37,"column":95}},"loc":{"start":{"line":37,"column":106},"end":{"line":39,"column":7}},"line":37},"5":{"name":"(anonymous_5)","decl":{"start":{"line":41,"column":121},"end":{"line":41,"column":122}},"loc":{"start":{"line":41,"column":136},"end":{"line":43,"column":7}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":13},"end":{"line":18,"column":83}},"type":"cond-expr","locations":[{"start":{"line":18,"column":66},"end":{"line":18,"column":78}},{"start":{"line":18,"column":81},"end":{"line":18,"column":83}}],"line":18},"1":{"loc":{"start":{"line":18,"column":13},"end":{"line":18,"column":63}},"type":"binary-expr","locations":[{"start":{"line":18,"column":13},"end":{"line":18,"column":33}},{"start":{"line":18,"column":37},"end":{"line":18,"column":63}}],"line":18},"2":{"loc":{"start":{"line":23,"column":2},"end":{"line":30,"column":3}},"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":30,"column":3}},{"start":{"line":23,"column":2},"end":{"line":30,"column":3}}],"line":23},"3":{"loc":{"start":{"line":36,"column":4},"end":{"line":44,"column":5}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":44,"column":5}},{"start":{"line":36,"column":4},"end":{"line":44,"column":5}}],"line":36},"4":{"loc":{"start":{"line":42,"column":8},"end":{"line":42,"column":64}},"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":42,"column":64}},{"start":{"line":42,"column":8},"end":{"line":42,"column":64}}],"line":42}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":2,"8":2,"9":2,"10":2,"11":0,"12":2,"13":2,"14":2,"15":2,"16":2,"17":1,"18":1,"19":0,"20":0,"21":1,"22":1,"23":0},"f":{"0":2,"1":2,"2":1,"3":1,"4":0,"5":1},"b":{"0":[0,2],"1":[2,0],"2":[0,2],"3":[0,1],"4":[0,1]},"inputSourceMap":{"version":3,"sources":["reference.js"],"names":["getFiles","name","pathToReferences","path","join","config","root","reference","url","res","coreUtils","file","getJson","files","getFilesSync","Array","prototype","forEach","call","pathFile","fileName","split","sep","length","saveFile","json","fse","exists","mkdir","writeJson","JSON","parse","err","console","log"],"mappings":";;;;;;;;;;AAAA;;AACA;;AAEA;;AAEO,SAASA,QAAT,GAA6B;AAAA,MAAXC,IAAW,uEAAJ,EAAI;;AAClC,MAAMC,gBAAgB,GAAGC,iBAAKC,IAAL,CAAUC,SAAOC,IAAjB,EAAuBD,SAAOE,SAAP,CAAiBC,GAAxC,CAAzB;;AACA,MAAIC,GAAG,GAAG,EAAV;AAEA,MAAIR,IAAI,KAAK,EAAb,EACEQ,GAAG,CAACR,IAAD,CAAH,GAAYS,YAAUC,IAAV,CAAeC,OAAf,CAAuBT,iBAAKC,IAAL,CAAUF,gBAAV,EAA4BD,IAA5B,CAAvB,CAAZ,CADF,KAEK;AACH,QAAMY,KAAK,GAAGH,YAAUC,IAAV,CAAeG,YAAf,CAA4BZ,gBAA5B,EAA8C,IAA9C,EAAoD,OAApD,CAAd;;AACAa,IAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BL,KAA7B,EAAoC,UAAAM,QAAQ,EAAI;AAC9C,UAAMC,QAAQ,GAAGD,QAAQ,CAACE,KAAT,CAAelB,iBAAKmB,GAApB,CAAjB;AACAb,MAAAA,GAAG,CAACW,QAAQ,CAACA,QAAQ,CAACG,MAAT,GAAkB,CAAnB,CAAT,CAAH,GAAqCb,YAAUC,IAAV,CAAeC,OAAf,CAAuBO,QAAvB,CAArC;AACD,KAHD;AAID;AAED,SAAOV,GAAP;AACD;;AAEM,SAASe,QAAT,CAAkBhB,GAAlB,EAAuBiB,IAAvB,EAA6B;AAClCC,sBAAIC,MAAJ,CAAWxB,iBAAKC,IAAL,CAAUC,SAAOC,IAAjB,EAAuBD,SAAOE,SAAP,CAAiBC,GAAxC,CAAX,EAAyD,UAASmB,MAAT,EAAiB;AACxE,QAAI,CAACA,MAAL,EAAa;AACXD,0BAAIE,KAAJ,CAAUzB,iBAAKC,IAAL,CAAUC,SAAOC,IAAjB,EAAuBD,SAAOE,SAAP,CAAiBC,GAAxC,CAAV,EAAwD,YAAW;AACjEkB,4BAAIG,SAAJ,CACE1B,iBAAKC,IAAL,CAAUC,SAAOC,IAAjB,EAAuBD,SAAOE,SAAP,CAAiBC,GAAxC,EAA6CA,GAA7C,CADF,EAEEsB,IAAI,CAACC,KAAL,CAAWN,IAAX,CAFF;AAID,OALD;AAMD,KAPD,MAOO;AACLC,0BAAIG,SAAJ,CACE1B,iBAAKC,IAAL,CAAUC,SAAOC,IAAjB,EAAuBD,SAAOE,SAAP,CAAiBC,GAAxC,EAA6CA,GAA7C,CADF,EAEEsB,IAAI,CAACC,KAAL,CAAWN,IAAX,CAFF,EAGE,UAASO,GAAT,EAAc;AACZ,YAAIA,GAAJ,EAASC,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CF,GAA1C;AACV,OALH;AAOD;AACF,GAjBD;AAkBD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/reference/","sourcesContent":["import path from 'path'\nimport fse from 'fs-extra'\n\nimport {coreUtils, cmsData, config} from '../../'\n\nexport function getFiles(name = '') {\n  const pathToReferences = path.join(config.root, config.reference.url)\n  let res = {}\n\n  if (name !== '')\n    res[name] = coreUtils.file.getJson(path.join(pathToReferences, name))\n  else {\n    const files = coreUtils.file.getFilesSync(pathToReferences, true, '.json')\n    Array.prototype.forEach.call(files, pathFile => {\n      const fileName = pathFile.split(path.sep)\n      res[fileName[fileName.length - 1]] = coreUtils.file.getJson(pathFile)\n    })\n  }\n\n  return res\n}\n\nexport function saveFile(url, json) {\n  fse.exists(path.join(config.root, config.reference.url), function(exists) {\n    if (!exists) {\n      fse.mkdir(path.join(config.root, config.reference.url), function() {\n        fse.writeJson(\n          path.join(config.root, config.reference.url, url),\n          JSON.parse(json)\n        )\n      })\n    } else {\n      fse.writeJson(\n        path.join(config.root, config.reference.url, url),\n        JSON.parse(json),\n        function(err) {\n          if (err) console.log('saveFile reference error: ', err)\n        }\n      )\n    }\n  })\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7fabc8ee4b06f1a2f371b7d9519510701fdab0f5","contentHash":"803d046556c8d03bd743576402ebca0de2672589a7149f2cfeebab2da67bd48d"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/structure/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/structure/index.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":27}},"3":{"start":{"line":10,"column":16},"end":{"line":10,"column":63}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;AAAA","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/structure/","sourcesContent":["import * as structure from './structure'\n\nexport {structure}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1b9612092270e3e8cbe7541ee8a74d647d9b7a90","contentHash":"49107043416a1350113f5262e9ae3f91e3e47cde1e8274d48832bb2e3f354069"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/structure/structure.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/structure/structure.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":38}},"2":{"start":{"line":8,"column":8},"end":{"line":8,"column":25}},"3":{"start":{"line":11,"column":2},"end":{"line":11,"column":108}},"4":{"start":{"line":11,"column":22},"end":{"line":11,"column":61}},"5":{"start":{"line":11,"column":66},"end":{"line":11,"column":108}},"6":{"start":{"line":12,"column":2},"end":{"line":12,"column":20}}},"fnMap":{"0":{"name":"editStructure","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":22}},"loc":{"start":{"line":10,"column":41},"end":{"line":13,"column":1}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":2},"end":{"line":11,"column":108}},"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":11,"column":108}},{"start":{"line":11,"column":2},"end":{"line":11,"column":108}}],"line":11}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":1,"6":1},"f":{"0":1},"b":{"0":[0,1]},"inputSourceMap":{"version":3,"sources":["structure.js"],"names":["editStructure","type","folderPath","coreUtils","file","addFolder","removeFolder"],"mappings":";;;;;;;AAAA;;AAEO,SAASA,aAAT,CAAuBC,IAAvB,EAA6BC,UAA7B,EAAyC;AAC9C,MAAID,IAAI,KAAK,KAAb,EAAoBE,YAAUC,IAAV,CAAeC,SAAf,CAAyBH,UAAzB,EAApB,KACKC,YAAUC,IAAV,CAAeE,YAAf,CAA4BJ,UAA5B;AACL,SAAOA,UAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/structure/","sourcesContent":["import {coreUtils} from '../../'\n\nexport function editStructure(type, folderPath) {\n  if (type === 'add') coreUtils.file.addFolder(folderPath)\n  else coreUtils.file.removeFolder(folderPath)\n  return folderPath\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5c10a9ffece7f2e7dfb1d5d05120b5d5aa4ec583","contentHash":"b3990fed1f8bc242dea22fb7f034f94218c41f3013476766b8358e4e98fa4d9f"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/themes/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/themes/index.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":24}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":24}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;AAAA","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/themes/","sourcesContent":["import * as themes from './themes'\n\nexport {themes}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6982199cc916980904beb2ec1e835ca8c40124d8","contentHash":"88b71ac2b6ece271316c8b10b51cc166a76e4c61d88c622d927713cd87ccc837"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/themes/themes.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/themes/themes.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":38}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":34}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":38}},"5":{"start":{"line":12,"column":12},"end":{"line":12,"column":51}},"6":{"start":{"line":14,"column":15},"end":{"line":14,"column":58}},"7":{"start":{"line":16,"column":14},"end":{"line":16,"column":55}},"8":{"start":{"line":18,"column":15},"end":{"line":18,"column":57}},"9":{"start":{"line":20,"column":18},"end":{"line":20,"column":64}},"10":{"start":{"line":22,"column":8},"end":{"line":22,"column":25}},"11":{"start":{"line":25,"column":20},"end":{"line":25,"column":100}},"12":{"start":{"line":27,"column":10},"end":{"line":37,"column":4}},"13":{"start":{"line":28,"column":4},"end":{"line":34,"column":7}},"14":{"start":{"line":30,"column":17},"end":{"line":32,"column":7}},"15":{"start":{"line":33,"column":6},"end":{"line":33,"column":26}},"16":{"start":{"line":36,"column":4},"end":{"line":36,"column":21}},"17":{"start":{"line":38,"column":2},"end":{"line":38,"column":11}},"18":{"start":{"line":42,"column":20},"end":{"line":42,"column":100}},"19":{"start":{"line":44,"column":2},"end":{"line":54,"column":5}},"20":{"start":{"line":45,"column":4},"end":{"line":45,"column":32}},"21":{"start":{"line":45,"column":13},"end":{"line":45,"column":32}},"22":{"start":{"line":47,"column":4},"end":{"line":53,"column":5}},"23":{"start":{"line":48,"column":6},"end":{"line":52,"column":9}},"24":{"start":{"line":49,"column":8},"end":{"line":51,"column":11}},"25":{"start":{"line":50,"column":10},"end":{"line":50,"column":38}},"26":{"start":{"line":50,"column":19},"end":{"line":50,"column":38}},"27":{"start":{"line":58,"column":21},"end":{"line":58,"column":79}},"28":{"start":{"line":60,"column":23},"end":{"line":60,"column":74}},"29":{"start":{"line":62,"column":2},"end":{"line":62,"column":42}},"30":{"start":{"line":64,"column":10},"end":{"line":126,"column":4}},"31":{"start":{"line":65,"column":20},"end":{"line":65,"column":72}},"32":{"start":{"line":67,"column":22},"end":{"line":67,"column":70}},"33":{"start":{"line":69,"column":4},"end":{"line":74,"column":54}},"34":{"start":{"line":70,"column":6},"end":{"line":73,"column":9}},"35":{"start":{"line":75,"column":4},"end":{"line":119,"column":7}},"36":{"start":{"line":76,"column":6},"end":{"line":118,"column":9}},"37":{"start":{"line":79,"column":19},"end":{"line":79,"column":73}},"38":{"start":{"line":81,"column":33},"end":{"line":81,"column":45}},"39":{"start":{"line":83,"column":8},"end":{"line":85,"column":11}},"40":{"start":{"line":84,"column":10},"end":{"line":84,"column":45}},"41":{"start":{"line":84,"column":19},"end":{"line":84,"column":45}},"42":{"start":{"line":87,"column":8},"end":{"line":87,"column":102}},"43":{"start":{"line":89,"column":8},"end":{"line":91,"column":11}},"44":{"start":{"line":90,"column":10},"end":{"line":90,"column":45}},"45":{"start":{"line":90,"column":19},"end":{"line":90,"column":45}},"46":{"start":{"line":93,"column":8},"end":{"line":100,"column":9}},"47":{"start":{"line":94,"column":10},"end":{"line":94,"column":27}},"48":{"start":{"line":95,"column":10},"end":{"line":98,"column":13}},"49":{"start":{"line":99,"column":10},"end":{"line":99,"column":17}},"50":{"start":{"line":102,"column":19},"end":{"line":102,"column":44}},"51":{"start":{"line":104,"column":8},"end":{"line":106,"column":10}},"52":{"start":{"line":108,"column":8},"end":{"line":108,"column":28}},"53":{"start":{"line":110,"column":8},"end":{"line":110,"column":37}},"54":{"start":{"line":112,"column":8},"end":{"line":117,"column":11}},"55":{"start":{"line":113,"column":10},"end":{"line":116,"column":13}},"56":{"start":{"line":121,"column":4},"end":{"line":124,"column":7}},"57":{"start":{"line":125,"column":4},"end":{"line":125,"column":21}},"58":{"start":{"line":127,"column":2},"end":{"line":127,"column":11}}},"fnMap":{"0":{"name":"getThemeInfos","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":22}},"loc":{"start":{"line":24,"column":25},"end":{"line":39,"column":1}},"line":24},"1":{"name":"(anonymous_1)","decl":{"start":{"line":27,"column":22},"end":{"line":27,"column":23}},"loc":{"start":{"line":27,"column":41},"end":{"line":35,"column":3}},"line":27},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":83},"end":{"line":28,"column":84}},"loc":{"start":{"line":28,"column":104},"end":{"line":34,"column":5}},"line":28},"3":{"name":"(anonymous_3)","decl":{"start":{"line":35,"column":14},"end":{"line":35,"column":15}},"loc":{"start":{"line":35,"column":27},"end":{"line":37,"column":3}},"line":35},"4":{"name":"deleteTheme","decl":{"start":{"line":41,"column":9},"end":{"line":41,"column":20}},"loc":{"start":{"line":41,"column":23},"end":{"line":55,"column":1}},"line":41},"5":{"name":"(anonymous_5)","decl":{"start":{"line":44,"column":81},"end":{"line":44,"column":82}},"loc":{"start":{"line":44,"column":102},"end":{"line":54,"column":3}},"line":44},"6":{"name":"(anonymous_6)","decl":{"start":{"line":48,"column":58},"end":{"line":48,"column":59}},"loc":{"start":{"line":48,"column":74},"end":{"line":52,"column":7}},"line":48},"7":{"name":"(anonymous_7)","decl":{"start":{"line":49,"column":77},"end":{"line":49,"column":78}},"loc":{"start":{"line":49,"column":92},"end":{"line":51,"column":9}},"line":49},"8":{"name":"downloadTheme","decl":{"start":{"line":57,"column":9},"end":{"line":57,"column":22}},"loc":{"start":{"line":57,"column":34},"end":{"line":128,"column":1}},"line":57},"9":{"name":"(anonymous_9)","decl":{"start":{"line":64,"column":22},"end":{"line":64,"column":23}},"loc":{"start":{"line":64,"column":41},"end":{"line":120,"column":3}},"line":64},"10":{"name":"(anonymous_10)","decl":{"start":{"line":69,"column":49},"end":{"line":69,"column":50}},"loc":{"start":{"line":69,"column":64},"end":{"line":69,"column":66}},"line":69},"11":{"name":"(anonymous_11)","decl":{"start":{"line":69,"column":80},"end":{"line":69,"column":81}},"loc":{"start":{"line":69,"column":95},"end":{"line":74,"column":5}},"line":69},"12":{"name":"(anonymous_12)","decl":{"start":{"line":74,"column":17},"end":{"line":74,"column":18}},"loc":{"start":{"line":74,"column":32},"end":{"line":74,"column":34}},"line":74},"13":{"name":"(anonymous_13)","decl":{"start":{"line":75,"column":29},"end":{"line":75,"column":30}},"loc":{"start":{"line":75,"column":41},"end":{"line":119,"column":5}},"line":75},"14":{"name":"(anonymous_14)","decl":{"start":{"line":78,"column":9},"end":{"line":78,"column":10}},"loc":{"start":{"line":78,"column":24},"end":{"line":118,"column":7}},"line":78},"15":{"name":"(anonymous_15)","decl":{"start":{"line":83,"column":82},"end":{"line":83,"column":83}},"loc":{"start":{"line":83,"column":97},"end":{"line":85,"column":9}},"line":83},"16":{"name":"(anonymous_16)","decl":{"start":{"line":89,"column":51},"end":{"line":89,"column":52}},"loc":{"start":{"line":89,"column":66},"end":{"line":91,"column":9}},"line":89},"17":{"name":"(anonymous_17)","decl":{"start":{"line":112,"column":29},"end":{"line":112,"column":30}},"loc":{"start":{"line":112,"column":45},"end":{"line":117,"column":9}},"line":112},"18":{"name":"(anonymous_18)","decl":{"start":{"line":120,"column":14},"end":{"line":120,"column":15}},"loc":{"start":{"line":120,"column":27},"end":{"line":126,"column":3}},"line":120}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":17},"end":{"line":32,"column":7}},"type":"binary-expr","locations":[{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},{"start":{"line":30,"column":25},"end":{"line":32,"column":7}}],"line":30},"1":{"loc":{"start":{"line":45,"column":4},"end":{"line":45,"column":32}},"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":32}},{"start":{"line":45,"column":4},"end":{"line":45,"column":32}}],"line":45},"2":{"loc":{"start":{"line":47,"column":4},"end":{"line":53,"column":5}},"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":53,"column":5}},{"start":{"line":47,"column":4},"end":{"line":53,"column":5}}],"line":47},"3":{"loc":{"start":{"line":47,"column":8},"end":{"line":47,"column":75}},"type":"binary-expr","locations":[{"start":{"line":47,"column":8},"end":{"line":47,"column":20}},{"start":{"line":47,"column":24},"end":{"line":47,"column":42}},{"start":{"line":47,"column":46},"end":{"line":47,"column":75}}],"line":47},"4":{"loc":{"start":{"line":50,"column":10},"end":{"line":50,"column":38}},"type":"if","locations":[{"start":{"line":50,"column":10},"end":{"line":50,"column":38}},{"start":{"line":50,"column":10},"end":{"line":50,"column":38}}],"line":50},"5":{"loc":{"start":{"line":84,"column":10},"end":{"line":84,"column":45}},"type":"if","locations":[{"start":{"line":84,"column":10},"end":{"line":84,"column":45}},{"start":{"line":84,"column":10},"end":{"line":84,"column":45}}],"line":84},"6":{"loc":{"start":{"line":90,"column":10},"end":{"line":90,"column":45}},"type":"if","locations":[{"start":{"line":90,"column":10},"end":{"line":90,"column":45}},{"start":{"line":90,"column":10},"end":{"line":90,"column":45}}],"line":90},"7":{"loc":{"start":{"line":93,"column":8},"end":{"line":100,"column":9}},"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":100,"column":9}},{"start":{"line":93,"column":8},"end":{"line":100,"column":9}}],"line":93}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"inputSourceMap":{"version":3,"sources":["themes.js"],"names":["getThemeInfos","pathToTheme","path","join","config","root","themes","name","p","Promise","resolve","fse","readJson","err","json","theme","e","console","error","deleteTheme","root_files","Array","prototype","forEach","call","file","remove","downloadTheme","url","pathToThemes","PathToTmpTheme","mkdirp","sync","pathToZip","writeStream","createWriteStream","on","res","pipe","dir","dirs","coreUtils","getFoldersSync","currentPathToTheme","removeSync","renameSync","log","getLocalConfig","save","cmsTemplates","assets","copy","then","success"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/themes/","sourcesContent":["import path from 'path'\nimport fse from 'fs-extra'\nimport mkdirp from 'mkdirp'\nimport request from 'request'\nimport extract from 'extract-zip'\n\nimport {config, cmsTemplates, coreUtils} from '../../'\n\nexport function getThemeInfos() {\n  var pathToTheme = path.join(\n    config.root,\n    config.themes.path,\n    config.themes.name\n  )\n\n  var p = new Promise(resolve => {\n    fse.readJson(path.join(pathToTheme, 'theme.json'), (err, json) => {\n      // if (err) console.error(err)\n      var json = json || {theme: {}}\n      resolve(json.theme)\n    })\n  }).catch(function(e) {\n    console.error(e)\n  })\n\n  return p\n}\n\nexport function deleteTheme() {\n  var pathToTheme = path.join(\n    config.root,\n    config.themes.path,\n    config.themes.name\n  )\n  fse.readJson(path.join(pathToTheme, 'theme.json'), (err, json) => {\n    if (err) console.error(err)\n    if (json != null && json.theme != null && json.theme.root_files != null) {\n      Array.prototype.forEach.call(json.theme.root_files, file => {\n        fse.remove(path.join(pathToTheme, file), err => {\n          if (err) console.error(err)\n        })\n      })\n    }\n  })\n}\n\nexport function downloadTheme(url, name) {\n  const pathToThemes = path.join(config.root, config.themes.path)\n  const PathToTmpTheme = path.join(pathToThemes, 'tmp-download')\n  mkdirp.sync(PathToTmpTheme)\n\n  const p = new Promise(resolve => {\n    const pathToZip = path.join(PathToTmpTheme, name + '.zip')\n    const writeStream = fse.createWriteStream(pathToZip)\n\n    request(url)\n      .on('response', res => {})\n      .on('error', res => {\n        resolve({res: 'ko', error: res})\n      })\n      .on('end', res => {})\n      .pipe(writeStream)\n    writeStream.on('finish', function() {\n      extract(pathToZip, {dir: PathToTmpTheme}, function(err) {\n        const dirs = coreUtils.file.getFoldersSync(PathToTmpTheme, false)\n        const currentPathToTheme = dirs[0].path\n        fse.removeSync(path.join(pathToThemes, name), err => {\n          if (err) return console.error(err)\n        })\n        fse.renameSync(currentPathToTheme, path.join(pathToThemes, name))\n\n        fse.remove(PathToTmpTheme, err => {\n          if (err) return console.error(err)\n        })\n\n        if (err != null) {\n          console.log(err)\n          resolve({res: 'ko', error: 'err'})\n          return\n        }\n\n        let json = config.getLocalConfig()\n        json.themes = {\n          name: name\n        }\n        config.save(json)\n        cmsTemplates.assets.copy()\n        getThemeInfos().then(json => {\n          resolve({success: 'ok', theme: json})\n        })\n      })\n    })\n  }).catch(function(e) {\n    resolve({res: 'ko', error: e})\n    console.error(e)\n  })\n\n  return p\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ba7dfe60c3d125dcaede44f506da8455b0082230","contentHash":"1df04ab00077fd3f2aa24cb6d99eb100d6a5ed9819040ff2a0d475eb0ed278ab"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/media/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/media/index.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":23}},"3":{"start":{"line":10,"column":12},"end":{"line":10,"column":55}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":22}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;AAAA","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/media/","sourcesContent":["import * as image from './image'\n\nexport {image}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1df4c93327f3843e87de8c9465ac9ef15817ec35","contentHash":"7621fbda3e3f3d0e3cf498bcf98c7190e91c4f8e55bd70e5e33a19aed3c10551"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/media/image.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/media/image.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":42}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":44}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":28}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":36}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":36}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":42}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":46}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":38}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":74}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":35}},"12":{"start":{"line":19,"column":19},"end":{"line":19,"column":80}},"13":{"start":{"line":21,"column":25},"end":{"line":21,"column":99}},"14":{"start":{"line":23,"column":27},"end":{"line":23,"column":83}},"15":{"start":{"line":25,"column":14},"end":{"line":25,"column":55}},"16":{"start":{"line":27,"column":15},"end":{"line":27,"column":58}},"17":{"start":{"line":29,"column":15},"end":{"line":29,"column":57}},"18":{"start":{"line":31,"column":12},"end":{"line":31,"column":51}},"19":{"start":{"line":33,"column":12},"end":{"line":33,"column":51}},"20":{"start":{"line":35,"column":16},"end":{"line":35,"column":35}},"21":{"start":{"line":37,"column":21},"end":{"line":37,"column":70}},"22":{"start":{"line":39,"column":8},"end":{"line":39,"column":25}},"23":{"start":{"line":42,"column":10},"end":{"line":57,"column":4}},"24":{"start":{"line":43,"column":4},"end":{"line":54,"column":7}},"25":{"start":{"line":47,"column":17},"end":{"line":47,"column":31}},"26":{"start":{"line":49,"column":6},"end":{"line":51,"column":9}},"27":{"start":{"line":50,"column":8},"end":{"line":50,"column":75}},"28":{"start":{"line":53,"column":6},"end":{"line":53,"column":25}},"29":{"start":{"line":56,"column":4},"end":{"line":56,"column":14}},"30":{"start":{"line":58,"column":2},"end":{"line":58,"column":11}},"31":{"start":{"line":69,"column":15},"end":{"line":69,"column":28}},"32":{"start":{"line":70,"column":20},"end":{"line":70,"column":21}},"33":{"start":{"line":71,"column":2},"end":{"line":71,"column":19}},"34":{"start":{"line":72,"column":10},"end":{"line":123,"column":4}},"35":{"start":{"line":73,"column":16},"end":{"line":118,"column":5}},"36":{"start":{"line":74,"column":18},"end":{"line":74,"column":27}},"37":{"start":{"line":76,"column":16},"end":{"line":76,"column":46}},"38":{"start":{"line":78,"column":20},"end":{"line":78,"column":72}},"39":{"start":{"line":79,"column":6},"end":{"line":82,"column":9}},"40":{"start":{"line":83,"column":25},"end":{"line":83,"column":41}},"41":{"start":{"line":84,"column":21},"end":{"line":84,"column":25}},"42":{"start":{"line":85,"column":22},"end":{"line":85,"column":26}},"43":{"start":{"line":86,"column":6},"end":{"line":86,"column":101}},"44":{"start":{"line":86,"column":60},"end":{"line":86,"column":101}},"45":{"start":{"line":87,"column":6},"end":{"line":87,"column":102}},"46":{"start":{"line":87,"column":60},"end":{"line":87,"column":102}},"47":{"start":{"line":89,"column":6},"end":{"line":117,"column":9}},"48":{"start":{"line":90,"column":28},"end":{"line":90,"column":54}},"49":{"start":{"line":91,"column":29},"end":{"line":91,"column":56}},"50":{"start":{"line":92,"column":20},"end":{"line":92,"column":56}},"51":{"start":{"line":94,"column":8},"end":{"line":114,"column":9}},"52":{"start":{"line":95,"column":10},"end":{"line":95,"column":154}},"53":{"start":{"line":97,"column":10},"end":{"line":99,"column":11}},"54":{"start":{"line":98,"column":12},"end":{"line":98,"column":26}},"55":{"start":{"line":100,"column":15},"end":{"line":114,"column":9}},"56":{"start":{"line":101,"column":10},"end":{"line":101,"column":108}},"57":{"start":{"line":103,"column":10},"end":{"line":105,"column":11}},"58":{"start":{"line":104,"column":12},"end":{"line":104,"column":26}},"59":{"start":{"line":107,"column":10},"end":{"line":113,"column":13}},"60":{"start":{"line":108,"column":12},"end":{"line":110,"column":13}},"61":{"start":{"line":109,"column":14},"end":{"line":109,"column":28}},"62":{"start":{"line":112,"column":12},"end":{"line":112,"column":29}},"63":{"start":{"line":116,"column":8},"end":{"line":116,"column":25}},"64":{"start":{"line":120,"column":4},"end":{"line":122,"column":5}},"65":{"start":{"line":120,"column":17},"end":{"line":120,"column":18}},"66":{"start":{"line":121,"column":6},"end":{"line":121,"column":14}},"67":{"start":{"line":124,"column":2},"end":{"line":124,"column":11}},"68":{"start":{"line":127,"column":37},"end":{"line":158,"column":3}},"69":{"start":{"line":128,"column":13},"end":{"line":153,"column":5}},"70":{"start":{"line":130,"column":4},"end":{"line":152,"column":16}},"71":{"start":{"line":131,"column":6},"end":{"line":151,"column":7}},"72":{"start":{"line":132,"column":8},"end":{"line":150,"column":9}},"73":{"start":{"line":134,"column":12},"end":{"line":134,"column":63}},"74":{"start":{"line":135,"column":12},"end":{"line":135,"column":68}},"75":{"start":{"line":136,"column":12},"end":{"line":136,"column":94}},"76":{"start":{"line":137,"column":12},"end":{"line":144,"column":15}},"77":{"start":{"line":138,"column":30},"end":{"line":138,"column":78}},"78":{"start":{"line":139,"column":14},"end":{"line":143,"column":17}},"79":{"start":{"line":140,"column":16},"end":{"line":142,"column":19}},"80":{"start":{"line":145,"column":12},"end":{"line":145,"column":48}},"81":{"start":{"line":149,"column":12},"end":{"line":149,"column":35}},"82":{"start":{"line":155,"column":2},"end":{"line":157,"column":4}},"83":{"start":{"line":156,"column":4},"end":{"line":156,"column":39}},"84":{"start":{"line":160,"column":0},"end":{"line":160,"column":46}},"85":{"start":{"line":163,"column":10},"end":{"line":264,"column":4}},"86":{"start":{"line":164,"column":19},"end":{"line":164,"column":48}},"87":{"start":{"line":165,"column":15},"end":{"line":167,"column":5}},"88":{"start":{"line":169,"column":4},"end":{"line":169,"column":25}},"89":{"start":{"line":170,"column":4},"end":{"line":263,"column":7}},"90":{"start":{"line":171,"column":16},"end":{"line":171,"column":64}},"91":{"start":{"line":173,"column":17},"end":{"line":173,"column":57}},"92":{"start":{"line":174,"column":22},"end":{"line":174,"column":39}},"93":{"start":{"line":175,"column":27},"end":{"line":175,"column":55}},"94":{"start":{"line":176,"column":26},"end":{"line":176,"column":31}},"95":{"start":{"line":177,"column":26},"end":{"line":177,"column":53}},"96":{"start":{"line":179,"column":6},"end":{"line":181,"column":7}},"97":{"start":{"line":180,"column":8},"end":{"line":180,"column":57}},"98":{"start":{"line":183,"column":6},"end":{"line":183,"column":67}},"99":{"start":{"line":184,"column":6},"end":{"line":184,"column":80}},"100":{"start":{"line":185,"column":6},"end":{"line":193,"column":9}},"101":{"start":{"line":186,"column":8},"end":{"line":186,"column":29}},"102":{"start":{"line":187,"column":8},"end":{"line":187,"column":22}},"103":{"start":{"line":188,"column":8},"end":{"line":191,"column":11}},"104":{"start":{"line":192,"column":8},"end":{"line":192,"column":15}},"105":{"start":{"line":194,"column":20},"end":{"line":194,"column":47}},"106":{"start":{"line":196,"column":6},"end":{"line":204,"column":7}},"107":{"start":{"line":197,"column":8},"end":{"line":197,"column":29}},"108":{"start":{"line":198,"column":8},"end":{"line":198,"column":22}},"109":{"start":{"line":199,"column":8},"end":{"line":202,"column":11}},"110":{"start":{"line":203,"column":8},"end":{"line":203,"column":15}},"111":{"start":{"line":206,"column":20},"end":{"line":206,"column":67}},"112":{"start":{"line":208,"column":6},"end":{"line":261,"column":11}},"113":{"start":{"line":210,"column":8},"end":{"line":260,"column":21}},"114":{"start":{"line":211,"column":10},"end":{"line":259,"column":11}},"115":{"start":{"line":212,"column":12},"end":{"line":258,"column":13}},"116":{"start":{"line":214,"column":16},"end":{"line":217,"column":17}},"117":{"start":{"line":215,"column":18},"end":{"line":215,"column":37}},"118":{"start":{"line":216,"column":18},"end":{"line":216,"column":24}},"119":{"start":{"line":219,"column":16},"end":{"line":219,"column":50}},"120":{"start":{"line":222,"column":16},"end":{"line":225,"column":17}},"121":{"start":{"line":223,"column":18},"end":{"line":223,"column":38}},"122":{"start":{"line":224,"column":18},"end":{"line":224,"column":24}},"123":{"start":{"line":227,"column":16},"end":{"line":227,"column":35}},"124":{"start":{"line":228,"column":16},"end":{"line":228,"column":51}},"125":{"start":{"line":231,"column":16},"end":{"line":231,"column":43}},"126":{"start":{"line":232,"column":16},"end":{"line":232,"column":119}},"127":{"start":{"line":233,"column":16},"end":{"line":233,"column":87}},"128":{"start":{"line":235,"column":16},"end":{"line":246,"column":37}},"129":{"start":{"line":236,"column":18},"end":{"line":236,"column":114}},"130":{"start":{"line":237,"column":18},"end":{"line":245,"column":21}},"131":{"start":{"line":238,"column":20},"end":{"line":242,"column":21}},"132":{"start":{"line":239,"column":22},"end":{"line":241,"column":23}},"133":{"start":{"line":239,"column":35},"end":{"line":239,"column":36}},"134":{"start":{"line":240,"column":24},"end":{"line":240,"column":86}},"135":{"start":{"line":244,"column":20},"end":{"line":244,"column":34}},"136":{"start":{"line":246,"column":23},"end":{"line":246,"column":37}},"137":{"start":{"line":249,"column":16},"end":{"line":249,"column":36}},"138":{"start":{"line":250,"column":16},"end":{"line":250,"column":22}},"139":{"start":{"line":253,"column":16},"end":{"line":253,"column":30}},"140":{"start":{"line":257,"column":16},"end":{"line":257,"column":40}},"141":{"start":{"line":262,"column":6},"end":{"line":262,"column":25}},"142":{"start":{"line":265,"column":2},"end":{"line":265,"column":11}},"143":{"start":{"line":269,"column":26},"end":{"line":269,"column":52}},"144":{"start":{"line":270,"column":25},"end":{"line":270,"column":50}},"145":{"start":{"line":271,"column":14},"end":{"line":271,"column":19}},"146":{"start":{"line":272,"column":2},"end":{"line":272,"column":186}},"147":{"start":{"line":272,"column":46},"end":{"line":272,"column":93}},"148":{"start":{"line":272,"column":98},"end":{"line":272,"column":186}},"149":{"start":{"line":272,"column":138},"end":{"line":272,"column":186}},"150":{"start":{"line":273,"column":2},"end":{"line":275,"column":4}},"151":{"start":{"line":279,"column":13},"end":{"line":279,"column":23}},"152":{"start":{"line":281,"column":2},"end":{"line":287,"column":3}},"153":{"start":{"line":282,"column":4},"end":{"line":282,"column":19}},"154":{"start":{"line":283,"column":9},"end":{"line":287,"column":3}},"155":{"start":{"line":284,"column":4},"end":{"line":284,"column":19}},"156":{"start":{"line":285,"column":9},"end":{"line":287,"column":3}},"157":{"start":{"line":286,"column":4},"end":{"line":286,"column":19}},"158":{"start":{"line":289,"column":2},"end":{"line":289,"column":14}},"159":{"start":{"line":293,"column":17},"end":{"line":293,"column":90}},"160":{"start":{"line":295,"column":2},"end":{"line":301,"column":3}},"161":{"start":{"line":296,"column":24},"end":{"line":296,"column":78}},"162":{"start":{"line":298,"column":4},"end":{"line":300,"column":80}},"163":{"start":{"line":303,"column":2},"end":{"line":303,"column":18}},"164":{"start":{"line":307,"column":22},"end":{"line":307,"column":49}},"165":{"start":{"line":309,"column":2},"end":{"line":311,"column":3}},"166":{"start":{"line":310,"column":4},"end":{"line":310,"column":53}},"167":{"start":{"line":313,"column":2},"end":{"line":313,"column":87}},"168":{"start":{"line":315,"column":23},"end":{"line":315,"column":91}},"169":{"start":{"line":317,"column":2},"end":{"line":317,"column":42}},"170":{"start":{"line":319,"column":2},"end":{"line":319,"column":24}},"171":{"start":{"line":323,"column":19},"end":{"line":323,"column":21}},"172":{"start":{"line":325,"column":21},"end":{"line":325,"column":97}},"173":{"start":{"line":327,"column":14},"end":{"line":327,"column":63}},"174":{"start":{"line":329,"column":2},"end":{"line":338,"column":5}},"175":{"start":{"line":330,"column":4},"end":{"line":330,"column":68}},"176":{"start":{"line":332,"column":4},"end":{"line":337,"column":5}},"177":{"start":{"line":333,"column":6},"end":{"line":336,"column":9}},"178":{"start":{"line":339,"column":2},"end":{"line":339,"column":20}},"179":{"start":{"line":343,"column":26},"end":{"line":343,"column":46}},"180":{"start":{"line":344,"column":2},"end":{"line":344,"column":59}},"181":{"start":{"line":346,"column":21},"end":{"line":346,"column":102}},"182":{"start":{"line":348,"column":18},"end":{"line":352,"column":3}},"183":{"start":{"line":353,"column":18},"end":{"line":353,"column":33}},"184":{"start":{"line":354,"column":2},"end":{"line":354,"column":18}},"185":{"start":{"line":355,"column":2},"end":{"line":355,"column":89}},"186":{"start":{"line":357,"column":14},"end":{"line":357,"column":60}},"187":{"start":{"line":359,"column":2},"end":{"line":365,"column":5}},"188":{"start":{"line":360,"column":4},"end":{"line":360,"column":68}},"189":{"start":{"line":362,"column":4},"end":{"line":364,"column":5}},"190":{"start":{"line":363,"column":6},"end":{"line":363,"column":38}},"191":{"start":{"line":366,"column":2},"end":{"line":366,"column":19}}},"fnMap":{"0":{"name":"cropAndSaveFile","decl":{"start":{"line":41,"column":9},"end":{"line":41,"column":24}},"loc":{"start":{"line":41,"column":51},"end":{"line":59,"column":1}},"line":41},"1":{"name":"(anonymous_1)","decl":{"start":{"line":42,"column":32},"end":{"line":42,"column":33}},"loc":{"start":{"line":42,"column":51},"end":{"line":57,"column":3}},"line":42},"2":{"name":"(anonymous_2)","decl":{"start":{"line":46,"column":12},"end":{"line":46,"column":13}},"loc":{"start":{"line":46,"column":30},"end":{"line":52,"column":5}},"line":46},"3":{"name":"(anonymous_3)","decl":{"start":{"line":49,"column":39},"end":{"line":49,"column":40}},"loc":{"start":{"line":49,"column":56},"end":{"line":51,"column":7}},"line":49},"4":{"name":"(anonymous_4)","decl":{"start":{"line":52,"column":16},"end":{"line":52,"column":17}},"loc":{"start":{"line":52,"column":31},"end":{"line":54,"column":5}},"line":52},"5":{"name":"cropAndSaveFiles","decl":{"start":{"line":68,"column":9},"end":{"line":68,"column":25}},"loc":{"start":{"line":68,"column":46},"end":{"line":125,"column":1}},"line":68},"6":{"name":"(anonymous_6)","decl":{"start":{"line":72,"column":32},"end":{"line":72,"column":33}},"loc":{"start":{"line":72,"column":51},"end":{"line":123,"column":3}},"line":72},"7":{"name":"_loop","decl":{"start":{"line":73,"column":25},"end":{"line":73,"column":30}},"loc":{"start":{"line":73,"column":33},"end":{"line":118,"column":5}},"line":73},"8":{"name":"(anonymous_8)","decl":{"start":{"line":89,"column":39},"end":{"line":89,"column":40}},"loc":{"start":{"line":89,"column":64},"end":{"line":115,"column":7}},"line":89},"9":{"name":"(anonymous_9)","decl":{"start":{"line":107,"column":64},"end":{"line":107,"column":65}},"loc":{"start":{"line":107,"column":82},"end":{"line":111,"column":11}},"line":107},"10":{"name":"(anonymous_10)","decl":{"start":{"line":111,"column":22},"end":{"line":111,"column":23}},"loc":{"start":{"line":111,"column":37},"end":{"line":113,"column":11}},"line":111},"11":{"name":"(anonymous_11)","decl":{"start":{"line":115,"column":18},"end":{"line":115,"column":19}},"loc":{"start":{"line":115,"column":33},"end":{"line":117,"column":7}},"line":115},"12":{"name":"(anonymous_12)","decl":{"start":{"line":127,"column":37},"end":{"line":127,"column":38}},"loc":{"start":{"line":127,"column":49},"end":{"line":158,"column":1}},"line":127},"13":{"name":"_callee","decl":{"start":{"line":128,"column":100},"end":{"line":128,"column":107}},"loc":{"start":{"line":128,"column":114},"end":{"line":153,"column":3}},"line":128},"14":{"name":"_callee$","decl":{"start":{"line":130,"column":49},"end":{"line":130,"column":57}},"loc":{"start":{"line":130,"column":68},"end":{"line":152,"column":5}},"line":130},"15":{"name":"(anonymous_15)","decl":{"start":{"line":137,"column":38},"end":{"line":137,"column":39}},"loc":{"start":{"line":137,"column":57},"end":{"line":144,"column":13}},"line":137},"16":{"name":"(anonymous_16)","decl":{"start":{"line":139,"column":29},"end":{"line":139,"column":30}},"loc":{"start":{"line":139,"column":47},"end":{"line":143,"column":15}},"line":139},"17":{"name":"generateThumbnail","decl":{"start":{"line":155,"column":18},"end":{"line":155,"column":35}},"loc":{"start":{"line":155,"column":40},"end":{"line":157,"column":3}},"line":155},"18":{"name":"saveFile","decl":{"start":{"line":162,"column":9},"end":{"line":162,"column":17}},"loc":{"start":{"line":162,"column":23},"end":{"line":266,"column":1}},"line":162},"19":{"name":"(anonymous_19)","decl":{"start":{"line":163,"column":32},"end":{"line":163,"column":33}},"loc":{"start":{"line":163,"column":51},"end":{"line":264,"column":3}},"line":163},"20":{"name":"(anonymous_20)","decl":{"start":{"line":170,"column":26},"end":{"line":170,"column":27}},"loc":{"start":{"line":170,"column":83},"end":{"line":263,"column":5}},"line":170},"21":{"name":"(anonymous_21)","decl":{"start":{"line":185,"column":23},"end":{"line":185,"column":24}},"loc":{"start":{"line":185,"column":35},"end":{"line":193,"column":7}},"line":185},"22":{"name":"_callee2","decl":{"start":{"line":208,"column":127},"end":{"line":208,"column":135}},"loc":{"start":{"line":208,"column":138},"end":{"line":261,"column":7}},"line":208},"23":{"name":"_callee2$","decl":{"start":{"line":210,"column":53},"end":{"line":210,"column":62}},"loc":{"start":{"line":210,"column":74},"end":{"line":260,"column":9}},"line":210},"24":{"name":"(anonymous_24)","decl":{"start":{"line":237,"column":69},"end":{"line":237,"column":70}},"loc":{"start":{"line":237,"column":85},"end":{"line":245,"column":19}},"line":237},"25":{"name":"isValidMedia","decl":{"start":{"line":268,"column":9},"end":{"line":268,"column":21}},"loc":{"start":{"line":268,"column":37},"end":{"line":276,"column":1}},"line":268},"26":{"name":"getMediaType","decl":{"start":{"line":278,"column":9},"end":{"line":278,"column":21}},"loc":{"start":{"line":278,"column":27},"end":{"line":290,"column":1}},"line":278},"27":{"name":"createMediaSlug","decl":{"start":{"line":292,"column":9},"end":{"line":292,"column":24}},"loc":{"start":{"line":292,"column":40},"end":{"line":304,"column":1}},"line":292},"28":{"name":"createMediaFolder","decl":{"start":{"line":306,"column":9},"end":{"line":306,"column":26}},"loc":{"start":{"line":306,"column":38},"end":{"line":320,"column":1}},"line":306},"29":{"name":"getThumbsList","decl":{"start":{"line":322,"column":9},"end":{"line":322,"column":22}},"loc":{"start":{"line":322,"column":25},"end":{"line":340,"column":1}},"line":322},"30":{"name":"(anonymous_30)","decl":{"start":{"line":329,"column":38},"end":{"line":329,"column":39}},"loc":{"start":{"line":329,"column":58},"end":{"line":338,"column":3}},"line":329},"31":{"name":"getAssociatedImageFileFromThumb","decl":{"start":{"line":342,"column":9},"end":{"line":342,"column":40}},"loc":{"start":{"line":342,"column":47},"end":{"line":367,"column":1}},"line":342},"32":{"name":"(anonymous_32)","decl":{"start":{"line":359,"column":38},"end":{"line":359,"column":39}},"loc":{"start":{"line":359,"column":58},"end":{"line":365,"column":3}},"line":359}},"branchMap":{"0":{"loc":{"start":{"line":86,"column":6},"end":{"line":86,"column":101}},"type":"if","locations":[{"start":{"line":86,"column":6},"end":{"line":86,"column":101}},{"start":{"line":86,"column":6},"end":{"line":86,"column":101}}],"line":86},"1":{"loc":{"start":{"line":86,"column":10},"end":{"line":86,"column":58}},"type":"binary-expr","locations":[{"start":{"line":86,"column":10},"end":{"line":86,"column":33}},{"start":{"line":86,"column":37},"end":{"line":86,"column":58}}],"line":86},"2":{"loc":{"start":{"line":87,"column":6},"end":{"line":87,"column":102}},"type":"if","locations":[{"start":{"line":87,"column":6},"end":{"line":87,"column":102}},{"start":{"line":87,"column":6},"end":{"line":87,"column":102}}],"line":87},"3":{"loc":{"start":{"line":87,"column":10},"end":{"line":87,"column":58}},"type":"binary-expr","locations":[{"start":{"line":87,"column":10},"end":{"line":87,"column":33}},{"start":{"line":87,"column":37},"end":{"line":87,"column":58}}],"line":87},"4":{"loc":{"start":{"line":94,"column":8},"end":{"line":114,"column":9}},"type":"if","locations":[{"start":{"line":94,"column":8},"end":{"line":114,"column":9}},{"start":{"line":94,"column":8},"end":{"line":114,"column":9}}],"line":94},"5":{"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":51}},"type":"binary-expr","locations":[{"start":{"line":94,"column":12},"end":{"line":94,"column":29}},{"start":{"line":94,"column":33},"end":{"line":94,"column":51}}],"line":94},"6":{"loc":{"start":{"line":95,"column":31},"end":{"line":95,"column":82}},"type":"cond-expr","locations":[{"start":{"line":95,"column":50},"end":{"line":95,"column":58}},{"start":{"line":95,"column":61},"end":{"line":95,"column":82}}],"line":95},"7":{"loc":{"start":{"line":95,"column":84},"end":{"line":95,"column":137}},"type":"cond-expr","locations":[{"start":{"line":95,"column":104},"end":{"line":95,"column":113}},{"start":{"line":95,"column":116},"end":{"line":95,"column":137}}],"line":95},"8":{"loc":{"start":{"line":97,"column":10},"end":{"line":99,"column":11}},"type":"if","locations":[{"start":{"line":97,"column":10},"end":{"line":99,"column":11}},{"start":{"line":97,"column":10},"end":{"line":99,"column":11}}],"line":97},"9":{"loc":{"start":{"line":100,"column":15},"end":{"line":114,"column":9}},"type":"if","locations":[{"start":{"line":100,"column":15},"end":{"line":114,"column":9}},{"start":{"line":100,"column":15},"end":{"line":114,"column":9}}],"line":100},"10":{"loc":{"start":{"line":100,"column":19},"end":{"line":100,"column":117}},"type":"binary-expr","locations":[{"start":{"line":100,"column":19},"end":{"line":100,"column":66}},{"start":{"line":100,"column":70},"end":{"line":100,"column":117}}],"line":100},"11":{"loc":{"start":{"line":103,"column":10},"end":{"line":105,"column":11}},"type":"if","locations":[{"start":{"line":103,"column":10},"end":{"line":105,"column":11}},{"start":{"line":103,"column":10},"end":{"line":105,"column":11}}],"line":103},"12":{"loc":{"start":{"line":108,"column":12},"end":{"line":110,"column":13}},"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":110,"column":13}},{"start":{"line":108,"column":12},"end":{"line":110,"column":13}}],"line":108},"13":{"loc":{"start":{"line":132,"column":8},"end":{"line":150,"column":9}},"type":"switch","locations":[{"start":{"line":133,"column":10},"end":{"line":145,"column":48}},{"start":{"line":147,"column":10},"end":{"line":147,"column":17}},{"start":{"line":148,"column":10},"end":{"line":149,"column":35}}],"line":132},"14":{"loc":{"start":{"line":179,"column":6},"end":{"line":181,"column":7}},"type":"if","locations":[{"start":{"line":179,"column":6},"end":{"line":181,"column":7}},{"start":{"line":179,"column":6},"end":{"line":181,"column":7}}],"line":179},"15":{"loc":{"start":{"line":196,"column":6},"end":{"line":204,"column":7}},"type":"if","locations":[{"start":{"line":196,"column":6},"end":{"line":204,"column":7}},{"start":{"line":196,"column":6},"end":{"line":204,"column":7}}],"line":196},"16":{"loc":{"start":{"line":212,"column":12},"end":{"line":258,"column":13}},"type":"switch","locations":[{"start":{"line":213,"column":14},"end":{"line":219,"column":50}},{"start":{"line":221,"column":14},"end":{"line":228,"column":51}},{"start":{"line":230,"column":14},"end":{"line":250,"column":22}},{"start":{"line":252,"column":14},"end":{"line":253,"column":30}},{"start":{"line":255,"column":14},"end":{"line":255,"column":22}},{"start":{"line":256,"column":14},"end":{"line":257,"column":40}}],"line":212},"17":{"loc":{"start":{"line":214,"column":16},"end":{"line":217,"column":17}},"type":"if","locations":[{"start":{"line":214,"column":16},"end":{"line":217,"column":17}},{"start":{"line":214,"column":16},"end":{"line":217,"column":17}}],"line":214},"18":{"loc":{"start":{"line":222,"column":16},"end":{"line":225,"column":17}},"type":"if","locations":[{"start":{"line":222,"column":16},"end":{"line":225,"column":17}},{"start":{"line":222,"column":16},"end":{"line":225,"column":17}}],"line":222},"19":{"loc":{"start":{"line":232,"column":33},"end":{"line":232,"column":118}},"type":"cond-expr","locations":[{"start":{"line":232,"column":65},"end":{"line":232,"column":100}},{"start":{"line":232,"column":103},"end":{"line":232,"column":118}}],"line":232},"20":{"loc":{"start":{"line":235,"column":16},"end":{"line":246,"column":37}},"type":"if","locations":[{"start":{"line":235,"column":16},"end":{"line":246,"column":37}},{"start":{"line":235,"column":16},"end":{"line":246,"column":37}}],"line":235},"21":{"loc":{"start":{"line":235,"column":20},"end":{"line":235,"column":100}},"type":"binary-expr","locations":[{"start":{"line":235,"column":20},"end":{"line":235,"column":23}},{"start":{"line":235,"column":27},"end":{"line":235,"column":36}},{"start":{"line":235,"column":40},"end":{"line":235,"column":55}},{"start":{"line":235,"column":59},"end":{"line":235,"column":100}}],"line":235},"22":{"loc":{"start":{"line":238,"column":20},"end":{"line":242,"column":21}},"type":"if","locations":[{"start":{"line":238,"column":20},"end":{"line":242,"column":21}},{"start":{"line":238,"column":20},"end":{"line":242,"column":21}}],"line":238},"23":{"loc":{"start":{"line":272,"column":2},"end":{"line":272,"column":186}},"type":"if","locations":[{"start":{"line":272,"column":2},"end":{"line":272,"column":186}},{"start":{"line":272,"column":2},"end":{"line":272,"column":186}}],"line":272},"24":{"loc":{"start":{"line":272,"column":98},"end":{"line":272,"column":186}},"type":"if","locations":[{"start":{"line":272,"column":98},"end":{"line":272,"column":186}},{"start":{"line":272,"column":98},"end":{"line":272,"column":186}}],"line":272},"25":{"loc":{"start":{"line":281,"column":2},"end":{"line":287,"column":3}},"type":"if","locations":[{"start":{"line":281,"column":2},"end":{"line":287,"column":3}},{"start":{"line":281,"column":2},"end":{"line":287,"column":3}}],"line":281},"26":{"loc":{"start":{"line":283,"column":9},"end":{"line":287,"column":3}},"type":"if","locations":[{"start":{"line":283,"column":9},"end":{"line":287,"column":3}},{"start":{"line":283,"column":9},"end":{"line":287,"column":3}}],"line":283},"27":{"loc":{"start":{"line":285,"column":9},"end":{"line":287,"column":3}},"type":"if","locations":[{"start":{"line":285,"column":9},"end":{"line":287,"column":3}},{"start":{"line":285,"column":9},"end":{"line":287,"column":3}}],"line":285},"28":{"loc":{"start":{"line":293,"column":17},"end":{"line":293,"column":90}},"type":"cond-expr","locations":[{"start":{"line":293,"column":70},"end":{"line":293,"column":82}},{"start":{"line":293,"column":85},"end":{"line":293,"column":90}}],"line":293},"29":{"loc":{"start":{"line":293,"column":17},"end":{"line":293,"column":67}},"type":"binary-expr","locations":[{"start":{"line":293,"column":17},"end":{"line":293,"column":37}},{"start":{"line":293,"column":41},"end":{"line":293,"column":67}}],"line":293},"30":{"loc":{"start":{"line":295,"column":2},"end":{"line":301,"column":3}},"type":"if","locations":[{"start":{"line":295,"column":2},"end":{"line":301,"column":3}},{"start":{"line":295,"column":2},"end":{"line":301,"column":3}}],"line":295},"31":{"loc":{"start":{"line":309,"column":2},"end":{"line":311,"column":3}},"type":"if","locations":[{"start":{"line":309,"column":2},"end":{"line":311,"column":3}},{"start":{"line":309,"column":2},"end":{"line":311,"column":3}}],"line":309},"32":{"loc":{"start":{"line":332,"column":4},"end":{"line":337,"column":5}},"type":"if","locations":[{"start":{"line":332,"column":4},"end":{"line":337,"column":5}},{"start":{"line":332,"column":4},"end":{"line":337,"column":5}}],"line":332},"33":{"loc":{"start":{"line":362,"column":4},"end":{"line":364,"column":5}},"type":"if","locations":[{"start":{"line":362,"column":4},"end":{"line":364,"column":5}},{"start":{"line":362,"column":4},"end":{"line":364,"column":5}}],"line":362},"34":{"loc":{"start":{"line":362,"column":8},"end":{"line":362,"column":115}},"type":"binary-expr","locations":[{"start":{"line":362,"column":8},"end":{"line":362,"column":33}},{"start":{"line":362,"column":37},"end":{"line":362,"column":54}},{"start":{"line":362,"column":58},"end":{"line":362,"column":115}}],"line":362}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":1,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1,"83":0,"84":1,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":2,"144":2,"145":2,"146":2,"147":1,"148":1,"149":0,"150":2,"151":5,"152":5,"153":2,"154":3,"155":1,"156":2,"157":1,"158":5,"159":1,"160":1,"161":1,"162":1,"163":0,"164":1,"165":1,"166":0,"167":1,"168":1,"169":1,"170":1,"171":1,"172":1,"173":1,"174":1,"175":4,"176":4,"177":1,"178":1,"179":1,"180":1,"181":1,"182":1,"183":1,"184":1,"185":1,"186":1,"187":1,"188":4,"189":4,"190":2,"191":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":2,"26":5,"27":1,"28":1,"29":1,"30":4,"31":1,"32":4},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0],"16":[0,0,0,0,0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0,0,0],"22":[0,0],"23":[1,1],"24":[0,1],"25":[2,3],"26":[1,2],"27":[1,1],"28":[0,1],"29":[1,0],"30":[1,0],"31":[0,1],"32":[1,3],"33":[2,2],"34":[4,3,2]},"inputSourceMap":{"version":3,"sources":["image.js"],"names":["cropAndSaveFile","imageSize","file","newFile","p","Promise","resolve","smartcrop","crop","width","parseInt","height","then","result","topCrop","Jimp","read","image","x","y","write","err","console","error","cropAndSaveFiles","images","resp","length","cropedImage","thumbs","i","ext","path","extname","replace","push","name","Manager","instance","pathPublish","size","splitedImage","split","newWidth","newHeight","originalImage","originalWidth","bitmap","originalHeight","ratio","resize","AUTO","log","generateThumbnail","toLowerCase","thumbFileName","thumbFileNameRelative","cropThumb","thumb","saveFile","req","keepName","query","success","filePath","pipe","busboy","on","fieldname","filename","encoding","mimetype","slug","createMediaSlug","mediaType","getMediaType","folderFilePath","createMediaFolder","hasSentHeader","folderWebPath","config","upload","posix","join","resume","response","isValid","isValidMedia","fstream","fse","createWriteStream","thumbResp","thumbnail","test","process","platform","abeExtend","hooks","trigger","input","indexOf","thumbsSizes","cmsData","regex","getAttr","allowedExtensions","extensions","allowedMimetypes","mimetypes","type","filenameNoExt","basename","remove","coreUtils","random","generateUniqueIdentifier","mkdirp","sync","getThumbsList","thumbsList","pathToThumbs","files","getFilesSync","Array","prototype","forEach","call","pathFile","originalFile","thumbFile","getAssociatedImageFileFromThumb","rexMatchImageName","sep","originalName","imageList","pathThumb","pop"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/cms/media/","sourcesContent":["import execPromise from 'child-process-promise'\nimport mkdirp from 'mkdirp'\nimport fse from 'fs-extra'\nimport slug from 'slugify'\nimport Jimp from 'jimp'\nimport path from 'path'\nimport {Promise} from 'bluebird'\nimport smartcrop from 'smartcrop-jimp'\n\nimport {abeExtend, coreUtils, cmsData, config, Manager} from '../../'\n\nexport function cropAndSaveFile(imageSize, file, newFile) {\n  var p = new Promise(resolve => {\n    smartcrop.crop(file, { width: parseInt(imageSize[0]), height: parseInt(imageSize[1]) })\n      .then(function(result) {\n        var crop = result.topCrop;\n        Jimp.read(file)\n          .then(function(image) {\n            image\n            .crop(crop.x, crop.y, crop.width, crop.height)\n            .write(newFile)\n          });\n      })\n      .catch(function(err) {\n        console.error(err)\n      });\n\n    resolve()\n  })\n  return p\n}\n\n// export function smartCropAndSaveFile(imageSize, file, newFile) {\n//   var cmd = `node node_modules/smartcrop-cli/smartcrop-cli.js --width ${parseInt(\n//     imageSize[0]\n//   )} --height ${parseInt(imageSize[1])} ${file} ${newFile}`\n//   var p = execPromise.exec(cmd)\n//   return p\n// }\n\nexport function cropAndSaveFiles(images, file, resp) {\n  var length = images.length\n  var cropedImage = 0\n  resp.thumbs = []\n  var p = new Promise(resolve => {\n    for (var i = 0; i < length; i++) {\n      let image = images[i]\n      let ext = path.extname(file)\n      let newFile = file.replace(ext, `_${images[i]}${ext}`)\n      resp.thumbs.push({\n        name: newFile.replace(Manager.instance.pathPublish, ''),\n        size: image\n      })\n\n      let splitedImage = image.split('x')\n      let newWidth = null\n      let newHeight = null\n\n      if (splitedImage[0] != null && splitedImage[0] != '')\n        newWidth = parseInt(image.split('x')[0])\n      if (splitedImage[1] != null && splitedImage[1] != '')\n        newHeight = parseInt(image.split('x')[1])\n\n      Jimp.read(file)\n        .then(function(originalImage) {\n          var originalWidth = originalImage.bitmap.width\n          var originalHeight = originalImage.bitmap.height\n          var ratio = originalWidth * newHeight / newWidth\n          if (newWidth === null || newHeight === null) {\n            originalImage\n              .resize(\n                newWidth != null ? newWidth : Jimp.AUTO,\n                newHeight != null ? newHeight : Jimp.AUTO\n              )\n              .write(newFile)\n            if (++cropedImage === length) {\n              resolve(resp)\n            }\n          } else if (\n            parseInt(ratio - 1) <= parseInt(originalHeight) &&\n            parseInt(ratio + 1) >= parseInt(originalHeight)\n          ) {\n            originalImage\n              .resize(\n                parseInt(image.split('x')[0]),\n                parseInt(image.split('x')[1])\n              )\n              .write(newFile)\n            if (++cropedImage === length) {\n              resolve(resp)\n            }\n          } else {\n            cropAndSaveFile(image.split('x'), file, newFile)\n            .then(function(result) {\n              if (++cropedImage === length) {\n                resolve(resp)\n              }\n            })\n            .catch(function(err) {\n              console.log(err)\n            })\n          }\n        })\n        .catch(function(err) {\n          console.log(err)\n        })\n    }\n  })\n\n  return p\n}\n\nexport const generateThumbnail = async (file) => {\n  var ext = path.extname(file).toLowerCase()\n  var thumbFileName = file.replace(ext, `_thumb${ext}`)\n  var thumbFileNameRelative = thumbFileName.replace(\n    Manager.instance.pathPublish,\n    ''\n  )\n  var p = new Promise(resolve => {\n    var cropThumb = cropAndSaveFile([250, 250], file, thumbFileName)\n    cropThumb.then(function(result) {\n      resolve({thumb: thumbFileNameRelative})\n    })\n  })\n\n  return p\n}\n\nexport function saveFile(req) {\n  var p = new Promise(resolve => {\n    const keepName = (req.query.keepName === 'true')\n    var resp = {success: 1}\n    var filePath\n    req.pipe(req.busboy)\n    req.busboy.on('file', function(\n      fieldname,\n      file,\n      filename,\n      encoding,\n      mimetype\n    ) {\n      var ext = path.extname(filename).toLowerCase()\n      var slug = createMediaSlug(filename, ext, keepName)\n      var mediaType = getMediaType(ext)\n\n      var folderFilePath = createMediaFolder(mediaType)\n      var hasSentHeader = false\n      var folderWebPath = '/' + config.upload.image\n      if (config.upload[mediaType] != null) {\n        folderWebPath = '/' + config.upload[mediaType]\n      }\n\n      filePath = path.posix.join(folderFilePath, slug)\n      resp['filePath'] = path.posix.join('/' + folderWebPath, slug)\n\n      file.on('limit', function() {\n        hasSentHeader = true\n        file.resume()\n        resolve({error: 1, response: 'file is too big'})\n        return\n      })\n\n      var isValid = isValidMedia(mimetype, ext)\n      if (isValid.error) {\n        hasSentHeader = true\n        file.resume()\n        resolve({error: 1, response: isValid.error})\n        return\n      }\n\n      var fstream = fse.createWriteStream(filePath)\n      fstream.on('finish', async () => {\n        if (hasSentHeader) return\n        if (mediaType === 'image') {\n          const thumbResp = await generateThumbnail(filePath)\n          resp.thumbnail = /^win/.test(process.platform)\n            ? thumbResp.thumb.replace(/\\\\/g, '/')\n            : thumbResp.thumb\n\n          resp = abeExtend.hooks.instance.trigger('afterSaveImage', resp, req)\n          if (\n            req &&\n            req.query &&\n            req.query.input &&\n            req.query.input.indexOf('data-size') > -1\n          ) {\n            var thumbsSizes = cmsData.regex\n              .getAttr(req.query.input, 'data-size')\n              .replace(' ', '')\n              .split(',')\n            cropAndSaveFiles(thumbsSizes, filePath, resp).then(function(resp) {\n              if (/^win/.test(process.platform)) {\n                for (var i = 0; i < resp.thumbs.length; i++) {\n                  resp.thumbs[i].name = resp.thumbs[i].name.replace(/\\\\/g, '/')\n                }\n              }\n              resolve(resp)\n            })\n          } else resolve(resp)\n          //})\n        } else {\n          resolve(resp)\n        }\n      })\n      file.pipe(fstream)\n    })\n  })\n\n  return p\n}\n\nexport function isValidMedia(mimetype, ext) {\n  var allowedExtensions = config.upload.extensions\n  var allowedMimetypes = config.upload.mimetypes\n\n  var error = false\n  if (allowedMimetypes.indexOf(mimetype) < 0)\n    error = ext + ' is not an authorized mimetype'\n  else if (allowedExtensions.indexOf(ext) < 0)\n    error = ext + ' is not an authorized extension'\n\n  return {error: error}\n}\n\nexport function getMediaType(ext) {\n  let type = 'document'\n\n  if (/\\.(jpg|jpeg|png|gif|svg|webp)/.test(ext)) {\n    type = 'image'\n  } else if (/\\.(mov|avi|mp4)/.test(ext)) {\n    type = 'video'\n  } else if (/\\.(mp3|wav)/.test(ext)) {\n    type = 'sound'\n  }\n\n  return type\n}\n\nexport function createMediaSlug(filename, ext, keepName = false) {\n  if (!keepName) {\n    const filenameNoExt = path.basename(filename, ext).toLowerCase()\n    return (`${slug(filenameNoExt, { remove: /[$*+~.()'\"!\\:@^,;]/g })}-${coreUtils.random.generateUniqueIdentifier(2)}${ext}`)\n  }\n\n  return filename\n}\n\nexport function createMediaFolder(mediaType) {\n  var folderWebPath = '/' + config.upload.image\n  if (config.upload[mediaType] != null) {\n    folderWebPath = '/' + config.upload[mediaType]\n  }\n  folderWebPath = abeExtend.hooks.instance.trigger(\n    'beforeSaveImage',\n    folderWebPath\n  )\n  var folderFilePath = path.join(Manager.instance.pathPublish, folderWebPath)\n  mkdirp.sync(folderFilePath)\n\n  return folderFilePath\n}\n\nexport function getThumbsList() {\n  var thumbsList = []\n  var pathToThumbs = path.join(\n    Manager.instance.pathPublish,\n    config.upload.image\n  )\n  var files = coreUtils.file.getFilesSync(pathToThumbs, true)\n  Array.prototype.forEach.call(files, pathFile => {\n    pathFile = pathFile.replace(Manager.instance.pathPublish, '')\n    if (pathFile.indexOf('_thumb.') > -1) {\n      thumbsList.push({\n        originalFile: pathFile.replace('_thumb.', '.'),\n        thumbFile: pathFile\n      })\n    }\n  })\n\n  return thumbsList\n}\n\nexport function getAssociatedImageFileFromThumb(name) {\n  var rexMatchImageName = /_(thumb|\\d+x\\d+)\\./\n  name = path.join(path.sep, name)\n  var originalName = path.join(path.sep, name.replace(rexMatchImageName, '.'))\n  var imageList = {\n    thumbFile: name,\n    originalFile: originalName,\n    thumbs: []\n  }\n  var pathThumb = name.split('/')\n  pathThumb.pop()\n  pathThumb = path.join(Manager.instance.pathPublish, pathThumb.join('/'))\n\n  var files = coreUtils.file.getFilesSync(pathThumb, true)\n  Array.prototype.forEach.call(files, pathFile => {\n    pathFile = pathFile.replace(Manager.instance.pathPublish, '')\n    if (\n      pathFile !== originalName &&\n      pathFile !== name &&\n      pathFile.replace(rexMatchImageName, '.') === originalName\n    ) {\n      imageList.thumbs.push(pathFile)\n    }\n  })\n\n  return imageList\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"343ff318cd5788b05266ac8e9b8ecc2bdb3591c5","contentHash":"f2c5a07e0dbc64eccc3f4315bacd24ebf2732e85c64f3605e34b93649f66ccca"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/index.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":30},"end":{"line":5,"column":86}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":3}},"3":{"start":{"line":10,"column":0},"end":{"line":15,"column":3}},"4":{"start":{"line":13,"column":4},"end":{"line":13,"column":31}},"5":{"start":{"line":16,"column":0},"end":{"line":16,"column":115}},"6":{"start":{"line":18,"column":12},"end":{"line":18,"column":55}},"7":{"start":{"line":20,"column":0},"end":{"line":20,"column":22}},"8":{"start":{"line":22,"column":11},"end":{"line":22,"column":53}},"9":{"start":{"line":24,"column":0},"end":{"line":24,"column":20}},"10":{"start":{"line":26,"column":11},"end":{"line":26,"column":53}},"11":{"start":{"line":28,"column":0},"end":{"line":28,"column":20}},"12":{"start":{"line":30,"column":15},"end":{"line":30,"column":59}},"13":{"start":{"line":32,"column":11},"end":{"line":32,"column":53}},"14":{"start":{"line":34,"column":0},"end":{"line":34,"column":20}},"15":{"start":{"line":36,"column":11},"end":{"line":36,"column":53}},"16":{"start":{"line":38,"column":0},"end":{"line":38,"column":20}},"17":{"start":{"line":40,"column":13},"end":{"line":40,"column":57}},"18":{"start":{"line":42,"column":0},"end":{"line":42,"column":24}},"19":{"start":{"line":44,"column":11},"end":{"line":44,"column":53}},"20":{"start":{"line":46,"column":0},"end":{"line":46,"column":20}}},"fnMap":{"0":{"name":"get","decl":{"start":{"line":12,"column":16},"end":{"line":12,"column":19}},"loc":{"start":{"line":12,"column":22},"end":{"line":14,"column":3}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/","sourcesContent":["import * as array from './array'\nimport * as sort from './sort'\nimport * as text from './text'\nimport locales from './locales'\nimport * as slug from './slug'\nimport * as file from './file'\nimport * as random from './random'\nimport * as mail from './mail'\n\nexport {array, sort, text, locales, slug, file, random, mail}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"780af29f6ba50903797ca125a0bf9e4a91a359a4","contentHash":"c7f127efdd6646b223f472531160eec8cbadf41136124e76c3bae0757a25a874"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/array.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/array.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":24}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":22}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":20}},"4":{"start":{"line":9,"column":0},"end":{"line":9,"column":36}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":28}},"6":{"start":{"line":20,"column":12},"end":{"line":20,"column":22}},"7":{"start":{"line":21,"column":15},"end":{"line":21,"column":17}},"8":{"start":{"line":22,"column":10},"end":{"line":22,"column":11}},"9":{"start":{"line":24,"column":2},"end":{"line":30,"column":3}},"10":{"start":{"line":25,"column":14},"end":{"line":25,"column":20}},"11":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"12":{"start":{"line":28,"column":6},"end":{"line":28,"column":23}},"13":{"start":{"line":32,"column":2},"end":{"line":32,"column":16}},"14":{"start":{"line":45,"column":17},"end":{"line":45,"column":19}},"15":{"start":{"line":46,"column":2},"end":{"line":49,"column":5}},"16":{"start":{"line":47,"column":19},"end":{"line":47,"column":34}},"17":{"start":{"line":48,"column":4},"end":{"line":48,"column":28}},"18":{"start":{"line":50,"column":12},"end":{"line":50,"column":22}},"19":{"start":{"line":51,"column":15},"end":{"line":51,"column":17}},"20":{"start":{"line":52,"column":10},"end":{"line":52,"column":11}},"21":{"start":{"line":54,"column":2},"end":{"line":74,"column":3}},"22":{"start":{"line":55,"column":14},"end":{"line":55,"column":20}},"23":{"start":{"line":56,"column":16},"end":{"line":56,"column":21}},"24":{"start":{"line":57,"column":4},"end":{"line":69,"column":7}},"25":{"start":{"line":58,"column":14},"end":{"line":58,"column":15}},"26":{"start":{"line":59,"column":14},"end":{"line":59,"column":20}},"27":{"start":{"line":61,"column":6},"end":{"line":64,"column":7}},"28":{"start":{"line":62,"column":8},"end":{"line":62,"column":25}},"29":{"start":{"line":63,"column":8},"end":{"line":63,"column":12}},"30":{"start":{"line":66,"column":6},"end":{"line":68,"column":7}},"31":{"start":{"line":67,"column":8},"end":{"line":67,"column":21}},"32":{"start":{"line":71,"column":4},"end":{"line":73,"column":5}},"33":{"start":{"line":72,"column":6},"end":{"line":72,"column":23}},"34":{"start":{"line":76,"column":2},"end":{"line":76,"column":16}},"35":{"start":{"line":89,"column":12},"end":{"line":89,"column":22}},"36":{"start":{"line":90,"column":15},"end":{"line":90,"column":17}},"37":{"start":{"line":91,"column":10},"end":{"line":91,"column":11}},"38":{"start":{"line":93,"column":2},"end":{"line":99,"column":3}},"39":{"start":{"line":94,"column":14},"end":{"line":94,"column":20}},"40":{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},"41":{"start":{"line":97,"column":6},"end":{"line":97,"column":21}},"42":{"start":{"line":101,"column":2},"end":{"line":101,"column":16}},"43":{"start":{"line":113,"column":10},"end":{"line":113,"column":20}},"44":{"start":{"line":115,"column":2},"end":{"line":119,"column":3}},"45":{"start":{"line":116,"column":4},"end":{"line":118,"column":5}},"46":{"start":{"line":117,"column":6},"end":{"line":117,"column":23}},"47":{"start":{"line":121,"column":2},"end":{"line":121,"column":13}},"48":{"start":{"line":125,"column":10},"end":{"line":125,"column":20}},"49":{"start":{"line":127,"column":2},"end":{"line":131,"column":3}},"50":{"start":{"line":128,"column":4},"end":{"line":130,"column":5}},"51":{"start":{"line":129,"column":6},"end":{"line":129,"column":18}},"52":{"start":{"line":133,"column":2},"end":{"line":133,"column":15}}},"fnMap":{"0":{"name":"filter","decl":{"start":{"line":19,"column":9},"end":{"line":19,"column":15}},"loc":{"start":{"line":19,"column":34},"end":{"line":33,"column":1}},"line":19},"1":{"name":"facet","decl":{"start":{"line":44,"column":9},"end":{"line":44,"column":14}},"loc":{"start":{"line":44,"column":34},"end":{"line":77,"column":1}},"line":44},"2":{"name":"(anonymous_2)","decl":{"start":{"line":46,"column":38},"end":{"line":46,"column":39}},"loc":{"start":{"line":46,"column":54},"end":{"line":49,"column":3}},"line":46},"3":{"name":"(anonymous_3)","decl":{"start":{"line":57,"column":43},"end":{"line":57,"column":44}},"loc":{"start":{"line":57,"column":61},"end":{"line":69,"column":5}},"line":57},"4":{"name":"find","decl":{"start":{"line":88,"column":9},"end":{"line":88,"column":13}},"loc":{"start":{"line":88,"column":32},"end":{"line":102,"column":1}},"line":88},"5":{"name":"removeByAttr","decl":{"start":{"line":112,"column":9},"end":{"line":112,"column":21}},"loc":{"start":{"line":112,"column":40},"end":{"line":122,"column":1}},"line":112},"6":{"name":"contains","decl":{"start":{"line":124,"column":9},"end":{"line":124,"column":17}},"loc":{"start":{"line":124,"column":28},"end":{"line":134,"column":1}},"line":124}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},{"start":{"line":27,"column":4},"end":{"line":29,"column":5}}],"line":27},"1":{"loc":{"start":{"line":66,"column":6},"end":{"line":68,"column":7}},"type":"if","locations":[{"start":{"line":66,"column":6},"end":{"line":68,"column":7}},{"start":{"line":66,"column":6},"end":{"line":68,"column":7}}],"line":66},"2":{"loc":{"start":{"line":71,"column":4},"end":{"line":73,"column":5}},"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":73,"column":5}},{"start":{"line":71,"column":4},"end":{"line":73,"column":5}}],"line":71},"3":{"loc":{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},{"start":{"line":96,"column":4},"end":{"line":98,"column":5}}],"line":96},"4":{"loc":{"start":{"line":116,"column":4},"end":{"line":118,"column":5}},"type":"if","locations":[{"start":{"line":116,"column":4},"end":{"line":118,"column":5}},{"start":{"line":116,"column":4},"end":{"line":118,"column":5}}],"line":116},"5":{"loc":{"start":{"line":116,"column":8},"end":{"line":116,"column":95}},"type":"binary-expr","locations":[{"start":{"line":116,"column":8},"end":{"line":116,"column":14}},{"start":{"line":116,"column":18},"end":{"line":116,"column":45}},{"start":{"line":116,"column":49},"end":{"line":116,"column":69}},{"start":{"line":116,"column":73},"end":{"line":116,"column":95}}],"line":116},"6":{"loc":{"start":{"line":128,"column":4},"end":{"line":130,"column":5}},"type":"if","locations":[{"start":{"line":128,"column":4},"end":{"line":130,"column":5}},{"start":{"line":128,"column":4},"end":{"line":130,"column":5}}],"line":128}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":2,"11":2,"12":1,"13":1,"14":2,"15":2,"16":3,"17":3,"18":2,"19":2,"20":2,"21":2,"22":4,"23":4,"24":4,"25":6,"26":6,"27":6,"28":8,"29":8,"30":6,"31":3,"32":4,"33":3,"34":2,"35":5,"36":5,"37":5,"38":5,"39":13,"40":13,"41":5,"42":5,"43":1,"44":1,"45":2,"46":1,"47":1,"48":3,"49":3,"50":105,"51":2,"52":1},"f":{"0":1,"1":2,"2":3,"3":6,"4":5,"5":1,"6":3},"b":{"0":[1,1],"1":[3,3],"2":[3,1],"3":[5,8],"4":[1,1],"5":[2,2,1,1],"6":[2,103]},"inputSourceMap":{"version":3,"sources":["array.js"],"names":["filter","arr","attr","value","len","length","result","i","elt","push","facet","attrs","searches","Array","prototype","forEach","call","attrPath","split","found","search","j","a","indexOf","find","removeByAttr","hasOwnProperty","arguments","splice","contains","obj"],"mappings":";;;;;;;;;;;AAAA;;;;;;;AAOO,SAASA,MAAT,CAAgBC,GAAhB,EAAqBC,IAArB,EAA2BC,KAA3B,EAAkC;AACvC,MAAMC,GAAG,GAAGH,GAAG,CAACI,MAAhB;AACA,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,CAAC,GAAG,CAAR;;AAEA,SAAOA,CAAC,GAAGH,GAAX,EAAgBG,CAAC,IAAI,CAArB,EAAwB;AACtB,QAAIC,GAAG,GAAGP,GAAG,CAACM,CAAD,CAAb;;AAEA,QAAIC,GAAG,CAACN,IAAD,CAAH,IAAaC,KAAjB,EAAwB;AACtBG,MAAAA,MAAM,CAACG,IAAP,CAAYD,GAAZ;AACD;AACF;;AACD,SAAOF,MAAP;AACD;AAED;;;;;;;;;;AAQO,SAASI,KAAT,CAAeT,GAAf,EAAoBU,KAApB,EAA2BR,KAA3B,EAAkC;AACvC,MAAIS,QAAQ,GAAG,EAAf;AACAC,EAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BL,KAA7B,EAAoC,UAAAT,IAAI,EAAI;AAC1C,QAAIe,QAAQ,GAAGf,IAAI,CAACgB,KAAL,CAAW,GAAX,CAAf;AACAN,IAAAA,QAAQ,CAACH,IAAT,CAAcQ,QAAd;AACD,GAHD;AAKA,MAAMb,GAAG,GAAGH,GAAG,CAACI,MAAhB;AACA,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,CAAC,GAAG,CAAR;;AAEA,SAAOA,CAAC,GAAGH,GAAX,EAAgBG,CAAC,IAAI,CAArB,EAAwB;AACtB,QAAIC,GAAG,GAAGP,GAAG,CAACM,CAAD,CAAb;AACA,QAAIY,KAAK,GAAG,KAAZ;AACAN,IAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BJ,QAA7B,EAAuC,UAAAQ,MAAM,EAAI;AAC/C,UAAIC,CAAC,GAAG,CAAR;AACA,UAAIC,CAAC,GAAGrB,GAAG,CAACM,CAAD,CAAX;;AACA,aAAOc,CAAC,GAAGD,MAAM,CAACf,MAAlB,EAA0B;AACxBiB,QAAAA,CAAC,GAAGA,CAAC,CAACF,MAAM,CAACC,CAAD,CAAP,CAAL;AACAA,QAAAA,CAAC;AACF;;AACD,UAAIC,CAAC,CAACC,OAAF,CAAUpB,KAAV,MAAqB,CAAC,CAA1B,EAA6B;AAC3BgB,QAAAA,KAAK,GAAG,IAAR;AACD;AACF,KAVD;;AAYA,QAAIA,KAAJ,EAAW;AACTb,MAAAA,MAAM,CAACG,IAAP,CAAYD,GAAZ;AACD;AACF;;AAED,SAAOF,MAAP;AACD;AAED;;;;;;;;;;AAQO,SAASkB,IAAT,CAAcvB,GAAd,EAAmBC,IAAnB,EAAyBC,KAAzB,EAAgC;AACrC,MAAMC,GAAG,GAAGH,GAAG,CAACI,MAAhB;AACA,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,CAAC,GAAG,CAAR;;AAEA,SAAOA,CAAC,GAAGH,GAAX,EAAgBG,CAAC,IAAI,CAArB,EAAwB;AACtB,QAAIC,GAAG,GAAGP,GAAG,CAACM,CAAD,CAAb;;AAEA,QAAIC,GAAG,CAACN,IAAD,CAAH,IAAaC,KAAjB,EAAwB;AACtBG,MAAAA,MAAM,CAACG,IAAP,CAAYF,CAAZ;AACD;AACF;;AACD,SAAOD,MAAP;AACD;AAED;;;;;;;;;AAOO,SAASmB,YAAT,CAAsBxB,GAAtB,EAA2BC,IAA3B,EAAiCC,KAAjC,EAAwC;AAC7C,MAAII,CAAC,GAAGN,GAAG,CAACI,MAAZ;;AACA,SAAOE,CAAC,EAAR,EAAY;AACV,QACEN,GAAG,CAACM,CAAD,CAAH,IACAN,GAAG,CAACM,CAAD,CAAH,CAAOmB,cAAP,CAAsBxB,IAAtB,CADA,IAECyB,SAAS,CAACtB,MAAV,GAAmB,CAAnB,IAAwBJ,GAAG,CAACM,CAAD,CAAH,CAAOL,IAAP,MAAiBC,KAH5C,EAIE;AACAF,MAAAA,GAAG,CAAC2B,MAAJ,CAAWrB,CAAX,EAAc,CAAd;AACD;AACF;;AAED,SAAON,GAAP;AACD;;AAEM,SAAS4B,QAAT,CAAkB5B,GAAlB,EAAuB6B,GAAvB,EAA4B;AACjC,MAAIvB,CAAC,GAAGN,GAAG,CAACI,MAAZ;;AACA,SAAOE,CAAC,EAAR,EAAY;AACV,QAAIN,GAAG,CAACM,CAAD,CAAH,KAAWuB,GAAf,EAAoB;AAClB,aAAO,IAAP;AACD;AACF;;AACD,SAAO,KAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/","sourcesContent":["/**\n * Highly efficient filter on a value in an object\n * @param  {Array} arr   the array of objects\n * @param  {string} attr the attribute to filter on\n * @param  {mixed} value the value to compare\n * @return {Array}       the filtered array\n */\nexport function filter(arr, attr, value) {\n  const len = arr.length\n  let result = []\n  let i = 0\n\n  for (; i < len; i += 1) {\n    let elt = arr[i]\n\n    if (elt[attr] == value) {\n      result.push(elt)\n    }\n  }\n  return result\n}\n\n/**\n * Highly efficient facet on a value in an object\n * Works also for nested properties\n * @param  {Array} arr   the array of objects to search\n * @param  {Array} attrs the attributes to facet on\n * @param  {mixed} value the value to compare\n * @return {Array}       the filtered array\n */\nexport function facet(arr, attrs, value) {\n  let searches = []\n  Array.prototype.forEach.call(attrs, attr => {\n    let attrPath = attr.split('.')\n    searches.push(attrPath)\n  })\n\n  const len = arr.length\n  let result = []\n  let i = 0\n\n  for (; i < len; i += 1) {\n    let elt = arr[i]\n    let found = false\n    Array.prototype.forEach.call(searches, search => {\n      let j = 0\n      let a = arr[i]\n      while (j < search.length) {\n        a = a[search[j]]\n        j++\n      }\n      if (a.indexOf(value) !== -1) {\n        found = true\n      }\n    })\n\n    if (found) {\n      result.push(elt)\n    }\n  }\n\n  return result\n}\n\n/**\n * Highly efficient find indexes on a value in a property of an object\n * Works also for nested properties\n * @param  {Array} arr   the array of objects\n * @param  {string} attr the attribute to filter on\n * @param  {mixed} value the value to compare\n * @return {Array}       the filtered array of indexes\n */\nexport function find(arr, attr, value) {\n  const len = arr.length\n  let result = []\n  let i = 0\n\n  for (; i < len; i += 1) {\n    let elt = arr[i]\n\n    if (elt[attr] == value) {\n      result.push(i)\n    }\n  }\n  return result\n}\n\n/**\n * Remove objects from an array given an attribute value\n * @param  {Array} arr   the array of objects\n * @param  {string} attr the attribute to filter on\n * @param  {mixed} value the value to compare\n * @return {Array}       the array with corresponding objects removed\n */\nexport function removeByAttr(arr, attr, value) {\n  let i = arr.length\n  while (i--) {\n    if (\n      arr[i] &&\n      arr[i].hasOwnProperty(attr) &&\n      (arguments.length > 2 && arr[i][attr] === value)\n    ) {\n      arr.splice(i, 1)\n    }\n  }\n\n  return arr\n}\n\nexport function contains(arr, obj) {\n  var i = arr.length\n  while (i--) {\n    if (arr[i] === obj) {\n      return true\n    }\n  }\n  return false\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0966f007a7c1fae5e838ecbb148e4d6018700c5f","contentHash":"22bd42f4e9c84947dc79ebbd99ad0088affe6b83d58ec547c59cf10de133da5f"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/sort.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/sort.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":32}},"3":{"start":{"line":18,"column":21},"end":{"line":18,"column":33}},"4":{"start":{"line":22,"column":2},"end":{"line":30,"column":3}},"5":{"start":{"line":24,"column":4},"end":{"line":24,"column":59}},"6":{"start":{"line":25,"column":4},"end":{"line":25,"column":22}},"7":{"start":{"line":27,"column":4},"end":{"line":27,"column":41}},"8":{"start":{"line":28,"column":4},"end":{"line":28,"column":45}},"9":{"start":{"line":29,"column":4},"end":{"line":29,"column":40}},"10":{"start":{"line":32,"column":2},"end":{"line":32,"column":15}},"11":{"start":{"line":45,"column":2},"end":{"line":45,"column":25}},"12":{"start":{"line":46,"column":12},"end":{"line":46,"column":23}},"13":{"start":{"line":48,"column":2},"end":{"line":50,"column":3}},"14":{"start":{"line":49,"column":4},"end":{"line":49,"column":14}},"15":{"start":{"line":52,"column":2},"end":{"line":65,"column":3}},"16":{"start":{"line":53,"column":4},"end":{"line":64,"column":6}},"17":{"start":{"line":54,"column":6},"end":{"line":54,"column":28}},"18":{"start":{"line":55,"column":6},"end":{"line":55,"column":28}},"19":{"start":{"line":57,"column":6},"end":{"line":61,"column":7}},"20":{"start":{"line":58,"column":8},"end":{"line":58,"column":25}},"21":{"start":{"line":59,"column":13},"end":{"line":61,"column":7}},"22":{"start":{"line":60,"column":8},"end":{"line":60,"column":26}},"23":{"start":{"line":63,"column":6},"end":{"line":63,"column":15}},"24":{"start":{"line":67,"column":2},"end":{"line":86,"column":4}},"25":{"start":{"line":68,"column":12},"end":{"line":68,"column":13}},"26":{"start":{"line":70,"column":4},"end":{"line":74,"column":5}},"27":{"start":{"line":71,"column":6},"end":{"line":71,"column":21}},"28":{"start":{"line":72,"column":6},"end":{"line":72,"column":21}},"29":{"start":{"line":73,"column":6},"end":{"line":73,"column":10}},"30":{"start":{"line":76,"column":4},"end":{"line":76,"column":37}},"31":{"start":{"line":76,"column":19},"end":{"line":76,"column":37}},"32":{"start":{"line":77,"column":4},"end":{"line":77,"column":37}},"33":{"start":{"line":77,"column":19},"end":{"line":77,"column":37}},"34":{"start":{"line":79,"column":4},"end":{"line":83,"column":5}},"35":{"start":{"line":80,"column":6},"end":{"line":80,"column":24}},"36":{"start":{"line":81,"column":11},"end":{"line":83,"column":5}},"37":{"start":{"line":82,"column":6},"end":{"line":82,"column":23}},"38":{"start":{"line":85,"column":4},"end":{"line":85,"column":13}}},"fnMap":{"0":{"name":"shuffle","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":16}},"loc":{"start":{"line":17,"column":24},"end":{"line":33,"column":1}},"line":17},"1":{"name":"predicatBy","decl":{"start":{"line":44,"column":9},"end":{"line":44,"column":19}},"loc":{"start":{"line":44,"column":33},"end":{"line":87,"column":1}},"line":44},"2":{"name":"(anonymous_2)","decl":{"start":{"line":53,"column":11},"end":{"line":53,"column":12}},"loc":{"start":{"line":53,"column":27},"end":{"line":64,"column":5}},"line":53},"3":{"name":"(anonymous_3)","decl":{"start":{"line":67,"column":9},"end":{"line":67,"column":10}},"loc":{"start":{"line":67,"column":25},"end":{"line":86,"column":3}},"line":67}},"branchMap":{"0":{"loc":{"start":{"line":48,"column":2},"end":{"line":50,"column":3}},"type":"if","locations":[{"start":{"line":48,"column":2},"end":{"line":50,"column":3}},{"start":{"line":48,"column":2},"end":{"line":50,"column":3}}],"line":48},"1":{"loc":{"start":{"line":52,"column":2},"end":{"line":65,"column":3}},"type":"if","locations":[{"start":{"line":52,"column":2},"end":{"line":65,"column":3}},{"start":{"line":52,"column":2},"end":{"line":65,"column":3}}],"line":52},"2":{"loc":{"start":{"line":57,"column":6},"end":{"line":61,"column":7}},"type":"if","locations":[{"start":{"line":57,"column":6},"end":{"line":61,"column":7}},{"start":{"line":57,"column":6},"end":{"line":61,"column":7}}],"line":57},"3":{"loc":{"start":{"line":59,"column":13},"end":{"line":61,"column":7}},"type":"if","locations":[{"start":{"line":59,"column":13},"end":{"line":61,"column":7}},{"start":{"line":59,"column":13},"end":{"line":61,"column":7}}],"line":59},"4":{"loc":{"start":{"line":76,"column":4},"end":{"line":76,"column":37}},"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":37}},{"start":{"line":76,"column":4},"end":{"line":76,"column":37}}],"line":76},"5":{"loc":{"start":{"line":77,"column":4},"end":{"line":77,"column":37}},"type":"if","locations":[{"start":{"line":77,"column":4},"end":{"line":77,"column":37}},{"start":{"line":77,"column":4},"end":{"line":77,"column":37}}],"line":77},"6":{"loc":{"start":{"line":79,"column":4},"end":{"line":83,"column":5}},"type":"if","locations":[{"start":{"line":79,"column":4},"end":{"line":83,"column":5}},{"start":{"line":79,"column":4},"end":{"line":83,"column":5}}],"line":79},"7":{"loc":{"start":{"line":81,"column":11},"end":{"line":83,"column":5}},"type":"if","locations":[{"start":{"line":81,"column":11},"end":{"line":83,"column":5}},{"start":{"line":81,"column":11},"end":{"line":83,"column":5}}],"line":81}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":3,"7":3,"8":3,"9":3,"10":1,"11":139,"12":139,"13":139,"14":3,"15":139,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":139,"25":167,"26":167,"27":176,"28":176,"29":176,"30":167,"31":12,"32":167,"33":12,"34":167,"35":82,"36":85,"37":80,"38":5},"f":{"0":1,"1":139,"2":0,"3":167},"b":{"0":[3,136],"1":[0,139],"2":[0,0],"3":[0,0],"4":[12,155],"5":[12,155],"6":[82,85],"7":[80,5]},"inputSourceMap":{"version":3,"sources":["sort.js"],"names":["shuffle","array","currentIndex","length","temporaryValue","randomIndex","Math","floor","random","predicatBy","prop","order","split","len","a","b","Date","i","isNaN","parseFloat"],"mappings":";;;;;;;;AAAA;;;;;;;;AAQO,SAASA,OAAT,CAAiBC,KAAjB,EAAwB;AAC7B,MAAIC,YAAY,GAAGD,KAAK,CAACE,MAAzB;AAAA,MACEC,cADF;AAAA,MAEEC,WAFF,CAD6B,CAK7B;;AACA,SAAO,MAAMH,YAAb,EAA2B;AACzB;AACAG,IAAAA,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBN,YAA3B,CAAd;AACAA,IAAAA,YAAY,IAAI,CAAhB,CAHyB,CAKzB;;AACAE,IAAAA,cAAc,GAAGH,KAAK,CAACC,YAAD,CAAtB;AACAD,IAAAA,KAAK,CAACC,YAAD,CAAL,GAAsBD,KAAK,CAACI,WAAD,CAA3B;AACAJ,IAAAA,KAAK,CAACI,WAAD,CAAL,GAAqBD,cAArB;AACD;;AAED,SAAOH,KAAP;AACD;AAED;;;;;;;;;;AAQO,SAASQ,UAAT,CAAoBC,IAApB,EAA0BC,KAA1B,EAAiC;AACtCD,EAAAA,IAAI,GAAGA,IAAI,CAACE,KAAL,CAAW,GAAX,CAAP;AACA,MAAIC,GAAG,GAAGH,IAAI,CAACP,MAAf;;AAEA,MAAIQ,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBA,IAAAA,KAAK,GAAG,CAAR;AACD;;AACD,MAAID,IAAI,KAAK,MAAb,EAAqB;AACnB,WAAO,UAASI,CAAT,EAAYC,CAAZ,EAAe;AACpBD,MAAAA,CAAC,GAAG,IAAIE,IAAJ,CAASF,CAAC,CAACJ,IAAD,CAAV,CAAJ;AACAK,MAAAA,CAAC,GAAG,IAAIC,IAAJ,CAASD,CAAC,CAACL,IAAD,CAAV,CAAJ;;AACA,UAAII,CAAC,GAAGC,CAAR,EAAW;AACT,eAAO,IAAIJ,KAAX;AACD,OAFD,MAEO,IAAIG,CAAC,GAAGC,CAAR,EAAW;AAChB,eAAO,CAAC,CAAD,GAAKJ,KAAZ;AACD;;AACD,aAAO,CAAP;AACD,KATD;AAUD;;AAED,SAAO,UAASG,CAAT,EAAYC,CAAZ,EAAe;AACpB,QAAIE,CAAC,GAAG,CAAR;;AACA,WAAOA,CAAC,GAAGJ,GAAX,EAAgB;AACdC,MAAAA,CAAC,GAAGA,CAAC,CAACJ,IAAI,CAACO,CAAD,CAAL,CAAL;AACAF,MAAAA,CAAC,GAAGA,CAAC,CAACL,IAAI,CAACO,CAAD,CAAL,CAAL;AACAA,MAAAA,CAAC;AACF;;AACD,QAAI,CAACC,KAAK,CAACJ,CAAD,CAAV,EAAeA,CAAC,GAAGK,UAAU,CAACL,CAAD,CAAd;AACf,QAAI,CAACI,KAAK,CAACH,CAAD,CAAV,EAAeA,CAAC,GAAGI,UAAU,CAACJ,CAAD,CAAd;;AACf,QAAID,CAAC,GAAGC,CAAR,EAAW;AACT,aAAO,CAAC,CAAD,GAAKJ,KAAZ;AACD,KAFD,MAEO,IAAIG,CAAC,GAAGC,CAAR,EAAW;AAChB,aAAO,IAAIJ,KAAX;AACD;;AACD,WAAO,CAAP;AACD,GAfD;AAgBD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/","sourcesContent":["/**\n * shuffle an array of objects by date attribute\n *\n * Example : var shuffledArray = coreUtils.sort.shuffle([Object}, Object])\n * \n * @param  {Array} array\n * @return {Array} array\n */\nexport function shuffle(array) {\n  var currentIndex = array.length,\n    temporaryValue,\n    randomIndex\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex)\n    currentIndex -= 1\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex]\n    array[currentIndex] = array[randomIndex]\n    array[randomIndex] = temporaryValue\n  }\n\n  return array\n}\n\n/**\n * This function makes sorting on an array of Json objects possible.\n * Pass the property to be sorted on.\n * Usage: myArray.sort(coreUtils.sort.predicatBy('date',-1));\n * @param  String prop  the json property to sort on\n * @param  integer order order ASC if 1, DESC if -1\n * @return integer the ordered value\n */\nexport function predicatBy(prop, order) {\n  prop = prop.split('.')\n  var len = prop.length\n\n  if (order !== -1) {\n    order = 1\n  }\n  if (prop === 'date') {\n    return function(a, b) {\n      a = new Date(a[prop])\n      b = new Date(b[prop])\n      if (a > b) {\n        return 1 * order\n      } else if (a < b) {\n        return -1 * order\n      }\n      return 0\n    }\n  }\n\n  return function(a, b) {\n    var i = 0\n    while (i < len) {\n      a = a[prop[i]]\n      b = b[prop[i]]\n      i++\n    }\n    if (!isNaN(a)) a = parseFloat(a)\n    if (!isNaN(b)) b = parseFloat(b)\n    if (a < b) {\n      return -1 * order\n    } else if (a > b) {\n      return 1 * order\n    }\n    return 0\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f4ff6f42fccef467197dffcc25c0801d134c4052","contentHash":"9a35309e756a45d05603a5bc8677a530ebd780e43182ecf7abb2ce82ca487580"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/text.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/text.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":50}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":28}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":18}},"5":{"start":{"line":12,"column":11},"end":{"line":12,"column":49}},"6":{"start":{"line":14,"column":14},"end":{"line":14,"column":55}},"7":{"start":{"line":17,"column":24},"end":{"line":17,"column":96}},"8":{"start":{"line":18,"column":14},"end":{"line":87,"column":3}},"9":{"start":{"line":89,"column":2},"end":{"line":91,"column":3}},"10":{"start":{"line":90,"column":4},"end":{"line":90,"column":58}},"11":{"start":{"line":93,"column":2},"end":{"line":95,"column":3}},"12":{"start":{"line":93,"column":31},"end":{"line":95,"column":3}},"13":{"start":{"line":94,"column":4},"end":{"line":94,"column":68}},"14":{"start":{"line":96,"column":2},"end":{"line":96,"column":13}},"15":{"start":{"line":100,"column":19},"end":{"line":100,"column":42}},"16":{"start":{"line":101,"column":16},"end":{"line":105,"column":4}},"17":{"start":{"line":107,"column":2},"end":{"line":112,"column":3}},"18":{"start":{"line":108,"column":4},"end":{"line":111,"column":6}},"19":{"start":{"line":114,"column":2},"end":{"line":116,"column":4}},"20":{"start":{"line":126,"column":2},"end":{"line":126,"column":33}},"21":{"start":{"line":127,"column":2},"end":{"line":127,"column":72}}},"fnMap":{"0":{"name":"replaceUnwantedChar","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":28}},"loc":{"start":{"line":16,"column":34},"end":{"line":97,"column":1}},"line":16},"1":{"name":"checkXss","decl":{"start":{"line":99,"column":9},"end":{"line":99,"column":17}},"loc":{"start":{"line":99,"column":27},"end":{"line":117,"column":1}},"line":99},"2":{"name":"md5","decl":{"start":{"line":125,"column":9},"end":{"line":125,"column":12}},"loc":{"start":{"line":125,"column":18},"end":{"line":128,"column":1}},"line":125}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":24},"end":{"line":17,"column":96}},"type":"cond-expr","locations":[{"start":{"line":17,"column":77},"end":{"line":17,"column":89}},{"start":{"line":17,"column":92},"end":{"line":17,"column":96}}],"line":17},"1":{"loc":{"start":{"line":17,"column":24},"end":{"line":17,"column":74}},"type":"binary-expr","locations":[{"start":{"line":17,"column":24},"end":{"line":17,"column":44}},{"start":{"line":17,"column":48},"end":{"line":17,"column":74}}],"line":17},"2":{"loc":{"start":{"line":93,"column":2},"end":{"line":95,"column":3}},"type":"if","locations":[{"start":{"line":93,"column":2},"end":{"line":95,"column":3}},{"start":{"line":93,"column":2},"end":{"line":95,"column":3}}],"line":93},"3":{"loc":{"start":{"line":107,"column":2},"end":{"line":112,"column":3}},"type":"if","locations":[{"start":{"line":107,"column":2},"end":{"line":112,"column":3}},{"start":{"line":107,"column":2},"end":{"line":112,"column":3}}],"line":107}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":2,"8":2,"9":2,"10":136,"11":2,"12":1,"13":4,"14":2,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":1},"f":{"0":2,"1":0,"2":1},"b":{"0":[1,1],"1":[2,1],"2":[1,1],"3":[0,0]},"inputSourceMap":{"version":3,"sources":["text.js"],"names":["replaceUnwantedChar","str","additionnalChar","chars","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","prop","replace","RegExp","checkXss","newUser","newUserStr","JSON","stringify","testXSS","whiteList","stripIgnoreTag","success","message","md5","toLowerCase","trim","crypto","createHash","update","digest"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/","sourcesContent":["import xss from 'xss'\nimport crypto from 'crypto'\n\nexport function replaceUnwantedChar(str, additionnalChar = null) {\n  var chars = {\n    '': '',\n    \"'\": '',\n    '\"': '',\n    : 'S',\n    : 's',\n    : 'Z',\n    : 'z',\n    : 'A',\n    : 'A',\n    : 'A',\n    : 'A',\n    : 'A',\n    : 'A',\n    : 'A',\n    : 'C',\n    : 'E',\n    : 'E',\n    : 'E',\n    : 'E',\n    : 'I',\n    : 'I',\n    : 'I',\n    : 'I',\n    : 'N',\n    : 'O',\n    : 'O',\n    : 'O',\n    : 'O',\n    : 'O',\n    : 'O',\n    : 'U',\n    : 'U',\n    : 'U',\n    : 'U',\n    : 'Y',\n    : 'B',\n    : 'Ss',\n    : 'a',\n    : 'a',\n    : 'a',\n    : 'a',\n    : 'a',\n    : 'a',\n    : 'a',\n    : 'c',\n    : 'e',\n    : 'e',\n    : 'e',\n    : 'e',\n    : 'oe',\n    : 'i',\n    : 'i',\n    : 'i',\n    : 'i',\n    : 'o',\n    : 'n',\n    : 'o',\n    : 'o',\n    : 'o',\n    : 'o',\n    : 'o',\n    : 'o',\n    : 'u',\n    : 'u',\n    : 'u',\n    : 'y',\n    : 'b',\n    : 'y'\n  }\n  for (var prop in chars) str = str.replace(new RegExp(prop, 'g'), chars[prop])\n  if (additionnalChar != null)\n    for (var prop in additionnalChar)\n      str = str.replace(new RegExp(prop, 'g'), additionnalChar[prop])\n  return str\n}\n\nexport function checkXss(newUser) {\n  var newUserStr = JSON.stringify(newUser)\n  var testXSS = xss(\n    newUserStr.replace(/[a-zA-Z0-9-]*?=\\\\[\\\"\\'].*?[\\\"\\']/g, ''),\n    {\n      whiteList: [],\n      stripIgnoreTag: true\n      // stripIgnoreTagBody: ['script']\n    }\n  )\n  if (testXSS !== newUserStr) {\n    return {\n      success: 0,\n      message: 'invalid characters'\n    }\n  }\n  return {\n    success: 1\n  }\n}\n\n/**\n* MD5 hashes the specified string.\n* @param  {String} str A string to hash.\n* @return {String}     The hashed string.\n*/\nexport function md5(str) {\n  str = str.toLowerCase().trim()\n  return crypto.createHash('md5').update(str).digest('hex')\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6a118dc30969c99cddb2ccb24f50a6af8b9e8055","contentHash":"8a33471a329a457ef5c298478041899730f4fca5089f7b3564c42f49f20e051c"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/locales.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/locales.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":23},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":20},"end":{"line":12,"column":89}},"5":{"start":{"line":14,"column":15},"end":{"line":14,"column":58}},"6":{"start":{"line":16,"column":12},"end":{"line":16,"column":51}},"7":{"start":{"line":18,"column":8},"end":{"line":18,"column":25}},"8":{"start":{"line":20,"column":16},"end":{"line":20,"column":24}},"9":{"start":{"line":21,"column":24},"end":{"line":21,"column":32}},"10":{"start":{"line":23,"column":27},"end":{"line":63,"column":3}},"11":{"start":{"line":25,"column":4},"end":{"line":25,"column":52}},"12":{"start":{"line":26,"column":4},"end":{"line":26,"column":79}},"13":{"start":{"line":26,"column":39},"end":{"line":26,"column":79}},"14":{"start":{"line":27,"column":4},"end":{"line":27,"column":35}},"15":{"start":{"line":30,"column":2},"end":{"line":61,"column":6}},"16":{"start":{"line":33,"column":6},"end":{"line":33,"column":37}},"17":{"start":{"line":38,"column":16},"end":{"line":38,"column":18}},"18":{"start":{"line":39,"column":22},"end":{"line":39,"column":29}},"19":{"start":{"line":41,"column":26},"end":{"line":41,"column":73}},"20":{"start":{"line":43,"column":18},"end":{"line":43,"column":79}},"21":{"start":{"line":45,"column":6},"end":{"line":49,"column":9}},"22":{"start":{"line":46,"column":19},"end":{"line":46,"column":61}},"23":{"start":{"line":48,"column":8},"end":{"line":48,"column":59}},"24":{"start":{"line":50,"column":6},"end":{"line":50,"column":17}},"25":{"start":{"line":55,"column":6},"end":{"line":57,"column":7}},"26":{"start":{"line":56,"column":8},"end":{"line":56,"column":57}},"27":{"start":{"line":59,"column":6},"end":{"line":59,"column":29}},"28":{"start":{"line":62,"column":2},"end":{"line":62,"column":17}},"29":{"start":{"line":65,"column":15},"end":{"line":65,"column":22}},"30":{"start":{"line":66,"column":0},"end":{"line":66,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":23,"column":27},"end":{"line":23,"column":28}},"loc":{"start":{"line":23,"column":39},"end":{"line":63,"column":1}},"line":23},"1":{"name":"Locales","decl":{"start":{"line":24,"column":11},"end":{"line":24,"column":18}},"loc":{"start":{"line":24,"column":29},"end":{"line":28,"column":3}},"line":24},"2":{"name":"reloadLocales","decl":{"start":{"line":32,"column":20},"end":{"line":32,"column":33}},"loc":{"start":{"line":32,"column":36},"end":{"line":34,"column":5}},"line":32},"3":{"name":"_getLocales","decl":{"start":{"line":37,"column":20},"end":{"line":37,"column":31}},"loc":{"start":{"line":37,"column":34},"end":{"line":51,"column":5}},"line":37},"4":{"name":"(anonymous_4)","decl":{"start":{"line":45,"column":42},"end":{"line":45,"column":43}},"loc":{"start":{"line":45,"column":58},"end":{"line":49,"column":7}},"line":45},"5":{"name":"get","decl":{"start":{"line":54,"column":18},"end":{"line":54,"column":21}},"loc":{"start":{"line":54,"column":24},"end":{"line":60,"column":5}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":79}},"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":79}},{"start":{"line":26,"column":4},"end":{"line":26,"column":79}}],"line":26},"1":{"loc":{"start":{"line":55,"column":6},"end":{"line":57,"column":7}},"type":"if","locations":[{"start":{"line":55,"column":6},"end":{"line":57,"column":7}},{"start":{"line":55,"column":6},"end":{"line":57,"column":7}}],"line":55}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":1,"30":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"sources":["locales.js"],"names":["singleton","Symbol","singletonEnforcer","Locales","enforcer","i18n","_getLocales","loc","extension","localesFolder","path","join","config","root","files","coreUtils","file","getFilesSync","Array","prototype","forEach","call","name","basename","fse","readJsonSync"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEA;;AAEA,IAAIA,SAAS,GAAGC,MAAM,EAAtB;AACA,IAAIC,iBAAiB,GAAGD,MAAM,EAA9B;;IAEME,O;AACJ,mBAAYC,QAAZ,EAAsB;AAAA;AACpB,QAAIA,QAAQ,IAAIF,iBAAhB,EAAmC,MAAM,iCAAN;AAEnC,SAAKG,IAAL,GAAY,KAAKC,WAAL,EAAZ;AACD;;;;oCASe;AACd,WAAKD,IAAL,GAAY,KAAKC,WAAL,EAAZ;AACD;;;kCAEa;AACZ,UAAIC,GAAG,GAAG,EAAV;AAEA,UAAMC,SAAS,GAAG,OAAlB;;AACA,UAAMC,aAAa,GAAGC,iBAAKC,IAAL,CAAUC,SAAOC,IAAjB,EAAuB,SAAvB,CAAtB;;AACA,UAAMC,KAAK,GAAGC,YAAUC,IAAV,CAAeC,YAAf,CAA4BR,aAA5B,EAA2C,IAA3C,EAAiDD,SAAjD,CAAd;;AACAU,MAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BP,KAA7B,EAAoC,UAAAE,IAAI,EAAI;AAC1C,YAAMM,IAAI,GAAGZ,iBAAKa,QAAL,CAAcP,IAAd,EAAoBR,SAApB,CAAb;;AACAD,QAAAA,GAAG,CAACe,IAAD,CAAH,GAAYE,oBAAIC,YAAJ,CAAiBT,IAAjB,CAAZ;AACD,OAHD;AAKA,aAAOT,GAAP;AACD;;;wBAvBqB;AACpB,UAAI,CAAC,KAAKP,SAAL,CAAL,EAAsB;AACpB,aAAKA,SAAL,IAAkB,IAAIG,OAAJ,CAAYD,iBAAZ,CAAlB;AACD;;AACD,aAAO,KAAKF,SAAL,CAAP;AACD;;;;;eAqBYG,O","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/","sourcesContent":["import fse from 'fs-extra'\nimport path from 'path'\n\nimport {config, coreUtils} from '../../'\n\nlet singleton = Symbol()\nlet singletonEnforcer = Symbol()\n\nclass Locales {\n  constructor(enforcer) {\n    if (enforcer != singletonEnforcer) throw 'Cannot construct Json singleton'\n\n    this.i18n = this._getLocales()\n  }\n\n  static get instance() {\n    if (!this[singleton]) {\n      this[singleton] = new Locales(singletonEnforcer)\n    }\n    return this[singleton]\n  }\n\n  reloadLocales() {\n    this.i18n = this._getLocales()\n  }\n\n  _getLocales() {\n    let loc = {}\n\n    const extension = '.json'\n    const localesFolder = path.join(config.root, 'locales')\n    const files = coreUtils.file.getFilesSync(localesFolder, true, extension)\n    Array.prototype.forEach.call(files, file => {\n      const name = path.basename(file, extension)\n      loc[name] = fse.readJsonSync(file)\n    })\n\n    return loc\n  }\n}\n\nexport default Locales\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"28f7fca1cf61c1c0f6154c40a148e920f3cc8981","contentHash":"77daf166cfbbaf8d555bf9de6bcec9ec28d3896ff72548c6c802cb1e119748ec"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/slug.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/slug.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":22}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":12},"end":{"line":12,"column":51}},"5":{"start":{"line":14,"column":8},"end":{"line":14,"column":25}},"6":{"start":{"line":17,"column":2},"end":{"line":17,"column":62}},"7":{"start":{"line":17,"column":50},"end":{"line":17,"column":62}},"8":{"start":{"line":18,"column":2},"end":{"line":18,"column":23}},"9":{"start":{"line":19,"column":2},"end":{"line":19,"column":73}},"10":{"start":{"line":20,"column":2},"end":{"line":20,"column":23}},"11":{"start":{"line":24,"column":2},"end":{"line":24,"column":47}},"12":{"start":{"line":25,"column":2},"end":{"line":27,"column":5}},"13":{"start":{"line":28,"column":2},"end":{"line":28,"column":71}},"14":{"start":{"line":29,"column":2},"end":{"line":29,"column":27}}},"fnMap":{"0":{"name":"clean","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":14}},"loc":{"start":{"line":16,"column":20},"end":{"line":21,"column":1}},"line":16},"1":{"name":"slugify","decl":{"start":{"line":23,"column":9},"end":{"line":23,"column":16}},"loc":{"start":{"line":23,"column":22},"end":{"line":30,"column":1}},"line":23}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":2},"end":{"line":17,"column":62}},"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":17,"column":62}},{"start":{"line":17,"column":2},"end":{"line":17,"column":62}}],"line":17},"1":{"loc":{"start":{"line":17,"column":6},"end":{"line":17,"column":48}},"type":"binary-expr","locations":[{"start":{"line":17,"column":6},"end":{"line":17,"column":32}},{"start":{"line":17,"column":36},"end":{"line":17,"column":48}}],"line":17}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":2,"7":0,"8":2,"9":2,"10":2,"11":2,"12":2,"13":2,"14":2},"f":{"0":2,"1":2},"b":{"0":[0,2],"1":[2,2]},"inputSourceMap":{"version":3,"sources":["slug.js"],"names":["clean","str","split","length","slugify","decodeURIComponent","join","replace","toLowerCase","remove","config","files","templates","extension"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA;;AAEO,SAASA,KAAT,CAAeC,GAAf,EAAoB;AACzB,MAAI,OAAOA,GAAP,KAAe,WAAf,IAA8BA,GAAG,KAAK,IAA1C,EAAgD,OAAO,IAAP;AAChDA,EAAAA,GAAG,GAAGA,GAAG,CAACC,KAAJ,CAAU,GAAV,CAAN;AACAD,EAAAA,GAAG,CAACA,GAAG,CAACE,MAAJ,GAAa,CAAd,CAAH,GAAsBC,OAAO,CAACC,kBAAkB,CAACJ,GAAG,CAACA,GAAG,CAACE,MAAJ,GAAa,CAAd,CAAJ,CAAnB,CAA7B;AACA,SAAOF,GAAG,CAACK,IAAJ,CAAS,GAAT,CAAP;AACD;;AAED,SAASF,OAAT,CAAiBH,GAAjB,EAAsB;AACpBA,EAAAA,GAAG,GAAGA,GAAG,CAACM,OAAJ,CAAY,OAAZ,EAAqB,EAArB,EAAyBC,WAAzB,EAAN;AACAP,EAAAA,GAAG,GAAG,yBAAKA,GAAL,EAAU;AAACQ,IAAAA,MAAM,EAAE;AAAT,GAAV,CAAN;AACAR,EAAAA,GAAG,aAAMA,GAAN,cAAaS,SAAOC,KAAP,CAAaC,SAAb,CAAuBC,SAApC,CAAH;AACA,SAAOZ,GAAG,CAACO,WAAJ,EAAP;AACD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/","sourcesContent":["import slug from 'slugify'\nimport path from 'path'\n\nimport {config} from '../../'\n\nexport function clean(str) {\n  if (typeof str === 'undefined' || str === null) return null\n  str = str.split('/')\n  str[str.length - 1] = slugify(decodeURIComponent(str[str.length - 1]))\n  return str.join('/')\n}\n\nfunction slugify(str) {\n  str = str.replace(/\\..+$/, '').toLowerCase()\n  str = slug(str, {remove: /[$*+~.()'\"!\\:@^,;]/g})\n  str = `${str}.${config.files.templates.extension}`\n  return str.toLowerCase()\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2305e8f66347064debf4ec60a6766353ea23ef41","contentHash":"0f790deed6995b50b42f51513020eaf613c87354f50b0f721733f685121c421b"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/file.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/file.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":22}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":32}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":26}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":32}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":40}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":42}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":36}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":28}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":30}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":36}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":26}},"13":{"start":{"line":19,"column":0},"end":{"line":19,"column":60}},"14":{"start":{"line":21,"column":19},"end":{"line":21,"column":80}},"15":{"start":{"line":23,"column":25},"end":{"line":23,"column":99}},"16":{"start":{"line":25,"column":16},"end":{"line":25,"column":59}},"17":{"start":{"line":27,"column":12},"end":{"line":27,"column":51}},"18":{"start":{"line":29,"column":14},"end":{"line":29,"column":55}},"19":{"start":{"line":31,"column":15},"end":{"line":31,"column":58}},"20":{"start":{"line":33,"column":8},"end":{"line":33,"column":25}},"21":{"start":{"line":36,"column":2},"end":{"line":42,"column":3}},"22":{"start":{"line":37,"column":4},"end":{"line":37,"column":43}},"23":{"start":{"line":39,"column":4},"end":{"line":39,"column":16}},"24":{"start":{"line":41,"column":4},"end":{"line":41,"column":17}},"25":{"start":{"line":46,"column":2},"end":{"line":46,"column":115}},"26":{"start":{"line":47,"column":2},"end":{"line":47,"column":22}},"27":{"start":{"line":48,"column":2},"end":{"line":48,"column":65}},"28":{"start":{"line":52,"column":13},"end":{"line":52,"column":15}},"29":{"start":{"line":54,"column":2},"end":{"line":62,"column":3}},"30":{"start":{"line":55,"column":15},"end":{"line":55,"column":53}},"31":{"start":{"line":57,"column":4},"end":{"line":59,"column":5}},"32":{"start":{"line":58,"column":6},"end":{"line":58,"column":56}},"33":{"start":{"line":61,"column":4},"end":{"line":61,"column":14}},"34":{"start":{"line":64,"column":2},"end":{"line":64,"column":14}},"35":{"start":{"line":74,"column":12},"end":{"line":74,"column":16}},"36":{"start":{"line":76,"column":2},"end":{"line":80,"column":3}},"37":{"start":{"line":77,"column":4},"end":{"line":79,"column":5}},"38":{"start":{"line":78,"column":6},"end":{"line":78,"column":63}},"39":{"start":{"line":82,"column":2},"end":{"line":82,"column":13}},"40":{"start":{"line":94,"column":18},"end":{"line":94,"column":90}},"41":{"start":{"line":95,"column":14},"end":{"line":95,"column":16}},"42":{"start":{"line":97,"column":2},"end":{"line":120,"column":3}},"43":{"start":{"line":98,"column":4},"end":{"line":115,"column":7}},"44":{"start":{"line":99,"column":21},"end":{"line":99,"column":61}},"45":{"start":{"line":101,"column":17},"end":{"line":101,"column":55}},"46":{"start":{"line":103,"column":6},"end":{"line":114,"column":7}},"47":{"start":{"line":104,"column":24},"end":{"line":107,"column":9}},"48":{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},"49":{"start":{"line":110,"column":10},"end":{"line":110,"column":83}},"50":{"start":{"line":113,"column":8},"end":{"line":113,"column":30}},"51":{"start":{"line":117,"column":4},"end":{"line":117,"column":17}},"52":{"start":{"line":119,"column":4},"end":{"line":119,"column":17}},"53":{"start":{"line":132,"column":18},"end":{"line":132,"column":90}},"54":{"start":{"line":133,"column":14},"end":{"line":133,"column":16}},"55":{"start":{"line":134,"column":2},"end":{"line":158,"column":5}},"56":{"start":{"line":135,"column":19},"end":{"line":135,"column":59}},"57":{"start":{"line":137,"column":4},"end":{"line":155,"column":7}},"58":{"start":{"line":138,"column":6},"end":{"line":152,"column":7}},"59":{"start":{"line":139,"column":24},"end":{"line":142,"column":9}},"60":{"start":{"line":144,"column":8},"end":{"line":151,"column":9}},"61":{"start":{"line":145,"column":10},"end":{"line":148,"column":13}},"62":{"start":{"line":146,"column":12},"end":{"line":146,"column":43}},"63":{"start":{"line":147,"column":12},"end":{"line":147,"column":34}},"64":{"start":{"line":150,"column":10},"end":{"line":150,"column":32}},"65":{"start":{"line":154,"column":6},"end":{"line":154,"column":13}},"66":{"start":{"line":157,"column":4},"end":{"line":157,"column":17}},"67":{"start":{"line":170,"column":18},"end":{"line":170,"column":90}},"68":{"start":{"line":171,"column":18},"end":{"line":171,"column":88}},"69":{"start":{"line":172,"column":14},"end":{"line":172,"column":16}},"70":{"start":{"line":174,"column":2},"end":{"line":198,"column":3}},"71":{"start":{"line":175,"column":4},"end":{"line":193,"column":7}},"72":{"start":{"line":176,"column":21},"end":{"line":176,"column":61}},"73":{"start":{"line":178,"column":17},"end":{"line":178,"column":55}},"74":{"start":{"line":180,"column":6},"end":{"line":186,"column":7}},"75":{"start":{"line":181,"column":22},"end":{"line":181,"column":56}},"76":{"start":{"line":183,"column":8},"end":{"line":185,"column":9}},"77":{"start":{"line":184,"column":10},"end":{"line":184,"column":31}},"78":{"start":{"line":188,"column":6},"end":{"line":192,"column":7}},"79":{"start":{"line":189,"column":25},"end":{"line":189,"column":86}},"80":{"start":{"line":191,"column":8},"end":{"line":191,"column":41}},"81":{"start":{"line":195,"column":4},"end":{"line":195,"column":17}},"82":{"start":{"line":197,"column":4},"end":{"line":197,"column":17}},"83":{"start":{"line":210,"column":2},"end":{"line":210,"column":42}},"84":{"start":{"line":214,"column":2},"end":{"line":310,"column":6}},"85":{"start":{"line":220,"column":17},"end":{"line":220,"column":26}},"86":{"start":{"line":221,"column":4},"end":{"line":309,"column":34}},"87":{"start":{"line":222,"column":6},"end":{"line":308,"column":7}},"88":{"start":{"line":223,"column":8},"end":{"line":307,"column":9}},"89":{"start":{"line":225,"column":12},"end":{"line":225,"column":88}},"90":{"start":{"line":226,"column":12},"end":{"line":226,"column":86}},"91":{"start":{"line":227,"column":12},"end":{"line":227,"column":23}},"92":{"start":{"line":228,"column":12},"end":{"line":228,"column":31}},"93":{"start":{"line":229,"column":12},"end":{"line":229,"column":31}},"94":{"start":{"line":230,"column":12},"end":{"line":230,"column":54}},"95":{"start":{"line":233,"column":12},"end":{"line":233,"column":34}},"96":{"start":{"line":235,"column":12},"end":{"line":238,"column":13}},"97":{"start":{"line":236,"column":14},"end":{"line":236,"column":34}},"98":{"start":{"line":237,"column":14},"end":{"line":237,"column":20}},"99":{"start":{"line":240,"column":12},"end":{"line":240,"column":32}},"100":{"start":{"line":241,"column":12},"end":{"line":241,"column":56}},"101":{"start":{"line":244,"column":12},"end":{"line":244,"column":35}},"102":{"start":{"line":245,"column":12},"end":{"line":245,"column":32}},"103":{"start":{"line":246,"column":12},"end":{"line":291,"column":18}},"104":{"start":{"line":247,"column":25},"end":{"line":286,"column":17}},"105":{"start":{"line":249,"column":16},"end":{"line":285,"column":28}},"106":{"start":{"line":250,"column":18},"end":{"line":284,"column":19}},"107":{"start":{"line":251,"column":20},"end":{"line":283,"column":21}},"108":{"start":{"line":253,"column":24},"end":{"line":253,"column":76}},"109":{"start":{"line":254,"column":24},"end":{"line":254,"column":42}},"110":{"start":{"line":255,"column":24},"end":{"line":255,"column":66}},"111":{"start":{"line":258,"column":24},"end":{"line":258,"column":49}},"112":{"start":{"line":260,"column":24},"end":{"line":266,"column":25}},"113":{"start":{"line":261,"column":26},"end":{"line":261,"column":71}},"114":{"start":{"line":263,"column":26},"end":{"line":265,"column":27}},"115":{"start":{"line":264,"column":28},"end":{"line":264,"column":49}},"116":{"start":{"line":268,"column":24},"end":{"line":271,"column":25}},"117":{"start":{"line":269,"column":26},"end":{"line":269,"column":45}},"118":{"start":{"line":270,"column":26},"end":{"line":270,"column":32}},"119":{"start":{"line":273,"column":24},"end":{"line":273,"column":42}},"120":{"start":{"line":274,"column":24},"end":{"line":274,"column":89}},"121":{"start":{"line":277,"column":24},"end":{"line":277,"column":51}},"122":{"start":{"line":278,"column":24},"end":{"line":278,"column":57}},"123":{"start":{"line":282,"column":24},"end":{"line":282,"column":47}},"124":{"start":{"line":288,"column":14},"end":{"line":290,"column":16}},"125":{"start":{"line":289,"column":16},"end":{"line":289,"column":51}},"126":{"start":{"line":294,"column":12},"end":{"line":294,"column":32}},"127":{"start":{"line":295,"column":12},"end":{"line":295,"column":18}},"128":{"start":{"line":298,"column":12},"end":{"line":298,"column":32}},"129":{"start":{"line":299,"column":12},"end":{"line":299,"column":49}},"130":{"start":{"line":302,"column":12},"end":{"line":302,"column":53}},"131":{"start":{"line":306,"column":12},"end":{"line":306,"column":36}},"132":{"start":{"line":311,"column":2},"end":{"line":311,"column":42}},"133":{"start":{"line":315,"column":2},"end":{"line":317,"column":5}},"134":{"start":{"line":316,"column":4},"end":{"line":316,"column":32}},"135":{"start":{"line":316,"column":13},"end":{"line":316,"column":32}},"136":{"start":{"line":318,"column":2},"end":{"line":318,"column":20}},"137":{"start":{"line":322,"column":2},"end":{"line":324,"column":5}},"138":{"start":{"line":323,"column":4},"end":{"line":323,"column":39}},"139":{"start":{"line":323,"column":13},"end":{"line":323,"column":39}},"140":{"start":{"line":326,"column":2},"end":{"line":326,"column":20}},"141":{"start":{"line":336,"column":13},"end":{"line":336,"column":51}},"142":{"start":{"line":338,"column":2},"end":{"line":342,"column":3}},"143":{"start":{"line":339,"column":4},"end":{"line":339,"column":22}},"144":{"start":{"line":341,"column":4},"end":{"line":341,"column":26}},"145":{"start":{"line":344,"column":2},"end":{"line":344,"column":14}},"146":{"start":{"line":355,"column":21},"end":{"line":355,"column":33}},"147":{"start":{"line":357,"column":2},"end":{"line":359,"column":3}},"148":{"start":{"line":358,"column":4},"end":{"line":358,"column":24}},"149":{"start":{"line":361,"column":2},"end":{"line":361,"column":99}},"150":{"start":{"line":363,"column":2},"end":{"line":365,"column":3}},"151":{"start":{"line":364,"column":4},"end":{"line":364,"column":65}},"152":{"start":{"line":367,"column":2},"end":{"line":367,"column":22}}},"fnMap":{"0":{"name":"exist","decl":{"start":{"line":35,"column":9},"end":{"line":35,"column":14}},"loc":{"start":{"line":35,"column":25},"end":{"line":43,"column":1}},"line":35},"1":{"name":"changePath","decl":{"start":{"line":45,"column":9},"end":{"line":45,"column":19}},"loc":{"start":{"line":45,"column":37},"end":{"line":49,"column":1}},"line":45},"2":{"name":"getJson","decl":{"start":{"line":51,"column":9},"end":{"line":51,"column":16}},"loc":{"start":{"line":51,"column":27},"end":{"line":65,"column":1}},"line":51},"3":{"name":"getContent","decl":{"start":{"line":73,"column":9},"end":{"line":73,"column":19}},"loc":{"start":{"line":73,"column":30},"end":{"line":83,"column":1}},"line":73},"4":{"name":"getFoldersSync","decl":{"start":{"line":93,"column":9},"end":{"line":93,"column":23}},"loc":{"start":{"line":93,"column":33},"end":{"line":121,"column":1}},"line":93},"5":{"name":"(anonymous_5)","decl":{"start":{"line":98,"column":49},"end":{"line":98,"column":50}},"loc":{"start":{"line":98,"column":69},"end":{"line":115,"column":5}},"line":98},"6":{"name":"getFoldersAsync","decl":{"start":{"line":131,"column":9},"end":{"line":131,"column":24}},"loc":{"start":{"line":131,"column":34},"end":{"line":159,"column":1}},"line":131},"7":{"name":"(anonymous_7)","decl":{"start":{"line":134,"column":55},"end":{"line":134,"column":56}},"loc":{"start":{"line":134,"column":75},"end":{"line":156,"column":3}},"line":134},"8":{"name":"(anonymous_8)","decl":{"start":{"line":137,"column":56},"end":{"line":137,"column":57}},"loc":{"start":{"line":137,"column":72},"end":{"line":155,"column":5}},"line":137},"9":{"name":"(anonymous_9)","decl":{"start":{"line":145,"column":76},"end":{"line":145,"column":77}},"loc":{"start":{"line":145,"column":98},"end":{"line":148,"column":11}},"line":145},"10":{"name":"(anonymous_10)","decl":{"start":{"line":156,"column":10},"end":{"line":156,"column":11}},"loc":{"start":{"line":156,"column":22},"end":{"line":158,"column":3}},"line":156},"11":{"name":"getFilesSync","decl":{"start":{"line":169,"column":9},"end":{"line":169,"column":21}},"loc":{"start":{"line":169,"column":31},"end":{"line":199,"column":1}},"line":169},"12":{"name":"(anonymous_12)","decl":{"start":{"line":175,"column":49},"end":{"line":175,"column":50}},"loc":{"start":{"line":175,"column":69},"end":{"line":193,"column":5}},"line":175},"13":{"name":"getFiles","decl":{"start":{"line":209,"column":9},"end":{"line":209,"column":17}},"loc":{"start":{"line":209,"column":22},"end":{"line":211,"column":1}},"line":209},"14":{"name":"_getFiles","decl":{"start":{"line":213,"column":9},"end":{"line":213,"column":18}},"loc":{"start":{"line":213,"column":21},"end":{"line":312,"column":1}},"line":213},"15":{"name":"_callee2","decl":{"start":{"line":214,"column":101},"end":{"line":214,"column":109}},"loc":{"start":{"line":214,"column":119},"end":{"line":310,"column":3}},"line":214},"16":{"name":"_callee2$","decl":{"start":{"line":221,"column":49},"end":{"line":221,"column":58}},"loc":{"start":{"line":221,"column":70},"end":{"line":309,"column":5}},"line":221},"17":{"name":"(anonymous_17)","decl":{"start":{"line":246,"column":68},"end":{"line":246,"column":69}},"loc":{"start":{"line":246,"column":80},"end":{"line":291,"column":13}},"line":246},"18":{"name":"_callee","decl":{"start":{"line":247,"column":112},"end":{"line":247,"column":119}},"loc":{"start":{"line":247,"column":130},"end":{"line":286,"column":15}},"line":247},"19":{"name":"_callee$","decl":{"start":{"line":249,"column":61},"end":{"line":249,"column":69}},"loc":{"start":{"line":249,"column":80},"end":{"line":285,"column":17}},"line":249},"20":{"name":"(anonymous_20)","decl":{"start":{"line":288,"column":21},"end":{"line":288,"column":22}},"loc":{"start":{"line":288,"column":36},"end":{"line":290,"column":15}},"line":288},"21":{"name":"addFolder","decl":{"start":{"line":314,"column":9},"end":{"line":314,"column":18}},"loc":{"start":{"line":314,"column":31},"end":{"line":319,"column":1}},"line":314},"22":{"name":"(anonymous_22)","decl":{"start":{"line":315,"column":76},"end":{"line":315,"column":77}},"loc":{"start":{"line":315,"column":91},"end":{"line":317,"column":3}},"line":315},"23":{"name":"removeFolder","decl":{"start":{"line":321,"column":9},"end":{"line":321,"column":21}},"loc":{"start":{"line":321,"column":34},"end":{"line":327,"column":1}},"line":321},"24":{"name":"(anonymous_24)","decl":{"start":{"line":322,"column":79},"end":{"line":322,"column":80}},"loc":{"start":{"line":322,"column":94},"end":{"line":324,"column":3}},"line":322},"25":{"name":"getDate","decl":{"start":{"line":335,"column":9},"end":{"line":335,"column":16}},"loc":{"start":{"line":335,"column":31},"end":{"line":345,"column":1}},"line":335},"26":{"name":"addDateIsoToRevisionPath","decl":{"start":{"line":353,"column":9},"end":{"line":353,"column":33}},"loc":{"start":{"line":353,"column":54},"end":{"line":368,"column":1}},"line":353}},"branchMap":{"0":{"loc":{"start":{"line":57,"column":4},"end":{"line":59,"column":5}},"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":59,"column":5}},{"start":{"line":57,"column":4},"end":{"line":59,"column":5}}],"line":57},"1":{"loc":{"start":{"line":76,"column":2},"end":{"line":80,"column":3}},"type":"if","locations":[{"start":{"line":76,"column":2},"end":{"line":80,"column":3}},{"start":{"line":76,"column":2},"end":{"line":80,"column":3}}],"line":76},"2":{"loc":{"start":{"line":76,"column":6},"end":{"line":76,"column":77}},"type":"binary-expr","locations":[{"start":{"line":76,"column":6},"end":{"line":76,"column":37}},{"start":{"line":76,"column":41},"end":{"line":76,"column":58}},{"start":{"line":76,"column":62},"end":{"line":76,"column":77}}],"line":76},"3":{"loc":{"start":{"line":77,"column":4},"end":{"line":79,"column":5}},"type":"if","locations":[{"start":{"line":77,"column":4},"end":{"line":79,"column":5}},{"start":{"line":77,"column":4},"end":{"line":79,"column":5}}],"line":77},"4":{"loc":{"start":{"line":94,"column":18},"end":{"line":94,"column":90}},"type":"cond-expr","locations":[{"start":{"line":94,"column":71},"end":{"line":94,"column":83}},{"start":{"line":94,"column":86},"end":{"line":94,"column":90}}],"line":94},"5":{"loc":{"start":{"line":94,"column":18},"end":{"line":94,"column":68}},"type":"binary-expr","locations":[{"start":{"line":94,"column":18},"end":{"line":94,"column":38}},{"start":{"line":94,"column":42},"end":{"line":94,"column":68}}],"line":94},"6":{"loc":{"start":{"line":103,"column":6},"end":{"line":114,"column":7}},"type":"if","locations":[{"start":{"line":103,"column":6},"end":{"line":114,"column":7}},{"start":{"line":103,"column":6},"end":{"line":114,"column":7}}],"line":103},"7":{"loc":{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},{"start":{"line":109,"column":8},"end":{"line":111,"column":9}}],"line":109},"8":{"loc":{"start":{"line":132,"column":18},"end":{"line":132,"column":90}},"type":"cond-expr","locations":[{"start":{"line":132,"column":71},"end":{"line":132,"column":83}},{"start":{"line":132,"column":86},"end":{"line":132,"column":90}}],"line":132},"9":{"loc":{"start":{"line":132,"column":18},"end":{"line":132,"column":68}},"type":"binary-expr","locations":[{"start":{"line":132,"column":18},"end":{"line":132,"column":38}},{"start":{"line":132,"column":42},"end":{"line":132,"column":68}}],"line":132},"10":{"loc":{"start":{"line":138,"column":6},"end":{"line":152,"column":7}},"type":"if","locations":[{"start":{"line":138,"column":6},"end":{"line":152,"column":7}},{"start":{"line":138,"column":6},"end":{"line":152,"column":7}}],"line":138},"11":{"loc":{"start":{"line":144,"column":8},"end":{"line":151,"column":9}},"type":"if","locations":[{"start":{"line":144,"column":8},"end":{"line":151,"column":9}},{"start":{"line":144,"column":8},"end":{"line":151,"column":9}}],"line":144},"12":{"loc":{"start":{"line":170,"column":18},"end":{"line":170,"column":90}},"type":"cond-expr","locations":[{"start":{"line":170,"column":71},"end":{"line":170,"column":83}},{"start":{"line":170,"column":86},"end":{"line":170,"column":90}}],"line":170},"13":{"loc":{"start":{"line":170,"column":18},"end":{"line":170,"column":68}},"type":"binary-expr","locations":[{"start":{"line":170,"column":18},"end":{"line":170,"column":38}},{"start":{"line":170,"column":42},"end":{"line":170,"column":68}}],"line":170},"14":{"loc":{"start":{"line":171,"column":18},"end":{"line":171,"column":88}},"type":"cond-expr","locations":[{"start":{"line":171,"column":71},"end":{"line":171,"column":83}},{"start":{"line":171,"column":86},"end":{"line":171,"column":88}}],"line":171},"15":{"loc":{"start":{"line":171,"column":18},"end":{"line":171,"column":68}},"type":"binary-expr","locations":[{"start":{"line":171,"column":18},"end":{"line":171,"column":38}},{"start":{"line":171,"column":42},"end":{"line":171,"column":68}}],"line":171},"16":{"loc":{"start":{"line":180,"column":6},"end":{"line":186,"column":7}},"type":"if","locations":[{"start":{"line":180,"column":6},"end":{"line":186,"column":7}},{"start":{"line":180,"column":6},"end":{"line":186,"column":7}}],"line":180},"17":{"loc":{"start":{"line":183,"column":8},"end":{"line":185,"column":9}},"type":"if","locations":[{"start":{"line":183,"column":8},"end":{"line":185,"column":9}},{"start":{"line":183,"column":8},"end":{"line":185,"column":9}}],"line":183},"18":{"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":53}},"type":"binary-expr","locations":[{"start":{"line":183,"column":12},"end":{"line":183,"column":28}},{"start":{"line":183,"column":32},"end":{"line":183,"column":53}}],"line":183},"19":{"loc":{"start":{"line":188,"column":6},"end":{"line":192,"column":7}},"type":"if","locations":[{"start":{"line":188,"column":6},"end":{"line":192,"column":7}},{"start":{"line":188,"column":6},"end":{"line":192,"column":7}}],"line":188},"20":{"loc":{"start":{"line":188,"column":10},"end":{"line":188,"column":41}},"type":"binary-expr","locations":[{"start":{"line":188,"column":10},"end":{"line":188,"column":28}},{"start":{"line":188,"column":32},"end":{"line":188,"column":41}}],"line":188},"21":{"loc":{"start":{"line":223,"column":8},"end":{"line":307,"column":9}},"type":"switch","locations":[{"start":{"line":224,"column":10},"end":{"line":230,"column":54}},{"start":{"line":232,"column":10},"end":{"line":241,"column":56}},{"start":{"line":243,"column":10},"end":{"line":291,"column":18}},{"start":{"line":293,"column":10},"end":{"line":295,"column":18}},{"start":{"line":297,"column":10},"end":{"line":299,"column":49}},{"start":{"line":301,"column":10},"end":{"line":302,"column":53}},{"start":{"line":304,"column":10},"end":{"line":304,"column":18}},{"start":{"line":305,"column":10},"end":{"line":306,"column":36}}],"line":223},"22":{"loc":{"start":{"line":225,"column":24},"end":{"line":225,"column":87}},"type":"cond-expr","locations":[{"start":{"line":225,"column":71},"end":{"line":225,"column":80}},{"start":{"line":225,"column":83},"end":{"line":225,"column":87}}],"line":225},"23":{"loc":{"start":{"line":225,"column":24},"end":{"line":225,"column":68}},"type":"binary-expr","locations":[{"start":{"line":225,"column":24},"end":{"line":225,"column":41}},{"start":{"line":225,"column":45},"end":{"line":225,"column":68}}],"line":225},"24":{"loc":{"start":{"line":226,"column":24},"end":{"line":226,"column":85}},"type":"cond-expr","locations":[{"start":{"line":226,"column":71},"end":{"line":226,"column":80}},{"start":{"line":226,"column":83},"end":{"line":226,"column":85}}],"line":226},"25":{"loc":{"start":{"line":226,"column":24},"end":{"line":226,"column":68}},"type":"binary-expr","locations":[{"start":{"line":226,"column":24},"end":{"line":226,"column":41}},{"start":{"line":226,"column":45},"end":{"line":226,"column":68}}],"line":226},"26":{"loc":{"start":{"line":235,"column":12},"end":{"line":238,"column":13}},"type":"if","locations":[{"start":{"line":235,"column":12},"end":{"line":238,"column":13}},{"start":{"line":235,"column":12},"end":{"line":238,"column":13}}],"line":235},"27":{"loc":{"start":{"line":251,"column":20},"end":{"line":283,"column":21}},"type":"switch","locations":[{"start":{"line":252,"column":22},"end":{"line":255,"column":66}},{"start":{"line":257,"column":22},"end":{"line":274,"column":89}},{"start":{"line":276,"column":22},"end":{"line":278,"column":57}},{"start":{"line":280,"column":22},"end":{"line":280,"column":30}},{"start":{"line":281,"column":22},"end":{"line":282,"column":47}}],"line":251},"28":{"loc":{"start":{"line":260,"column":24},"end":{"line":266,"column":25}},"type":"if","locations":[{"start":{"line":260,"column":24},"end":{"line":266,"column":25}},{"start":{"line":260,"column":24},"end":{"line":266,"column":25}}],"line":260},"29":{"loc":{"start":{"line":263,"column":26},"end":{"line":265,"column":27}},"type":"if","locations":[{"start":{"line":263,"column":26},"end":{"line":265,"column":27}},{"start":{"line":263,"column":26},"end":{"line":265,"column":27}}],"line":263},"30":{"loc":{"start":{"line":263,"column":30},"end":{"line":263,"column":71}},"type":"binary-expr","locations":[{"start":{"line":263,"column":30},"end":{"line":263,"column":46}},{"start":{"line":263,"column":50},"end":{"line":263,"column":71}}],"line":263},"31":{"loc":{"start":{"line":268,"column":24},"end":{"line":271,"column":25}},"type":"if","locations":[{"start":{"line":268,"column":24},"end":{"line":271,"column":25}},{"start":{"line":268,"column":24},"end":{"line":271,"column":25}}],"line":268},"32":{"loc":{"start":{"line":316,"column":4},"end":{"line":316,"column":32}},"type":"if","locations":[{"start":{"line":316,"column":4},"end":{"line":316,"column":32}},{"start":{"line":316,"column":4},"end":{"line":316,"column":32}}],"line":316},"33":{"loc":{"start":{"line":323,"column":4},"end":{"line":323,"column":39}},"type":"if","locations":[{"start":{"line":323,"column":4},"end":{"line":323,"column":39}},{"start":{"line":323,"column":4},"end":{"line":323,"column":39}}],"line":323},"34":{"loc":{"start":{"line":338,"column":2},"end":{"line":342,"column":3}},"type":"if","locations":[{"start":{"line":338,"column":2},"end":{"line":342,"column":3}},{"start":{"line":338,"column":2},"end":{"line":342,"column":3}}],"line":338},"35":{"loc":{"start":{"line":338,"column":6},"end":{"line":338,"column":65}},"type":"binary-expr","locations":[{"start":{"line":338,"column":6},"end":{"line":338,"column":33}},{"start":{"line":338,"column":37},"end":{"line":338,"column":50}},{"start":{"line":338,"column":54},"end":{"line":338,"column":65}}],"line":338},"36":{"loc":{"start":{"line":357,"column":2},"end":{"line":359,"column":3}},"type":"if","locations":[{"start":{"line":357,"column":2},"end":{"line":359,"column":3}},{"start":{"line":357,"column":2},"end":{"line":359,"column":3}}],"line":357},"37":{"loc":{"start":{"line":363,"column":2},"end":{"line":365,"column":3}},"type":"if","locations":[{"start":{"line":363,"column":2},"end":{"line":365,"column":3}},{"start":{"line":363,"column":2},"end":{"line":365,"column":3}}],"line":363}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":145,"22":145,"23":122,"24":23,"25":1,"26":1,"27":1,"28":3,"29":3,"30":3,"31":3,"32":3,"33":0,"34":3,"35":1,"36":1,"37":1,"38":1,"39":1,"40":116,"41":116,"42":116,"43":116,"44":185,"45":185,"46":185,"47":93,"48":93,"49":92,"50":93,"51":116,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":33,"68":33,"69":33,"70":33,"71":33,"72":654,"73":654,"74":654,"75":654,"76":654,"77":654,"78":654,"79":0,"80":0,"81":33,"82":0,"83":953,"84":1,"85":953,"86":953,"87":3137,"88":4904,"89":953,"90":953,"91":953,"92":953,"93":953,"94":953,"95":953,"96":953,"97":814,"98":814,"99":139,"100":139,"101":139,"102":139,"103":139,"104":139,"105":876,"106":2628,"107":2628,"108":876,"109":876,"110":876,"111":876,"112":876,"113":814,"114":814,"115":814,"116":876,"117":0,"118":0,"119":876,"120":876,"121":876,"122":876,"123":876,"124":139,"125":876,"126":953,"127":953,"128":0,"129":0,"130":953,"131":953,"132":1,"133":0,"134":0,"135":0,"136":0,"137":1,"138":0,"139":0,"140":1,"141":2,"142":2,"143":1,"144":1,"145":2,"146":1,"147":1,"148":0,"149":1,"150":1,"151":1,"152":1},"f":{"0":145,"1":1,"2":3,"3":1,"4":116,"5":185,"6":0,"7":0,"8":0,"9":0,"10":0,"11":33,"12":654,"13":953,"14":1,"15":953,"16":3137,"17":139,"18":876,"19":2628,"20":876,"21":0,"22":0,"23":1,"24":0,"25":2,"26":1},"b":{"0":[3,0],"1":[1,0],"2":[1,1,1],"3":[1,0],"4":[116,0],"5":[116,116],"6":[93,92],"7":[92,1],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[33,0],"13":[33,33],"14":[25,8],"15":[33,25],"16":[654,0],"17":[654,0],"18":[654,646],"19":[0,654],"20":[654,0],"21":[953,953,139,953,0,953,0,953],"22":[953,0],"23":[953,953],"24":[953,0],"25":[953,953],"26":[814,139],"27":[876,876,876,876,876],"28":[814,62],"29":[814,0],"30":[814,814],"31":[0,876],"32":[0,0],"33":[0,0],"34":[1,1],"35":[2,1,1],"36":[0,1],"37":[1,0]},"inputSourceMap":{"version":3,"sources":["file.js"],"names":["exist","pathFile","fse","statSync","e","changePath","pathEnv","change","split","path","sep","join","replace","config","root","getJson","pathJson","json","stat","readJsonSync","getContent","res","readFileSync","getFoldersSync","dirname","recursive","items","readdirSync","map","fileName","isDirectory","directory","folders","coreUtils","file","push","getFoldersAsync","readdirAsync","statAsync","then","filesInDir","getFilesSync","filterExt","isFile","extFile","extname","concat","getFiles","lstat","readdir","files","Promise","all","statFile","addFolder","folderPath","err","console","error","removeFolder","remove","getDate","revisionPath","date","cmsData","fileAttr","get","d","Date","addDateIsoToRevisionPath","type","dateISO","saveJsonFile","revision","removeStatusAndDateFromFileName","toISOString","add"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/","sourcesContent":["import Promise from 'bluebird'\nimport path from 'path'\nimport mkdirp from 'mkdirp'\nimport fse from 'fs-extra'\n\nimport {config, cmsData, coreUtils} from '../../'\n\nexport function exist(pathFile) {\n  try {\n    fse.statSync(pathFile)\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nexport function changePath(pathEnv, change) {\n  pathEnv = pathEnv\n    .split(path.sep)\n    .join('/')\n    .replace(config.root, '')\n    .replace(/^\\//, '')\n    .split('/')\n  pathEnv[0] = change\n  return path.join(config.root, pathEnv.join('/'))\n}\n\nexport function getJson(pathJson) {\n  let json = {}\n\n  try {\n    var stat = fse.statSync(pathJson)\n    if (stat) {\n      json = fse.readJsonSync(pathJson)\n    }\n  } catch (e) {\n    json = {}\n  }\n\n  return json\n}\n\n/**\n * This method checks that the path leads to a file and return the content as UTF-8 content\n * @param  {string} path The path\n * @return {string}      The content of the UTF-8 file\n */\nexport function getContent(pathFile) {\n  var res = null\n  if (typeof pathFile !== 'undefined' && pathFile !== null && pathFile !== '') {\n    if (exist(pathFile)) {\n      res = fse.readFileSync(pathFile, 'utf8')\n    }\n  }\n  return res\n}\n\n/**\n * synchronous fse walker to get folders with recursive option\n * @param  {String}  dirname   dir path\n * @param  {Boolean} recursive do we recurse in the subfolders\n * @param  {String}  filterExt extension or ''\n * @return {array}             array of pathfiles\n */\nexport function getFoldersSync(dirname, recursive = true) {\n  let items = []\n  try {\n    fse.readdirSync(dirname).map(function(fileName) {\n      let pathFile = path.join(dirname, fileName)\n      let stat = fse.statSync(pathFile)\n      if (stat.isDirectory()) {\n        let directory = {path: pathFile, folders: []}\n        if (recursive) {\n          directory.folders = coreUtils.file.getFoldersSync(pathFile, recursive)\n        }\n        items.push(directory)\n      }\n    })\n\n    return items\n  } catch (e) {\n    return items\n  }\n}\n\n/**\n * Promisified fse walker to get folders with recursive option\n * @param  {String}  dirname   dir path\n * @param  {Boolean} recursive do we recurse in the subfolders\n * @param  {String}  filterExt extension or ''\n * @return {array}             array of pathfiles\n */\nexport function getFoldersAsync(dirname, recursive = true) {\n  let items = []\n  return fse\n    .readdirAsync(dirname)\n    .map(function(fileName) {\n      let pathFile = path.join(dirname, fileName)\n      return fse.statAsync(pathFile).then(function(stat) {\n        if (stat.isDirectory()) {\n          let directory = {path: pathFile, folders: []}\n\n          if (recursive) {\n            return coreUtils.file\n              .getFoldersAsync(pathFile, recursive)\n              .then(function(filesInDir) {\n                directory.folders = filesInDir\n                items.push(directory)\n              })\n          } else {\n            items.push(directory)\n          }\n        }\n        return\n      })\n    })\n    .then(function() {\n      return items\n    })\n}\n\n/**\n * synchronous fse walker with recursive and extension options\n * @param  {String}  dirname   dir path\n * @param  {Boolean} recursive do we recurse in the subfolders\n * @param  {String}  filterExt extension or ''\n * @return {array}             array of pathfiles\n */\nexport function getFilesSync(dirname, recursive = true, filterExt = '') {\n  let items = []\n  try {\n    fse.readdirSync(dirname).map(function(fileName) {\n      let pathFile = path.join(dirname, fileName)\n      let stat = fse.statSync(pathFile)\n      if (stat.isFile()) {\n        let extFile = path.extname(fileName)\n        if (filterExt === '' || extFile === filterExt) {\n          items.push(pathFile)\n        }\n      }\n      if (stat.isDirectory() && recursive) {\n        let filesInDir = coreUtils.file.getFilesSync(\n          pathFile,\n          recursive,\n          filterExt\n        )\n        items = items.concat(filesInDir)\n      }\n    })\n\n    return items\n  } catch (e) {\n    return items\n  }\n}\n\n/**\n * Promisified fse walker with recursive and extension options\n * @param  {String}  dirname   dir path\n * @param  {Boolean} recursive do we recurse in the subfolders\n * @param  {String}  filterExt extension or ''\n * @return {array}             array of pathfiles\n */\nexport async function getFiles(dirname, recursive = true, filterExt = '') {\n  let items = []\n\n  try {\n    let stat = await fse.lstat(dirname)\n    if (stat.isDirectory()) {\n      let files = await fse.readdir(dirname)\n      await Promise.all(files.map(async fileName => {\n        let pathFile = path.join(dirname, fileName)\n        let statFile = await fse.stat(pathFile)\n        if (statFile.isFile()) {\n          let extFile = path.extname(fileName)\n          if (filterExt === '' || extFile === filterExt) {\n            items.push(pathFile)\n          }\n        }\n        if (recursive) {\n          let filesInDir = await coreUtils.file.getFiles(pathFile, recursive, filterExt)\n          items = items.concat(filesInDir)\n        }\n      }));\n    }\n  } catch (e) {\n    // We don't throw no error. the directory or file doesn't exist\n  }\n\n  return items\n}\n\nexport function addFolder(folderPath) {\n  mkdirp(path.join(config.root, folderPath), function(err) {\n    if (err) console.error(err)\n  })\n  return folderPath\n}\n\nexport function removeFolder(folderPath) {\n  fse.remove(path.join(config.root, folderPath), function(err) {\n    if (err) return console.error(err)\n  })\n  return folderPath\n}\n\n/**\n * Return the date of the revision\n * @param  {String}  revisionPath   url of the post revision\n * @return {Date}    date           Date object\n */\nexport function getDate(revisionPath) {\n  var date = cmsData.fileAttr.get(revisionPath).d\n\n  if (typeof date === 'undefined' || date === null || date === '') {\n    date = new Date()\n  } else {\n    date = new Date(date)\n  }\n\n  return date\n}\n\n/**\n *\n * @param  {String}  revisionPath   url of the post revision\n * @return {Date}    date           Date object\n */\nexport function addDateIsoToRevisionPath(revisionPath, type) {\n  var dateISO\n  var saveJsonFile = revisionPath\n\n  if (type === 'publish') {\n    return revisionPath\n  }\n\n  dateISO =\n    type[0] +\n    cmsData.revision.removeStatusAndDateFromFileName(new Date().toISOString())\n\n  if (dateISO) {\n    saveJsonFile = cmsData.fileAttr.add(saveJsonFile, dateISO)\n  }\n\n  return saveJsonFile\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4d2411a8ec00b26f00414bc4b06839a21b3e62cf","contentHash":"a37625f064273d032c011b0eda831f7333f0c62c5253bab7cba914bd697b18f8"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/random.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/random.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":60}},"2":{"start":{"line":9,"column":18},"end":{"line":9,"column":87}},"3":{"start":{"line":10,"column":2},"end":{"line":10,"column":80}}},"fnMap":{"0":{"name":"generateUniqueIdentifier","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":33}},"loc":{"start":{"line":8,"column":36},"end":{"line":11,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":18},"end":{"line":9,"column":87}},"type":"cond-expr","locations":[{"start":{"line":9,"column":71},"end":{"line":9,"column":83}},{"start":{"line":9,"column":86},"end":{"line":9,"column":87}}],"line":9},"1":{"loc":{"start":{"line":9,"column":18},"end":{"line":9,"column":68}},"type":"binary-expr","locations":[{"start":{"line":9,"column":18},"end":{"line":9,"column":38}},{"start":{"line":9,"column":42},"end":{"line":9,"column":68}}],"line":9}},"s":{"0":1,"1":1,"2":2,"3":2},"f":{"0":2},"b":{"0":[1,1],"1":[2,1]},"inputSourceMap":{"version":3,"sources":["random.js"],"names":["generateUniqueIdentifier","substring","Math","random","toString"],"mappings":";;;;;;;AAAO,SAASA,wBAAT,GAAiD;AAAA,MAAfC,SAAe,uEAAH,CAAG;AACtD,SAAO,CAAE,CAAC,IAAIC,IAAI,CAACC,MAAL,EAAL,IAAsB,QAAvB,GAAmC,CAApC,EACJC,QADI,CACK,EADL,EAEJH,SAFI,CAEMA,SAFN,CAAP;AAGD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/","sourcesContent":["export function generateUniqueIdentifier(substring = 0) {\n  return (((1 + Math.random()) * 0x100000) | 0)\n    .toString(16)\n    .substring(substring)\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8779ae7d07ed2c2672778e2dc83e9f2b14b8cd50","contentHash":"884716da8bcdc9a26d6434510bc71b276c38175cc7b60a51857954a5aa2a2119"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/mail.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/mail.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":20}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":28}},"4":{"start":{"line":11,"column":18},"end":{"line":11,"column":63}},"5":{"start":{"line":13,"column":8},"end":{"line":13,"column":25}},"6":{"start":{"line":15,"column":17},"end":{"line":15,"column":507}},"7":{"start":{"line":27,"column":0},"end":{"line":27,"column":32}},"8":{"start":{"line":30,"column":13},"end":{"line":30,"column":83}},"9":{"start":{"line":31,"column":13},"end":{"line":31,"column":83}},"10":{"start":{"line":32,"column":13},"end":{"line":32,"column":26}},"11":{"start":{"line":37,"column":13},"end":{"line":44,"column":3}},"12":{"start":{"line":46,"column":2},"end":{"line":70,"column":3}},"13":{"start":{"line":47,"column":4},"end":{"line":50,"column":7}},"14":{"start":{"line":52,"column":4},"end":{"line":52,"column":41}},"15":{"start":{"line":53,"column":4},"end":{"line":53,"column":27}},"16":{"start":{"line":55,"column":4},"end":{"line":69,"column":5}},"17":{"start":{"line":56,"column":6},"end":{"line":56,"column":68}},"18":{"start":{"line":57,"column":11},"end":{"line":69,"column":5}},"19":{"start":{"line":58,"column":6},"end":{"line":58,"column":59}},"20":{"start":{"line":59,"column":6},"end":{"line":59,"column":79}},"21":{"start":{"line":60,"column":11},"end":{"line":69,"column":5}},"22":{"start":{"line":61,"column":6},"end":{"line":61,"column":58}},"23":{"start":{"line":62,"column":6},"end":{"line":62,"column":79}},"24":{"start":{"line":63,"column":11},"end":{"line":69,"column":5}},"25":{"start":{"line":64,"column":6},"end":{"line":64,"column":59}},"26":{"start":{"line":65,"column":6},"end":{"line":65,"column":79}},"27":{"start":{"line":67,"column":6},"end":{"line":67,"column":35}},"28":{"start":{"line":68,"column":6},"end":{"line":68,"column":79}},"29":{"start":{"line":72,"column":2},"end":{"line":76,"column":5}},"30":{"start":{"line":73,"column":4},"end":{"line":75,"column":5}},"31":{"start":{"line":74,"column":6},"end":{"line":74,"column":32}}},"fnMap":{"0":{"name":"send","decl":{"start":{"line":29,"column":9},"end":{"line":29,"column":13}},"loc":{"start":{"line":29,"column":33},"end":{"line":77,"column":1}},"line":29},"1":{"name":"(anonymous_1)","decl":{"start":{"line":72,"column":29},"end":{"line":72,"column":30}},"loc":{"start":{"line":72,"column":52},"end":{"line":76,"column":3}},"line":72}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":13},"end":{"line":30,"column":83}},"type":"cond-expr","locations":[{"start":{"line":30,"column":66},"end":{"line":30,"column":78}},{"start":{"line":30,"column":81},"end":{"line":30,"column":83}}],"line":30},"1":{"loc":{"start":{"line":30,"column":13},"end":{"line":30,"column":63}},"type":"binary-expr","locations":[{"start":{"line":30,"column":13},"end":{"line":30,"column":33}},{"start":{"line":30,"column":37},"end":{"line":30,"column":63}}],"line":30},"2":{"loc":{"start":{"line":31,"column":13},"end":{"line":31,"column":83}},"type":"cond-expr","locations":[{"start":{"line":31,"column":66},"end":{"line":31,"column":78}},{"start":{"line":31,"column":81},"end":{"line":31,"column":83}}],"line":31},"3":{"loc":{"start":{"line":31,"column":13},"end":{"line":31,"column":63}},"type":"binary-expr","locations":[{"start":{"line":31,"column":13},"end":{"line":31,"column":33}},{"start":{"line":31,"column":37},"end":{"line":31,"column":63}}],"line":31},"4":{"loc":{"start":{"line":46,"column":2},"end":{"line":70,"column":3}},"type":"if","locations":[{"start":{"line":46,"column":2},"end":{"line":70,"column":3}},{"start":{"line":46,"column":2},"end":{"line":70,"column":3}}],"line":46},"5":{"loc":{"start":{"line":46,"column":6},"end":{"line":46,"column":78}},"type":"binary-expr","locations":[{"start":{"line":46,"column":6},"end":{"line":46,"column":33}},{"start":{"line":46,"column":37},"end":{"line":46,"column":50}},{"start":{"line":46,"column":54},"end":{"line":46,"column":78}}],"line":46},"6":{"loc":{"start":{"line":55,"column":4},"end":{"line":69,"column":5}},"type":"if","locations":[{"start":{"line":55,"column":4},"end":{"line":69,"column":5}},{"start":{"line":55,"column":4},"end":{"line":69,"column":5}}],"line":55},"7":{"loc":{"start":{"line":57,"column":11},"end":{"line":69,"column":5}},"type":"if","locations":[{"start":{"line":57,"column":11},"end":{"line":69,"column":5}},{"start":{"line":57,"column":11},"end":{"line":69,"column":5}}],"line":57},"8":{"loc":{"start":{"line":57,"column":15},"end":{"line":57,"column":64}},"type":"binary-expr","locations":[{"start":{"line":57,"column":15},"end":{"line":57,"column":37}},{"start":{"line":57,"column":41},"end":{"line":57,"column":64}}],"line":57},"9":{"loc":{"start":{"line":60,"column":11},"end":{"line":69,"column":5}},"type":"if","locations":[{"start":{"line":60,"column":11},"end":{"line":69,"column":5}},{"start":{"line":60,"column":11},"end":{"line":69,"column":5}}],"line":60},"10":{"loc":{"start":{"line":63,"column":11},"end":{"line":69,"column":5}},"type":"if","locations":[{"start":{"line":63,"column":11},"end":{"line":69,"column":5}},{"start":{"line":63,"column":11},"end":{"line":69,"column":5}}],"line":63},"11":{"loc":{"start":{"line":73,"column":4},"end":{"line":75,"column":5}},"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":75,"column":5}},{"start":{"line":73,"column":4},"end":{"line":75,"column":5}}],"line":73}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"sources":["mail.js"],"names":["regexEmail","send","from","to","subject","text","html","smtp","config","service","transport","options","transporter","mail","nodemailer","createTransport","name","direct","toLowerCase","require","sendMail","error","info","console","log"],"mappings":";;;;;;;;;;AAAA;;AACA;;AAEO,IAAMA,UAAU,GAAG,0eAAnB;AAEP;;;;;;;;;;;;;AAUO,SAASC,IAAT,CAAcC,IAAd,EAAoBC,EAApB,EAAwBC,OAAxB,EAAuD;AAAA,MAAtBC,IAAsB,uEAAf,EAAe;AAAA,MAAXC,IAAW,uEAAJ,EAAI;AAC5D,MAAMC,IAAI,GAAGC,SAAOD,IAApB;AACA,MAAIE,OAAJ;AACA,MAAIC,SAAJ;AACA,MAAIC,OAAJ;AACA,MAAIC,WAAJ;AAEA,MAAIC,IAAI,GAAG;AACTX,IAAAA,IAAI,EAAEA,IADG;AAETC,IAAAA,EAAE,EAAEA,EAFK;AAED;AACRC,IAAAA,OAAO,EAAEA,OAHA;AAITC,IAAAA,IAAI,EAAEA,IAJG;AAKTC,IAAAA,IAAI,EAAEA;AALG,GAAX;;AAQA,MACE,OAAOC,IAAP,KAAgB,WAAhB,IACAA,IAAI,KAAK,IADT,IAEA,OAAOA,IAAP,KAAgB,QAHlB,EAIE;AACAK,IAAAA,WAAW,GAAGE,uBAAWC,eAAX,CAA2B;AACvCC,MAAAA,IAAI,EAAE,WADiC;AAEvCC,MAAAA,MAAM,EAAE;AAF+B,KAA3B,CAAd;AAID,GATD,MASO;AACLR,IAAAA,OAAO,GAAGF,IAAI,CAACE,OAAL,CAAaS,WAAb,EAAV;AACAP,IAAAA,OAAO,GAAGJ,IAAI,CAACI,OAAf;;AACA,QAAIF,OAAO,KAAK,KAAhB,EAAuB;AACrBG,MAAAA,WAAW,GAAGE,uBAAWC,eAAX,CAA2BJ,OAA3B,CAAd;AACD,KAFD,MAEO,IAAIF,OAAO,KAAK,UAAZ,IAA0BA,OAAO,KAAK,WAA1C,EAAuD;AAC5DC,MAAAA,SAAS,GAAGS,OAAO,CAAC,+BAAD,CAAnB;AACAP,MAAAA,WAAW,GAAGE,uBAAWC,eAAX,CAA2BL,SAAS,CAACC,OAAD,CAApC,CAAd;AACD,KAHM,MAGA,IAAIF,OAAO,KAAK,SAAhB,EAA2B;AAChCC,MAAAA,SAAS,GAAGS,OAAO,CAAC,8BAAD,CAAnB;AACAP,MAAAA,WAAW,GAAGE,uBAAWC,eAAX,CAA2BL,SAAS,CAACC,OAAD,CAApC,CAAd;AACD,KAHM,MAGA,IAAIF,OAAO,KAAK,UAAhB,EAA4B;AACjCC,MAAAA,SAAS,GAAGS,OAAO,CAAC,+BAAD,CAAnB;AACAP,MAAAA,WAAW,GAAGE,uBAAWC,eAAX,CAA2BL,SAAS,CAACC,OAAD,CAApC,CAAd;AACD,KAHM,MAGA;AACLD,MAAAA,SAAS,GAAGS,OAAO,CAACV,OAAD,CAAnB;AACAG,MAAAA,WAAW,GAAGE,uBAAWC,eAAX,CAA2BL,SAAS,CAACC,OAAD,CAApC,CAAd;AACD;AACF;;AAEDC,EAAAA,WAAW,CAACQ,QAAZ,CAAqBP,IAArB,EAA2B,UAASQ,KAAT,EAAgBC,IAAhB,EAAsB;AAC/C,QAAID,KAAJ,EAAW;AACT,aAAOE,OAAO,CAACC,GAAR,CAAYH,KAAZ,CAAP;AACD;AACF,GAJD;AAKD","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/core/utils/","sourcesContent":["import nodemailer from 'nodemailer'\nimport {config} from '../../'\n\nexport const regexEmail = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])\\s?((?:#|ext\\.?\\s?|x\\.?\\s?){1}(?:\\d+)?)?$/i\n\n/**\n * This function will send mails thanks to data/templates merged with Abe\n * @param  {[type]} from         [description]\n * @param  {[type]} to           [description]\n * @param  {[type]} subject      [description]\n * @param  {[type]} data         [description]\n * @param  {[type]} textTemplate [description]\n * @param  {[type]} htmlTemplate [description]\n * @return {[type]}              [description]\n */\nexport function send(from, to, subject, text = '', html = '') {\n  const smtp = config.smtp\n  let service\n  let transport\n  let options\n  let transporter\n\n  let mail = {\n    from: from,\n    to: to, // list of receivers\n    subject: subject,\n    text: text,\n    html: html\n  }\n\n  if (\n    typeof smtp === 'undefined' ||\n    smtp === null ||\n    typeof smtp === 'string'\n  ) {\n    transporter = nodemailer.createTransport({\n      name: 'localhost',\n      direct: true\n    })\n  } else {\n    service = smtp.service.toLowerCase()\n    options = smtp.options\n    if (service === 'ses') {\n      transporter = nodemailer.createTransport(options)\n    } else if (service === 'mandrill' || service === 'mailchimp') {\n      transport = require('nodemailer-mandrill-transport')\n      transporter = nodemailer.createTransport(transport(options))\n    } else if (service === 'mailgun') {\n      transport = require('nodemailer-mailgun-transport')\n      transporter = nodemailer.createTransport(transport(options))\n    } else if (service === 'sendgrid') {\n      transport = require('nodemailer-sendgrid-transport')\n      transporter = nodemailer.createTransport(transport(options))\n    } else {\n      transport = require(service)\n      transporter = nodemailer.createTransport(transport(options))\n    }\n  }\n\n  transporter.sendMail(mail, function(error, info) {\n    if (error) {\n      return console.log(error)\n    }\n  })\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8777064077a763db2bb2e2526825a685b1c65863","contentHash":"c6102580f99288c9db8a9f9bcbde0573ac0bc53111ecd754e1c83b9a6729514b"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/index.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":13,"column":3}},"3":{"start":{"line":11,"column":4},"end":{"line":11,"column":29}},"4":{"start":{"line":14,"column":0},"end":{"line":19,"column":3}},"5":{"start":{"line":17,"column":4},"end":{"line":17,"column":31}},"6":{"start":{"line":20,"column":0},"end":{"line":25,"column":3}},"7":{"start":{"line":23,"column":4},"end":{"line":23,"column":31}},"8":{"start":{"line":27,"column":13},"end":{"line":27,"column":55}},"9":{"start":{"line":29,"column":15},"end":{"line":29,"column":59}},"10":{"start":{"line":31,"column":15},"end":{"line":31,"column":59}}},"fnMap":{"0":{"name":"get","decl":{"start":{"line":10,"column":16},"end":{"line":10,"column":19}},"loc":{"start":{"line":10,"column":22},"end":{"line":12,"column":3}},"line":10},"1":{"name":"get","decl":{"start":{"line":16,"column":16},"end":{"line":16,"column":19}},"loc":{"start":{"line":16,"column":22},"end":{"line":18,"column":3}},"line":16},"2":{"name":"get","decl":{"start":{"line":22,"column":16},"end":{"line":22,"column":19}},"loc":{"start":{"line":22,"column":22},"end":{"line":24,"column":3}},"line":22}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":2261,"4":1,"5":4443,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":2261,"1":4443,"2":1},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/","sourcesContent":["import hooks from './hooks'\nimport plugins from './plugins'\nimport process from './process'\n\nexport {hooks, plugins, process}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b2ad3f3ea818a47c4d231a9f800434b54cdf2569","contentHash":"7033206f0cfff42e24e696fb6b1234936b23acf29b5cbd635136c27c1498445a"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/hooks.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/hooks.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":29},"end":{"line":5,"column":84}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":3}},"3":{"start":{"line":10,"column":0},"end":{"line":10,"column":28}},"4":{"start":{"line":12,"column":23},"end":{"line":12,"column":95}},"5":{"start":{"line":14,"column":20},"end":{"line":14,"column":89}},"6":{"start":{"line":16,"column":14},"end":{"line":16,"column":55}},"7":{"start":{"line":18,"column":12},"end":{"line":18,"column":51}},"8":{"start":{"line":20,"column":13},"end":{"line":20,"column":65}},"9":{"start":{"line":22,"column":10},"end":{"line":22,"column":49}},"10":{"start":{"line":24,"column":16},"end":{"line":24,"column":24}},"11":{"start":{"line":25,"column":24},"end":{"line":25,"column":32}},"12":{"start":{"line":27,"column":25},"end":{"line":71,"column":3}},"13":{"start":{"line":29,"column":4},"end":{"line":29,"column":50}},"14":{"start":{"line":30,"column":4},"end":{"line":30,"column":79}},"15":{"start":{"line":30,"column":39},"end":{"line":30,"column":79}},"16":{"start":{"line":32,"column":4},"end":{"line":38,"column":5}},"17":{"start":{"line":33,"column":14},"end":{"line":33,"column":95}},"18":{"start":{"line":35,"column":6},"end":{"line":35,"column":79}},"19":{"start":{"line":37,"column":6},"end":{"line":37,"column":34}},"20":{"start":{"line":41,"column":2},"end":{"line":69,"column":6}},"21":{"start":{"line":44,"column":6},"end":{"line":56,"column":7}},"22":{"start":{"line":45,"column":19},"end":{"line":45,"column":43}},"23":{"start":{"line":46,"column":17},"end":{"line":46,"column":29}},"24":{"start":{"line":47,"column":8},"end":{"line":47,"column":23}},"25":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"26":{"start":{"line":50,"column":10},"end":{"line":50,"column":50}},"27":{"start":{"line":53,"column":8},"end":{"line":53,"column":112}},"28":{"start":{"line":55,"column":8},"end":{"line":55,"column":20}},"29":{"start":{"line":58,"column":6},"end":{"line":58,"column":21}},"30":{"start":{"line":63,"column":6},"end":{"line":65,"column":7}},"31":{"start":{"line":64,"column":8},"end":{"line":64,"column":55}},"32":{"start":{"line":67,"column":6},"end":{"line":67,"column":29}},"33":{"start":{"line":70,"column":2},"end":{"line":70,"column":15}},"34":{"start":{"line":73,"column":15},"end":{"line":73,"column":20}},"35":{"start":{"line":74,"column":0},"end":{"line":74,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":27,"column":25},"end":{"line":27,"column":26}},"loc":{"start":{"line":27,"column":37},"end":{"line":71,"column":1}},"line":27},"1":{"name":"Hooks","decl":{"start":{"line":28,"column":11},"end":{"line":28,"column":16}},"loc":{"start":{"line":28,"column":27},"end":{"line":39,"column":3}},"line":28},"2":{"name":"trigger","decl":{"start":{"line":43,"column":20},"end":{"line":43,"column":27}},"loc":{"start":{"line":43,"column":30},"end":{"line":59,"column":5}},"line":43},"3":{"name":"get","decl":{"start":{"line":62,"column":18},"end":{"line":62,"column":21}},"loc":{"start":{"line":62,"column":24},"end":{"line":68,"column":5}},"line":62}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":4},"end":{"line":30,"column":79}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":79}},{"start":{"line":30,"column":4},"end":{"line":30,"column":79}}],"line":30},"1":{"loc":{"start":{"line":32,"column":4},"end":{"line":38,"column":5}},"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":38,"column":5}},{"start":{"line":32,"column":4},"end":{"line":38,"column":5}}],"line":32},"2":{"loc":{"start":{"line":44,"column":6},"end":{"line":56,"column":7}},"type":"if","locations":[{"start":{"line":44,"column":6},"end":{"line":56,"column":7}},{"start":{"line":44,"column":6},"end":{"line":56,"column":7}}],"line":44},"3":{"loc":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},{"start":{"line":49,"column":8},"end":{"line":51,"column":9}}],"line":49},"4":{"loc":{"start":{"line":49,"column":12},"end":{"line":49,"column":124}},"type":"binary-expr","locations":[{"start":{"line":49,"column":12},"end":{"line":49,"column":42}},{"start":{"line":49,"column":46},"end":{"line":49,"column":62}},{"start":{"line":49,"column":66},"end":{"line":49,"column":100}},{"start":{"line":49,"column":104},"end":{"line":49,"column":124}}],"line":49},"5":{"loc":{"start":{"line":63,"column":6},"end":{"line":65,"column":7}},"type":"if","locations":[{"start":{"line":63,"column":6},"end":{"line":65,"column":7}},{"start":{"line":63,"column":6},"end":{"line":65,"column":7}}],"line":63}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":1,"17":0,"18":0,"19":1,"20":1,"21":2208,"22":2208,"23":2208,"24":2208,"25":2208,"26":2208,"27":2208,"28":0,"29":2208,"30":2261,"31":1,"32":2261,"33":1,"34":1,"35":1},"f":{"0":1,"1":1,"2":2208,"3":2261},"b":{"0":[0,1],"1":[0,1],"2":[2208,0],"3":[2208,0],"4":[2208,2208,2208,2208],"5":[1,2260]},"inputSourceMap":{"version":3,"sources":["hooks.js"],"names":["singleton","Symbol","singletonEnforcer","Hooks","enforcer","coreUtils","file","exist","path","join","config","root","hooks","url","h","require","fn","hooksDefault","arguments","length","args","slice","call","shift","push","abe","apply","abeExtend","plugins","instance","concat"],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AAEA;;AAEA;;AAIA,IAAIA,SAAS,GAAGC,MAAM,EAAtB;AACA,IAAIC,iBAAiB,GAAGD,MAAM,EAA9B;;IAEME,K;AACJ,iBAAYC,QAAZ,EAAsB;AAAA;AACpB,QAAIA,QAAQ,IAAIF,iBAAhB,EAAmC,MAAM,iCAAN;;AAEnC,QACEG,cAAUC,IAAV,CAAeC,KAAf,CAAqBC,iBAAKC,IAAL,CAAUC,WAAOC,IAAjB,EAAuBD,WAAOE,KAAP,CAAaC,GAApC,EAAyC,UAAzC,CAArB,CADF,EAEE;AACA,UAAIC,CAAC,GAAGC,OAAO,CAACP,iBAAKC,IAAL,CAAUC,WAAOC,IAAjB,EAAuBD,WAAOE,KAAP,CAAaC,GAApC,EAAyC,UAAzC,CAAD,CAAf;;AACA,WAAKG,EAAL,GAAU,wBAAO,IAAP,EAAaC,iBAAb,EAA2BH,CAAC,WAA5B,CAAV;AACD,KALD,MAKO;AACL,WAAKE,EAAL,GAAUC,iBAAV;AACD;AACF;;;;8BAES;AACR,UAAIC,SAAS,CAACC,MAAV,GAAmB,CAAvB,EAA0B;AACxB,YAAIC,IAAI,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcJ,SAAd,CAAX;AACA,YAAIF,EAAE,GAAGI,IAAI,CAACG,KAAL,EAAT;AACAH,QAAAA,IAAI,CAACI,IAAL,CAAUC,GAAV;;AAEA,YACE,OAAO,KAAKT,EAAZ,KAAmB,WAAnB,IACA,KAAKA,EAAL,KAAY,IADZ,IAEA,OAAO,KAAKA,EAAL,CAAQA,EAAR,CAAP,KAAuB,WAFvB,IAGA,KAAKA,EAAL,CAAQA,EAAR,MAAgB,IAJlB,EAKE;AACAI,UAAAA,IAAI,CAAC,CAAD,CAAJ,GAAU,KAAKJ,EAAL,CAAQA,EAAR,EAAYU,KAAZ,CAAkB,IAAlB,EAAwBN,IAAxB,CAAV;AACD;;AAEDA,QAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUO,cAAUC,OAAV,CAAkBC,QAAlB,CAA2BjB,KAA3B,CAAiCc,KAAjC,CACRC,cAAUC,OAAV,CAAkBC,QADV,EAER,CAACb,EAAD,EAAKc,MAAL,CAAYV,IAAZ,CAFQ,CAAV;AAID,OAlBD,MAkBO;AACLA,QAAAA,IAAI,GAAG,CAAC,EAAD,CAAP;AACD;;AAED,aAAOA,IAAI,CAAC,CAAD,CAAX;AACD;;;wBAEqB;AACpB,UAAI,CAAC,KAAKpB,SAAL,CAAL,EAAsB;AACpB,aAAKA,SAAL,IAAkB,IAAIG,KAAJ,CAAUD,iBAAV,CAAlB;AACD;;AACD,aAAO,KAAKF,SAAL,CAAP;AACD;;;;;eAGYG,K","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/","sourcesContent":["import extend from 'extend'\nimport path from 'path'\n\nimport hooksDefault from '../../hooks/hooks'\n\nimport {config, coreUtils, abeExtend} from '../'\n\nimport * as abe from '../'\n\nlet singleton = Symbol()\nlet singletonEnforcer = Symbol()\n\nclass Hooks {\n  constructor(enforcer) {\n    if (enforcer != singletonEnforcer) throw 'Cannot construct Json singleton'\n\n    if (\n      coreUtils.file.exist(path.join(config.root, config.hooks.url, 'hooks.js'))\n    ) {\n      var h = require(path.join(config.root, config.hooks.url, 'hooks.js'))\n      this.fn = extend(true, hooksDefault, h.default)\n    } else {\n      this.fn = hooksDefault\n    }\n  }\n\n  trigger() {\n    if (arguments.length > 0) {\n      var args = [].slice.call(arguments)\n      var fn = args.shift()\n      args.push(abe)\n\n      if (\n        typeof this.fn !== 'undefined' &&\n        this.fn !== null &&\n        typeof this.fn[fn] !== 'undefined' &&\n        this.fn[fn] !== null\n      ) {\n        args[0] = this.fn[fn].apply(this, args)\n      }\n\n      args[0] = abeExtend.plugins.instance.hooks.apply(\n        abeExtend.plugins.instance,\n        [fn].concat(args)\n      )\n    } else {\n      args = ['']\n    }\n\n    return args[0]\n  }\n\n  static get instance() {\n    if (!this[singleton]) {\n      this[singleton] = new Hooks(singletonEnforcer)\n    }\n    return this[singleton]\n  }\n}\n\nexport default Hooks\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c9f2a973d355729ed49f4457f59b4f74152afacc","contentHash":"afd23a0053fd12e4616cb929f9f399b2269761a1523defed3e37e6698dd6a4ce"},"/Users/grg/programmation/git/abe/abe-v5/src/hooks/hooks.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/hooks/hooks.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":7,"column":12},"end":{"line":185,"column":1}},"3":{"start":{"line":10,"column":4},"end":{"line":10,"column":16}},"4":{"start":{"line":13,"column":4},"end":{"line":13,"column":15}},"5":{"start":{"line":16,"column":4},"end":{"line":16,"column":15}},"6":{"start":{"line":19,"column":4},"end":{"line":19,"column":18}},"7":{"start":{"line":22,"column":4},"end":{"line":22,"column":18}},"8":{"start":{"line":27,"column":4},"end":{"line":27,"column":16}},"9":{"start":{"line":32,"column":4},"end":{"line":32,"column":20}},"10":{"start":{"line":35,"column":4},"end":{"line":35,"column":16}},"11":{"start":{"line":40,"column":4},"end":{"line":40,"column":16}},"12":{"start":{"line":43,"column":4},"end":{"line":43,"column":18}},"13":{"start":{"line":48,"column":4},"end":{"line":48,"column":16}},"14":{"start":{"line":51,"column":4},"end":{"line":51,"column":18}},"15":{"start":{"line":56,"column":4},"end":{"line":56,"column":20}},"16":{"start":{"line":59,"column":4},"end":{"line":59,"column":16}},"17":{"start":{"line":64,"column":4},"end":{"line":64,"column":16}},"18":{"start":{"line":67,"column":4},"end":{"line":67,"column":16}},"19":{"start":{"line":73,"column":4},"end":{"line":73,"column":23}},"20":{"start":{"line":76,"column":4},"end":{"line":76,"column":16}},"21":{"start":{"line":81,"column":4},"end":{"line":81,"column":16}},"22":{"start":{"line":86,"column":4},"end":{"line":86,"column":16}},"23":{"start":{"line":89,"column":4},"end":{"line":89,"column":15}},"24":{"start":{"line":92,"column":4},"end":{"line":92,"column":15}},"25":{"start":{"line":95,"column":4},"end":{"line":95,"column":25}},"26":{"start":{"line":98,"column":4},"end":{"line":98,"column":16}},"27":{"start":{"line":101,"column":4},"end":{"line":101,"column":15}},"28":{"start":{"line":104,"column":4},"end":{"line":104,"column":15}},"29":{"start":{"line":109,"column":4},"end":{"line":109,"column":19}},"30":{"start":{"line":112,"column":4},"end":{"line":112,"column":21}},"31":{"start":{"line":115,"column":4},"end":{"line":115,"column":18}},"32":{"start":{"line":120,"column":4},"end":{"line":120,"column":16}},"33":{"start":{"line":123,"column":4},"end":{"line":123,"column":15}},"34":{"start":{"line":126,"column":4},"end":{"line":126,"column":22}},"35":{"start":{"line":129,"column":4},"end":{"line":129,"column":18}},"36":{"start":{"line":132,"column":4},"end":{"line":132,"column":22}},"37":{"start":{"line":135,"column":4},"end":{"line":135,"column":15}},"38":{"start":{"line":138,"column":4},"end":{"line":138,"column":15}},"39":{"start":{"line":141,"column":4},"end":{"line":141,"column":16}},"40":{"start":{"line":144,"column":4},"end":{"line":144,"column":18}},"41":{"start":{"line":147,"column":4},"end":{"line":147,"column":16}},"42":{"start":{"line":150,"column":4},"end":{"line":150,"column":20}},"43":{"start":{"line":153,"column":4},"end":{"line":153,"column":15}},"44":{"start":{"line":156,"column":4},"end":{"line":156,"column":27}},"45":{"start":{"line":161,"column":4},"end":{"line":161,"column":16}},"46":{"start":{"line":164,"column":4},"end":{"line":164,"column":16}},"47":{"start":{"line":167,"column":4},"end":{"line":167,"column":26}},"48":{"start":{"line":172,"column":4},"end":{"line":172,"column":16}},"49":{"start":{"line":175,"column":4},"end":{"line":175,"column":16}},"50":{"start":{"line":180,"column":4},"end":{"line":180,"column":16}},"51":{"start":{"line":183,"column":4},"end":{"line":183,"column":16}},"52":{"start":{"line":186,"column":15},"end":{"line":186,"column":20}},"53":{"start":{"line":187,"column":0},"end":{"line":187,"column":30}}},"fnMap":{"0":{"name":"beforeExpress","decl":{"start":{"line":9,"column":26},"end":{"line":9,"column":39}},"loc":{"start":{"line":9,"column":51},"end":{"line":11,"column":3}},"line":9},"1":{"name":"afterExpress","decl":{"start":{"line":12,"column":25},"end":{"line":12,"column":37}},"loc":{"start":{"line":12,"column":57},"end":{"line":14,"column":3}},"line":12},"2":{"name":"beforeRoute","decl":{"start":{"line":15,"column":24},"end":{"line":15,"column":35}},"loc":{"start":{"line":15,"column":57},"end":{"line":17,"column":3}},"line":15},"3":{"name":"beforeAddRoute","decl":{"start":{"line":18,"column":27},"end":{"line":18,"column":41}},"loc":{"start":{"line":18,"column":55},"end":{"line":20,"column":3}},"line":18},"4":{"name":"afterAddRoute","decl":{"start":{"line":21,"column":26},"end":{"line":21,"column":39}},"loc":{"start":{"line":21,"column":53},"end":{"line":23,"column":3}},"line":21},"5":{"name":"beforePreview","decl":{"start":{"line":26,"column":26},"end":{"line":26,"column":39}},"loc":{"start":{"line":26,"column":67},"end":{"line":28,"column":3}},"line":26},"6":{"name":"beforeDeleteFile","decl":{"start":{"line":31,"column":29},"end":{"line":31,"column":45}},"loc":{"start":{"line":31,"column":61},"end":{"line":33,"column":3}},"line":31},"7":{"name":"afterDeleteFile","decl":{"start":{"line":34,"column":28},"end":{"line":34,"column":43}},"loc":{"start":{"line":34,"column":61},"end":{"line":36,"column":3}},"line":34},"8":{"name":"beforeReject","decl":{"start":{"line":39,"column":25},"end":{"line":39,"column":37}},"loc":{"start":{"line":39,"column":68},"end":{"line":41,"column":3}},"line":39},"9":{"name":"afterReject","decl":{"start":{"line":42,"column":24},"end":{"line":42,"column":35}},"loc":{"start":{"line":42,"column":49},"end":{"line":44,"column":3}},"line":42},"10":{"name":"beforePublish","decl":{"start":{"line":47,"column":26},"end":{"line":47,"column":39}},"loc":{"start":{"line":47,"column":61},"end":{"line":49,"column":3}},"line":47},"11":{"name":"afterPublish","decl":{"start":{"line":50,"column":25},"end":{"line":50,"column":37}},"loc":{"start":{"line":50,"column":61},"end":{"line":52,"column":3}},"line":50},"12":{"name":"beforeUnpublish","decl":{"start":{"line":55,"column":28},"end":{"line":55,"column":43}},"loc":{"start":{"line":55,"column":59},"end":{"line":57,"column":3}},"line":55},"13":{"name":"afterUnpublish","decl":{"start":{"line":58,"column":27},"end":{"line":58,"column":41}},"loc":{"start":{"line":58,"column":69},"end":{"line":60,"column":3}},"line":58},"14":{"name":"beforeCreate","decl":{"start":{"line":63,"column":25},"end":{"line":63,"column":37}},"loc":{"start":{"line":63,"column":68},"end":{"line":65,"column":3}},"line":63},"15":{"name":"afterCreate","decl":{"start":{"line":66,"column":24},"end":{"line":66,"column":35}},"loc":{"start":{"line":66,"column":81},"end":{"line":68,"column":3}},"line":66},"16":{"name":"beforeDuplicate","decl":{"start":{"line":71,"column":28},"end":{"line":71,"column":43}},"loc":{"start":{"line":71,"column":102},"end":{"line":74,"column":3}},"line":71},"17":{"name":"afterDuplicate","decl":{"start":{"line":75,"column":27},"end":{"line":75,"column":41}},"loc":{"start":{"line":75,"column":106},"end":{"line":77,"column":3}},"line":75},"18":{"name":"beforeUpdate","decl":{"start":{"line":80,"column":25},"end":{"line":80,"column":37}},"loc":{"start":{"line":80,"column":102},"end":{"line":82,"column":3}},"line":80},"19":{"name":"beforeFirstSave","decl":{"start":{"line":85,"column":28},"end":{"line":85,"column":43}},"loc":{"start":{"line":85,"column":61},"end":{"line":87,"column":3}},"line":85},"20":{"name":"beforeSave","decl":{"start":{"line":88,"column":23},"end":{"line":88,"column":33}},"loc":{"start":{"line":88,"column":44},"end":{"line":90,"column":3}},"line":88},"21":{"name":"afterSave","decl":{"start":{"line":91,"column":22},"end":{"line":91,"column":31}},"loc":{"start":{"line":91,"column":42},"end":{"line":93,"column":3}},"line":91},"22":{"name":"beforeSaveImage","decl":{"start":{"line":94,"column":28},"end":{"line":94,"column":43}},"loc":{"start":{"line":94,"column":64},"end":{"line":96,"column":3}},"line":94},"23":{"name":"afterSaveImage","decl":{"start":{"line":97,"column":27},"end":{"line":97,"column":41}},"loc":{"start":{"line":97,"column":58},"end":{"line":99,"column":3}},"line":97},"24":{"name":"afterPageSaveCompile","decl":{"start":{"line":100,"column":33},"end":{"line":100,"column":53}},"loc":{"start":{"line":100,"column":70},"end":{"line":102,"column":3}},"line":100},"25":{"name":"afterPageEditorCompile","decl":{"start":{"line":103,"column":35},"end":{"line":103,"column":57}},"loc":{"start":{"line":103,"column":74},"end":{"line":105,"column":3}},"line":103},"26":{"name":"beforeGetAllFilesDraft","decl":{"start":{"line":108,"column":35},"end":{"line":108,"column":57}},"loc":{"start":{"line":108,"column":72},"end":{"line":110,"column":3}},"line":108},"27":{"name":"beforeGetAllFilesPublished","decl":{"start":{"line":111,"column":39},"end":{"line":111,"column":65}},"loc":{"start":{"line":111,"column":82},"end":{"line":113,"column":3}},"line":111},"28":{"name":"afterGetAllFiles","decl":{"start":{"line":114,"column":29},"end":{"line":114,"column":45}},"loc":{"start":{"line":114,"column":59},"end":{"line":116,"column":3}},"line":114},"29":{"name":"beforeImport","decl":{"start":{"line":119,"column":25},"end":{"line":119,"column":37}},"loc":{"start":{"line":119,"column":62},"end":{"line":121,"column":3}},"line":119},"30":{"name":"afterImport","decl":{"start":{"line":122,"column":24},"end":{"line":122,"column":35}},"loc":{"start":{"line":122,"column":65},"end":{"line":124,"column":3}},"line":122},"31":{"name":"afterHandlebarsHelpers","decl":{"start":{"line":125,"column":35},"end":{"line":125,"column":57}},"loc":{"start":{"line":125,"column":75},"end":{"line":127,"column":3}},"line":125},"32":{"name":"beforeEditorInput","decl":{"start":{"line":128,"column":30},"end":{"line":128,"column":47}},"loc":{"start":{"line":128,"column":61},"end":{"line":130,"column":3}},"line":128},"33":{"name":"afterEditorInput","decl":{"start":{"line":131,"column":29},"end":{"line":131,"column":45}},"loc":{"start":{"line":131,"column":71},"end":{"line":133,"column":3}},"line":131},"34":{"name":"beforeAbeAttributes","decl":{"start":{"line":134,"column":32},"end":{"line":134,"column":51}},"loc":{"start":{"line":134,"column":68},"end":{"line":136,"column":3}},"line":134},"35":{"name":"afterAbeAttributes","decl":{"start":{"line":137,"column":31},"end":{"line":137,"column":49}},"loc":{"start":{"line":137,"column":71},"end":{"line":139,"column":3}},"line":137},"36":{"name":"beforeEditorFormBlocks","decl":{"start":{"line":140,"column":35},"end":{"line":140,"column":57}},"loc":{"start":{"line":140,"column":75},"end":{"line":142,"column":3}},"line":140},"37":{"name":"afterEditorFormBlocks","decl":{"start":{"line":143,"column":34},"end":{"line":143,"column":55}},"loc":{"start":{"line":143,"column":81},"end":{"line":145,"column":3}},"line":143},"38":{"name":"beforeListPage","decl":{"start":{"line":146,"column":27},"end":{"line":146,"column":41}},"loc":{"start":{"line":146,"column":61},"end":{"line":148,"column":3}},"line":146},"39":{"name":"afterListPageDraft","decl":{"start":{"line":149,"column":31},"end":{"line":149,"column":49}},"loc":{"start":{"line":149,"column":79},"end":{"line":151,"column":3}},"line":149},"40":{"name":"afterListPage","decl":{"start":{"line":152,"column":26},"end":{"line":152,"column":39}},"loc":{"start":{"line":152,"column":64},"end":{"line":154,"column":3}},"line":152},"41":{"name":"afterVariables","decl":{"start":{"line":155,"column":27},"end":{"line":155,"column":41}},"loc":{"start":{"line":155,"column":64},"end":{"line":157,"column":3}},"line":155},"42":{"name":"beforeGetJson","decl":{"start":{"line":160,"column":26},"end":{"line":160,"column":39}},"loc":{"start":{"line":160,"column":51},"end":{"line":162,"column":3}},"line":160},"43":{"name":"afterGetJson","decl":{"start":{"line":163,"column":25},"end":{"line":163,"column":37}},"loc":{"start":{"line":163,"column":49},"end":{"line":165,"column":3}},"line":163},"44":{"name":"beforeUpdateJson","decl":{"start":{"line":166,"column":29},"end":{"line":166,"column":45}},"loc":{"start":{"line":166,"column":67},"end":{"line":168,"column":3}},"line":166},"45":{"name":"beforeGetTemplate","decl":{"start":{"line":171,"column":30},"end":{"line":171,"column":47}},"loc":{"start":{"line":171,"column":59},"end":{"line":173,"column":3}},"line":171},"46":{"name":"afterGetTemplate","decl":{"start":{"line":174,"column":29},"end":{"line":174,"column":45}},"loc":{"start":{"line":174,"column":57},"end":{"line":176,"column":3}},"line":174},"47":{"name":"afterAddSourcePage","decl":{"start":{"line":179,"column":31},"end":{"line":179,"column":49}},"loc":{"start":{"line":179,"column":67},"end":{"line":181,"column":3}},"line":179},"48":{"name":"beforePageJson","decl":{"start":{"line":182,"column":27},"end":{"line":182,"column":41}},"loc":{"start":{"line":182,"column":53},"end":{"line":184,"column":3}},"line":182}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":31,"32":0,"33":0,"34":0,"35":5,"36":6,"37":954,"38":954,"39":0,"40":0,"41":1,"42":0,"43":1,"44":0,"45":127,"46":127,"47":0,"48":0,"49":0,"50":0,"51":1,"52":1,"53":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":31,"29":0,"30":0,"31":0,"32":5,"33":6,"34":954,"35":954,"36":0,"37":0,"38":1,"39":0,"40":1,"41":0,"42":127,"43":127,"44":0,"45":0,"46":0,"47":0,"48":1},"b":{},"inputSourceMap":{"version":3,"sources":["hooks.js"],"names":["hooks","beforeExpress","port","abe","afterExpress","app","express","beforeRoute","req","res","next","beforeAddRoute","router","afterAddRoute","beforePreview","html","beforeDeleteFile","filePath","afterDeleteFile","path","json","beforeReject","tplPath","afterReject","result","beforePublish","afterPublish","beforeUnpublish","afterUnpublish","postPath","beforeCreate","postUrl","template","afterCreate","text","name","forceJson","beforeDuplicate","oldFilePath","deleteFiles","afterDuplicate","beforeUpdate","beforeFirstSave","body","beforeSave","obj","afterSave","beforeSaveImage","folderWebPath","afterSaveImage","resp","afterPageSaveCompile","tmp","afterPageEditorCompile","beforeGetAllFilesDraft","drafted","beforeGetAllFilesPublished","published","afterGetAllFiles","merged","beforeImport","file","config","ctx","afterImport","afterHandlebarsHelpers","Handlebars","beforeEditorInput","params","afterEditorInput","htmlString","beforeAbeAttributes","str","afterAbeAttributes","beforeEditorFormBlocks","afterEditorFormBlocks","blocks","beforeListPage","index","afterListPageDraft","workflow","afterListPage","afterVariables","EditorVariables","beforeGetJson","afterGetJson","beforeUpdateJson","jsonFilesArray","beforeGetTemplate","afterGetTemplate","afterAddSourcePage","beforePageJson"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/hooks/","sourcesContent":["var hooks = {\n  /***************** express *****************/\n  beforeExpress: (port, abe) => {\n    return port\n  },\n  afterExpress: (app, express, abe) => {\n    return app\n  },\n  beforeRoute: (req, res, next, abe) => {\n    return req\n  },\n  beforeAddRoute: (router, abe) => {\n    return router\n  },\n  afterAddRoute: (router, abe) => {\n    return router\n  },\n\n  /***************** preview *****************/\n  beforePreview: (html, req, res, next, abe) => {\n    return html\n  },\n\n  /***************** delete *****************/\n  beforeDeleteFile: (filePath, abe) => {\n    return filePath\n  },\n  afterDeleteFile: (path, json, abe) => {\n    return path\n  },\n\n  /***************** reject *****************/\n  beforeReject: (json, filePath, tplPath, abe) => {\n    return json\n  },\n  afterReject: (result, abe) => {\n    return result\n  },\n\n  /***************** publish *****************/\n  beforePublish: (json, filePath, abe) => {\n    return json\n  },\n  afterPublish: (result, filePath, abe) => {\n    return result\n  },\n\n  /***************** unpublish *****************/\n  beforeUnpublish: (filePath, abe) => {\n    return filePath\n  },\n  afterUnpublish: (path, postPath, json, abe) => {\n    return path\n  },\n\n  /***************** create *****************/\n  beforeCreate: (json, postUrl, template, abe) => {\n    return json\n  },\n  afterCreate: (json, text, path, name, req, forceJson, abe) => {\n    return json\n  },\n\n  /***************** duplicate *****************/\n  beforeDuplicate: (\n    oldFilePath,\n    template,\n    path,\n    name,\n    req,\n    deleteFiles,\n    abe\n  ) => {\n    // if deleteFiles this is an update not a duplicate\n    return oldFilePath\n  },\n  afterDuplicate: (\n    json,\n    oldFilePath,\n    template,\n    path,\n    name,\n    req,\n    deleteFiles,\n    abe\n  ) => {\n    return json\n  },\n\n  /***************** update *****************/\n  beforeUpdate: (\n    json,\n    oldFilePath,\n    template,\n    path,\n    name,\n    req,\n    deleteFiles,\n    abe\n  ) => {\n    return json\n  },\n\n  /***************** save *****************/\n  beforeFirstSave: (json, body, abe) => {\n    return json\n  },\n  beforeSave: (obj, abe) => {\n    return obj\n  },\n  afterSave: (obj, abe) => {\n    return obj\n  },\n  beforeSaveImage: (folderWebPath, abe) => {\n    return folderWebPath\n  },\n  afterSaveImage: (resp, req, abe) => {\n    return resp\n  },\n  afterPageSaveCompile: (tmp, json, abe) => {\n    return tmp\n  },\n  afterPageEditorCompile: (tmp, json, abe) => {\n    return tmp\n  },\n\n  /***************** Manager *****************/\n  beforeGetAllFilesDraft: (drafted, abe) => {\n    return drafted\n  },\n  beforeGetAllFilesPublished: (published, abe) => {\n    return published\n  },\n  afterGetAllFiles: (merged, abe) => {\n    return merged\n  },\n\n  /***************** Editor *****************/\n  beforeImport: (file, config, ctx, abe) => {\n    return file\n  },\n  afterImport: (res, file, config, ctx, abe) => {\n    return res\n  },\n  afterHandlebarsHelpers: (Handlebars, abe) => {\n    return Handlebars\n  },\n  beforeEditorInput: (params, abe) => {\n    return params\n  },\n  afterEditorInput: (htmlString, params, abe) => {\n    return htmlString\n  },\n\n  beforeAbeAttributes: (str, json, abe) => {\n    return str\n  },\n  afterAbeAttributes: (obj, str, json, abe) => {\n    return obj\n  },\n  beforeEditorFormBlocks: (json, text, abe) => {\n    return json\n  },\n  afterEditorFormBlocks: (blocks, json, text, abe) => {\n    return blocks\n  },\n  beforeListPage: (file, index, text) => {\n    return file\n  },\n  afterListPageDraft: (workflow, file, index, text) => {\n    return workflow\n  },\n  afterListPage: (res, file, index, text) => {\n    return res\n  },\n  afterVariables: (EditorVariables, abe) => {\n    return EditorVariables\n  },\n\n  /***************** json *****************/\n  beforeGetJson: (path, abe) => {\n    return path\n  },\n  afterGetJson: (json, abe) => {\n    return json\n  },\n  beforeUpdateJson: (jsonFilesArray, abe) => {\n    return jsonFilesArray\n  },\n\n  /***************** text *****************/\n  beforeGetTemplate: (file, abe) => {\n    return file\n  },\n  afterGetTemplate: (text, abe) => {\n    return text\n  },\n\n  /***************** Page *****************/\n  afterAddSourcePage: (json, text, abe) => {\n    return json\n  },\n\n  beforePageJson: (json, abe) => {\n    return json\n  }\n}\n\nexport default hooks\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ccab79e6713a91b691f92cd6c16af850f63a65be","contentHash":"ded53f0ddeabecaca806ae5b7068bae7e5e5aefb227ba08e0f10517afc0ed3fe"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/plugins.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/plugins.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":23},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":20},"end":{"line":12,"column":89}},"5":{"start":{"line":14,"column":21},"end":{"line":14,"column":45}},"6":{"start":{"line":16,"column":16},"end":{"line":16,"column":35}},"7":{"start":{"line":18,"column":12},"end":{"line":18,"column":51}},"8":{"start":{"line":20,"column":15},"end":{"line":20,"column":58}},"9":{"start":{"line":22,"column":16},"end":{"line":22,"column":60}},"10":{"start":{"line":24,"column":13},"end":{"line":24,"column":53}},"11":{"start":{"line":26,"column":14},"end":{"line":26,"column":55}},"12":{"start":{"line":28,"column":8},"end":{"line":28,"column":22}},"13":{"start":{"line":30,"column":10},"end":{"line":30,"column":39}},"14":{"start":{"line":32,"column":16},"end":{"line":32,"column":24}},"15":{"start":{"line":33,"column":24},"end":{"line":33,"column":32}},"16":{"start":{"line":35,"column":27},"end":{"line":531,"column":3}},"17":{"start":{"line":37,"column":16},"end":{"line":37,"column":20}},"18":{"start":{"line":39,"column":4},"end":{"line":39,"column":52}},"19":{"start":{"line":40,"column":4},"end":{"line":40,"column":82}},"20":{"start":{"line":40,"column":39},"end":{"line":40,"column":82}},"21":{"start":{"line":41,"column":4},"end":{"line":41,"column":98}},"22":{"start":{"line":42,"column":4},"end":{"line":42,"column":93}},"23":{"start":{"line":43,"column":4},"end":{"line":43,"column":23}},"24":{"start":{"line":45,"column":4},"end":{"line":51,"column":5}},"25":{"start":{"line":46,"column":6},"end":{"line":50,"column":9}},"26":{"start":{"line":47,"column":21},"end":{"line":47,"column":73}},"27":{"start":{"line":49,"column":8},"end":{"line":49,"column":36}},"28":{"start":{"line":54,"column":4},"end":{"line":67,"column":18}},"29":{"start":{"line":55,"column":29},"end":{"line":55,"column":75}},"30":{"start":{"line":57,"column":6},"end":{"line":66,"column":7}},"31":{"start":{"line":58,"column":8},"end":{"line":58,"column":80}},"32":{"start":{"line":59,"column":8},"end":{"line":65,"column":11}},"33":{"start":{"line":60,"column":21},"end":{"line":60,"column":67}},"34":{"start":{"line":62,"column":23},"end":{"line":62,"column":68}},"35":{"start":{"line":64,"column":10},"end":{"line":64,"column":38}},"36":{"start":{"line":70,"column":2},"end":{"line":529,"column":6}},"37":{"start":{"line":74,"column":21},"end":{"line":74,"column":40}},"38":{"start":{"line":76,"column":6},"end":{"line":76,"column":40}},"39":{"start":{"line":78,"column":6},"end":{"line":78,"column":53}},"40":{"start":{"line":80,"column":21},"end":{"line":80,"column":89}},"41":{"start":{"line":82,"column":23},"end":{"line":82,"column":69}},"42":{"start":{"line":84,"column":25},"end":{"line":84,"column":73}},"43":{"start":{"line":86,"column":26},"end":{"line":86,"column":75}},"44":{"start":{"line":88,"column":24},"end":{"line":88,"column":71}},"45":{"start":{"line":90,"column":23},"end":{"line":90,"column":69}},"46":{"start":{"line":92,"column":19},"end":{"line":99,"column":7}},"47":{"start":{"line":101,"column":6},"end":{"line":118,"column":7}},"48":{"start":{"line":102,"column":23},"end":{"line":102,"column":62}},"49":{"start":{"line":104,"column":8},"end":{"line":115,"column":9}},"50":{"start":{"line":105,"column":10},"end":{"line":112,"column":11}},"51":{"start":{"line":106,"column":12},"end":{"line":106,"column":60}},"52":{"start":{"line":108,"column":20},"end":{"line":108,"column":37}},"53":{"start":{"line":110,"column":12},"end":{"line":110,"column":33}},"54":{"start":{"line":111,"column":12},"end":{"line":111,"column":155}},"55":{"start":{"line":114,"column":10},"end":{"line":114,"column":38}},"56":{"start":{"line":117,"column":8},"end":{"line":117,"column":28}},"57":{"start":{"line":120,"column":6},"end":{"line":128,"column":7}},"58":{"start":{"line":121,"column":30},"end":{"line":121,"column":71}},"59":{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},"60":{"start":{"line":124,"column":10},"end":{"line":124,"column":37}},"61":{"start":{"line":127,"column":8},"end":{"line":127,"column":29}},"62":{"start":{"line":130,"column":6},"end":{"line":138,"column":7}},"63":{"start":{"line":131,"column":32},"end":{"line":131,"column":75}},"64":{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},"65":{"start":{"line":134,"column":10},"end":{"line":134,"column":41}},"66":{"start":{"line":137,"column":8},"end":{"line":137,"column":31}},"67":{"start":{"line":140,"column":6},"end":{"line":148,"column":7}},"68":{"start":{"line":141,"column":33},"end":{"line":141,"column":77}},"69":{"start":{"line":143,"column":8},"end":{"line":145,"column":9}},"70":{"start":{"line":144,"column":10},"end":{"line":144,"column":43}},"71":{"start":{"line":147,"column":8},"end":{"line":147,"column":32}},"72":{"start":{"line":150,"column":6},"end":{"line":164,"column":7}},"73":{"start":{"line":151,"column":31},"end":{"line":151,"column":73}},"74":{"start":{"line":153,"column":8},"end":{"line":161,"column":9}},"75":{"start":{"line":154,"column":10},"end":{"line":154,"column":30}},"76":{"start":{"line":156,"column":29},"end":{"line":156,"column":78}},"77":{"start":{"line":158,"column":10},"end":{"line":160,"column":13}},"78":{"start":{"line":159,"column":12},"end":{"line":159,"column":88}},"79":{"start":{"line":163,"column":8},"end":{"line":163,"column":30}},"80":{"start":{"line":166,"column":6},"end":{"line":222,"column":7}},"81":{"start":{"line":167,"column":29},"end":{"line":167,"column":70}},"82":{"start":{"line":169,"column":8},"end":{"line":219,"column":9}},"83":{"start":{"line":170,"column":10},"end":{"line":170,"column":29}},"84":{"start":{"line":172,"column":21},"end":{"line":172,"column":61}},"85":{"start":{"line":174,"column":10},"end":{"line":194,"column":11}},"86":{"start":{"line":175,"column":32},"end":{"line":175,"column":67}},"87":{"start":{"line":177,"column":12},"end":{"line":191,"column":13}},"88":{"start":{"line":178,"column":30},"end":{"line":178,"column":32}},"89":{"start":{"line":180,"column":31},"end":{"line":180,"column":73}},"90":{"start":{"line":182,"column":14},"end":{"line":189,"column":17}},"91":{"start":{"line":183,"column":30},"end":{"line":183,"column":119}},"92":{"start":{"line":184,"column":34},"end":{"line":187,"column":17}},"93":{"start":{"line":188,"column":16},"end":{"line":188,"column":44}},"94":{"start":{"line":190,"column":14},"end":{"line":190,"column":44}},"95":{"start":{"line":193,"column":12},"end":{"line":193,"column":37}},"96":{"start":{"line":196,"column":10},"end":{"line":218,"column":11}},"97":{"start":{"line":197,"column":24},"end":{"line":197,"column":65}},"98":{"start":{"line":199,"column":33},"end":{"line":199,"column":69}},"99":{"start":{"line":201,"column":12},"end":{"line":215,"column":13}},"100":{"start":{"line":202,"column":31},"end":{"line":202,"column":33}},"101":{"start":{"line":204,"column":32},"end":{"line":204,"column":75}},"102":{"start":{"line":206,"column":14},"end":{"line":213,"column":17}},"103":{"start":{"line":207,"column":30},"end":{"line":207,"column":119}},"104":{"start":{"line":208,"column":34},"end":{"line":211,"column":17}},"105":{"start":{"line":212,"column":16},"end":{"line":212,"column":45}},"106":{"start":{"line":214,"column":14},"end":{"line":214,"column":46}},"107":{"start":{"line":217,"column":12},"end":{"line":217,"column":38}},"108":{"start":{"line":221,"column":8},"end":{"line":221,"column":29}},"109":{"start":{"line":224,"column":6},"end":{"line":224,"column":20}},"110":{"start":{"line":229,"column":17},"end":{"line":229,"column":21}},"111":{"start":{"line":231,"column":6},"end":{"line":237,"column":7}},"112":{"start":{"line":232,"column":8},"end":{"line":236,"column":11}},"113":{"start":{"line":233,"column":10},"end":{"line":235,"column":11}},"114":{"start":{"line":234,"column":12},"end":{"line":234,"column":38}},"115":{"start":{"line":239,"column":6},"end":{"line":239,"column":18}},"116":{"start":{"line":244,"column":19},"end":{"line":244,"column":23}},"117":{"start":{"line":246,"column":6},"end":{"line":259,"column":7}},"118":{"start":{"line":247,"column":19},"end":{"line":247,"column":43}},"119":{"start":{"line":248,"column":17},"end":{"line":248,"column":29}},"120":{"start":{"line":250,"column":8},"end":{"line":256,"column":9}},"121":{"start":{"line":251,"column":10},"end":{"line":255,"column":13}},"122":{"start":{"line":252,"column":12},"end":{"line":254,"column":13}},"123":{"start":{"line":253,"column":14},"end":{"line":253,"column":61}},"124":{"start":{"line":258,"column":8},"end":{"line":258,"column":20}},"125":{"start":{"line":261,"column":6},"end":{"line":261,"column":21}},"126":{"start":{"line":266,"column":21},"end":{"line":266,"column":23}},"127":{"start":{"line":267,"column":6},"end":{"line":271,"column":9}},"128":{"start":{"line":268,"column":8},"end":{"line":270,"column":9}},"129":{"start":{"line":269,"column":10},"end":{"line":269,"column":41}},"130":{"start":{"line":272,"column":6},"end":{"line":272,"column":22}},"131":{"start":{"line":277,"column":20},"end":{"line":277,"column":22}},"132":{"start":{"line":278,"column":6},"end":{"line":282,"column":9}},"133":{"start":{"line":279,"column":8},"end":{"line":281,"column":9}},"134":{"start":{"line":280,"column":10},"end":{"line":280,"column":38}},"135":{"start":{"line":283,"column":6},"end":{"line":283,"column":21}},"136":{"start":{"line":288,"column":19},"end":{"line":288,"column":21}},"137":{"start":{"line":289,"column":6},"end":{"line":293,"column":9}},"138":{"start":{"line":290,"column":8},"end":{"line":292,"column":9}},"139":{"start":{"line":291,"column":10},"end":{"line":291,"column":48}},"140":{"start":{"line":294,"column":6},"end":{"line":294,"column":20}},"141":{"start":{"line":299,"column":23},"end":{"line":299,"column":43}},"142":{"start":{"line":300,"column":6},"end":{"line":300,"column":44}},"143":{"start":{"line":302,"column":6},"end":{"line":314,"column":7}},"144":{"start":{"line":303,"column":19},"end":{"line":303,"column":44}},"145":{"start":{"line":305,"column":8},"end":{"line":313,"column":9}},"146":{"start":{"line":306,"column":10},"end":{"line":312,"column":13}},"147":{"start":{"line":307,"column":12},"end":{"line":311,"column":13}},"148":{"start":{"line":308,"column":14},"end":{"line":308,"column":44}},"149":{"start":{"line":310,"column":14},"end":{"line":310,"column":34}},"150":{"start":{"line":319,"column":19},"end":{"line":319,"column":23}},"151":{"start":{"line":321,"column":6},"end":{"line":321,"column":31}},"152":{"start":{"line":322,"column":6},"end":{"line":322,"column":31}},"153":{"start":{"line":324,"column":6},"end":{"line":330,"column":7}},"154":{"start":{"line":325,"column":8},"end":{"line":329,"column":11}},"155":{"start":{"line":326,"column":23},"end":{"line":326,"column":77}},"156":{"start":{"line":328,"column":10},"end":{"line":328,"column":39}},"157":{"start":{"line":333,"column":6},"end":{"line":346,"column":20}},"158":{"start":{"line":334,"column":31},"end":{"line":334,"column":77}},"159":{"start":{"line":336,"column":8},"end":{"line":345,"column":9}},"160":{"start":{"line":337,"column":10},"end":{"line":337,"column":82}},"161":{"start":{"line":338,"column":10},"end":{"line":344,"column":13}},"162":{"start":{"line":339,"column":23},"end":{"line":339,"column":70}},"163":{"start":{"line":341,"column":25},"end":{"line":341,"column":72}},"164":{"start":{"line":343,"column":12},"end":{"line":343,"column":41}},"165":{"start":{"line":351,"column":17},"end":{"line":351,"column":19}},"166":{"start":{"line":352,"column":30},"end":{"line":352,"column":34}},"167":{"start":{"line":353,"column":23},"end":{"line":353,"column":43}},"168":{"start":{"line":354,"column":6},"end":{"line":354,"column":44}},"169":{"start":{"line":355,"column":26},"end":{"line":355,"column":47}},"170":{"start":{"line":356,"column":21},"end":{"line":356,"column":60}},"171":{"start":{"line":358,"column":6},"end":{"line":361,"column":7}},"172":{"start":{"line":359,"column":8},"end":{"line":359,"column":41}},"173":{"start":{"line":360,"column":8},"end":{"line":360,"column":34}},"174":{"start":{"line":363,"column":6},"end":{"line":377,"column":7}},"175":{"start":{"line":364,"column":8},"end":{"line":364,"column":32}},"176":{"start":{"line":366,"column":20},"end":{"line":366,"column":25}},"177":{"start":{"line":367,"column":8},"end":{"line":372,"column":11}},"178":{"start":{"line":368,"column":10},"end":{"line":371,"column":11}},"179":{"start":{"line":369,"column":12},"end":{"line":369,"column":41}},"180":{"start":{"line":370,"column":12},"end":{"line":370,"column":25}},"181":{"start":{"line":374,"column":8},"end":{"line":376,"column":9}},"182":{"start":{"line":375,"column":10},"end":{"line":375,"column":36}},"183":{"start":{"line":379,"column":6},"end":{"line":381,"column":7}},"184":{"start":{"line":380,"column":8},"end":{"line":380,"column":228}},"185":{"start":{"line":383,"column":6},"end":{"line":392,"column":20}},"186":{"start":{"line":384,"column":19},"end":{"line":384,"column":110}},"187":{"start":{"line":386,"column":8},"end":{"line":391,"column":9}},"188":{"start":{"line":387,"column":36},"end":{"line":387,"column":130}},"189":{"start":{"line":389,"column":10},"end":{"line":389,"column":67}},"190":{"start":{"line":390,"column":10},"end":{"line":390,"column":37}},"191":{"start":{"line":394,"column":6},"end":{"line":394,"column":26}},"192":{"start":{"line":399,"column":6},"end":{"line":406,"column":7}},"193":{"start":{"line":400,"column":8},"end":{"line":402,"column":11}},"194":{"start":{"line":401,"column":10},"end":{"line":401,"column":19}},"195":{"start":{"line":404,"column":8},"end":{"line":404,"column":81}},"196":{"start":{"line":405,"column":8},"end":{"line":405,"column":17}},"197":{"start":{"line":411,"column":19},"end":{"line":411,"column":23}},"198":{"start":{"line":413,"column":19},"end":{"line":413,"column":91}},"199":{"start":{"line":415,"column":6},"end":{"line":433,"column":7}},"200":{"start":{"line":416,"column":8},"end":{"line":418,"column":11}},"201":{"start":{"line":417,"column":10},"end":{"line":417,"column":19}},"202":{"start":{"line":420,"column":8},"end":{"line":432,"column":9}},"203":{"start":{"line":421,"column":19},"end":{"line":421,"column":21}},"204":{"start":{"line":422,"column":10},"end":{"line":424,"column":13}},"205":{"start":{"line":423,"column":12},"end":{"line":423,"column":45}},"206":{"start":{"line":426,"column":10},"end":{"line":428,"column":13}},"207":{"start":{"line":427,"column":12},"end":{"line":427,"column":21}},"208":{"start":{"line":430,"column":10},"end":{"line":430,"column":68}},"209":{"start":{"line":431,"column":10},"end":{"line":431,"column":19}},"210":{"start":{"line":438,"column":19},"end":{"line":438,"column":23}},"211":{"start":{"line":440,"column":14},"end":{"line":471,"column":8}},"212":{"start":{"line":441,"column":8},"end":{"line":470,"column":9}},"213":{"start":{"line":442,"column":10},"end":{"line":442,"column":113}},"214":{"start":{"line":444,"column":29},"end":{"line":446,"column":12}},"215":{"start":{"line":447,"column":10},"end":{"line":449,"column":13}},"216":{"start":{"line":448,"column":12},"end":{"line":448,"column":35}},"217":{"start":{"line":450,"column":10},"end":{"line":452,"column":13}},"218":{"start":{"line":451,"column":12},"end":{"line":451,"column":35}},"219":{"start":{"line":453,"column":10},"end":{"line":461,"column":13}},"220":{"start":{"line":454,"column":12},"end":{"line":454,"column":91}},"221":{"start":{"line":456,"column":12},"end":{"line":458,"column":13}},"222":{"start":{"line":457,"column":14},"end":{"line":457,"column":42}},"223":{"start":{"line":460,"column":12},"end":{"line":460,"column":22}},"224":{"start":{"line":462,"column":10},"end":{"line":466,"column":13}},"225":{"start":{"line":463,"column":12},"end":{"line":463,"column":96}},"226":{"start":{"line":464,"column":12},"end":{"line":464,"column":29}},"227":{"start":{"line":465,"column":12},"end":{"line":465,"column":25}},"228":{"start":{"line":468,"column":10},"end":{"line":468,"column":67}},"229":{"start":{"line":469,"column":10},"end":{"line":469,"column":23}},"230":{"start":{"line":472,"column":6},"end":{"line":472,"column":15}},"231":{"start":{"line":477,"column":19},"end":{"line":477,"column":23}},"232":{"start":{"line":479,"column":14},"end":{"line":517,"column":8}},"233":{"start":{"line":480,"column":8},"end":{"line":516,"column":9}},"234":{"start":{"line":481,"column":10},"end":{"line":481,"column":111}},"235":{"start":{"line":482,"column":27},"end":{"line":484,"column":13}},"236":{"start":{"line":485,"column":10},"end":{"line":507,"column":13}},"237":{"start":{"line":486,"column":29},"end":{"line":486,"column":106}},"238":{"start":{"line":487,"column":12},"end":{"line":489,"column":15}},"239":{"start":{"line":488,"column":14},"end":{"line":488,"column":37}},"240":{"start":{"line":490,"column":12},"end":{"line":492,"column":15}},"241":{"start":{"line":491,"column":14},"end":{"line":491,"column":37}},"242":{"start":{"line":493,"column":12},"end":{"line":501,"column":15}},"243":{"start":{"line":494,"column":14},"end":{"line":494,"column":93}},"244":{"start":{"line":496,"column":14},"end":{"line":498,"column":15}},"245":{"start":{"line":497,"column":16},"end":{"line":497,"column":44}},"246":{"start":{"line":500,"column":14},"end":{"line":500,"column":24}},"247":{"start":{"line":502,"column":12},"end":{"line":506,"column":15}},"248":{"start":{"line":503,"column":14},"end":{"line":503,"column":96}},"249":{"start":{"line":504,"column":14},"end":{"line":504,"column":31}},"250":{"start":{"line":505,"column":14},"end":{"line":505,"column":27}},"251":{"start":{"line":508,"column":10},"end":{"line":512,"column":13}},"252":{"start":{"line":509,"column":12},"end":{"line":509,"column":94}},"253":{"start":{"line":510,"column":12},"end":{"line":510,"column":29}},"254":{"start":{"line":511,"column":12},"end":{"line":511,"column":25}},"255":{"start":{"line":514,"column":10},"end":{"line":514,"column":65}},"256":{"start":{"line":515,"column":10},"end":{"line":515,"column":23}},"257":{"start":{"line":518,"column":6},"end":{"line":518,"column":15}},"258":{"start":{"line":523,"column":6},"end":{"line":525,"column":7}},"259":{"start":{"line":524,"column":8},"end":{"line":524,"column":57}},"260":{"start":{"line":527,"column":6},"end":{"line":527,"column":29}},"261":{"start":{"line":530,"column":2},"end":{"line":530,"column":17}},"262":{"start":{"line":533,"column":15},"end":{"line":533,"column":22}},"263":{"start":{"line":534,"column":0},"end":{"line":534,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":35,"column":27},"end":{"line":35,"column":28}},"loc":{"start":{"line":35,"column":39},"end":{"line":531,"column":1}},"line":35},"1":{"name":"Plugins","decl":{"start":{"line":36,"column":11},"end":{"line":36,"column":18}},"loc":{"start":{"line":36,"column":29},"end":{"line":68,"column":3}},"line":36},"2":{"name":"(anonymous_2)","decl":{"start":{"line":46,"column":53},"end":{"line":46,"column":54}},"loc":{"start":{"line":46,"column":76},"end":{"line":50,"column":7}},"line":46},"3":{"name":"(anonymous_3)","decl":{"start":{"line":59,"column":52},"end":{"line":59,"column":53}},"loc":{"start":{"line":59,"column":75},"end":{"line":65,"column":9}},"line":59},"4":{"name":"getPluginConfig","decl":{"start":{"line":72,"column":20},"end":{"line":72,"column":35}},"loc":{"start":{"line":72,"column":48},"end":{"line":225,"column":5}},"line":72},"5":{"name":"(anonymous_5)","decl":{"start":{"line":158,"column":53},"end":{"line":158,"column":54}},"loc":{"start":{"line":158,"column":76},"end":{"line":160,"column":11}},"line":158},"6":{"name":"(anonymous_6)","decl":{"start":{"line":182,"column":55},"end":{"line":182,"column":56}},"loc":{"start":{"line":182,"column":72},"end":{"line":189,"column":15}},"line":182},"7":{"name":"(anonymous_7)","decl":{"start":{"line":206,"column":56},"end":{"line":206,"column":57}},"loc":{"start":{"line":206,"column":73},"end":{"line":213,"column":15}},"line":206},"8":{"name":"getProcess","decl":{"start":{"line":228,"column":20},"end":{"line":228,"column":30}},"loc":{"start":{"line":228,"column":35},"end":{"line":240,"column":5}},"line":228},"9":{"name":"(anonymous_9)","decl":{"start":{"line":232,"column":52},"end":{"line":232,"column":53}},"loc":{"start":{"line":232,"column":70},"end":{"line":236,"column":9}},"line":232},"10":{"name":"hooks","decl":{"start":{"line":243,"column":20},"end":{"line":243,"column":25}},"loc":{"start":{"line":243,"column":28},"end":{"line":262,"column":5}},"line":243},"11":{"name":"(anonymous_11)","decl":{"start":{"line":251,"column":54},"end":{"line":251,"column":55}},"loc":{"start":{"line":251,"column":72},"end":{"line":255,"column":11}},"line":251},"12":{"name":"getPartials","decl":{"start":{"line":265,"column":20},"end":{"line":265,"column":31}},"loc":{"start":{"line":265,"column":34},"end":{"line":273,"column":5}},"line":265},"13":{"name":"(anonymous_13)","decl":{"start":{"line":267,"column":50},"end":{"line":267,"column":51}},"loc":{"start":{"line":267,"column":68},"end":{"line":271,"column":7}},"line":267},"14":{"name":"getCustoms","decl":{"start":{"line":276,"column":20},"end":{"line":276,"column":30}},"loc":{"start":{"line":276,"column":33},"end":{"line":284,"column":5}},"line":276},"15":{"name":"(anonymous_15)","decl":{"start":{"line":278,"column":50},"end":{"line":278,"column":51}},"loc":{"start":{"line":278,"column":68},"end":{"line":282,"column":7}},"line":278},"16":{"name":"getRoutes","decl":{"start":{"line":287,"column":20},"end":{"line":287,"column":29}},"loc":{"start":{"line":287,"column":32},"end":{"line":295,"column":5}},"line":287},"17":{"name":"(anonymous_17)","decl":{"start":{"line":289,"column":50},"end":{"line":289,"column":51}},"loc":{"start":{"line":289,"column":68},"end":{"line":293,"column":7}},"line":289},"18":{"name":"removePlugin","decl":{"start":{"line":298,"column":20},"end":{"line":298,"column":32}},"loc":{"start":{"line":298,"column":41},"end":{"line":315,"column":5}},"line":298},"19":{"name":"(anonymous_19)","decl":{"start":{"line":306,"column":53},"end":{"line":306,"column":54}},"loc":{"start":{"line":306,"column":79},"end":{"line":312,"column":11}},"line":306},"20":{"name":"updateScripts","decl":{"start":{"line":318,"column":20},"end":{"line":318,"column":33}},"loc":{"start":{"line":318,"column":36},"end":{"line":347,"column":5}},"line":318},"21":{"name":"(anonymous_21)","decl":{"start":{"line":325,"column":55},"end":{"line":325,"column":56}},"loc":{"start":{"line":325,"column":78},"end":{"line":329,"column":9}},"line":325},"22":{"name":"(anonymous_22)","decl":{"start":{"line":338,"column":54},"end":{"line":338,"column":55}},"loc":{"start":{"line":338,"column":77},"end":{"line":344,"column":11}},"line":338},"23":{"name":"updatePlugin","decl":{"start":{"line":350,"column":20},"end":{"line":350,"column":32}},"loc":{"start":{"line":350,"column":41},"end":{"line":395,"column":5}},"line":350},"24":{"name":"(anonymous_24)","decl":{"start":{"line":367,"column":51},"end":{"line":367,"column":52}},"loc":{"start":{"line":367,"column":77},"end":{"line":372,"column":9}},"line":367},"25":{"name":"uninstall","decl":{"start":{"line":398,"column":20},"end":{"line":398,"column":29}},"loc":{"start":{"line":398,"column":43},"end":{"line":407,"column":5}},"line":398},"26":{"name":"(anonymous_26)","decl":{"start":{"line":400,"column":38},"end":{"line":400,"column":39}},"loc":{"start":{"line":400,"column":50},"end":{"line":402,"column":9}},"line":400},"27":{"name":"install","decl":{"start":{"line":410,"column":20},"end":{"line":410,"column":27}},"loc":{"start":{"line":410,"column":33},"end":{"line":434,"column":5}},"line":410},"28":{"name":"(anonymous_28)","decl":{"start":{"line":416,"column":35},"end":{"line":416,"column":36}},"loc":{"start":{"line":416,"column":47},"end":{"line":418,"column":9}},"line":416},"29":{"name":"(anonymous_29)","decl":{"start":{"line":422,"column":57},"end":{"line":422,"column":58}},"loc":{"start":{"line":422,"column":75},"end":{"line":424,"column":11}},"line":422},"30":{"name":"(anonymous_30)","decl":{"start":{"line":426,"column":41},"end":{"line":426,"column":42}},"loc":{"start":{"line":426,"column":53},"end":{"line":428,"column":11}},"line":426},"31":{"name":"remove","decl":{"start":{"line":437,"column":20},"end":{"line":437,"column":26}},"loc":{"start":{"line":437,"column":40},"end":{"line":473,"column":5}},"line":437},"32":{"name":"(anonymous_32)","decl":{"start":{"line":440,"column":36},"end":{"line":440,"column":37}},"loc":{"start":{"line":440,"column":55},"end":{"line":471,"column":7}},"line":440},"33":{"name":"(anonymous_33)","decl":{"start":{"line":447,"column":41},"end":{"line":447,"column":42}},"loc":{"start":{"line":447,"column":57},"end":{"line":449,"column":11}},"line":447},"34":{"name":"(anonymous_34)","decl":{"start":{"line":450,"column":41},"end":{"line":450,"column":42}},"loc":{"start":{"line":450,"column":57},"end":{"line":452,"column":11}},"line":450},"35":{"name":"(anonymous_35)","decl":{"start":{"line":453,"column":35},"end":{"line":453,"column":36}},"loc":{"start":{"line":453,"column":51},"end":{"line":461,"column":11}},"line":453},"36":{"name":"(anonymous_36)","decl":{"start":{"line":462,"column":35},"end":{"line":462,"column":36}},"loc":{"start":{"line":462,"column":50},"end":{"line":466,"column":11}},"line":462},"37":{"name":"add","decl":{"start":{"line":476,"column":20},"end":{"line":476,"column":23}},"loc":{"start":{"line":476,"column":37},"end":{"line":519,"column":5}},"line":476},"38":{"name":"(anonymous_38)","decl":{"start":{"line":479,"column":36},"end":{"line":479,"column":37}},"loc":{"start":{"line":479,"column":55},"end":{"line":517,"column":7}},"line":479},"39":{"name":"(anonymous_39)","decl":{"start":{"line":485,"column":33},"end":{"line":485,"column":34}},"loc":{"start":{"line":485,"column":49},"end":{"line":507,"column":11}},"line":485},"40":{"name":"(anonymous_40)","decl":{"start":{"line":487,"column":41},"end":{"line":487,"column":42}},"loc":{"start":{"line":487,"column":57},"end":{"line":489,"column":13}},"line":487},"41":{"name":"(anonymous_41)","decl":{"start":{"line":490,"column":41},"end":{"line":490,"column":42}},"loc":{"start":{"line":490,"column":57},"end":{"line":492,"column":13}},"line":490},"42":{"name":"(anonymous_42)","decl":{"start":{"line":493,"column":35},"end":{"line":493,"column":36}},"loc":{"start":{"line":493,"column":51},"end":{"line":501,"column":13}},"line":493},"43":{"name":"(anonymous_43)","decl":{"start":{"line":502,"column":35},"end":{"line":502,"column":36}},"loc":{"start":{"line":502,"column":50},"end":{"line":506,"column":13}},"line":502},"44":{"name":"(anonymous_44)","decl":{"start":{"line":508,"column":33},"end":{"line":508,"column":34}},"loc":{"start":{"line":508,"column":48},"end":{"line":512,"column":11}},"line":508},"45":{"name":"get","decl":{"start":{"line":522,"column":18},"end":{"line":522,"column":21}},"loc":{"start":{"line":522,"column":24},"end":{"line":528,"column":5}},"line":522}},"branchMap":{"0":{"loc":{"start":{"line":40,"column":4},"end":{"line":40,"column":82}},"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":82}},{"start":{"line":40,"column":4},"end":{"line":40,"column":82}}],"line":40},"1":{"loc":{"start":{"line":45,"column":4},"end":{"line":51,"column":5}},"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":51,"column":5}},{"start":{"line":45,"column":4},"end":{"line":51,"column":5}}],"line":45},"2":{"loc":{"start":{"line":45,"column":8},"end":{"line":45,"column":59}},"type":"binary-expr","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":24}},{"start":{"line":45,"column":28},"end":{"line":45,"column":59}}],"line":45},"3":{"loc":{"start":{"line":57,"column":6},"end":{"line":66,"column":7}},"type":"if","locations":[{"start":{"line":57,"column":6},"end":{"line":66,"column":7}},{"start":{"line":57,"column":6},"end":{"line":66,"column":7}}],"line":57},"4":{"loc":{"start":{"line":104,"column":8},"end":{"line":115,"column":9}},"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":115,"column":9}},{"start":{"line":104,"column":8},"end":{"line":115,"column":9}}],"line":104},"5":{"loc":{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},"type":"if","locations":[{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},{"start":{"line":123,"column":8},"end":{"line":125,"column":9}}],"line":123},"6":{"loc":{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},{"start":{"line":133,"column":8},"end":{"line":135,"column":9}}],"line":133},"7":{"loc":{"start":{"line":143,"column":8},"end":{"line":145,"column":9}},"type":"if","locations":[{"start":{"line":143,"column":8},"end":{"line":145,"column":9}},{"start":{"line":143,"column":8},"end":{"line":145,"column":9}}],"line":143},"8":{"loc":{"start":{"line":153,"column":8},"end":{"line":161,"column":9}},"type":"if","locations":[{"start":{"line":153,"column":8},"end":{"line":161,"column":9}},{"start":{"line":153,"column":8},"end":{"line":161,"column":9}}],"line":153},"9":{"loc":{"start":{"line":169,"column":8},"end":{"line":219,"column":9}},"type":"if","locations":[{"start":{"line":169,"column":8},"end":{"line":219,"column":9}},{"start":{"line":169,"column":8},"end":{"line":219,"column":9}}],"line":169},"10":{"loc":{"start":{"line":177,"column":12},"end":{"line":191,"column":13}},"type":"if","locations":[{"start":{"line":177,"column":12},"end":{"line":191,"column":13}},{"start":{"line":177,"column":12},"end":{"line":191,"column":13}}],"line":177},"11":{"loc":{"start":{"line":201,"column":12},"end":{"line":215,"column":13}},"type":"if","locations":[{"start":{"line":201,"column":12},"end":{"line":215,"column":13}},{"start":{"line":201,"column":12},"end":{"line":215,"column":13}}],"line":201},"12":{"loc":{"start":{"line":231,"column":6},"end":{"line":237,"column":7}},"type":"if","locations":[{"start":{"line":231,"column":6},"end":{"line":237,"column":7}},{"start":{"line":231,"column":6},"end":{"line":237,"column":7}}],"line":231},"13":{"loc":{"start":{"line":231,"column":10},"end":{"line":231,"column":72}},"type":"binary-expr","locations":[{"start":{"line":231,"column":10},"end":{"line":231,"column":46}},{"start":{"line":231,"column":50},"end":{"line":231,"column":72}}],"line":231},"14":{"loc":{"start":{"line":233,"column":10},"end":{"line":235,"column":11}},"type":"if","locations":[{"start":{"line":233,"column":10},"end":{"line":235,"column":11}},{"start":{"line":233,"column":10},"end":{"line":235,"column":11}}],"line":233},"15":{"loc":{"start":{"line":233,"column":14},"end":{"line":233,"column":154}},"type":"binary-expr","locations":[{"start":{"line":233,"column":14},"end":{"line":233,"column":51}},{"start":{"line":233,"column":55},"end":{"line":233,"column":78}},{"start":{"line":233,"column":82},"end":{"line":233,"column":123}},{"start":{"line":233,"column":127},"end":{"line":233,"column":154}}],"line":233},"16":{"loc":{"start":{"line":246,"column":6},"end":{"line":259,"column":7}},"type":"if","locations":[{"start":{"line":246,"column":6},"end":{"line":259,"column":7}},{"start":{"line":246,"column":6},"end":{"line":259,"column":7}}],"line":246},"17":{"loc":{"start":{"line":250,"column":8},"end":{"line":256,"column":9}},"type":"if","locations":[{"start":{"line":250,"column":8},"end":{"line":256,"column":9}},{"start":{"line":250,"column":8},"end":{"line":256,"column":9}}],"line":250},"18":{"loc":{"start":{"line":252,"column":12},"end":{"line":254,"column":13}},"type":"if","locations":[{"start":{"line":252,"column":12},"end":{"line":254,"column":13}},{"start":{"line":252,"column":12},"end":{"line":254,"column":13}}],"line":252},"19":{"loc":{"start":{"line":252,"column":16},"end":{"line":252,"column":64}},"type":"binary-expr","locations":[{"start":{"line":252,"column":16},"end":{"line":252,"column":36}},{"start":{"line":252,"column":40},"end":{"line":252,"column":64}}],"line":252},"20":{"loc":{"start":{"line":268,"column":8},"end":{"line":270,"column":9}},"type":"if","locations":[{"start":{"line":268,"column":8},"end":{"line":270,"column":9}},{"start":{"line":268,"column":8},"end":{"line":270,"column":9}}],"line":268},"21":{"loc":{"start":{"line":268,"column":12},"end":{"line":268,"column":78}},"type":"binary-expr","locations":[{"start":{"line":268,"column":12},"end":{"line":268,"column":50}},{"start":{"line":268,"column":54},"end":{"line":268,"column":78}}],"line":268},"22":{"loc":{"start":{"line":279,"column":8},"end":{"line":281,"column":9}},"type":"if","locations":[{"start":{"line":279,"column":8},"end":{"line":281,"column":9}},{"start":{"line":279,"column":8},"end":{"line":281,"column":9}}],"line":279},"23":{"loc":{"start":{"line":279,"column":12},"end":{"line":279,"column":74}},"type":"binary-expr","locations":[{"start":{"line":279,"column":12},"end":{"line":279,"column":48}},{"start":{"line":279,"column":52},"end":{"line":279,"column":74}}],"line":279},"24":{"loc":{"start":{"line":290,"column":8},"end":{"line":292,"column":9}},"type":"if","locations":[{"start":{"line":290,"column":8},"end":{"line":292,"column":9}},{"start":{"line":290,"column":8},"end":{"line":292,"column":9}}],"line":290},"25":{"loc":{"start":{"line":290,"column":12},"end":{"line":290,"column":74}},"type":"binary-expr","locations":[{"start":{"line":290,"column":12},"end":{"line":290,"column":48}},{"start":{"line":290,"column":52},"end":{"line":290,"column":74}}],"line":290},"26":{"loc":{"start":{"line":302,"column":6},"end":{"line":314,"column":7}},"type":"if","locations":[{"start":{"line":302,"column":6},"end":{"line":314,"column":7}},{"start":{"line":302,"column":6},"end":{"line":314,"column":7}}],"line":302},"27":{"loc":{"start":{"line":305,"column":8},"end":{"line":313,"column":9}},"type":"if","locations":[{"start":{"line":305,"column":8},"end":{"line":313,"column":9}},{"start":{"line":305,"column":8},"end":{"line":313,"column":9}}],"line":305},"28":{"loc":{"start":{"line":305,"column":12},"end":{"line":305,"column":72}},"type":"binary-expr","locations":[{"start":{"line":305,"column":12},"end":{"line":305,"column":47}},{"start":{"line":305,"column":51},"end":{"line":305,"column":72}}],"line":305},"29":{"loc":{"start":{"line":307,"column":12},"end":{"line":311,"column":13}},"type":"if","locations":[{"start":{"line":307,"column":12},"end":{"line":311,"column":13}},{"start":{"line":307,"column":12},"end":{"line":311,"column":13}}],"line":307},"30":{"loc":{"start":{"line":324,"column":6},"end":{"line":330,"column":7}},"type":"if","locations":[{"start":{"line":324,"column":6},"end":{"line":330,"column":7}},{"start":{"line":324,"column":6},"end":{"line":330,"column":7}}],"line":324},"31":{"loc":{"start":{"line":324,"column":10},"end":{"line":324,"column":61}},"type":"binary-expr","locations":[{"start":{"line":324,"column":10},"end":{"line":324,"column":26}},{"start":{"line":324,"column":30},"end":{"line":324,"column":61}}],"line":324},"32":{"loc":{"start":{"line":336,"column":8},"end":{"line":345,"column":9}},"type":"if","locations":[{"start":{"line":336,"column":8},"end":{"line":345,"column":9}},{"start":{"line":336,"column":8},"end":{"line":345,"column":9}}],"line":336},"33":{"loc":{"start":{"line":358,"column":6},"end":{"line":361,"column":7}},"type":"if","locations":[{"start":{"line":358,"column":6},"end":{"line":361,"column":7}},{"start":{"line":358,"column":6},"end":{"line":361,"column":7}}],"line":358},"34":{"loc":{"start":{"line":363,"column":6},"end":{"line":377,"column":7}},"type":"if","locations":[{"start":{"line":363,"column":6},"end":{"line":377,"column":7}},{"start":{"line":363,"column":6},"end":{"line":377,"column":7}}],"line":363},"35":{"loc":{"start":{"line":363,"column":10},"end":{"line":363,"column":70}},"type":"binary-expr","locations":[{"start":{"line":363,"column":10},"end":{"line":363,"column":45}},{"start":{"line":363,"column":49},"end":{"line":363,"column":70}}],"line":363},"36":{"loc":{"start":{"line":368,"column":10},"end":{"line":371,"column":11}},"type":"if","locations":[{"start":{"line":368,"column":10},"end":{"line":371,"column":11}},{"start":{"line":368,"column":10},"end":{"line":371,"column":11}}],"line":368},"37":{"loc":{"start":{"line":374,"column":8},"end":{"line":376,"column":9}},"type":"if","locations":[{"start":{"line":374,"column":8},"end":{"line":376,"column":9}},{"start":{"line":374,"column":8},"end":{"line":376,"column":9}}],"line":374},"38":{"loc":{"start":{"line":379,"column":6},"end":{"line":381,"column":7}},"type":"if","locations":[{"start":{"line":379,"column":6},"end":{"line":381,"column":7}},{"start":{"line":379,"column":6},"end":{"line":381,"column":7}}],"line":379},"39":{"loc":{"start":{"line":386,"column":8},"end":{"line":391,"column":9}},"type":"if","locations":[{"start":{"line":386,"column":8},"end":{"line":391,"column":9}},{"start":{"line":386,"column":8},"end":{"line":391,"column":9}}],"line":386},"40":{"loc":{"start":{"line":399,"column":6},"end":{"line":406,"column":7}},"type":"if","locations":[{"start":{"line":399,"column":6},"end":{"line":406,"column":7}},{"start":{"line":399,"column":6},"end":{"line":406,"column":7}}],"line":399},"41":{"loc":{"start":{"line":413,"column":19},"end":{"line":413,"column":91}},"type":"cond-expr","locations":[{"start":{"line":413,"column":72},"end":{"line":413,"column":84}},{"start":{"line":413,"column":87},"end":{"line":413,"column":91}}],"line":413},"42":{"loc":{"start":{"line":413,"column":19},"end":{"line":413,"column":69}},"type":"binary-expr","locations":[{"start":{"line":413,"column":19},"end":{"line":413,"column":39}},{"start":{"line":413,"column":43},"end":{"line":413,"column":69}}],"line":413},"43":{"loc":{"start":{"line":415,"column":6},"end":{"line":433,"column":7}},"type":"if","locations":[{"start":{"line":415,"column":6},"end":{"line":433,"column":7}},{"start":{"line":415,"column":6},"end":{"line":433,"column":7}}],"line":415},"44":{"loc":{"start":{"line":420,"column":8},"end":{"line":432,"column":9}},"type":"if","locations":[{"start":{"line":420,"column":8},"end":{"line":432,"column":9}},{"start":{"line":420,"column":8},"end":{"line":432,"column":9}}],"line":420},"45":{"loc":{"start":{"line":420,"column":12},"end":{"line":420,"column":63}},"type":"binary-expr","locations":[{"start":{"line":420,"column":12},"end":{"line":420,"column":28}},{"start":{"line":420,"column":32},"end":{"line":420,"column":63}}],"line":420},"46":{"loc":{"start":{"line":456,"column":12},"end":{"line":458,"column":13}},"type":"if","locations":[{"start":{"line":456,"column":12},"end":{"line":458,"column":13}},{"start":{"line":456,"column":12},"end":{"line":458,"column":13}}],"line":456},"47":{"loc":{"start":{"line":496,"column":14},"end":{"line":498,"column":15}},"type":"if","locations":[{"start":{"line":496,"column":14},"end":{"line":498,"column":15}},{"start":{"line":496,"column":14},"end":{"line":498,"column":15}}],"line":496},"48":{"loc":{"start":{"line":523,"column":6},"end":{"line":525,"column":7}},"type":"if","locations":[{"start":{"line":523,"column":6},"end":{"line":525,"column":7}},{"start":{"line":523,"column":6},"end":{"line":525,"column":7}}],"line":523}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":1,"22":1,"23":1,"24":1,"25":1,"26":2,"27":2,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":5,"38":5,"39":5,"40":5,"41":5,"42":5,"43":5,"44":5,"45":5,"46":5,"47":5,"48":5,"49":4,"50":4,"51":4,"52":4,"53":0,"54":0,"55":4,"56":1,"57":5,"58":5,"59":0,"60":0,"61":5,"62":5,"63":5,"64":2,"65":2,"66":3,"67":5,"68":5,"69":0,"70":0,"71":5,"72":5,"73":5,"74":4,"75":4,"76":4,"77":4,"78":4,"79":1,"80":5,"81":5,"82":4,"83":4,"84":4,"85":4,"86":4,"87":4,"88":4,"89":4,"90":4,"91":4,"92":4,"93":4,"94":4,"95":0,"96":4,"97":4,"98":4,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":4,"108":1,"109":5,"110":2,"111":2,"112":2,"113":6,"114":4,"115":2,"116":2208,"117":2208,"118":2208,"119":2208,"120":2208,"121":2208,"122":6624,"123":12,"124":0,"125":2208,"126":1,"127":1,"128":3,"129":1,"130":1,"131":0,"132":0,"133":0,"134":0,"135":0,"136":1,"137":1,"138":3,"139":2,"140":1,"141":1,"142":1,"143":1,"144":1,"145":1,"146":1,"147":2,"148":1,"149":1,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":2,"166":2,"167":2,"168":2,"169":2,"170":2,"171":2,"172":2,"173":2,"174":2,"175":0,"176":2,"177":2,"178":3,"179":1,"180":1,"181":2,"182":1,"183":2,"184":0,"185":2,"186":2,"187":0,"188":0,"189":0,"190":0,"191":2,"192":1,"193":1,"194":1,"195":0,"196":0,"197":2,"198":2,"199":2,"200":1,"201":1,"202":1,"203":1,"204":1,"205":2,"206":1,"207":1,"208":0,"209":0,"210":1,"211":1,"212":1,"213":1,"214":1,"215":1,"216":0,"217":1,"218":0,"219":1,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":1,"229":1,"230":1,"231":1,"232":1,"233":1,"234":1,"235":1,"236":1,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":1,"256":1,"257":1,"258":4443,"259":1,"260":4443,"261":1,"262":1,"263":1},"f":{"0":1,"1":1,"2":2,"3":1,"4":5,"5":4,"6":4,"7":0,"8":2,"9":6,"10":2208,"11":6624,"12":1,"13":3,"14":0,"15":0,"16":1,"17":3,"18":1,"19":2,"20":0,"21":0,"22":0,"23":2,"24":3,"25":1,"26":1,"27":2,"28":1,"29":2,"30":1,"31":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":1,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":4443},"b":{"0":[0,1],"1":[1,0],"2":[1,1],"3":[1,0],"4":[4,0],"5":[0,0],"6":[2,0],"7":[0,0],"8":[4,0],"9":[4,0],"10":[4,0],"11":[0,0],"12":[2,0],"13":[2,2],"14":[4,2],"15":[6,6,4,4],"16":[2208,0],"17":[2208,0],"18":[12,6612],"19":[6624,4416],"20":[1,2],"21":[3,3],"22":[0,0],"23":[0,0],"24":[2,1],"25":[3,3],"26":[1,0],"27":[1,0],"28":[1,1],"29":[1,1],"30":[0,0],"31":[0,0],"32":[0,0],"33":[2,0],"34":[0,2],"35":[2,2],"36":[1,2],"37":[1,1],"38":[0,2],"39":[0,0],"40":[1,0],"41":[1,1],"42":[2,1],"43":[1,1],"44":[1,0],"45":[1,1],"46":[0,0],"47":[0,0],"48":[1,4442]},"inputSourceMap":{"version":3,"sources":["plugins.js"],"names":["npm","which","sync","singleton","Symbol","singletonEnforcer","Plugins","enforcer","pluginsDir","path","join","config","root","sep","scriptsDir","_plugins","plugins","Array","isArray","prototype","forEach","call","pluginEntry","plugin","getPluginConfig","push","directoryScripts","fse","lstatSync","isDirectory","_scripts","coreUtils","file","getFoldersSync","scriptEntry","name","replace","script","e","dir","entry","pluginId","split","basename","plugHook","hooks","url","plugCustom","plugPartials","plugTemplates","plugProcess","plugRoutes","partials","templates","process","routes","custom","fileHook","isFile","require","cache","resolve","h","console","log","stack","clc","green","directoryCustom","directoryPartials","directoryTemplates","directoryProcess","processFiles","getFilesSync","processFile","directoryRoute","gets","directoryGets","routesGet","routePaths","route","pathUrl","routeObject","routePath","get","posts","directoryPosts","routesPost","post","fn","proc","arguments","length","args","slice","shift","apply","customs","concat","pluginName","localConfigExist","json","getLocalConfig","plugged","index","splice","save","createLocalConfig","pluginIdArray","found","cyan","underline","stat","pluginDefaultConfig","readJsonSync","remove","then","add","ps","Promise","all","p","npmUninstall","cwd","stdout","on","data","stderr","code","removePlugin","err","red","npmPackage","npmInstall","updatePlugin"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/","sourcesContent":["import {spawn} from 'child_process'\nimport {Promise} from 'bluebird'\nimport path from 'path'\nimport fse from 'fs-extra'\nimport clc from 'cli-color'\nimport which from 'which'\nimport extend from 'extend'\nconst npm = which.sync('npm')\n\nimport {coreUtils, config} from '../'\n\nlet singleton = Symbol()\nlet singletonEnforcer = Symbol()\n\nclass Plugins {\n  constructor(enforcer) {\n    if (enforcer != singletonEnforcer)\n      throw 'Cannot construct Plugins singleton'\n    this.pluginsDir = path.join(config.root, 'node_modules') + path.sep\n    this.scriptsDir = path.join(config.root, 'scripts') + path.sep\n    this._plugins = []\n\n    // Plugins\n    if (config.plugins && Array.isArray(config.plugins)) {\n      Array.prototype.forEach.call(config.plugins, pluginEntry => {\n        const plugin = this.getPluginConfig(this.pluginsDir, pluginEntry)\n        this._plugins.push(plugin)\n      })\n    }\n\n    // Scripts\n    try {\n      var directoryScripts = fse.lstatSync(this.scriptsDir)\n      if (directoryScripts.isDirectory()) {\n        this._scripts = coreUtils.file.getFoldersSync(this.scriptsDir, false)\n        Array.prototype.forEach.call(this._scripts, scriptEntry => {\n          const name = scriptEntry.path.replace(this.scriptsDir, '')\n          const script = this.getPluginConfig(this.scriptsDir, name)\n          this._plugins.push(script)\n        })\n      }\n    } catch (e) {}\n  }\n\n  static get instance() {\n    if (!this[singleton]) {\n      this[singleton] = new Plugins(singletonEnforcer)\n    }\n    return this[singleton]\n  }\n\n  getPluginConfig(dir, entry) {\n    // remove npm version if any\n    let pluginId = entry.split('@')[0]\n\n    // remove github version if any\n    pluginId = pluginId.split('#')[0]\n\n    // remove github path if any\n    pluginId = path.basename(pluginId)\n\n    let plugHook = path.join(dir, pluginId, config.hooks.url, 'hooks.js')\n    let plugCustom = path.join(dir, pluginId, 'custom')\n    let plugPartials = path.join(dir, pluginId, 'partials')\n    let plugTemplates = path.join(dir, pluginId, 'templates')\n    let plugProcess = path.join(dir, pluginId, 'process')\n    let plugRoutes = path.join(dir, pluginId, 'routes')\n    let plugin = {\n      hooks: null,\n      partials: null,\n      templates: null,\n      process: null,\n      routes: null,\n      custom: null\n    }\n\n    try {\n      var fileHook = fse.lstatSync(plugHook)\n      if (fileHook.isFile()) {\n        try {\n          delete require.cache[require.resolve(plugHook)]\n          var h = require(plugHook)\n        } catch (e) {\n          console.log(e.stack)\n          console.log(\n            clc.green('[ Hint ]'),\n            \"It seems that you don't have the npm module @babel/preset-env installed on your project\"\n          )\n        }\n        plugin.hooks = h.default\n      }\n    } catch (e) {\n      plugin.hooks = null\n    }\n\n    try {\n      var directoryCustom = fse.lstatSync(plugCustom)\n      if (directoryCustom.isDirectory()) {\n        plugin.custom = plugCustom\n      }\n    } catch (e) {\n      plugin.custom = null\n    }\n\n    try {\n      var directoryPartials = fse.lstatSync(plugPartials)\n      if (directoryPartials.isDirectory()) {\n        plugin.partials = plugPartials\n      }\n    } catch (e) {\n      plugin.partials = null\n    }\n\n    try {\n      var directoryTemplates = fse.lstatSync(plugTemplates)\n      if (directoryTemplates.isDirectory()) {\n        plugin.templates = plugTemplates\n      }\n    } catch (e) {\n      plugin.templates = null\n    }\n\n    try {\n      var directoryProcess = fse.lstatSync(plugProcess)\n      if (directoryProcess.isDirectory()) {\n        plugin.process = {}\n        let processFiles = coreUtils.file.getFilesSync(plugProcess, false)\n        Array.prototype.forEach.call(processFiles, processFile => {\n          plugin.process[path.basename(processFile, '.js')] = processFile\n        })\n      }\n    } catch (e) {\n      plugin.process = null\n    }\n\n    try {\n      var directoryRoute = fse.lstatSync(plugRoutes)\n      if (directoryRoute.isDirectory()) {\n        plugin.routes = {}\n\n        var gets = path.join(plugRoutes, 'get')\n        try {\n          var directoryGets = fse.lstatSync(gets)\n          if (directoryGets.isDirectory()) {\n            let routesGet = []\n            let routePaths = coreUtils.file.getFilesSync(gets, false)\n            Array.prototype.forEach.call(routePaths, route => {\n              let pathUrl = `/abe/plugin/${pluginId}/${path.basename(\n                route,\n                '.js'\n              )}*`\n              let routeObject = {path: route, routePath: pathUrl}\n              routesGet.push(routeObject)\n            })\n            plugin.routes.get = routesGet\n          }\n        } catch (e) {\n          plugin.routes.get = null\n        }\n        try {\n          let posts = path.join(plugRoutes, 'post')\n          let directoryPosts = fse.lstatSync(posts)\n          if (directoryPosts.isDirectory()) {\n            let routesPost = []\n            let routePaths = coreUtils.file.getFilesSync(posts, false)\n            Array.prototype.forEach.call(routePaths, route => {\n              let pathUrl = `/abe/plugin/${pluginId}/${path.basename(\n                route,\n                '.js'\n              )}*`\n              let routeObject = {path: route, routePath: pathUrl}\n              routesPost.push(routeObject)\n            })\n            plugin.routes.post = routesPost\n          }\n        } catch (e) {\n          plugin.routes.post = null\n        }\n      }\n    } catch (e) {\n      plugin.routes = null\n    }\n\n    return plugin\n  }\n\n  getProcess(fn) {\n    var proc = null\n    if (typeof this._plugins !== 'undefined' && this._plugins !== null) {\n      Array.prototype.forEach.call(this._plugins, plugin => {\n        if (\n          typeof plugin.process !== 'undefined' &&\n          plugin.process !== null &&\n          typeof plugin.process[fn] !== 'undefined' &&\n          plugin.process[fn] !== null\n        ) {\n          proc = plugin.process[fn]\n        }\n      })\n    }\n\n    return proc\n  }\n\n  hooks() {\n    if (arguments.length > 0) {\n      var args = [].slice.call(arguments)\n      var fn = args.shift()\n\n      if (this._plugins != null) {\n        Array.prototype.forEach.call(this._plugins, plugin => {\n          if (plugin.hooks != null && plugin.hooks[fn] != null) {\n            args[0] = plugin.hooks[fn].apply(this, args)\n          }\n        })\n      }\n    } else {\n      args = ['']\n    }\n\n    return args[0]\n  }\n\n  getPartials() {\n    var partials = []\n    Array.prototype.forEach.call(this._plugins, plugin => {\n      if (typeof plugin.partials !== 'undefined' && plugin.partials !== null) {\n        partials.push(plugin.partials)\n      }\n    })\n\n    return partials\n  }\n\n  getCustoms() {\n    var customs = []\n    Array.prototype.forEach.call(this._plugins, plugin => {\n      if (typeof plugin.custom !== 'undefined' && plugin.custom !== null) {\n        customs.push(plugin.custom)\n      }\n    })\n\n    return customs\n  }\n\n  getRoutes() {\n    var routes = []\n    Array.prototype.forEach.call(this._plugins, plugin => {\n      if (typeof plugin.routes !== 'undefined' && plugin.routes !== null) {\n        routes = routes.concat(plugin.routes)\n      }\n    })\n\n    return routes\n  }\n\n  removePlugin(plugin) {\n    let pluginName = plugin.split('@')[0]\n    pluginName = pluginName.split('#')[0]\n    if (config.localConfigExist()) {\n      let json = config.getLocalConfig()\n      if (typeof json.plugins !== 'undefined' && json.plugins !== null) {\n        Array.prototype.forEach.call(json.plugins, (plugged, index) => {\n          if (\n            pluginName === path.basename(plugged.split('@')[0].split('#')[0])\n          ) {\n            json.plugins.splice(index, 1)\n            config.save(json)\n          }\n        })\n      }\n    }\n  }\n\n  updateScripts() {\n    this._plugins.length = 0\n    this._scripts.length = 0\n\n    // Plugins\n    if (config.plugins && Array.isArray(config.plugins)) {\n      Array.prototype.forEach.call(config.plugins, pluginEntry => {\n        const plugin = this.getPluginConfig(this.pluginsDir, pluginEntry)\n        this._plugins.push(plugin)\n      })\n    }\n\n    // Scripts\n    try {\n      var directoryScripts = fse.lstatSync(this.scriptsDir)\n      if (directoryScripts.isDirectory()) {\n        this._scripts = coreUtils.file.getFoldersSync(this.scriptsDir, false)\n        Array.prototype.forEach.call(this._scripts, scriptEntry => {\n          const name = scriptEntry.path.replace(this.scriptsDir, '')\n          const script = this.getPluginConfig(this.scriptsDir, name)\n          this._plugins.push(script)\n        })\n      }\n    } catch (e) {}\n  }\n\n  updatePlugin(plugin) {\n    let json = {}\n    let createLocalConfig = true\n    let pluginName = plugin.split('@')[0]\n    pluginName = pluginName.split('#')[0]\n    const pluginIdArray = pluginName.split('/')\n    const pluginId = pluginIdArray[pluginIdArray.length - 1]\n\n    if (config.localConfigExist()) {\n      json = config.getLocalConfig()\n      createLocalConfig = false\n    }\n\n    if (typeof json.plugins === 'undefined' || json.plugins === null) {\n      json.plugins = [plugin]\n    } else {\n      var found = false\n      Array.prototype.forEach.call(json.plugins, (plugged, index) => {\n        if (pluginName === plugged.split('@')[0].split('#')[0]) {\n          json.plugins[index] = plugin\n          found = true\n        }\n      })\n      if (!found) {\n        json.plugins.push(plugin)\n      }\n    }\n\n    if (createLocalConfig) {\n      console.log(\n        clc.green('[ Hint ]'),\n        'creating a local config abe.json with your plugin definition',\n        clc.cyan.underline(\n          'https://github.com/abecms/abecms/blob/master/docs/abe-config.md'\n        )\n      )\n    }\n\n    try {\n      var stat = fse.lstatSync(path.join(this.pluginsDir, pluginId, 'abe.json'))\n\n      if (stat.isFile()) {\n        const pluginDefaultConfig = fse.readJsonSync(\n          path.join(this.pluginsDir, pluginId, 'abe.json')\n        )\n        extend(true, pluginDefaultConfig, json)\n        json = pluginDefaultConfig\n      }\n    } catch (e) {}\n\n    config.save(json)\n  }\n\n  uninstall(dir, plugin) {\n    if (plugin !== null) {\n      this.remove(dir, plugin).then(function() {\n        return 0\n      })\n    } else {\n      console.log(clc.cyan('no plugin with this name found'))\n\n      return 0\n    }\n  }\n\n  install(dir, plugin = null) {\n    if (plugin !== null) {\n      this.add(dir, plugin).then(function() {\n        return 0\n      })\n    } else {\n      if (config.plugins && Array.isArray(config.plugins)) {\n        var ps = []\n        Array.prototype.forEach.call(config.plugins, plugin => {\n          ps.push(this.add(dir, plugin))\n        })\n\n        Promise.all(ps).then(function() {\n          return 0\n        })\n      } else {\n        console.log(clc.cyan('no plugin found'))\n\n        return 0\n      }\n    }\n  }\n\n  remove(dir, plugin) {\n    var p = new Promise(resolve => {\n      try {\n        console.log(clc.green('spawn'), clc.cyan('npm uninstall ' + plugin))\n        // const npmUninstall = spawn('npm', ['uninstall', pluginDir]);\n        const npmUninstall = spawn(npm, ['uninstall', '--save', plugin], {\n          cwd: dir\n        })\n\n        npmUninstall.stdout.on('data', data => {\n          console.log('' + data)\n        })\n\n        npmUninstall.stderr.on('data', data => {\n          console.log('' + data)\n        })\n\n        npmUninstall.on('close', code => {\n          console.log(clc.cyan('child process exited with code'), code)\n\n          if (code == 0) {\n            this.removePlugin(plugin)\n          }\n\n          resolve()\n        })\n\n        npmUninstall.on('error', err => {\n          console.log(clc.red('cannot uninstall npm dependencies for'), dir)\n          console.log(err)\n          resolve(err)\n        })\n      } catch (err) {\n        console.log(clc.cyan('uninstall'), err)\n        resolve(err)\n      }\n    })\n\n    return p\n  }\n\n  add(dir, plugin) {\n    var p = new Promise(resolve => {\n      try {\n        console.log(clc.green('spawn'), clc.cyan('npm install ' + plugin))\n\n        const npmPackage = spawn(npm, ['init', '--force', {cwd: dir}])\n\n        npmPackage.on('close', code => {\n          const npmInstall = spawn(npm, [\n            'install',\n            '--save --prefix ' + dir,\n            plugin\n          ])\n\n          npmInstall.stdout.on('data', data => {\n            console.log('' + data)\n          })\n\n          npmInstall.stderr.on('data', data => {\n            console.log('' + data)\n          })\n\n          npmInstall.on('close', code => {\n            console.log(clc.cyan('child process exited with code'), code)\n\n            if (code == 0) {\n              this.updatePlugin(plugin)\n            }\n\n            resolve()\n          })\n\n          npmInstall.on('error', err => {\n            console.log(clc.red('cannot install npm dependencies for'), dir)\n            console.log(err)\n            resolve(err)\n          })\n        })\n\n        npmPackage.on('error', err => {\n          console.log(clc.red('cannot create the package.json file'), dir)\n          console.log(err)\n          resolve(err)\n        })\n      } catch (err) {\n        console.log(clc.cyan('install'), err)\n        resolve(err)\n      }\n    })\n\n    return p\n  }\n}\n\nexport default Plugins\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d95ea7351a0ea4dc5c175361a9aac73d8392ccbe","contentHash":"545558685dd05a4a8e3e8283bcd439ce88a77f46e9583fb017d3c05c5822c961"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/process.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/process.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":21},"end":{"line":10,"column":69}},"4":{"start":{"line":12,"column":15},"end":{"line":12,"column":58}},"5":{"start":{"line":14,"column":8},"end":{"line":14,"column":22}},"6":{"start":{"line":17,"column":17},"end":{"line":17,"column":31}},"7":{"start":{"line":18,"column":2},"end":{"line":18,"column":26}},"8":{"start":{"line":19,"column":2},"end":{"line":19,"column":18}},"9":{"start":{"line":22,"column":17},"end":{"line":73,"column":1}},"10":{"start":{"line":23,"column":13},"end":{"line":23,"column":83}},"11":{"start":{"line":24,"column":17},"end":{"line":24,"column":64}},"12":{"start":{"line":25,"column":2},"end":{"line":25,"column":61}},"13":{"start":{"line":26,"column":2},"end":{"line":26,"column":75}},"14":{"start":{"line":28,"column":2},"end":{"line":30,"column":3}},"15":{"start":{"line":29,"column":4},"end":{"line":29,"column":17}},"16":{"start":{"line":32,"column":2},"end":{"line":32,"column":38}},"17":{"start":{"line":35,"column":13},"end":{"line":35,"column":76}},"18":{"start":{"line":37,"column":2},"end":{"line":56,"column":3}},"19":{"start":{"line":38,"column":16},"end":{"line":38,"column":50}},"20":{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},"21":{"start":{"line":41,"column":6},"end":{"line":41,"column":56}},"22":{"start":{"line":44,"column":4},"end":{"line":55,"column":5}},"23":{"start":{"line":45,"column":6},"end":{"line":45,"column":59}},"24":{"start":{"line":46,"column":6},"end":{"line":46,"column":49}},"25":{"start":{"line":48,"column":6},"end":{"line":50,"column":7}},"26":{"start":{"line":49,"column":8},"end":{"line":49,"column":58}},"27":{"start":{"line":52,"column":6},"end":{"line":52,"column":45}},"28":{"start":{"line":54,"column":6},"end":{"line":54,"column":136}},"29":{"start":{"line":58,"column":2},"end":{"line":70,"column":3}},"30":{"start":{"line":59,"column":4},"end":{"line":68,"column":7}},"31":{"start":{"line":60,"column":17},"end":{"line":60,"column":33}},"32":{"start":{"line":61,"column":6},"end":{"line":61,"column":21}},"33":{"start":{"line":63,"column":6},"end":{"line":67,"column":7}},"34":{"start":{"line":64,"column":8},"end":{"line":64,"column":47}},"35":{"start":{"line":66,"column":8},"end":{"line":66,"column":20}},"36":{"start":{"line":69,"column":4},"end":{"line":69,"column":16}},"37":{"start":{"line":72,"column":2},"end":{"line":72,"column":15}},"38":{"start":{"line":75,"column":15},"end":{"line":75,"column":25}},"39":{"start":{"line":76,"column":0},"end":{"line":76,"column":30}}},"fnMap":{"0":{"name":"prepend","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":16}},"loc":{"start":{"line":16,"column":31},"end":{"line":20,"column":1}},"line":16},"1":{"name":"abeProcess","decl":{"start":{"line":22,"column":26},"end":{"line":22,"column":36}},"loc":{"start":{"line":22,"column":43},"end":{"line":73,"column":1}},"line":22},"2":{"name":"(anonymous_2)","decl":{"start":{"line":59,"column":23},"end":{"line":59,"column":24}},"loc":{"start":{"line":59,"column":39},"end":{"line":68,"column":5}},"line":59}},"branchMap":{"0":{"loc":{"start":{"line":23,"column":13},"end":{"line":23,"column":83}},"type":"cond-expr","locations":[{"start":{"line":23,"column":66},"end":{"line":23,"column":78}},{"start":{"line":23,"column":81},"end":{"line":23,"column":83}}],"line":23},"1":{"loc":{"start":{"line":23,"column":13},"end":{"line":23,"column":63}},"type":"binary-expr","locations":[{"start":{"line":23,"column":13},"end":{"line":23,"column":33}},{"start":{"line":23,"column":37},"end":{"line":23,"column":63}}],"line":23},"2":{"loc":{"start":{"line":24,"column":17},"end":{"line":24,"column":64}},"type":"cond-expr","locations":[{"start":{"line":24,"column":40},"end":{"line":24,"column":52}},{"start":{"line":24,"column":55},"end":{"line":24,"column":64}}],"line":24},"3":{"loc":{"start":{"line":28,"column":2},"end":{"line":30,"column":3}},"type":"if","locations":[{"start":{"line":28,"column":2},"end":{"line":30,"column":3}},{"start":{"line":28,"column":2},"end":{"line":30,"column":3}}],"line":28},"4":{"loc":{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},{"start":{"line":40,"column":4},"end":{"line":42,"column":5}}],"line":40},"5":{"loc":{"start":{"line":48,"column":6},"end":{"line":50,"column":7}},"type":"if","locations":[{"start":{"line":48,"column":6},"end":{"line":50,"column":7}},{"start":{"line":48,"column":6},"end":{"line":50,"column":7}}],"line":48},"6":{"loc":{"start":{"line":58,"column":2},"end":{"line":70,"column":3}},"type":"if","locations":[{"start":{"line":58,"column":2},"end":{"line":70,"column":3}},{"start":{"line":58,"column":2},"end":{"line":70,"column":3}}],"line":58},"7":{"loc":{"start":{"line":58,"column":6},"end":{"line":58,"column":50}},"type":"binary-expr","locations":[{"start":{"line":58,"column":6},"end":{"line":58,"column":33}},{"start":{"line":58,"column":37},"end":{"line":58,"column":50}}],"line":58},"8":{"loc":{"start":{"line":63,"column":6},"end":{"line":67,"column":7}},"type":"if","locations":[{"start":{"line":63,"column":6},"end":{"line":67,"column":7}},{"start":{"line":63,"column":6},"end":{"line":67,"column":7}}],"line":63}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":2,"7":2,"8":2,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":1,"39":1},"f":{"0":2,"1":1,"2":0},"b":{"0":[1,0],"1":[1,1],"2":[1,0],"3":[0,1],"4":[1,0],"5":[0,0],"6":[1,0],"7":[1,1],"8":[0,0]},"inputSourceMap":{"version":3,"sources":["process.js"],"names":["prepend","value","array","newArray","slice","unshift","abeProcess","name","args","callback","config","root","__dirname","Manager","instance","isProcessRunning","addProcess","proc","file","stats","fse","statSync","isFile","process","fork","err","abeExtend","plugins","getProcess","removeProcess","console","log","on","data","JSON","parse","msg","kill"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA;;AAEA,SAASA,OAAT,CAAiBC,KAAjB,EAAwBC,KAAxB,EAA+B;AAC7B,MAAIC,QAAQ,GAAGD,KAAK,CAACE,KAAN,CAAY,CAAZ,CAAf;AACAD,EAAAA,QAAQ,CAACE,OAAT,CAAiBJ,KAAjB;AACA,SAAOE,QAAP;AACD;;AAED,IAAIG,UAAU,GAAG,SAAbA,UAAa,CAASC,IAAT,EAAoC;AAAA,MAArBC,IAAqB,uEAAd,EAAc;AAAA,MAAVC,QAAU;AACnDD,EAAAA,IAAI,GAAGR,OAAO,uBAAgBU,SAAOC,IAAvB,GAA+BH,IAA/B,CAAd;AACAA,EAAAA,IAAI,GAAGR,OAAO,uBAAgBY,SAAhB,qBAA2CJ,IAA3C,CAAd;;AAEA,MAAIK,UAAQC,QAAR,CAAiBC,gBAAjB,CAAkCR,IAAlC,CAAJ,EAA6C;AAC3C,WAAO,KAAP;AACD;;AAEDM,YAAQC,QAAR,CAAiBE,UAAjB,CAA4BT,IAA5B;;AAEA,MAAIU,IAAJ;AACA,MAAIC,IAAI,aAAMN,SAAN,gCAAqCL,IAArC,QAAR;;AACA,MAAI;AACF,QAAIY,KAAK,GAAGC,oBAAIC,QAAJ,CAAaH,IAAb,CAAZ;;AACA,QAAIC,KAAK,CAACG,MAAN,EAAJ,EAAoB;AAClBL,MAAAA,IAAI,GAAGM,0BAAQC,IAAR,CAAaN,IAAb,EAAmBV,IAAnB,CAAP;AACD;AACF,GALD,CAKE,OAAOiB,GAAP,EAAY;AACZ,QAAI;AACFP,MAAAA,IAAI,GAAGQ,YAAUC,OAAV,CAAkBb,QAAlB,CAA2Bc,UAA3B,CAAsCrB,IAAtC,CAAP;AACAY,MAAAA,KAAK,GAAGC,oBAAIC,QAAJ,CAAaH,IAAb,CAAR;;AACA,UAAIC,KAAK,CAACG,MAAN,EAAJ,EAAoB;AAClBL,QAAAA,IAAI,GAAGM,0BAAQC,IAAR,CAAaN,IAAb,EAAmBV,IAAnB,CAAP;AACD;AACF,KAND,CAME,OAAOiB,GAAP,EAAY;AACZZ,gBAAQC,QAAR,CAAiBe,aAAjB,CAA+BtB,IAA/B;;AACAuB,MAAAA,OAAO,CAACC,GAAR,gEAC0DnB,SAD1D,gCACyFL,IADzF;AAGD;AACF;;AAED,MAAI,OAAOU,IAAP,KAAgB,WAAhB,IAA+BA,IAAI,KAAK,IAA5C,EAAkD;AAChDA,IAAAA,IAAI,CAACe,EAAL,CAAQ,SAAR,EAAmB,UAASC,IAAT,EAAe;AAChC,UAAIA,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWF,IAAX,CAAX;AACAxB,MAAAA,QAAQ,CAACwB,IAAD,CAAR;;AACA,UAAIA,IAAI,CAACG,GAAL,IAAY,MAAhB,EAAwB;AACtBvB,kBAAQC,QAAR,CAAiBe,aAAjB,CAA+BtB,IAA/B;;AACAU,QAAAA,IAAI,CAACoB,IAAL;AACD;AACF,KAPD;AAQA,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD,CA7CD;;eA+Ce/B,U","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/extend/","sourcesContent":["import process from 'child_process'\nimport fse from 'fs-extra'\n\nimport {config, abeExtend, Manager} from '../'\n\nfunction prepend(value, array) {\n  var newArray = array.slice(0)\n  newArray.unshift(value)\n  return newArray\n}\n\nvar abeProcess = function(name, args = [], callback) {\n  args = prepend(`ABE_WEBSITE=${config.root}`, args)\n  args = prepend(`ABECMS_PATH=${__dirname}/../../../dist`, args)\n\n  if (Manager.instance.isProcessRunning(name)) {\n    return false\n  }\n\n  Manager.instance.addProcess(name)\n\n  var proc\n  var file = `${__dirname}/../../cli/process/${name}.js`\n  try {\n    var stats = fse.statSync(file)\n    if (stats.isFile()) {\n      proc = process.fork(file, args)\n    }\n  } catch (err) {\n    try {\n      file = abeExtend.plugins.instance.getProcess(name)\n      stats = fse.statSync(file)\n      if (stats.isFile()) {\n        proc = process.fork(file, args)\n      }\n    } catch (err) {\n      Manager.instance.removeProcess(name)\n      console.log(\n        `Manager.instance.addProcess : process fork failed on ${__dirname}/../../cli/process/${name}.js`\n      )\n    }\n  }\n\n  if (typeof proc !== 'undefined' && proc !== null) {\n    proc.on('message', function(data) {\n      var data = JSON.parse(data)\n      callback(data)\n      if (data.msg == 'exit') {\n        Manager.instance.removeProcess(name)\n        proc.kill()\n      }\n    })\n    return true\n  }\n\n  return false\n}\n\nexport default abeProcess\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"044f341205b3fdbf5d443058788d0b8b14e70730","contentHash":"b26438fd19069ca5225346b333aee3543bc412dfc69bb19c1bfcd1df91c1476c"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/index.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/index.js","statementMap":{"0":{"start":{"line":3,"column":30},"end":{"line":3,"column":86}},"1":{"start":{"line":5,"column":29},"end":{"line":5,"column":84}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":3}},"3":{"start":{"line":10,"column":0},"end":{"line":15,"column":3}},"4":{"start":{"line":13,"column":4},"end":{"line":13,"column":31}},"5":{"start":{"line":16,"column":0},"end":{"line":16,"column":44}},"6":{"start":{"line":18,"column":15},"end":{"line":18,"column":59}},"7":{"start":{"line":20,"column":17},"end":{"line":20,"column":65}},"8":{"start":{"line":22,"column":0},"end":{"line":22,"column":32}},"9":{"start":{"line":24,"column":12},"end":{"line":24,"column":55}},"10":{"start":{"line":26,"column":0},"end":{"line":26,"column":22}}},"fnMap":{"0":{"name":"get","decl":{"start":{"line":12,"column":16},"end":{"line":12,"column":19}},"loc":{"start":{"line":12,"column":22},"end":{"line":14,"column":3}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":61,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":61},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;;;AACA","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/","sourcesContent":["import manager from './manager'\nimport * as operations from './operations'\nimport * as utils from './utils'\n\nexport {manager, operations, utils}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cdfd721e8afb1a81502ad6f1dce1f8f375352301","contentHash":"8ec777849fe3601a7e476e144e8b3d0ae3a211b567f6c7c5a8df66f4ba3704d3"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/manager.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/manager.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":23},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":20},"end":{"line":12,"column":89}},"5":{"start":{"line":14,"column":15},"end":{"line":14,"column":58}},"6":{"start":{"line":16,"column":14},"end":{"line":16,"column":55}},"7":{"start":{"line":18,"column":12},"end":{"line":18,"column":51}},"8":{"start":{"line":20,"column":11},"end":{"line":20,"column":31}},"9":{"start":{"line":22,"column":16},"end":{"line":22,"column":24}},"10":{"start":{"line":23,"column":24},"end":{"line":23,"column":32}},"11":{"start":{"line":25,"column":27},"end":{"line":162,"column":3}},"12":{"start":{"line":27,"column":4},"end":{"line":27,"column":52}},"13":{"start":{"line":28,"column":4},"end":{"line":28,"column":79}},"14":{"start":{"line":28,"column":39},"end":{"line":28,"column":79}},"15":{"start":{"line":29,"column":4},"end":{"line":29,"column":81}},"16":{"start":{"line":32,"column":2},"end":{"line":160,"column":6}},"17":{"start":{"line":37,"column":6},"end":{"line":51,"column":7}},"18":{"start":{"line":38,"column":8},"end":{"line":50,"column":9}},"19":{"start":{"line":39,"column":10},"end":{"line":39,"column":82}},"20":{"start":{"line":41,"column":10},"end":{"line":41,"column":27}},"21":{"start":{"line":43,"column":22},"end":{"line":43,"column":76}},"22":{"start":{"line":45,"column":10},"end":{"line":45,"column":22}},"23":{"start":{"line":47,"column":10},"end":{"line":47,"column":55}},"24":{"start":{"line":49,"column":10},"end":{"line":49,"column":82}},"25":{"start":{"line":53,"column":6},"end":{"line":53,"column":16}},"26":{"start":{"line":60,"column":6},"end":{"line":67,"column":7}},"27":{"start":{"line":61,"column":8},"end":{"line":61,"column":70}},"28":{"start":{"line":63,"column":8},"end":{"line":66,"column":11}},"29":{"start":{"line":76,"column":6},"end":{"line":78,"column":7}},"30":{"start":{"line":77,"column":8},"end":{"line":77,"column":34}},"31":{"start":{"line":80,"column":6},"end":{"line":80,"column":25}},"32":{"start":{"line":85,"column":16},"end":{"line":85,"column":26}},"33":{"start":{"line":86,"column":6},"end":{"line":86,"column":24}},"34":{"start":{"line":88,"column":6},"end":{"line":94,"column":7}},"35":{"start":{"line":88,"column":19},"end":{"line":88,"column":20}},"36":{"start":{"line":88,"column":28},"end":{"line":88,"column":38}},"37":{"start":{"line":89,"column":19},"end":{"line":89,"column":25}},"38":{"start":{"line":91,"column":8},"end":{"line":93,"column":9}},"39":{"start":{"line":92,"column":10},"end":{"line":92,"column":22}},"40":{"start":{"line":96,"column":6},"end":{"line":96,"column":19}},"41":{"start":{"line":101,"column":16},"end":{"line":101,"column":26}},"42":{"start":{"line":102,"column":6},"end":{"line":102,"column":24}},"43":{"start":{"line":104,"column":6},"end":{"line":110,"column":7}},"44":{"start":{"line":104,"column":19},"end":{"line":104,"column":20}},"45":{"start":{"line":104,"column":28},"end":{"line":104,"column":38}},"46":{"start":{"line":105,"column":19},"end":{"line":105,"column":25}},"47":{"start":{"line":107,"column":8},"end":{"line":109,"column":9}},"48":{"start":{"line":108,"column":10},"end":{"line":108,"column":22}},"49":{"start":{"line":112,"column":6},"end":{"line":112,"column":19}},"50":{"start":{"line":117,"column":16},"end":{"line":117,"column":26}},"51":{"start":{"line":118,"column":6},"end":{"line":118,"column":24}},"52":{"start":{"line":120,"column":6},"end":{"line":126,"column":7}},"53":{"start":{"line":120,"column":19},"end":{"line":120,"column":20}},"54":{"start":{"line":120,"column":28},"end":{"line":120,"column":38}},"55":{"start":{"line":121,"column":19},"end":{"line":121,"column":25}},"56":{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},"57":{"start":{"line":124,"column":10},"end":{"line":124,"column":22}},"58":{"start":{"line":128,"column":6},"end":{"line":128,"column":19}},"59":{"start":{"line":138,"column":6},"end":{"line":142,"column":7}},"60":{"start":{"line":139,"column":8},"end":{"line":139,"column":27}},"61":{"start":{"line":140,"column":8},"end":{"line":140,"column":20}},"62":{"start":{"line":141,"column":8},"end":{"line":141,"column":20}},"63":{"start":{"line":144,"column":6},"end":{"line":144,"column":19}},"64":{"start":{"line":149,"column":6},"end":{"line":149,"column":38}},"65":{"start":{"line":154,"column":6},"end":{"line":156,"column":7}},"66":{"start":{"line":155,"column":8},"end":{"line":155,"column":57}},"67":{"start":{"line":158,"column":6},"end":{"line":158,"column":29}},"68":{"start":{"line":161,"column":2},"end":{"line":161,"column":17}},"69":{"start":{"line":164,"column":15},"end":{"line":164,"column":22}},"70":{"start":{"line":165,"column":0},"end":{"line":165,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":25,"column":27},"end":{"line":25,"column":28}},"loc":{"start":{"line":25,"column":39},"end":{"line":162,"column":1}},"line":25},"1":{"name":"Manager","decl":{"start":{"line":26,"column":11},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":29},"end":{"line":30,"column":3}},"line":26},"2":{"name":"read","decl":{"start":{"line":36,"column":20},"end":{"line":36,"column":24}},"loc":{"start":{"line":36,"column":27},"end":{"line":54,"column":5}},"line":36},"3":{"name":"save","decl":{"start":{"line":59,"column":20},"end":{"line":59,"column":24}},"loc":{"start":{"line":59,"column":27},"end":{"line":68,"column":5}},"line":59},"4":{"name":"get","decl":{"start":{"line":75,"column":20},"end":{"line":75,"column":23}},"loc":{"start":{"line":75,"column":26},"end":{"line":81,"column":5}},"line":75},"5":{"name":"findById","decl":{"start":{"line":84,"column":20},"end":{"line":84,"column":28}},"loc":{"start":{"line":84,"column":33},"end":{"line":97,"column":5}},"line":84},"6":{"name":"findByEmail","decl":{"start":{"line":100,"column":20},"end":{"line":100,"column":31}},"loc":{"start":{"line":100,"column":39},"end":{"line":113,"column":5}},"line":100},"7":{"name":"findByResetPasswordToken","decl":{"start":{"line":116,"column":20},"end":{"line":116,"column":44}},"loc":{"start":{"line":116,"column":65},"end":{"line":129,"column":5}},"line":116},"8":{"name":"update","decl":{"start":{"line":137,"column":20},"end":{"line":137,"column":26}},"loc":{"start":{"line":137,"column":33},"end":{"line":145,"column":5}},"line":137},"9":{"name":"isActive","decl":{"start":{"line":148,"column":20},"end":{"line":148,"column":28}},"loc":{"start":{"line":148,"column":31},"end":{"line":150,"column":5}},"line":148},"10":{"name":"get","decl":{"start":{"line":153,"column":18},"end":{"line":153,"column":21}},"loc":{"start":{"line":153,"column":24},"end":{"line":159,"column":5}},"line":153}},"branchMap":{"0":{"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":79}},"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":79}},{"start":{"line":28,"column":4},"end":{"line":28,"column":79}}],"line":28},"1":{"loc":{"start":{"line":37,"column":6},"end":{"line":51,"column":7}},"type":"if","locations":[{"start":{"line":37,"column":6},"end":{"line":51,"column":7}},{"start":{"line":37,"column":6},"end":{"line":51,"column":7}}],"line":37},"2":{"loc":{"start":{"line":38,"column":8},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":50,"column":9}},{"start":{"line":38,"column":8},"end":{"line":50,"column":9}}],"line":38},"3":{"loc":{"start":{"line":60,"column":6},"end":{"line":67,"column":7}},"type":"if","locations":[{"start":{"line":60,"column":6},"end":{"line":67,"column":7}},{"start":{"line":60,"column":6},"end":{"line":67,"column":7}}],"line":60},"4":{"loc":{"start":{"line":76,"column":6},"end":{"line":78,"column":7}},"type":"if","locations":[{"start":{"line":76,"column":6},"end":{"line":78,"column":7}},{"start":{"line":76,"column":6},"end":{"line":78,"column":7}}],"line":76},"5":{"loc":{"start":{"line":91,"column":8},"end":{"line":93,"column":9}},"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":93,"column":9}},{"start":{"line":91,"column":8},"end":{"line":93,"column":9}}],"line":91},"6":{"loc":{"start":{"line":107,"column":8},"end":{"line":109,"column":9}},"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":109,"column":9}},{"start":{"line":107,"column":8},"end":{"line":109,"column":9}}],"line":107},"7":{"loc":{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},"type":"if","locations":[{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},{"start":{"line":123,"column":8},"end":{"line":125,"column":9}}],"line":123},"8":{"loc":{"start":{"line":138,"column":6},"end":{"line":142,"column":7}},"type":"if","locations":[{"start":{"line":138,"column":6},"end":{"line":142,"column":7}},{"start":{"line":138,"column":6},"end":{"line":142,"column":7}}],"line":138},"9":{"loc":{"start":{"line":154,"column":6},"end":{"line":156,"column":7}},"type":"if","locations":[{"start":{"line":154,"column":6},"end":{"line":156,"column":7}},{"start":{"line":154,"column":6},"end":{"line":156,"column":7}}],"line":154}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":7,"60":7,"61":7,"62":7,"63":0,"64":9,"65":61,"66":1,"67":61,"68":1,"69":1,"70":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":7,"9":9,"10":61},"b":{"0":[0,1],"1":[1,0],"2":[1,0],"3":[1,0],"4":[1,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[7,0],"9":[1,60]},"inputSourceMap":{"version":3,"sources":["manager.js"],"names":["singleton","Symbol","singletonEnforcer","Manager","enforcer","_file","path","join","config","root","users","isActive","coreUtils","file","exist","JSON","parse","fs","readFileSync","_users","admin","User","operations","add","save","activate","user","id","mkdirp","sync","dirname","writeJsonSync","space","encoding","read","bdd","get","parseInt","i","len","length","email","resetPasswordToken","json","enable"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/","sourcesContent":["import fs from 'fs-extra'\nimport mkdirp from 'mkdirp'\nimport path from 'path'\n\nimport {config, coreUtils, User} from '../../cli'\n\nlet singleton = Symbol()\nlet singletonEnforcer = Symbol()\n\nclass Manager {\n  constructor(enforcer) {\n    if (enforcer != singletonEnforcer) throw 'Cannot construct Json singleton'\n\n    this._file = path.join(config.root, config.users.path)\n  }\n\n  static get instance() {\n    if (!this[singleton]) {\n      this[singleton] = new Manager(singletonEnforcer)\n    }\n    return this[singleton]\n  }\n\n  /** TODO MONGO */\n  read() {\n    if (this.isActive()) {\n      if (coreUtils.file.exist(this._file)) {\n        return JSON.parse(fs.readFileSync(this._file, 'utf8'))\n      } else {\n        this._users = []\n        var admin = User.operations.add(config.users.default)\n        this.save()\n        User.operations.activate(admin.user.id)\n        return JSON.parse(fs.readFileSync(this._file, 'utf8'))\n      }\n    }\n    return []\n  }\n\n  /** TODO MONGO */\n  save() {\n    if (this.isActive()) {\n      mkdirp.sync(path.dirname(this._file))\n      fs.writeJsonSync(this._file, this._users, {space: 2, encoding: 'utf-8'})\n    }\n  }\n\n  /**\n   * TODO MONGO\n   */\n  get() {\n    if (this._users == null) {\n      this._users = this.read()\n    }\n    return this._users\n  }\n\n  findById(id) {\n    var bdd = this.get()\n    id = parseInt(id)\n    for (var i = 0, len = bdd.length; i < len; i++) {\n      var user = bdd[i]\n      if (parseInt(user.id) === id) {\n        return user\n      }\n    }\n\n    return false\n  }\n\n  findByEmail(email) {\n    var bdd = this.get()\n    id = parseInt(id)\n    for (var i = 0, len = bdd.length; i < len; i++) {\n      var user = bdd[i]\n      if (user.email === email) {\n        return user\n      }\n    }\n\n    return false\n  }\n\n  findByResetPasswordToken(resetPasswordToken) {\n    var bdd = this.get()\n    id = parseInt(id)\n    for (var i = 0, len = bdd.length; i < len; i++) {\n      var user = bdd[i]\n      if (user.resetPasswordToken === resetPasswordToken) {\n        return user\n      }\n    }\n  \n    return false\n  }\n\n  /**\n   * TODO MONGO\n   * @param {*} json \n   */\n  update(json) {\n    if (this.isActive()) {\n      this._users = json\n      this.save()\n      return true\n    }\n\n    return false\n  }\n\n  isActive() {\n    return config.users.enable\n  }\n}\n\nexport default Manager\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"febebe56af8cd519b77f6b32f2b4694bcccd7b23","contentHash":"cbb3c92999c5b751ef00b0ba7f93ec0764fbf75d2971b6dd55156198fc8e11a3"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/operations.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/operations.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":18}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":32}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"4":{"start":{"line":9,"column":0},"end":{"line":9,"column":24}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":24}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":40}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":32}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":36}},"9":{"start":{"line":15,"column":11},"end":{"line":15,"column":31}},"10":{"start":{"line":22,"column":12},"end":{"line":22,"column":49}},"11":{"start":{"line":24,"column":2},"end":{"line":26,"column":3}},"12":{"start":{"line":25,"column":4},"end":{"line":25,"column":15}},"13":{"start":{"line":28,"column":18},"end":{"line":28,"column":57}},"14":{"start":{"line":30,"column":2},"end":{"line":32,"column":3}},"15":{"start":{"line":31,"column":4},"end":{"line":31,"column":21}},"16":{"start":{"line":34,"column":2},"end":{"line":34,"column":35}},"17":{"start":{"line":36,"column":12},"end":{"line":36,"column":44}},"18":{"start":{"line":38,"column":15},"end":{"line":38,"column":16}},"19":{"start":{"line":40,"column":2},"end":{"line":42,"column":3}},"20":{"start":{"line":40,"column":15},"end":{"line":40,"column":16}},"21":{"start":{"line":40,"column":24},"end":{"line":40,"column":34}},"22":{"start":{"line":41,"column":4},"end":{"line":41,"column":33}},"23":{"start":{"line":44,"column":2},"end":{"line":44,"column":26}},"24":{"start":{"line":45,"column":2},"end":{"line":45,"column":20}},"25":{"start":{"line":46,"column":2},"end":{"line":46,"column":81}},"26":{"start":{"line":48,"column":18},"end":{"line":48,"column":57}},"27":{"start":{"line":50,"column":2},"end":{"line":52,"column":3}},"28":{"start":{"line":51,"column":4},"end":{"line":51,"column":21}},"29":{"start":{"line":54,"column":2},"end":{"line":54,"column":75}},"30":{"start":{"line":55,"column":2},"end":{"line":55,"column":20}},"31":{"start":{"line":57,"column":2},"end":{"line":57,"column":41}},"32":{"start":{"line":59,"column":2},"end":{"line":62,"column":4}},"33":{"start":{"line":71,"column":12},"end":{"line":71,"column":44}},"34":{"start":{"line":73,"column":2},"end":{"line":73,"column":20}},"35":{"start":{"line":75,"column":2},"end":{"line":81,"column":3}},"36":{"start":{"line":75,"column":15},"end":{"line":75,"column":16}},"37":{"start":{"line":75,"column":24},"end":{"line":75,"column":34}},"38":{"start":{"line":76,"column":15},"end":{"line":76,"column":21}},"39":{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},"40":{"start":{"line":79,"column":6},"end":{"line":79,"column":23}},"41":{"start":{"line":83,"column":2},"end":{"line":83,"column":41}},"42":{"start":{"line":85,"column":2},"end":{"line":85,"column":13}},"43":{"start":{"line":89,"column":12},"end":{"line":89,"column":44}},"44":{"start":{"line":91,"column":2},"end":{"line":91,"column":20}},"45":{"start":{"line":93,"column":2},"end":{"line":99,"column":3}},"46":{"start":{"line":93,"column":15},"end":{"line":93,"column":16}},"47":{"start":{"line":93,"column":24},"end":{"line":93,"column":34}},"48":{"start":{"line":94,"column":15},"end":{"line":94,"column":21}},"49":{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},"50":{"start":{"line":97,"column":6},"end":{"line":97,"column":23}},"51":{"start":{"line":101,"column":2},"end":{"line":101,"column":41}},"52":{"start":{"line":103,"column":2},"end":{"line":103,"column":13}},"53":{"start":{"line":107,"column":12},"end":{"line":107,"column":44}},"54":{"start":{"line":109,"column":2},"end":{"line":109,"column":20}},"55":{"start":{"line":110,"column":15},"end":{"line":110,"column":17}},"56":{"start":{"line":112,"column":2},"end":{"line":118,"column":3}},"57":{"start":{"line":112,"column":15},"end":{"line":112,"column":16}},"58":{"start":{"line":112,"column":24},"end":{"line":112,"column":34}},"59":{"start":{"line":113,"column":15},"end":{"line":113,"column":21}},"60":{"start":{"line":115,"column":4},"end":{"line":117,"column":5}},"61":{"start":{"line":116,"column":6},"end":{"line":116,"column":24}},"62":{"start":{"line":120,"column":2},"end":{"line":120,"column":15}},"63":{"start":{"line":122,"column":2},"end":{"line":122,"column":41}},"64":{"start":{"line":124,"column":2},"end":{"line":124,"column":13}},"65":{"start":{"line":128,"column":12},"end":{"line":128,"column":46}},"66":{"start":{"line":130,"column":2},"end":{"line":132,"column":3}},"67":{"start":{"line":131,"column":4},"end":{"line":131,"column":15}},"68":{"start":{"line":134,"column":18},"end":{"line":134,"column":54}},"69":{"start":{"line":136,"column":2},"end":{"line":138,"column":3}},"70":{"start":{"line":137,"column":4},"end":{"line":137,"column":21}},"71":{"start":{"line":140,"column":2},"end":{"line":140,"column":32}},"72":{"start":{"line":142,"column":12},"end":{"line":142,"column":44}},"73":{"start":{"line":144,"column":11},"end":{"line":144,"column":28}},"74":{"start":{"line":146,"column":2},"end":{"line":154,"column":3}},"75":{"start":{"line":146,"column":15},"end":{"line":146,"column":16}},"76":{"start":{"line":146,"column":24},"end":{"line":146,"column":34}},"77":{"start":{"line":147,"column":15},"end":{"line":147,"column":21}},"78":{"start":{"line":149,"column":4},"end":{"line":153,"column":5}},"79":{"start":{"line":150,"column":6},"end":{"line":152,"column":9}},"80":{"start":{"line":151,"column":8},"end":{"line":151,"column":30}},"81":{"start":{"line":156,"column":2},"end":{"line":156,"column":47}},"82":{"start":{"line":157,"column":2},"end":{"line":160,"column":4}},"83":{"start":{"line":164,"column":18},"end":{"line":164,"column":54}},"84":{"start":{"line":166,"column":2},"end":{"line":168,"column":3}},"85":{"start":{"line":167,"column":4},"end":{"line":167,"column":21}},"86":{"start":{"line":170,"column":12},"end":{"line":170,"column":44}},"87":{"start":{"line":172,"column":11},"end":{"line":172,"column":28}},"88":{"start":{"line":174,"column":2},"end":{"line":180,"column":3}},"89":{"start":{"line":174,"column":15},"end":{"line":174,"column":16}},"90":{"start":{"line":174,"column":24},"end":{"line":174,"column":34}},"91":{"start":{"line":175,"column":15},"end":{"line":175,"column":21}},"92":{"start":{"line":177,"column":4},"end":{"line":179,"column":5}},"93":{"start":{"line":178,"column":6},"end":{"line":178,"column":68}},"94":{"start":{"line":182,"column":2},"end":{"line":182,"column":47}},"95":{"start":{"line":183,"column":2},"end":{"line":186,"column":4}},"96":{"start":{"line":190,"column":12},"end":{"line":190,"column":44}},"97":{"start":{"line":192,"column":2},"end":{"line":192,"column":20}},"98":{"start":{"line":194,"column":2},"end":{"line":202,"column":3}},"99":{"start":{"line":194,"column":15},"end":{"line":194,"column":16}},"100":{"start":{"line":194,"column":24},"end":{"line":194,"column":34}},"101":{"start":{"line":195,"column":15},"end":{"line":195,"column":21}},"102":{"start":{"line":197,"column":4},"end":{"line":201,"column":5}},"103":{"start":{"line":198,"column":26},"end":{"line":198,"column":52}},"104":{"start":{"line":199,"column":6},"end":{"line":199,"column":31}},"105":{"start":{"line":200,"column":6},"end":{"line":200,"column":43}},"106":{"start":{"line":204,"column":2},"end":{"line":204,"column":41}},"107":{"start":{"line":206,"column":2},"end":{"line":206,"column":13}},"108":{"start":{"line":210,"column":12},"end":{"line":210,"column":44}},"109":{"start":{"line":212,"column":2},"end":{"line":212,"column":20}},"110":{"start":{"line":214,"column":2},"end":{"line":226,"column":3}},"111":{"start":{"line":214,"column":15},"end":{"line":214,"column":16}},"112":{"start":{"line":214,"column":24},"end":{"line":214,"column":34}},"113":{"start":{"line":215,"column":15},"end":{"line":215,"column":21}},"114":{"start":{"line":217,"column":4},"end":{"line":225,"column":5}},"115":{"start":{"line":218,"column":26},"end":{"line":218,"column":52}},"116":{"start":{"line":219,"column":6},"end":{"line":223,"column":9}},"117":{"start":{"line":220,"column":8},"end":{"line":222,"column":9}},"118":{"start":{"line":221,"column":10},"end":{"line":221,"column":41}},"119":{"start":{"line":224,"column":6},"end":{"line":224,"column":43}},"120":{"start":{"line":228,"column":2},"end":{"line":228,"column":41}},"121":{"start":{"line":230,"column":2},"end":{"line":230,"column":13}}},"fnMap":{"0":{"name":"add","decl":{"start":{"line":21,"column":9},"end":{"line":21,"column":12}},"loc":{"start":{"line":21,"column":22},"end":{"line":63,"column":1}},"line":21},"1":{"name":"deactivate","decl":{"start":{"line":70,"column":9},"end":{"line":70,"column":19}},"loc":{"start":{"line":70,"column":24},"end":{"line":86,"column":1}},"line":70},"2":{"name":"activate","decl":{"start":{"line":88,"column":9},"end":{"line":88,"column":17}},"loc":{"start":{"line":88,"column":22},"end":{"line":104,"column":1}},"line":88},"3":{"name":"remove","decl":{"start":{"line":106,"column":9},"end":{"line":106,"column":15}},"loc":{"start":{"line":106,"column":20},"end":{"line":125,"column":1}},"line":106},"4":{"name":"update","decl":{"start":{"line":127,"column":9},"end":{"line":127,"column":15}},"loc":{"start":{"line":127,"column":22},"end":{"line":161,"column":1}},"line":127},"5":{"name":"(anonymous_5)","decl":{"start":{"line":150,"column":54},"end":{"line":150,"column":55}},"loc":{"start":{"line":150,"column":69},"end":{"line":152,"column":7}},"line":150},"6":{"name":"updatePassword","decl":{"start":{"line":163,"column":9},"end":{"line":163,"column":23}},"loc":{"start":{"line":163,"column":40},"end":{"line":187,"column":1}},"line":163},"7":{"name":"saveSearch","decl":{"start":{"line":189,"column":9},"end":{"line":189,"column":19}},"loc":{"start":{"line":189,"column":30},"end":{"line":207,"column":1}},"line":189},"8":{"name":"removeSearch","decl":{"start":{"line":209,"column":9},"end":{"line":209,"column":21}},"loc":{"start":{"line":209,"column":32},"end":{"line":231,"column":1}},"line":209},"9":{"name":"(anonymous_9)","decl":{"start":{"line":219,"column":28},"end":{"line":219,"column":29}},"loc":{"start":{"line":219,"column":53},"end":{"line":223,"column":7}},"line":219}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":2},"end":{"line":26,"column":3}},"type":"if","locations":[{"start":{"line":24,"column":2},"end":{"line":26,"column":3}},{"start":{"line":24,"column":2},"end":{"line":26,"column":3}}],"line":24},"1":{"loc":{"start":{"line":30,"column":2},"end":{"line":32,"column":3}},"type":"if","locations":[{"start":{"line":30,"column":2},"end":{"line":32,"column":3}},{"start":{"line":30,"column":2},"end":{"line":32,"column":3}}],"line":30},"2":{"loc":{"start":{"line":50,"column":2},"end":{"line":52,"column":3}},"type":"if","locations":[{"start":{"line":50,"column":2},"end":{"line":52,"column":3}},{"start":{"line":50,"column":2},"end":{"line":52,"column":3}}],"line":50},"3":{"loc":{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},{"start":{"line":78,"column":4},"end":{"line":80,"column":5}}],"line":78},"4":{"loc":{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},{"start":{"line":96,"column":4},"end":{"line":98,"column":5}}],"line":96},"5":{"loc":{"start":{"line":115,"column":4},"end":{"line":117,"column":5}},"type":"if","locations":[{"start":{"line":115,"column":4},"end":{"line":117,"column":5}},{"start":{"line":115,"column":4},"end":{"line":117,"column":5}}],"line":115},"6":{"loc":{"start":{"line":130,"column":2},"end":{"line":132,"column":3}},"type":"if","locations":[{"start":{"line":130,"column":2},"end":{"line":132,"column":3}},{"start":{"line":130,"column":2},"end":{"line":132,"column":3}}],"line":130},"7":{"loc":{"start":{"line":136,"column":2},"end":{"line":138,"column":3}},"type":"if","locations":[{"start":{"line":136,"column":2},"end":{"line":138,"column":3}},{"start":{"line":136,"column":2},"end":{"line":138,"column":3}}],"line":136},"8":{"loc":{"start":{"line":149,"column":4},"end":{"line":153,"column":5}},"type":"if","locations":[{"start":{"line":149,"column":4},"end":{"line":153,"column":5}},{"start":{"line":149,"column":4},"end":{"line":153,"column":5}}],"line":149},"9":{"loc":{"start":{"line":166,"column":2},"end":{"line":168,"column":3}},"type":"if","locations":[{"start":{"line":166,"column":2},"end":{"line":168,"column":3}},{"start":{"line":166,"column":2},"end":{"line":168,"column":3}}],"line":166},"10":{"loc":{"start":{"line":177,"column":4},"end":{"line":179,"column":5}},"type":"if","locations":[{"start":{"line":177,"column":4},"end":{"line":179,"column":5}},{"start":{"line":177,"column":4},"end":{"line":179,"column":5}}],"line":177},"11":{"loc":{"start":{"line":197,"column":4},"end":{"line":201,"column":5}},"type":"if","locations":[{"start":{"line":197,"column":4},"end":{"line":201,"column":5}},{"start":{"line":197,"column":4},"end":{"line":201,"column":5}}],"line":197},"12":{"loc":{"start":{"line":198,"column":26},"end":{"line":198,"column":52}},"type":"binary-expr","locations":[{"start":{"line":198,"column":26},"end":{"line":198,"column":46}},{"start":{"line":198,"column":50},"end":{"line":198,"column":52}}],"line":198},"13":{"loc":{"start":{"line":217,"column":4},"end":{"line":225,"column":5}},"type":"if","locations":[{"start":{"line":217,"column":4},"end":{"line":225,"column":5}},{"start":{"line":217,"column":4},"end":{"line":225,"column":5}}],"line":217},"14":{"loc":{"start":{"line":218,"column":26},"end":{"line":218,"column":52}},"type":"binary-expr","locations":[{"start":{"line":218,"column":26},"end":{"line":218,"column":46}},{"start":{"line":218,"column":50},"end":{"line":218,"column":52}}],"line":218},"15":{"loc":{"start":{"line":220,"column":8},"end":{"line":222,"column":9}},"type":"if","locations":[{"start":{"line":220,"column":8},"end":{"line":222,"column":9}},{"start":{"line":220,"column":8},"end":{"line":222,"column":9}}],"line":220}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":1,"14":1,"15":0,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":0,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":0,"62":1,"63":1,"64":1,"65":1,"66":1,"67":0,"68":1,"69":1,"70":0,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":0,"80":0,"81":1,"82":1,"83":1,"84":1,"85":0,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0},"b":{"0":[0,1],"1":[0,1],"2":[0,1],"3":[1,0],"4":[1,0],"5":[0,1],"6":[0,1],"7":[0,1],"8":[0,1],"9":[0,1],"10":[1,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"inputSourceMap":{"version":3,"sources":["operations.js"],"names":["add","newUser","xss","coreUtils","text","checkXss","success","sameEmail","User","utils","checkSameEmail","getRole","bdd","manager","instance","get","lastId","i","len","length","parseInt","id","actif","avatar","getGravatarImage","email","cPassword","commonPassword","password","encryptPassword","push","update","user","deactivate","activate","remove","newBdd","data","Array","prototype","forEach","call","Object","keys","key","updatePassword","saveSearch","savedSearches","removeSearch","search","index","title","splice"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/","sourcesContent":["import {coreUtils, User} from '../../cli'\n\n/**\n * TODO MONGO\n * @param {*} newUser \n */\nexport function add(newUser) {\n  var xss = coreUtils.text.checkXss(newUser)\n  if (xss.success === 0) {\n    return xss\n  }\n  var sameEmail = User.utils.checkSameEmail(newUser)\n  if (sameEmail.success === 0) {\n    return sameEmail\n  }\n\n  User.utils.getRole(newUser)\n  var bdd = User.manager.instance.get()\n  var lastId = 0\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    lastId = parseInt(bdd[i].id)\n  }\n  newUser.id = lastId + 1\n  newUser.actif = 0\n  newUser.avatar = User.utils.getGravatarImage(newUser.email, '.jpg?s=200')\n  var cPassword = User.utils.commonPassword(newUser)\n  if (cPassword.success === 0) {\n    return cPassword\n  }\n\n  newUser.password = User.utils.encryptPassword(10, newUser.password)\n  bdd.push(newUser)\n\n  User.manager.instance.update(bdd)\n\n  return {\n    success: 1,\n    user: newUser\n  }\n}\n\n/**\n * TODO MONGO\n * @param {*} id \n */\nexport function deactivate(id) {\n  var bdd = User.manager.instance.get()\n  id = parseInt(id)\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (parseInt(user.id) === id) {\n      bdd[i].actif = 0\n    }\n  }\n  User.manager.instance.update(bdd)\n  return bdd\n}\n\nexport function activate(id) {\n  var bdd = User.manager.instance.get()\n  id = parseInt(id)\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (parseInt(user.id) === id) {\n      bdd[i].actif = 1\n    }\n  }\n  User.manager.instance.update(bdd)\n  return bdd\n}\n\nexport function remove(id) {\n  var bdd = User.manager.instance.get()\n  id = parseInt(id)\n  var newBdd = []\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (parseInt(user.id) !== id) {\n      newBdd.push(user)\n    }\n  }\n  bdd = newBdd\n  User.manager.instance.update(bdd)\n  return bdd\n}\n\nexport function update(data) {\n  var xss = coreUtils.text.checkXss(data)\n  if (xss.success === 0) {\n    return xss\n  }\n  var sameEmail = User.utils.checkSameEmail(data)\n  if (sameEmail.success === 0) {\n    return sameEmail\n  }\n\n  User.utils.getRole(data)\n\n  var bdd = User.manager.instance.get()\n  var id = parseInt(data.id)\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (parseInt(user.id) === id) {\n      Array.prototype.forEach.call(Object.keys(data), function(key) {\n        user[key] = data[key]\n      })\n    }\n  }\n  bdd = User.manager.instance.update(bdd)\n\n  return {\n    success: 1,\n    user: data\n  }\n}\n\nexport function updatePassword(data, password) {\n  var cPassword = User.utils.commonPassword(data)\n  if (cPassword.success === 0) {\n    return cPassword\n  }\n\n  var bdd = User.manager.instance.get()\n  var id = parseInt(data.id)\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (parseInt(user.id) === id) {\n      user.password = User.utils.encryptPassword(10, password)\n    }\n  }\n\n  bdd = User.manager.instance.update(bdd)\n\n  return {\n    success: 1,\n    user: data\n  }\n}\n\nexport function saveSearch(id, data) {\n  var bdd = User.manager.instance.get()\n  id = parseInt(id)\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (parseInt(user.id) === id) {\n      var savedSearches = bdd[i].savedSearches || []\n      savedSearches.push(data)\n      bdd[i].savedSearches = savedSearches\n    }\n  }\n  User.manager.instance.update(bdd)\n  return bdd\n}\n\nexport function removeSearch(id, data) {\n  var bdd = User.manager.instance.get()\n\n  id = parseInt(id)\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (parseInt(user.id) === id) {\n      var savedSearches = bdd[i].savedSearches || []\n      savedSearches.forEach(function(search, index) {\n        if (search.title === data.title) {\n          savedSearches.splice(index, 1);\n        }\n      })\n      bdd[i].savedSearches = savedSearches\n    }\n  }\n  User.manager.instance.update(bdd)\n  return bdd\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"42bad602699c45eeac9cacef33c7b1b4653c8498","contentHash":"fc237a8ed0867daac2aad8d37a65a1fed669f6779e022ecb658ec389cb24d6f4"},"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/utils.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/utils.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":40}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":26}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":40}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":42}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":38}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":28}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":20}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":40}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":34}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":60}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":26}},"13":{"start":{"line":19,"column":0},"end":{"line":19,"column":32}},"14":{"start":{"line":20,"column":0},"end":{"line":20,"column":46}},"15":{"start":{"line":21,"column":0},"end":{"line":21,"column":56}},"16":{"start":{"line":22,"column":0},"end":{"line":22,"column":50}},"17":{"start":{"line":23,"column":0},"end":{"line":23,"column":48}},"18":{"start":{"line":24,"column":0},"end":{"line":24,"column":52}},"19":{"start":{"line":25,"column":0},"end":{"line":25,"column":24}},"20":{"start":{"line":26,"column":0},"end":{"line":26,"column":42}},"21":{"start":{"line":27,"column":0},"end":{"line":27,"column":38}},"22":{"start":{"line":28,"column":0},"end":{"line":28,"column":44}},"23":{"start":{"line":29,"column":0},"end":{"line":29,"column":34}},"24":{"start":{"line":30,"column":0},"end":{"line":30,"column":34}},"25":{"start":{"line":32,"column":13},"end":{"line":32,"column":53}},"26":{"start":{"line":34,"column":12},"end":{"line":34,"column":51}},"27":{"start":{"line":36,"column":15},"end":{"line":36,"column":58}},"28":{"start":{"line":38,"column":19},"end":{"line":38,"column":65}},"29":{"start":{"line":40,"column":33},"end":{"line":40,"column":96}},"30":{"start":{"line":42,"column":20},"end":{"line":42,"column":68}},"31":{"start":{"line":44,"column":15},"end":{"line":44,"column":57}},"32":{"start":{"line":46,"column":17},"end":{"line":46,"column":62}},"33":{"start":{"line":48,"column":11},"end":{"line":48,"column":31}},"34":{"start":{"line":51,"column":25},"end":{"line":51,"column":30}},"35":{"start":{"line":53,"column":12},"end":{"line":53,"column":44}},"36":{"start":{"line":55,"column":2},"end":{"line":61,"column":3}},"37":{"start":{"line":55,"column":15},"end":{"line":55,"column":16}},"38":{"start":{"line":55,"column":24},"end":{"line":55,"column":34}},"39":{"start":{"line":56,"column":15},"end":{"line":56,"column":21}},"40":{"start":{"line":58,"column":4},"end":{"line":60,"column":5}},"41":{"start":{"line":59,"column":6},"end":{"line":59,"column":30}},"42":{"start":{"line":63,"column":2},"end":{"line":72,"column":3}},"43":{"start":{"line":64,"column":4},"end":{"line":67,"column":6}},"44":{"start":{"line":69,"column":4},"end":{"line":71,"column":6}},"45":{"start":{"line":76,"column":14},"end":{"line":76,"column":37}},"46":{"start":{"line":77,"column":2},"end":{"line":81,"column":5}},"47":{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},"48":{"start":{"line":79,"column":6},"end":{"line":79,"column":23}},"49":{"start":{"line":82,"column":2},"end":{"line":82,"column":14}},"50":{"start":{"line":86,"column":20},"end":{"line":86,"column":43}},"51":{"start":{"line":88,"column":2},"end":{"line":88,"column":60}},"52":{"start":{"line":90,"column":19},"end":{"line":90,"column":131}},"53":{"start":{"line":91,"column":19},"end":{"line":91,"column":131}},"54":{"start":{"line":92,"column":27},"end":{"line":92,"column":63}},"55":{"start":{"line":94,"column":2},"end":{"line":98,"column":5}},"56":{"start":{"line":95,"column":4},"end":{"line":97,"column":5}},"57":{"start":{"line":96,"column":6},"end":{"line":96,"column":48}},"58":{"start":{"line":100,"column":24},"end":{"line":100,"column":37}},"59":{"start":{"line":102,"column":2},"end":{"line":115,"column":5}},"60":{"start":{"line":103,"column":19},"end":{"line":103,"column":34}},"61":{"start":{"line":104,"column":21},"end":{"line":104,"column":31}},"62":{"start":{"line":106,"column":4},"end":{"line":114,"column":5}},"63":{"start":{"line":107,"column":6},"end":{"line":109,"column":7}},"64":{"start":{"line":108,"column":8},"end":{"line":108,"column":58}},"65":{"start":{"line":111,"column":6},"end":{"line":113,"column":7}},"66":{"start":{"line":112,"column":8},"end":{"line":112,"column":77}},"67":{"start":{"line":117,"column":12},"end":{"line":117,"column":69}},"68":{"start":{"line":119,"column":2},"end":{"line":132,"column":3}},"69":{"start":{"line":120,"column":18},"end":{"line":120,"column":20}},"70":{"start":{"line":121,"column":4},"end":{"line":123,"column":7}},"71":{"start":{"line":122,"column":6},"end":{"line":122,"column":34}},"72":{"start":{"line":124,"column":4},"end":{"line":127,"column":6}},"73":{"start":{"line":129,"column":4},"end":{"line":131,"column":6}},"74":{"start":{"line":136,"column":13},"end":{"line":136,"column":55}},"75":{"start":{"line":138,"column":2},"end":{"line":138,"column":59}},"76":{"start":{"line":142,"column":15},"end":{"line":142,"column":39}},"77":{"start":{"line":143,"column":18},"end":{"line":143,"column":20}},"78":{"start":{"line":144,"column":2},"end":{"line":148,"column":5}},"79":{"start":{"line":145,"column":4},"end":{"line":147,"column":5}},"80":{"start":{"line":146,"column":6},"end":{"line":146,"column":31}},"81":{"start":{"line":149,"column":2},"end":{"line":149,"column":19}},"82":{"start":{"line":153,"column":12},"end":{"line":153,"column":44}},"83":{"start":{"line":155,"column":2},"end":{"line":161,"column":3}},"84":{"start":{"line":155,"column":15},"end":{"line":155,"column":16}},"85":{"start":{"line":155,"column":24},"end":{"line":155,"column":34}},"86":{"start":{"line":156,"column":15},"end":{"line":156,"column":21}},"87":{"start":{"line":158,"column":4},"end":{"line":160,"column":5}},"88":{"start":{"line":159,"column":6},"end":{"line":159,"column":18}},"89":{"start":{"line":163,"column":2},"end":{"line":163,"column":14}},"90":{"start":{"line":167,"column":12},"end":{"line":167,"column":44}},"91":{"start":{"line":169,"column":2},"end":{"line":175,"column":3}},"92":{"start":{"line":169,"column":15},"end":{"line":169,"column":16}},"93":{"start":{"line":169,"column":24},"end":{"line":169,"column":34}},"94":{"start":{"line":170,"column":15},"end":{"line":170,"column":21}},"95":{"start":{"line":172,"column":4},"end":{"line":174,"column":5}},"96":{"start":{"line":173,"column":6},"end":{"line":173,"column":30}},"97":{"start":{"line":177,"column":2},"end":{"line":177,"column":26}},"98":{"start":{"line":181,"column":12},"end":{"line":181,"column":44}},"99":{"start":{"line":183,"column":2},"end":{"line":189,"column":3}},"100":{"start":{"line":183,"column":15},"end":{"line":183,"column":16}},"101":{"start":{"line":183,"column":24},"end":{"line":183,"column":34}},"102":{"start":{"line":184,"column":15},"end":{"line":184,"column":21}},"103":{"start":{"line":186,"column":4},"end":{"line":188,"column":5}},"104":{"start":{"line":187,"column":6},"end":{"line":187,"column":30}},"105":{"start":{"line":191,"column":2},"end":{"line":191,"column":26}},"106":{"start":{"line":195,"column":13},"end":{"line":195,"column":58}},"107":{"start":{"line":197,"column":2},"end":{"line":199,"column":3}},"108":{"start":{"line":198,"column":4},"end":{"line":198,"column":28}},"109":{"start":{"line":201,"column":2},"end":{"line":201,"column":26}},"110":{"start":{"line":205,"column":13},"end":{"line":205,"column":78}},"111":{"start":{"line":207,"column":2},"end":{"line":209,"column":3}},"112":{"start":{"line":208,"column":4},"end":{"line":208,"column":28}},"113":{"start":{"line":211,"column":2},"end":{"line":211,"column":26}},"114":{"start":{"line":215,"column":2},"end":{"line":219,"column":3}},"115":{"start":{"line":216,"column":4},"end":{"line":218,"column":5}},"116":{"start":{"line":217,"column":6},"end":{"line":217,"column":18}},"117":{"start":{"line":221,"column":2},"end":{"line":221,"column":15}},"118":{"start":{"line":225,"column":16},"end":{"line":225,"column":18}},"119":{"start":{"line":227,"column":14},"end":{"line":227,"column":158}},"120":{"start":{"line":229,"column":2},"end":{"line":234,"column":3}},"121":{"start":{"line":230,"column":4},"end":{"line":233,"column":20}},"122":{"start":{"line":231,"column":19},"end":{"line":231,"column":43}},"123":{"start":{"line":232,"column":6},"end":{"line":232,"column":60}},"124":{"start":{"line":236,"column":2},"end":{"line":236,"column":17}},"125":{"start":{"line":240,"column":2},"end":{"line":246,"column":3}},"126":{"start":{"line":241,"column":4},"end":{"line":241,"column":26}},"127":{"start":{"line":242,"column":9},"end":{"line":246,"column":3}},"128":{"start":{"line":243,"column":4},"end":{"line":243,"column":27}},"129":{"start":{"line":244,"column":9},"end":{"line":246,"column":3}},"130":{"start":{"line":245,"column":4},"end":{"line":245,"column":41}},"131":{"start":{"line":250,"column":2},"end":{"line":252,"column":3}},"132":{"start":{"line":251,"column":4},"end":{"line":251,"column":51}},"133":{"start":{"line":256,"column":16},"end":{"line":258,"column":4}},"134":{"start":{"line":259,"column":2},"end":{"line":259,"column":39}},"135":{"start":{"line":264,"column":2},"end":{"line":266,"column":3}},"136":{"start":{"line":265,"column":4},"end":{"line":265,"column":17}},"137":{"start":{"line":268,"column":2},"end":{"line":268,"column":14}},"138":{"start":{"line":272,"column":18},"end":{"line":272,"column":23}},"139":{"start":{"line":274,"column":2},"end":{"line":298,"column":3}},"140":{"start":{"line":275,"column":4},"end":{"line":277,"column":5}},"141":{"start":{"line":276,"column":6},"end":{"line":276,"column":18}},"142":{"start":{"line":279,"column":4},"end":{"line":281,"column":5}},"143":{"start":{"line":280,"column":6},"end":{"line":280,"column":23}},"144":{"start":{"line":283,"column":4},"end":{"line":295,"column":5}},"145":{"start":{"line":284,"column":19},"end":{"line":284,"column":43}},"146":{"start":{"line":286,"column":6},"end":{"line":294,"column":7}},"147":{"start":{"line":287,"column":8},"end":{"line":293,"column":11}},"148":{"start":{"line":288,"column":20},"end":{"line":288,"column":37}},"149":{"start":{"line":290,"column":10},"end":{"line":292,"column":11}},"150":{"start":{"line":291,"column":12},"end":{"line":291,"column":29}},"151":{"start":{"line":297,"column":4},"end":{"line":297,"column":21}},"152":{"start":{"line":300,"column":2},"end":{"line":300,"column":19}},"153":{"start":{"line":304,"column":2},"end":{"line":304,"column":42}},"154":{"start":{"line":308,"column":14},"end":{"line":308,"column":16}},"155":{"start":{"line":311,"column":4},"end":{"line":311,"column":38}},"156":{"start":{"line":312,"column":4},"end":{"line":315,"column":6}},"157":{"start":{"line":318,"column":2},"end":{"line":346,"column":3}},"158":{"start":{"line":319,"column":16},"end":{"line":319,"column":20}},"159":{"start":{"line":320,"column":4},"end":{"line":339,"column":7}},"160":{"start":{"line":321,"column":6},"end":{"line":324,"column":7}},"161":{"start":{"line":322,"column":8},"end":{"line":322,"column":50}},"162":{"start":{"line":323,"column":8},"end":{"line":323,"column":21}},"163":{"start":{"line":326,"column":6},"end":{"line":338,"column":7}},"164":{"start":{"line":327,"column":8},"end":{"line":327,"column":21}},"165":{"start":{"line":329,"column":8},"end":{"line":331,"column":9}},"166":{"start":{"line":330,"column":10},"end":{"line":330,"column":56}},"167":{"start":{"line":333,"column":8},"end":{"line":337,"column":9}},"168":{"start":{"line":334,"column":10},"end":{"line":334,"column":55}},"169":{"start":{"line":336,"column":10},"end":{"line":336,"column":52}},"170":{"start":{"line":341,"column":4},"end":{"line":343,"column":5}},"171":{"start":{"line":342,"column":6},"end":{"line":342,"column":55}},"172":{"start":{"line":345,"column":4},"end":{"line":345,"column":91}},"173":{"start":{"line":348,"column":2},"end":{"line":348,"column":15}},"174":{"start":{"line":352,"column":10},"end":{"line":382,"column":4}},"175":{"start":{"line":353,"column":19},"end":{"line":353,"column":24}},"176":{"start":{"line":355,"column":4},"end":{"line":381,"column":5}},"177":{"start":{"line":356,"column":26},"end":{"line":356,"column":51}},"178":{"start":{"line":358,"column":19},"end":{"line":358,"column":51}},"179":{"start":{"line":360,"column":6},"end":{"line":365,"column":9}},"180":{"start":{"line":361,"column":8},"end":{"line":364,"column":9}},"181":{"start":{"line":362,"column":10},"end":{"line":362,"column":26}},"182":{"start":{"line":363,"column":10},"end":{"line":363,"column":20}},"183":{"start":{"line":366,"column":18},"end":{"line":371,"column":8}},"184":{"start":{"line":372,"column":6},"end":{"line":378,"column":9}},"185":{"start":{"line":373,"column":8},"end":{"line":377,"column":9}},"186":{"start":{"line":374,"column":10},"end":{"line":374,"column":20}},"187":{"start":{"line":376,"column":10},"end":{"line":376,"column":25}},"188":{"start":{"line":380,"column":6},"end":{"line":380,"column":16}},"189":{"start":{"line":383,"column":2},"end":{"line":383,"column":11}},"190":{"start":{"line":394,"column":2},"end":{"line":394,"column":20}},"191":{"start":{"line":395,"column":17},"end":{"line":395,"column":45}},"192":{"start":{"line":396,"column":2},"end":{"line":396,"column":67}},"193":{"start":{"line":407,"column":23},"end":{"line":407,"column":95}},"194":{"start":{"line":409,"column":2},"end":{"line":415,"column":3}},"195":{"start":{"line":410,"column":4},"end":{"line":414,"column":5}},"196":{"start":{"line":411,"column":20},"end":{"line":411,"column":103}},"197":{"start":{"line":413,"column":6},"end":{"line":413,"column":21}},"198":{"start":{"line":417,"column":2},"end":{"line":417,"column":12}},"199":{"start":{"line":421,"column":23},"end":{"line":421,"column":95}},"200":{"start":{"line":423,"column":27},"end":{"line":423,"column":81}},"201":{"start":{"line":425,"column":16},"end":{"line":425,"column":29}},"202":{"start":{"line":426,"column":2},"end":{"line":426,"column":78}},"203":{"start":{"line":426,"column":62},"end":{"line":426,"column":78}},"204":{"start":{"line":427,"column":2},"end":{"line":427,"column":25}},"205":{"start":{"line":429,"column":2},"end":{"line":443,"column":3}},"206":{"start":{"line":430,"column":4},"end":{"line":442,"column":7}},"207":{"start":{"line":431,"column":6},"end":{"line":441,"column":7}},"208":{"start":{"line":432,"column":8},"end":{"line":436,"column":11}},"209":{"start":{"line":433,"column":10},"end":{"line":435,"column":13}},"210":{"start":{"line":434,"column":12},"end":{"line":434,"column":63}},"211":{"start":{"line":434,"column":21},"end":{"line":434,"column":63}},"212":{"start":{"line":438,"column":8},"end":{"line":440,"column":11}},"213":{"start":{"line":439,"column":10},"end":{"line":439,"column":61}},"214":{"start":{"line":439,"column":19},"end":{"line":439,"column":61}},"215":{"start":{"line":445,"column":2},"end":{"line":445,"column":17}}},"fnMap":{"0":{"name":"checkSameEmail","decl":{"start":{"line":50,"column":9},"end":{"line":50,"column":23}},"loc":{"start":{"line":50,"column":30},"end":{"line":73,"column":1}},"line":50},"1":{"name":"getRole","decl":{"start":{"line":75,"column":9},"end":{"line":75,"column":16}},"loc":{"start":{"line":75,"column":23},"end":{"line":83,"column":1}},"line":75},"2":{"name":"(anonymous_2)","decl":{"start":{"line":77,"column":38},"end":{"line":77,"column":39}},"loc":{"start":{"line":77,"column":54},"end":{"line":81,"column":3}},"line":77},"3":{"name":"commonPassword","decl":{"start":{"line":85,"column":9},"end":{"line":85,"column":23}},"loc":{"start":{"line":85,"column":30},"end":{"line":133,"column":1}},"line":85},"4":{"name":"(anonymous_4)","decl":{"start":{"line":94,"column":60},"end":{"line":94,"column":61}},"loc":{"start":{"line":94,"column":80},"end":{"line":98,"column":3}},"line":94},"5":{"name":"(anonymous_5)","decl":{"start":{"line":102,"column":60},"end":{"line":102,"column":61}},"loc":{"start":{"line":102,"column":80},"end":{"line":115,"column":3}},"line":102},"6":{"name":"(anonymous_6)","decl":{"start":{"line":121,"column":45},"end":{"line":121,"column":46}},"loc":{"start":{"line":121,"column":62},"end":{"line":123,"column":5}},"line":121},"7":{"name":"encryptPassword","decl":{"start":{"line":135,"column":9},"end":{"line":135,"column":24}},"loc":{"start":{"line":135,"column":41},"end":{"line":139,"column":1}},"line":135},"8":{"name":"getUserRoutes","decl":{"start":{"line":141,"column":9},"end":{"line":141,"column":22}},"loc":{"start":{"line":141,"column":33},"end":{"line":150,"column":1}},"line":141},"9":{"name":"(anonymous_9)","decl":{"start":{"line":144,"column":52},"end":{"line":144,"column":53}},"loc":{"start":{"line":144,"column":68},"end":{"line":148,"column":3}},"line":144},"10":{"name":"findSync","decl":{"start":{"line":152,"column":9},"end":{"line":152,"column":17}},"loc":{"start":{"line":152,"column":22},"end":{"line":164,"column":1}},"line":152},"11":{"name":"find","decl":{"start":{"line":166,"column":9},"end":{"line":166,"column":13}},"loc":{"start":{"line":166,"column":24},"end":{"line":178,"column":1}},"line":166},"12":{"name":"findByUsername","decl":{"start":{"line":180,"column":9},"end":{"line":180,"column":23}},"loc":{"start":{"line":180,"column":40},"end":{"line":192,"column":1}},"line":180},"13":{"name":"findByEmail","decl":{"start":{"line":194,"column":9},"end":{"line":194,"column":20}},"loc":{"start":{"line":194,"column":34},"end":{"line":202,"column":1}},"line":194},"14":{"name":"findByResetPasswordToken","decl":{"start":{"line":204,"column":9},"end":{"line":204,"column":33}},"loc":{"start":{"line":204,"column":60},"end":{"line":212,"column":1}},"line":204},"15":{"name":"isValid","decl":{"start":{"line":214,"column":9},"end":{"line":214,"column":16}},"loc":{"start":{"line":214,"column":33},"end":{"line":222,"column":1}},"line":214},"16":{"name":"decodeUser","decl":{"start":{"line":224,"column":9},"end":{"line":224,"column":19}},"loc":{"start":{"line":224,"column":30},"end":{"line":237,"column":1}},"line":224},"17":{"name":"getTokenFromQuery","decl":{"start":{"line":239,"column":9},"end":{"line":239,"column":26}},"loc":{"start":{"line":239,"column":37},"end":{"line":247,"column":1}},"line":239},"18":{"name":"getTokenFromAuthHeader","decl":{"start":{"line":249,"column":9},"end":{"line":249,"column":31}},"loc":{"start":{"line":249,"column":42},"end":{"line":253,"column":1}},"line":249},"19":{"name":"getTokenFromCookies","decl":{"start":{"line":255,"column":9},"end":{"line":255,"column":28}},"loc":{"start":{"line":255,"column":39},"end":{"line":260,"column":1}},"line":255},"20":{"name":"isAbeRestrictedUrl","decl":{"start":{"line":263,"column":9},"end":{"line":263,"column":27}},"loc":{"start":{"line":263,"column":42},"end":{"line":269,"column":1}},"line":263},"21":{"name":"isUserAllowedOnRoute","decl":{"start":{"line":271,"column":9},"end":{"line":271,"column":29}},"loc":{"start":{"line":271,"column":54},"end":{"line":301,"column":1}},"line":271},"22":{"name":"(anonymous_22)","decl":{"start":{"line":287,"column":55},"end":{"line":287,"column":56}},"loc":{"start":{"line":287,"column":72},"end":{"line":293,"column":9}},"line":287},"23":{"name":"getAll","decl":{"start":{"line":303,"column":9},"end":{"line":303,"column":15}},"loc":{"start":{"line":303,"column":18},"end":{"line":305,"column":1}},"line":303},"24":{"name":"getUserWorkflow","decl":{"start":{"line":307,"column":9},"end":{"line":307,"column":24}},"loc":{"start":{"line":307,"column":33},"end":{"line":349,"column":1}},"line":307},"25":{"name":"addFlow","decl":{"start":{"line":310,"column":11},"end":{"line":310,"column":18}},"loc":{"start":{"line":310,"column":39},"end":{"line":316,"column":3}},"line":310},"26":{"name":"(anonymous_26)","decl":{"start":{"line":320,"column":61},"end":{"line":320,"column":62}},"loc":{"start":{"line":320,"column":77},"end":{"line":339,"column":5}},"line":320},"27":{"name":"loginLimitTry","decl":{"start":{"line":351,"column":9},"end":{"line":351,"column":22}},"loc":{"start":{"line":351,"column":33},"end":{"line":384,"column":1}},"line":351},"28":{"name":"(anonymous_28)","decl":{"start":{"line":352,"column":22},"end":{"line":352,"column":23}},"loc":{"start":{"line":352,"column":41},"end":{"line":382,"column":3}},"line":352},"29":{"name":"(anonymous_29)","decl":{"start":{"line":360,"column":25},"end":{"line":360,"column":26}},"loc":{"start":{"line":360,"column":37},"end":{"line":365,"column":7}},"line":360},"30":{"name":"(anonymous_30)","decl":{"start":{"line":372,"column":16},"end":{"line":372,"column":17}},"loc":{"start":{"line":372,"column":38},"end":{"line":378,"column":7}},"line":372},"31":{"name":"getGravatarImage","decl":{"start":{"line":393,"column":9},"end":{"line":393,"column":25}},"loc":{"start":{"line":393,"column":39},"end":{"line":397,"column":1}},"line":393},"32":{"name":"getActivity","decl":{"start":{"line":406,"column":9},"end":{"line":406,"column":20}},"loc":{"start":{"line":406,"column":23},"end":{"line":418,"column":1}},"line":406},"33":{"name":"addActivity","decl":{"start":{"line":420,"column":9},"end":{"line":420,"column":20}},"loc":{"start":{"line":420,"column":31},"end":{"line":446,"column":1}},"line":420},"34":{"name":"(anonymous_34)","decl":{"start":{"line":430,"column":51},"end":{"line":430,"column":52}},"loc":{"start":{"line":430,"column":69},"end":{"line":442,"column":5}},"line":430},"35":{"name":"(anonymous_35)","decl":{"start":{"line":432,"column":73},"end":{"line":432,"column":74}},"loc":{"start":{"line":432,"column":85},"end":{"line":436,"column":9}},"line":432},"36":{"name":"(anonymous_36)","decl":{"start":{"line":433,"column":69},"end":{"line":433,"column":70}},"loc":{"start":{"line":433,"column":84},"end":{"line":435,"column":11}},"line":433},"37":{"name":"(anonymous_37)","decl":{"start":{"line":438,"column":67},"end":{"line":438,"column":68}},"loc":{"start":{"line":438,"column":82},"end":{"line":440,"column":9}},"line":438}},"branchMap":{"0":{"loc":{"start":{"line":58,"column":4},"end":{"line":60,"column":5}},"type":"if","locations":[{"start":{"line":58,"column":4},"end":{"line":60,"column":5}},{"start":{"line":58,"column":4},"end":{"line":60,"column":5}}],"line":58},"1":{"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":76}},"type":"binary-expr","locations":[{"start":{"line":58,"column":8},"end":{"line":58,"column":33}},{"start":{"line":58,"column":37},"end":{"line":58,"column":76}}],"line":58},"2":{"loc":{"start":{"line":63,"column":2},"end":{"line":72,"column":3}},"type":"if","locations":[{"start":{"line":63,"column":2},"end":{"line":72,"column":3}},{"start":{"line":63,"column":2},"end":{"line":72,"column":3}}],"line":63},"3":{"loc":{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},{"start":{"line":78,"column":4},"end":{"line":80,"column":5}}],"line":78},"4":{"loc":{"start":{"line":90,"column":19},"end":{"line":90,"column":131}},"type":"cond-expr","locations":[{"start":{"line":90,"column":102},"end":{"line":90,"column":124}},{"start":{"line":90,"column":127},"end":{"line":90,"column":131}}],"line":90},"5":{"loc":{"start":{"line":90,"column":19},"end":{"line":90,"column":99}},"type":"binary-expr","locations":[{"start":{"line":90,"column":19},"end":{"line":90,"column":64}},{"start":{"line":90,"column":68},"end":{"line":90,"column":99}}],"line":90},"6":{"loc":{"start":{"line":91,"column":19},"end":{"line":91,"column":131}},"type":"cond-expr","locations":[{"start":{"line":91,"column":102},"end":{"line":91,"column":124}},{"start":{"line":91,"column":127},"end":{"line":91,"column":131}}],"line":91},"7":{"loc":{"start":{"line":91,"column":19},"end":{"line":91,"column":99}},"type":"binary-expr","locations":[{"start":{"line":91,"column":19},"end":{"line":91,"column":64}},{"start":{"line":91,"column":68},"end":{"line":91,"column":99}}],"line":91},"8":{"loc":{"start":{"line":95,"column":4},"end":{"line":97,"column":5}},"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":97,"column":5}},{"start":{"line":95,"column":4},"end":{"line":97,"column":5}}],"line":95},"9":{"loc":{"start":{"line":95,"column":8},"end":{"line":95,"column":95}},"type":"binary-expr","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":18}},{"start":{"line":95,"column":22},"end":{"line":95,"column":95}}],"line":95},"10":{"loc":{"start":{"line":106,"column":4},"end":{"line":114,"column":5}},"type":"if","locations":[{"start":{"line":106,"column":4},"end":{"line":114,"column":5}},{"start":{"line":106,"column":4},"end":{"line":114,"column":5}}],"line":106},"11":{"loc":{"start":{"line":107,"column":6},"end":{"line":109,"column":7}},"type":"if","locations":[{"start":{"line":107,"column":6},"end":{"line":109,"column":7}},{"start":{"line":107,"column":6},"end":{"line":109,"column":7}}],"line":107},"12":{"loc":{"start":{"line":111,"column":6},"end":{"line":113,"column":7}},"type":"if","locations":[{"start":{"line":111,"column":6},"end":{"line":113,"column":7}},{"start":{"line":111,"column":6},"end":{"line":113,"column":7}}],"line":111},"13":{"loc":{"start":{"line":119,"column":2},"end":{"line":132,"column":3}},"type":"if","locations":[{"start":{"line":119,"column":2},"end":{"line":132,"column":3}},{"start":{"line":119,"column":2},"end":{"line":132,"column":3}}],"line":119},"14":{"loc":{"start":{"line":119,"column":6},"end":{"line":119,"column":87}},"type":"binary-expr","locations":[{"start":{"line":119,"column":6},"end":{"line":119,"column":39}},{"start":{"line":119,"column":43},"end":{"line":119,"column":62}},{"start":{"line":119,"column":66},"end":{"line":119,"column":87}}],"line":119},"15":{"loc":{"start":{"line":145,"column":4},"end":{"line":147,"column":5}},"type":"if","locations":[{"start":{"line":145,"column":4},"end":{"line":147,"column":5}},{"start":{"line":145,"column":4},"end":{"line":147,"column":5}}],"line":145},"16":{"loc":{"start":{"line":158,"column":4},"end":{"line":160,"column":5}},"type":"if","locations":[{"start":{"line":158,"column":4},"end":{"line":160,"column":5}},{"start":{"line":158,"column":4},"end":{"line":160,"column":5}}],"line":158},"17":{"loc":{"start":{"line":172,"column":4},"end":{"line":174,"column":5}},"type":"if","locations":[{"start":{"line":172,"column":4},"end":{"line":174,"column":5}},{"start":{"line":172,"column":4},"end":{"line":174,"column":5}}],"line":172},"18":{"loc":{"start":{"line":186,"column":4},"end":{"line":188,"column":5}},"type":"if","locations":[{"start":{"line":186,"column":4},"end":{"line":188,"column":5}},{"start":{"line":186,"column":4},"end":{"line":188,"column":5}}],"line":186},"19":{"loc":{"start":{"line":197,"column":2},"end":{"line":199,"column":3}},"type":"if","locations":[{"start":{"line":197,"column":2},"end":{"line":199,"column":3}},{"start":{"line":197,"column":2},"end":{"line":199,"column":3}}],"line":197},"20":{"loc":{"start":{"line":207,"column":2},"end":{"line":209,"column":3}},"type":"if","locations":[{"start":{"line":207,"column":2},"end":{"line":209,"column":3}},{"start":{"line":207,"column":2},"end":{"line":209,"column":3}}],"line":207},"21":{"loc":{"start":{"line":215,"column":2},"end":{"line":219,"column":3}},"type":"if","locations":[{"start":{"line":215,"column":2},"end":{"line":219,"column":3}},{"start":{"line":215,"column":2},"end":{"line":219,"column":3}}],"line":215},"22":{"loc":{"start":{"line":216,"column":4},"end":{"line":218,"column":5}},"type":"if","locations":[{"start":{"line":216,"column":4},"end":{"line":218,"column":5}},{"start":{"line":216,"column":4},"end":{"line":218,"column":5}}],"line":216},"23":{"loc":{"start":{"line":227,"column":14},"end":{"line":227,"column":158}},"type":"binary-expr","locations":[{"start":{"line":227,"column":14},"end":{"line":227,"column":57}},{"start":{"line":227,"column":61},"end":{"line":227,"column":106}},{"start":{"line":227,"column":110},"end":{"line":227,"column":158}}],"line":227},"24":{"loc":{"start":{"line":229,"column":2},"end":{"line":234,"column":3}},"type":"if","locations":[{"start":{"line":229,"column":2},"end":{"line":234,"column":3}},{"start":{"line":229,"column":2},"end":{"line":234,"column":3}}],"line":229},"25":{"loc":{"start":{"line":229,"column":6},"end":{"line":229,"column":68}},"type":"binary-expr","locations":[{"start":{"line":229,"column":6},"end":{"line":229,"column":34}},{"start":{"line":229,"column":38},"end":{"line":229,"column":52}},{"start":{"line":229,"column":56},"end":{"line":229,"column":68}}],"line":229},"26":{"loc":{"start":{"line":240,"column":2},"end":{"line":246,"column":3}},"type":"if","locations":[{"start":{"line":240,"column":2},"end":{"line":246,"column":3}},{"start":{"line":240,"column":2},"end":{"line":246,"column":3}}],"line":240},"27":{"loc":{"start":{"line":240,"column":6},"end":{"line":240,"column":32}},"type":"binary-expr","locations":[{"start":{"line":240,"column":6},"end":{"line":240,"column":14}},{"start":{"line":240,"column":18},"end":{"line":240,"column":32}}],"line":240},"28":{"loc":{"start":{"line":242,"column":9},"end":{"line":246,"column":3}},"type":"if","locations":[{"start":{"line":242,"column":9},"end":{"line":246,"column":3}},{"start":{"line":242,"column":9},"end":{"line":246,"column":3}}],"line":242},"29":{"loc":{"start":{"line":242,"column":13},"end":{"line":242,"column":41}},"type":"binary-expr","locations":[{"start":{"line":242,"column":13},"end":{"line":242,"column":22}},{"start":{"line":242,"column":26},"end":{"line":242,"column":41}}],"line":242},"30":{"loc":{"start":{"line":244,"column":9},"end":{"line":246,"column":3}},"type":"if","locations":[{"start":{"line":244,"column":9},"end":{"line":246,"column":3}},{"start":{"line":244,"column":9},"end":{"line":246,"column":3}}],"line":244},"31":{"loc":{"start":{"line":244,"column":13},"end":{"line":244,"column":57}},"type":"binary-expr","locations":[{"start":{"line":244,"column":13},"end":{"line":244,"column":24}},{"start":{"line":244,"column":28},"end":{"line":244,"column":57}}],"line":244},"32":{"loc":{"start":{"line":250,"column":2},"end":{"line":252,"column":3}},"type":"if","locations":[{"start":{"line":250,"column":2},"end":{"line":252,"column":3}},{"start":{"line":250,"column":2},"end":{"line":252,"column":3}}],"line":250},"33":{"loc":{"start":{"line":250,"column":6},"end":{"line":250,"column":102}},"type":"binary-expr","locations":[{"start":{"line":250,"column":6},"end":{"line":250,"column":17}},{"start":{"line":250,"column":21},"end":{"line":250,"column":46}},{"start":{"line":250,"column":50},"end":{"line":250,"column":102}}],"line":250},"34":{"loc":{"start":{"line":264,"column":2},"end":{"line":266,"column":3}},"type":"if","locations":[{"start":{"line":264,"column":2},"end":{"line":266,"column":3}},{"start":{"line":264,"column":2},"end":{"line":266,"column":3}}],"line":264},"35":{"loc":{"start":{"line":264,"column":6},"end":{"line":264,"column":233}},"type":"binary-expr","locations":[{"start":{"line":264,"column":6},"end":{"line":264,"column":52}},{"start":{"line":264,"column":56},"end":{"line":264,"column":101}},{"start":{"line":264,"column":105},"end":{"line":264,"column":150}},{"start":{"line":264,"column":154},"end":{"line":264,"column":193}},{"start":{"line":264,"column":197},"end":{"line":264,"column":233}}],"line":264},"36":{"loc":{"start":{"line":274,"column":2},"end":{"line":298,"column":3}},"type":"if","locations":[{"start":{"line":274,"column":2},"end":{"line":298,"column":3}},{"start":{"line":274,"column":2},"end":{"line":298,"column":3}}],"line":274},"37":{"loc":{"start":{"line":275,"column":4},"end":{"line":277,"column":5}},"type":"if","locations":[{"start":{"line":275,"column":4},"end":{"line":277,"column":5}},{"start":{"line":275,"column":4},"end":{"line":277,"column":5}}],"line":275},"38":{"loc":{"start":{"line":275,"column":8},"end":{"line":275,"column":135}},"type":"binary-expr","locations":[{"start":{"line":275,"column":8},"end":{"line":275,"column":54}},{"start":{"line":275,"column":58},"end":{"line":275,"column":103}},{"start":{"line":275,"column":107},"end":{"line":275,"column":135}}],"line":275},"39":{"loc":{"start":{"line":279,"column":4},"end":{"line":281,"column":5}},"type":"if","locations":[{"start":{"line":279,"column":4},"end":{"line":281,"column":5}},{"start":{"line":279,"column":4},"end":{"line":281,"column":5}}],"line":279},"40":{"loc":{"start":{"line":283,"column":4},"end":{"line":295,"column":5}},"type":"if","locations":[{"start":{"line":283,"column":4},"end":{"line":295,"column":5}},{"start":{"line":283,"column":4},"end":{"line":295,"column":5}}],"line":283},"41":{"loc":{"start":{"line":286,"column":6},"end":{"line":294,"column":7}},"type":"if","locations":[{"start":{"line":286,"column":6},"end":{"line":294,"column":7}},{"start":{"line":286,"column":6},"end":{"line":294,"column":7}}],"line":286},"42":{"loc":{"start":{"line":286,"column":10},"end":{"line":286,"column":78}},"type":"binary-expr","locations":[{"start":{"line":286,"column":10},"end":{"line":286,"column":49}},{"start":{"line":286,"column":53},"end":{"line":286,"column":78}}],"line":286},"43":{"loc":{"start":{"line":290,"column":10},"end":{"line":292,"column":11}},"type":"if","locations":[{"start":{"line":290,"column":10},"end":{"line":292,"column":11}},{"start":{"line":290,"column":10},"end":{"line":292,"column":11}}],"line":290},"44":{"loc":{"start":{"line":311,"column":11},"end":{"line":311,"column":37}},"type":"cond-expr","locations":[{"start":{"line":311,"column":26},"end":{"line":311,"column":30}},{"start":{"line":311,"column":33},"end":{"line":311,"column":37}}],"line":311},"45":{"loc":{"start":{"line":318,"column":2},"end":{"line":346,"column":3}},"type":"if","locations":[{"start":{"line":318,"column":2},"end":{"line":346,"column":3}},{"start":{"line":318,"column":2},"end":{"line":346,"column":3}}],"line":318},"46":{"loc":{"start":{"line":321,"column":6},"end":{"line":324,"column":7}},"type":"if","locations":[{"start":{"line":321,"column":6},"end":{"line":324,"column":7}},{"start":{"line":321,"column":6},"end":{"line":324,"column":7}}],"line":321},"47":{"loc":{"start":{"line":326,"column":6},"end":{"line":338,"column":7}},"type":"if","locations":[{"start":{"line":326,"column":6},"end":{"line":338,"column":7}},{"start":{"line":326,"column":6},"end":{"line":338,"column":7}}],"line":326},"48":{"loc":{"start":{"line":329,"column":8},"end":{"line":331,"column":9}},"type":"if","locations":[{"start":{"line":329,"column":8},"end":{"line":331,"column":9}},{"start":{"line":329,"column":8},"end":{"line":331,"column":9}}],"line":329},"49":{"loc":{"start":{"line":329,"column":12},"end":{"line":329,"column":48}},"type":"binary-expr","locations":[{"start":{"line":329,"column":12},"end":{"line":329,"column":27}},{"start":{"line":329,"column":31},"end":{"line":329,"column":48}}],"line":329},"50":{"loc":{"start":{"line":333,"column":8},"end":{"line":337,"column":9}},"type":"if","locations":[{"start":{"line":333,"column":8},"end":{"line":337,"column":9}},{"start":{"line":333,"column":8},"end":{"line":337,"column":9}}],"line":333},"51":{"loc":{"start":{"line":341,"column":4},"end":{"line":343,"column":5}},"type":"if","locations":[{"start":{"line":341,"column":4},"end":{"line":343,"column":5}},{"start":{"line":341,"column":4},"end":{"line":343,"column":5}}],"line":341},"52":{"loc":{"start":{"line":361,"column":8},"end":{"line":364,"column":9}},"type":"if","locations":[{"start":{"line":361,"column":8},"end":{"line":364,"column":9}},{"start":{"line":361,"column":8},"end":{"line":364,"column":9}}],"line":361},"53":{"loc":{"start":{"line":373,"column":8},"end":{"line":377,"column":9}},"type":"if","locations":[{"start":{"line":373,"column":8},"end":{"line":377,"column":9}},{"start":{"line":373,"column":8},"end":{"line":377,"column":9}}],"line":373},"54":{"loc":{"start":{"line":394,"column":9},"end":{"line":394,"column":19}},"type":"binary-expr","locations":[{"start":{"line":394,"column":9},"end":{"line":394,"column":13}},{"start":{"line":394,"column":17},"end":{"line":394,"column":19}}],"line":394},"55":{"loc":{"start":{"line":409,"column":2},"end":{"line":415,"column":3}},"type":"if","locations":[{"start":{"line":409,"column":2},"end":{"line":415,"column":3}},{"start":{"line":409,"column":2},"end":{"line":415,"column":3}}],"line":409},"56":{"loc":{"start":{"line":409,"column":6},"end":{"line":409,"column":67}},"type":"binary-expr","locations":[{"start":{"line":409,"column":6},"end":{"line":409,"column":30}},{"start":{"line":409,"column":34},"end":{"line":409,"column":67}}],"line":409},"57":{"loc":{"start":{"line":410,"column":4},"end":{"line":414,"column":5}},"type":"if","locations":[{"start":{"line":410,"column":4},"end":{"line":414,"column":5}},{"start":{"line":410,"column":4},"end":{"line":414,"column":5}}],"line":410},"58":{"loc":{"start":{"line":426,"column":2},"end":{"line":426,"column":78}},"type":"if","locations":[{"start":{"line":426,"column":2},"end":{"line":426,"column":78}},{"start":{"line":426,"column":2},"end":{"line":426,"column":78}}],"line":426},"59":{"loc":{"start":{"line":429,"column":2},"end":{"line":443,"column":3}},"type":"if","locations":[{"start":{"line":429,"column":2},"end":{"line":443,"column":3}},{"start":{"line":429,"column":2},"end":{"line":443,"column":3}}],"line":429},"60":{"loc":{"start":{"line":429,"column":6},"end":{"line":429,"column":67}},"type":"binary-expr","locations":[{"start":{"line":429,"column":6},"end":{"line":429,"column":30}},{"start":{"line":429,"column":34},"end":{"line":429,"column":67}}],"line":429},"61":{"loc":{"start":{"line":431,"column":6},"end":{"line":441,"column":7}},"type":"if","locations":[{"start":{"line":431,"column":6},"end":{"line":441,"column":7}},{"start":{"line":431,"column":6},"end":{"line":441,"column":7}}],"line":431},"62":{"loc":{"start":{"line":434,"column":12},"end":{"line":434,"column":63}},"type":"if","locations":[{"start":{"line":434,"column":12},"end":{"line":434,"column":63}},{"start":{"line":434,"column":12},"end":{"line":434,"column":63}}],"line":434},"63":{"loc":{"start":{"line":439,"column":10},"end":{"line":439,"column":61}},"type":"if","locations":[{"start":{"line":439,"column":10},"end":{"line":439,"column":61}},{"start":{"line":439,"column":10},"end":{"line":439,"column":61}}],"line":439}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":0,"45":1,"46":1,"47":1,"48":0,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":0,"65":1,"66":0,"67":1,"68":1,"69":1,"70":1,"71":5,"72":1,"73":0,"74":1,"75":1,"76":1,"77":1,"78":1,"79":2,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":0,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":1,"97":0,"98":1,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":1,"115":1,"116":1,"117":0,"118":1,"119":1,"120":1,"121":1,"122":1,"123":1,"124":1,"125":1,"126":0,"127":1,"128":0,"129":1,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":9,"139":9,"140":4,"141":0,"142":4,"143":0,"144":4,"145":4,"146":4,"147":4,"148":4,"149":4,"150":2,"151":5,"152":9,"153":1,"154":2,"155":4,"156":4,"157":2,"158":1,"159":1,"160":2,"161":1,"162":1,"163":2,"164":1,"165":1,"166":0,"167":1,"168":0,"169":1,"170":1,"171":0,"172":1,"173":2,"174":1,"175":1,"176":1,"177":1,"178":1,"179":1,"180":1,"181":1,"182":1,"183":1,"184":0,"185":0,"186":0,"187":0,"188":1,"189":1,"190":1,"191":1,"192":1,"193":22,"194":22,"195":4,"196":0,"197":0,"198":22,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":5,"7":1,"8":1,"9":2,"10":1,"11":1,"12":1,"13":0,"14":0,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":9,"22":4,"23":1,"24":2,"25":4,"26":2,"27":1,"28":1,"29":1,"30":0,"31":1,"32":22,"33":0,"34":0,"35":0,"36":0,"37":0},"b":{"0":[1,0],"1":[1,1],"2":[1,0],"3":[0,1],"4":[1,0],"5":[1,1],"6":[1,0],"7":[1,1],"8":[1,0],"9":[1,1],"10":[1,0],"11":[0,1],"12":[0,1],"13":[1,0],"14":[1,1,1],"15":[1,1],"16":[1,0],"17":[1,0],"18":[1,0],"19":[0,0],"20":[0,0],"21":[1,0],"22":[1,0],"23":[1,1,0],"24":[1,0],"25":[1,1,1],"26":[0,1],"27":[1,0],"28":[0,1],"29":[1,0],"30":[0,1],"31":[1,0],"32":[0,0],"33":[0,0,0],"34":[0,0],"35":[0,0,0,0,0],"36":[4,5],"37":[0,4],"38":[4,4,4],"39":[0,4],"40":[4,0],"41":[4,0],"42":[4,4],"43":[2,2],"44":[4,0],"45":[1,1],"46":[1,1],"47":[1,1],"48":[0,1],"49":[1,0],"50":[0,1],"51":[0,1],"52":[1,0],"53":[0,0],"54":[1,0],"55":[4,18],"56":[22,4],"57":[0,4],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0]},"inputSourceMap":{"version":3,"sources":["utils.js"],"names":["checkSameEmail","data","emailAlreadyUsed","bdd","User","manager","instance","get","i","len","length","user","email","parseInt","id","success","message","getRole","roles","config","users","Array","prototype","forEach","call","role","name","commonPassword","owaspConfig","owasp","sameAsUser","mostCommon","mostCommonPassword","tests","required","push","password","coreUtils","array","contains","toLowerCase","currentUserName","username","shouldTest","split","reverse","join","res","test","errors","error","encryptPassword","numb","salt","bcrypt","genSaltSync","hashSync","getUserRoutes","workflow","routes","userRoles","Object","keys","findSync","find","done","findByUsername","findByEmail","findByResetPasswordToken","resetPasswordToken","isValid","actif","compareSync","decodeUser","req","decoded","token","utils","getTokenFromQuery","getTokenFromCookies","getTokenFromAuthHeader","secret","jwt","decode","err","body","query","headers","authorization","cookies","Cookies","secure","cookie","isAbeRestrictedUrl","currentRoute","indexOf","isUserAllowedOnRoute","isAllowed","enable","route","reg","RegExp","getAll","getUserWorkflow","status","flows","addFlow","flow","type","action","url","found","loginLimitTry","p","Promise","resolve","isNexted","limiterConfig","limiter","client","redis","createClient","on","limit","Limiter","db","duration","max","e","getGravatarImage","args","BASE_URL","text","md5","trim","getActivity","pathToActivity","path","root","activity","active","fse","existsSync","acArray","file","getJson","addActivity","pathToActivityFile","history","shift","exists","mkdir","writeJson","console","log"],"mappings":"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","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/cli/users/","sourcesContent":["import redis from 'redis'\nimport path from 'path'\nimport fse from 'fs-extra'\nimport Limiter from 'ratelimiter'\nimport owasp from 'owasp-password-strength-test'\nimport bcrypt from 'bcrypt-nodejs'\nimport Cookies from 'cookies'\nimport jwt from 'jwt-simple'\n\nimport {User, config, coreUtils} from '../../cli'\n\nexport function checkSameEmail(data) {\n  var emailAlreadyUsed = false\n  var bdd = User.manager.instance.get()\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (user.email === data.email && parseInt(user.id) !== parseInt(data.id)) {\n      emailAlreadyUsed = true\n    }\n  }\n\n  if (emailAlreadyUsed === true) {\n    return {\n      success: 0,\n      message: 'Email adress already exist'\n    }\n  } else {\n    return {\n      success: 1\n    }\n  }\n}\n\nexport function getRole(data) {\n  var roles = config.users.roles\n  Array.prototype.forEach.call(roles, role => {\n    if (role.name === data.role) {\n      data.role = role\n    }\n  })\n\n  return data\n}\n\nexport function commonPassword(data) {\n  var owaspConfig = config.users.owasp\n  owasp.config(owaspConfig)\n  var sameAsUser =\n    typeof owaspConfig.sameAsUser !== 'undefined' &&\n    owaspConfig.sameAsUser !== null\n      ? owaspConfig.sameAsUser\n      : true\n  var mostCommon =\n    typeof owaspConfig.mostCommon !== 'undefined' &&\n    owaspConfig.mostCommon !== null\n      ? owaspConfig.mostCommon\n      : true\n  var mostCommonPassword = config.users.mostCommonPassword\n  owasp.tests.required.push(function(password) {\n    if (\n      mostCommon &&\n      coreUtils.array.contains(mostCommonPassword, password.toLowerCase())\n    ) {\n      return 'the password used is too common.'\n    }\n  })\n\n  var currentUserName = data.username\n  owasp.tests.required.push(function(password) {\n    var username = currentUserName\n    var shouldTest = sameAsUser\n\n    if (shouldTest) {\n      if (password.toLowerCase() === username.toLowerCase()) {\n        return 'username and password must be different.'\n      }\n      if (\n        password.toLowerCase() ===\n        username.toLowerCase().split('').reverse().join('')\n      ) {\n        return 'username and password must be different, not just inverted.'\n      }\n    }\n  })\n\n  var res = owasp.test(data.password)\n\n  if (\n    typeof res.errors !== 'undefined' &&\n    res.errors !== null &&\n    res.errors.length > 0\n  ) {\n    var message = ''\n    Array.prototype.forEach.call(res.errors, error => {\n      message += error + '<br />'\n    })\n    return {\n      success: 0,\n      message: message\n    }\n  } else {\n    return {\n      success: 1\n    }\n  }\n}\n\nexport function encryptPassword(numb, password) {\n  var salt = bcrypt.genSaltSync(numb)\n  return bcrypt.hashSync(password, salt)\n}\n\nexport function getUserRoutes(workflow) {\n  var routes = config.users.routes\n  var userRoles = []\n  Array.prototype.forEach.call(Object.keys(routes), role => {\n    if (role === workflow) {\n      userRoles = routes[role]\n    }\n  })\n\n  return userRoles\n}\n\nexport function findSync(id) {\n  var bdd = User.manager.instance.get()\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (parseInt(user.id) === parseInt(id)) {\n      return user\n    }\n  }\n  return null\n}\n\nexport function find(id, done) {\n  var bdd = User.manager.instance.get()\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (parseInt(user.id) === parseInt(id)) {\n      return done(null, user)\n    }\n  }\n  return done(null, null)\n}\n\nexport function findByUsername(username, done) {\n  var bdd = User.manager.instance.get()\n  for (var i = 0, len = bdd.length; i < len; i++) {\n    var user = bdd[i]\n    if (user.username === username) {\n      return done(null, user)\n    }\n  }\n  return done(null, null)\n}\n\n\nexport function findByEmail(email, done) {\n  var user = User.manager.instance.findByEmail(email)\n  \n  if (user) {\n    return done(null, user)\n  }\n  \n  return done(null, null)\n}\n\nexport function findByResetPasswordToken(resetPasswordToken, done) {\n  var user = User.manager.instance.resetPasswordToken(resetPasswordToken)\n    \n  if (user) {\n    return done(null, user)\n  }\n  \n  return done(null, null)\n}\n\nexport function isValid(user, password) {\n  if (user.actif === 1) {\n    if (bcrypt.compareSync(password, user.password)) {\n      return true\n    }\n  }\n  return false\n}\n\nexport function decodeUser(req, res) {\n  var decoded = {}\n  var token =\n    User.utils.getTokenFromQuery(req, res) ||\n    User.utils.getTokenFromCookies(req, res) ||\n    User.utils.getTokenFromAuthHeader(req, res)\n\n  if (typeof token !== 'undefined' && token !== null && token !== '') {\n    try {\n      var secret = config.users.secret\n      decoded = jwt.decode(token, secret)\n    } catch (err) {}\n  }\n\n  return decoded\n}\n\nexport function getTokenFromQuery(req, res) {\n  if (req.body && req.body.token) {\n    return req.body.token\n  } else if (req.query && req.query.token) {\n    return req.query.token\n  } else if (req.headers && req.headers['x-access-token']) {\n    return req.headers['x-access-token']\n  }\n}\n\nexport function getTokenFromAuthHeader(req, res) {\n  if (\n    req.headers &&\n    req.headers.authorization &&\n    req.headers.authorization.split(' ')[0] === 'Bearer'\n  ) {\n    return req.headers.authorization.split(' ')[1]\n  }\n}\n\nexport function getTokenFromCookies(req, res) {\n  var cookies = new Cookies(req, res, {\n    secure: config.cookie.secure\n  })\n  return cookies.get('x-access-token')\n}\n\n// the last test !/^\\/abe\\//.test(currentRoute + '/') has a \"+ '/'\" to take /abe route into account\nexport function isAbeRestrictedUrl(currentRoute) {\n  if (\n    currentRoute.indexOf('/abe/users/forgot') > -1 ||\n    currentRoute.indexOf('/abe/users/login') > -1 ||\n    currentRoute.indexOf('/abe/users/reset') > -1 ||\n    currentRoute.indexOf('/abe/rest/') > -1 ||\n    !/^\\/abe\\//.test(currentRoute + '/')\n  ) {\n    return false\n  }\n\n  return true\n}\n\nexport function isUserAllowedOnRoute(workflow, currentRoute) {\n  var isAllowed = false\n\n  if (config.users.enable) {\n    if (\n      currentRoute.indexOf('/abe/users/forgot') > -1 ||\n      currentRoute.indexOf('/abe/users/login') > -1 ||\n      !/^\\/abe/.test(currentRoute)\n    ) {\n      return true\n    }\n\n    if (currentRoute.indexOf('/abe') === -1) {\n      isAllowed = true\n    }\n\n    if (workflow != null) {\n      var routes = config.users.routes\n      if (\n        typeof routes[workflow] !== 'undefined' &&\n        routes[workflow] !== null\n      ) {\n        Array.prototype.forEach.call(routes[workflow], route => {\n          var reg = new RegExp(route)\n          if (reg.test(currentRoute)) {\n            isAllowed = true\n          }\n        })\n      }\n    }\n  } else {\n    isAllowed = true\n  }\n\n  return isAllowed\n}\n\nexport function getAll() {\n  return User.manager.instance.get()\n}\n\nexport function getUserWorkflow(status) {\n  var flows = []\n\n  function addFlow(flow, type, action) {\n    type = type != null ? type : flow\n    return {\n      status: flow,\n      url: `/abe/operations/${action}/${type}`\n    }\n  }\n\n  if (config.users.enable) {\n    var found = null\n    Array.prototype.forEach.call(config.users.workflow, flow => {\n      if (found != null) {\n        flows.push(addFlow(flow, flow, 'submit'))\n        found = null\n      }\n\n      if (status == flow) {\n        found = flow\n        if (flow != 'draft' && flow != 'publish') {\n          flows.push(addFlow('reject', flow, 'reject'))\n        }\n        if (flow == 'publish') {\n          flows.push(addFlow('edit', 'draft', 'edit'))\n        } else {\n          flows.push(addFlow('save', flow, 'edit'))\n        }\n      }\n    })\n    if (found != null) {\n      flows.push(addFlow('save', 'publish', 'submit'))\n    }\n  } else {\n    flows = [\n      addFlow('draft', 'draft', 'submit'),\n      addFlow('publish', 'publish', 'submit')\n    ]\n  }\n  return flows\n}\n\nexport function loginLimitTry(username) {\n  var p = new Promise(resolve => {\n    var isNexted = false\n    try {\n      var limiterConfig = config.users.limiter\n\n      var client = redis.createClient()\n      client.on('error', function() {\n        if (!isNexted) {\n          isNexted = true\n          resolve()\n        }\n      })\n\n      var limit = new Limiter({\n        id: username,\n        db: client,\n        duration: limiterConfig.duration,\n        max: limiterConfig.max\n      })\n\n      limit.get(function(err, limit) {\n        if (err) {\n          resolve()\n        } else {\n          resolve(limit)\n        }\n      })\n    } catch (e) {\n      resolve()\n    }\n  })\n\n  return p\n}\n\n/**\n * getGravatarImage(\"bessong@gmail.com\", \".jpg?s=200\")\n * @param  {[type]} email [description]\n * @param  {[type]} args  [description]\n * @return {[type]}       [description]\n */\nexport function getGravatarImage(email, args) {\n  args = args || ''\n  var BASE_URL = '//www.gravatar.com/avatar/'\n  return (BASE_URL + coreUtils.text.md5(email) + args).trim()\n}\n\n/**\n * getActivity()\n * @param  {[type]} email [description]\n * @param  {[type]} args  [description]\n * @return {[type]}       [description]\n */\nexport function getActivity() {\n  const pathToActivity = path.join(config.root, config.users.activity.path)\n\n  if (config.users.enable && config.users.activity.active) {\n    if (fse.existsSync(path.join(pathToActivity, 'activity.json'))) {\n      const acArray= coreUtils.file.getJson(path.join(pathToActivity, 'activity.json'))\n      return acArray\n    }\n  }\n\n  return []\n}\n\nexport function addActivity(activity) {\n  const pathToActivity = path.join(config.root, config.users.activity.path)\n  const pathToActivityFile = path.join(pathToActivity, 'activity.json')\n  const acArray = getActivity()\n\n  if (acArray.length >= config.users/activity.history) acArray.shift()\n  acArray.push(activity)\n\n  if (config.users.enable && config.users.activity.active) {\n    fse.exists(pathToActivityFile, function(exists) {\n      if (!exists) {\n        fse.mkdir(path.join(pathToActivity), function() {\n          fse.writeJson(\n            pathToActivityFile,\n            acArray,\n            function(err) {\n              if (err) console.log('save activity error: ', err)\n            }\n          )\n        })\n      } else {\n        fse.writeJson(\n          pathToActivityFile,\n          acArray,\n          function(err) {\n            if (err) console.log('save activity error: ', err)\n          }\n        )\n      }\n    })\n  }\n\n  return acArray\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"529dd8691b037995c19c587472e0e4e65f33ed12","contentHash":"2e6b655e292a2f24330b01ae0b7ec93360dfe9d323a5cf24254127b73eba599b"},"/Users/grg/programmation/git/abe/abe-v5/src/server/helpers/abe-locale.js":{"path":"/Users/grg/programmation/git/abe/abe-v5/src/server/helpers/abe-locale.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":58}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":55}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":51}},"6":{"start":{"line":16,"column":11},"end":{"line":16,"column":31}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":15}},"8":{"start":{"line":20,"column":19},"end":{"line":20,"column":115}},"9":{"start":{"line":22,"column":12},"end":{"line":22,"column":57}},"10":{"start":{"line":24,"column":0},"end":{"line":28,"column":3}},"11":{"start":{"line":25,"column":13},"end":{"line":25,"column":72}},"12":{"start":{"line":27,"column":2},"end":{"line":27,"column":55}},"13":{"start":{"line":30,"column":0},"end":{"line":40,"column":1}},"14":{"start":{"line":31,"column":25},"end":{"line":31,"column":124}},"15":{"start":{"line":33,"column":14},"end":{"line":33,"column":63}},"16":{"start":{"line":35,"column":2},"end":{"line":39,"column":5}},"17":{"start":{"line":36,"column":15},"end":{"line":36,"column":78}},"18":{"start":{"line":38,"column":4},"end":{"line":38,"column":57}},"19":{"start":{"line":42,"column":15},"end":{"line":42,"column":21}},"20":{"start":{"line":43,"column":0},"end":{"line":43,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":24,"column":36},"end":{"line":24,"column":37}},"loc":{"start":{"line":24,"column":52},"end":{"line":28,"column":1}},"line":24},"1":{"name":"(anonymous_1)","decl":{"start":{"line":35,"column":38},"end":{"line":35,"column":39}},"loc":{"start":{"line":35,"column":54},"end":{"line":39,"column":3}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":0},"end":{"line":40,"column":1}},"type":"if","locations":[{"start":{"line":30,"column":0},"end":{"line":40,"column":1}},{"start":{"line":30,"column":0},"end":{"line":40,"column":1}}],"line":30}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1},"f":{"0":2,"1":1},"b":{"0":[1,0]},"inputSourceMap":{"version":3,"sources":["abe-locale.js"],"names":["result","pathToLocale","path","join","__dirname","config","localeFolder","intlData","locales","files","fse","readdirSync","Array","prototype","forEach","call","file","json","readJsonSync","siteLocaleFolder","pathToSiteLocale","root"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AAEA,IAAIA,MAAM,GAAG,EAAb;;AAEA,IAAIC,YAAY,GAAGC,iBAAKC,IAAL,CACjBC,SADiB,EAEjB,QAAQC,YAAOC,YAFE,EAGjBD,YAAOE,QAAP,CAAgBC,OAHC,CAAnB;;AAKA,IAAIC,KAAK,GAAGC,oBAAIC,WAAJ,CAAgBV,YAAhB,CAAZ;;AAEAW,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BN,KAA7B,EAAoC,UAAAO,IAAI,EAAI;AAC1C,MAAIC,IAAI,GAAGP,oBAAIQ,YAAJ,CAAiBjB,YAAY,GAAG,GAAf,GAAqBe,IAAtC,CAAX;;AACAhB,EAAAA,MAAM,GAAG,wBAAO,IAAP,EAAaA,MAAb,EAAqBiB,IAArB,CAAT;AACD,CAHD;;AAKA,IAAIZ,YAAOc,gBAAP,IAA2B,IAA/B,EAAqC;AACnC,MAAIC,gBAAgB,GAAGlB,iBAAKC,IAAL,CACrBE,YAAOgB,IADc,EAErBhB,YAAOc,gBAFc,EAGrBd,YAAOE,QAAP,CAAgBC,OAHK,CAAvB;;AAKA,MAAIC,KAAK,GAAGC,oBAAIC,WAAJ,CAAgBS,gBAAhB,CAAZ;;AACAR,EAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6BN,KAA7B,EAAoC,UAAAO,IAAI,EAAI;AAC1C,QAAIC,IAAI,GAAGP,oBAAIQ,YAAJ,CAAiBE,gBAAgB,GAAG,GAAnB,GAAyBJ,IAA1C,CAAX;;AACAhB,IAAAA,MAAM,GAAG,wBAAO,IAAP,EAAaA,MAAb,EAAqBiB,IAArB,CAAT;AACD,GAHD;AAID;;eAEcjB,M","sourceRoot":"/Users/grg/programmation/git/abe/abe-v5/src/server/helpers/","sourcesContent":["import fse from 'fs-extra'\nimport extend from 'extend'\nimport path from 'path'\n\nimport {config} from '../../cli'\n\nvar result = {}\n\nvar pathToLocale = path.join(\n  __dirname,\n  '../' + config.localeFolder,\n  config.intlData.locales\n)\nvar files = fse.readdirSync(pathToLocale)\n\nArray.prototype.forEach.call(files, file => {\n  var json = fse.readJsonSync(pathToLocale + '/' + file)\n  result = extend(true, result, json)\n})\n\nif (config.siteLocaleFolder != null) {\n  var pathToSiteLocale = path.join(\n    config.root,\n    config.siteLocaleFolder,\n    config.intlData.locales\n  )\n  var files = fse.readdirSync(pathToSiteLocale)\n  Array.prototype.forEach.call(files, file => {\n    var json = fse.readJsonSync(pathToSiteLocale + '/' + file)\n    result = extend(true, result, json)\n  })\n}\n\nexport default result\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e5baeecc4653f0fdc8399e2027001920785d1656","contentHash":"4881c88e484292e835d8a3f88ae8abb009aa50436b71a850a9cd08fb1fea2e89"}}